!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.cyberplayer=b():a.cyberplayer=b()}(this,function(){return function(a){function b(c){if(d[c])return d[c].exports;var e=d[c]={exports:{},id:c,loaded:!1};return a[c].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c=window.webpackJsonpcyberplayer;window.webpackJsonpcyberplayer=function(d,f){for(var g,h,i=0,j=[];i<d.length;i++)h=d[i],e[h]&&j.push.apply(j,e[h]),e[h]=0;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&(a[g]=f[g]);for(c&&c(d,f);j.length;)j.shift().call(null,b)};var d={},e={0:0};return b.e=function(a,c){if(0===e[a])return c.call(null,b);if(void 0!==e[a])e[a].push(c);else{e[a]=[c];var d=document.getElementsByTagName("head")[0],f=document.createElement("script");f.type="text/javascript",f.charset="utf-8",f.async=!0,f.src=b.p+""+({1:"flv"}[a]||a)+".js",d.appendChild(f)}},b.m=a,b.c=d,b.p="",b(0)}([function(a,b,c){c(39),c(38),c(40),a.exports=c(114)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){var a={},b=Array.prototype,c=Object.prototype,d=Function.prototype,e=b.slice,f=b.concat,g=c.toString,h=c.hasOwnProperty,i=b.map,j=b.reduce,k=b.forEach,l=b.filter,m=b.every,n=b.some,o=b.indexOf,p=Array.isArray,q=Object.keys,r=d.bind,s=function z(a){return a instanceof z?a:this instanceof z?void 0:new z(a)},t=s.each=s.forEach=function(b,c,d){if(null==b)return b;if(k&&b.forEach===k)b.forEach(c,d);else if(b.length===+b.length){for(var e=0,f=b.length;e<f;e++)if(c.call(d,b[e],e,b)===a)return}else for(var g=s.keys(b),e=0,f=g.length;e<f;e++)if(c.call(d,b[g[e]],g[e],b)===a)return;return b};s.map=s.collect=function(a,b,c){var d=[];return null==a?d:i&&a.map===i?a.map(b,c):(t(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};s.reduce=s.foldl=s.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),j&&a.reduce===j)return d&&(b=s.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(t(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError("Reduce of empty array with no initial value");return c},s.find=s.detect=function(a,b,c){var d;return u(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},s.filter=s.select=function(a,b,c){var d=[];return null==a?d:l&&a.filter===l?a.filter(b,c):(t(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},s.reject=function(a,b,c){return s.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},s.compact=function(a){return s.filter(a,s.identity)},s.every=s.all=function(b,c,d){c||(c=s.identity);var e=!0;return null==b?e:m&&b.every===m?b.every(c,d):(t(b,function(b,f,g){if(!(e=e&&c.call(d,b,f,g)))return a}),!!e)};var u=s.some=s.any=function(b,c,d){c||(c=s.identity);var e=!1;return null==b?e:n&&b.some===n?b.some(c,d):(t(b,function(b,f,g){if(e||(e=c.call(d,b,f,g)))return a}),!!e)};s.size=function(a){return null==a?0:a.length===+a.length?a.length:s.keys(a).length},s.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:e.call(a,Math.max(a.length-b,0))},s.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=null),c}};var v=function(a){return null==a?s.identity:s.isFunction(a)?a:s.property(a)},w=function(a){return function(b,c,d){var e={};return c=v(c),t(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};s.groupBy=w(function(a,b,c){s.has(a,b)?a[b].push(c):a[b]=[c]}),s.indexBy=w(function(a,b,c){a[b]=c}),s.sortedIndex=function(a,b,c,d){c=v(c);for(var e=c.call(d,b),f=0,g=a.length;f<g;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f};var u=s.some=s.any=function(b,c,d){c||(c=s.identity);var e=!1;return null==b?e:n&&b.some===n?b.some(c,d):(t(b,function(b,f,g){if(e||(e=c.call(d,b,f,g)))return a}),!!e)};s.contains=s.include=function(a,b){return null!=a&&(a.length!==+a.length&&(a=s.values(a)),s.indexOf(a,b)>=0)},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matches(b))},s.findWhere=function(a,b){return s.find(a,s.matches(b))},s.max=function(a,b,c){if(!b&&s.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-1/0,e=-1/0;return t(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},s.difference=function(a){var c=f.apply(b,e.call(arguments,1));return s.filter(a,function(a){return!s.contains(c,a)})},s.without=function(a){return s.difference(a,e.call(arguments,1))},s.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=s.sortedIndex(a,b),a[d]===b?d:-1;d=c<0?Math.max(0,e+c):c}if(o&&a.indexOf===o)return a.indexOf(b,c);for(;d<e;d++)if(a[d]===b)return d;return-1};var x=function(){};s.bind=function(a,b){var c,d;if(r&&a.bind===r)return r.apply(a,e.call(arguments,1));if(!s.isFunction(a))throw new TypeError;return c=e.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(e.call(arguments)));x.prototype=a.prototype;var f=new x;x.prototype=null;var g=a.apply(f,c.concat(e.call(arguments)));return Object(g)===g?g:f}},s.partial=function(a){var b=e.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;e<f;e++)d[e]===s&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},s.once=s.partial(s.before,2),s.memoize=function(a,b){var c={};return b||(b=s.identity),function(){var d=b.apply(this,arguments);return s.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},s.delay=function(a,b){var c=e.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=function(a){return s.delay.apply(s,[a,1].concat(e.call(arguments,1)))},s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=!1===c.leading?0:s.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=s.now();h||!1!==c.leading||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||!1===c.trailing||(g=setTimeout(i,k)),f}},s.keys=function(a){if(!s.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return b},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},s.defaults=function(a){return t(e.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},s.extend=function(a){return t(e.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},s.pick=function(a){var c={},d=f.apply(b,e.call(arguments,1));return t(d,function(b){b in a&&(c[b]=a[b])}),c},s.omit=function(a){var c={},d=f.apply(b,e.call(arguments,1));for(var g in a)s.contains(d,g)||(c[g]=a[g]);return c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.isArray=p||function(a){return"[object Array]"==g.call(a)},s.isObject=function(a){return a===Object(a)},t(["Arguments","Function","String","Number","Date","RegExp"],function(a){s["is"+a]=function(b){return g.call(b)=="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return!(!a||!s.has(a,"callee"))}),s.isFunction=function(a){return"function"==typeof a},s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!=+a},s.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==g.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return h.call(a,b)},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.property=function(a){return function(b){return b[a]}},s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},s.now=Date.now||function(){return(new Date).getTime()},s.result=function(a,b){if(null!=a){var c=a[b];return s.isFunction(c)?c.call(a):c}};var y=0;return s.uniqueId=function(a){var b=++y+"";return a?a+b:b},s}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=[c(8),c(1),c(63),c(24),c(14),c(44),c(65),c(62),c(25),c(130),c(133),c(131)],void 0!==(e=function(a,b,c,d,e,g,h,i,j,k,l,m){var n={};return n.log=function(){window.console&&("object"===f(console.log)?console.log(Array.prototype.slice.call(arguments,0)):console.log.apply(console,arguments))},n.between=function(a,b,c){return Math.max(Math.min(a,c),b)},n.foreach=function(a,b){var c,d;for(c in a)"function"===n.typeOf(a.hasOwnProperty)?a.hasOwnProperty(c)&&(d=a[c],b(c,d)):(d=a[c],b(c,d))},n.indexOf=b.indexOf,n.noop=function(){},n.seconds=a.seconds,n.prefix=a.prefix,n.suffix=a.suffix,b.extend(n,g,h,j,c,i,d,e,k,l,m),n}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=[c(1)],void 0!==(e=function(a){var b=[],c=b.slice,d={on:function(a,b,c){return g(this,"on",a,[b,c])&&b?(this._events||(this._events={}),(this._events[a]||(this._events[a]=[])).push({callback:b,context:c}),this):this},once:function(b,c,d){if(!g(this,"once",b,[c,d])||!c)return this;var e=this,f=a.once(function(){e.off(b,f),c.apply(this,arguments)});return f._callback=c,this.on(b,f,d)},off:function(b,c,d){var e,f,h,i,j,k,l,m;if(!this._events||!g(this,"off",b,[c,d]))return this;if(!b&&!c&&!d)return this._events=void 0,this;for(i=b?[b]:a.keys(this._events),j=0,k=i.length;j<k;j++)if(b=i[j],h=this._events[b]){if(this._events[b]=e=[],c||d)for(l=0,m=h.length;l<m;l++)f=h[l],(c&&c!==f.callback&&c!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[b]}return this},trigger:function(a){if(!this._events)return this;var b=c.call(arguments,1);if(!g(this,"trigger",a,b))return this;var d=this._events[a],e=this._events.all;return d&&h(d,b,this),e&&h(e,arguments,this),this},triggerSafe:function(a){if(!this._events)return this;var b=c.call(arguments,1);if(!g(this,"trigger",a,b))return this;var d=this._events[a],e=this._events.all;return d&&i(d,b,this),e&&i(e,arguments,this),this}},e=/\s+/,g=function(a,b,c,d){if(!c)return!0;if("object"===(void 0===c?"undefined":f(c))){for(var g in c)a[b].apply(a,[g,c[g]].concat(d));return!1}if(e.test(c)){for(var h=c.split(e),i=0,j=h.length;i<j;i++)a[b].apply(a,[h[i]].concat(d));return!1}return!0},h=function(a,b,c){var d,e=-1,f=a.length,g=b[0],h=b[1],i=b[2];switch(b.length){case 0:for(;++e<f;)(d=a[e]).callback.call(d.context||c);return;case 1:for(;++e<f;)(d=a[e]).callback.call(d.context||c,g);return;case 2:for(;++e<f;)(d=a[e]).callback.call(d.context||c,g,h);return;case 3:for(;++e<f;)(d=a[e]).callback.call(d.context||c,g,h,i);return;default:for(;++e<f;)(d=a[e]).callback.apply(d.context||c,b);return}},i=function(a,b,c){for(var d,e=-1,f=a.length;++e<f;)try{(d=a[e]).callback.apply(d.context||c,b)}catch(a){}};return d}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){var a={DRAG:"drag",DRAG_START:"dragStart",DRAG_END:"dragEnd",CLICK:"click",DOUBLE_CLICK:"doubleClick",TAP:"tap",DOUBLE_TAP:"doubleTap",OVER:"over",MOVE:"move",OUT:"out"},b={COMPLETE:"complete",ERROR:"error",JWPLAYER_AD_CLICK:"adClick",JWPLAYER_AD_COMPANIONS:"adCompanions",JWPLAYER_AD_COMPLETE:"adComplete",JWPLAYER_AD_ERROR:"adError",JWPLAYER_AD_IMPRESSION:"adImpression",JWPLAYER_AD_META:"adMeta",JWPLAYER_AD_PAUSE:"adPause",JWPLAYER_AD_PLAY:"adPlay",JWPLAYER_AD_SKIPPED:"adSkipped",JWPLAYER_AD_TIME:"adTime",JWPLAYER_CAST_AD_CHANGED:"castAdChanged",JWPLAYER_MEDIA_COMPLETE:"complete",JWPLAYER_READY:"ready",JWPLAYER_H265WEB_COVERLOADED:"coverImageLoaded",JWPLAYER_MEDIA_SEEK:"seek",JWPLAYER_MEDIA_BEFOREPLAY:"beforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"beforeComplete",JWPLAYER_MEDIA_BUFFER_FULL:"bufferFull",JWPLAYER_DISPLAY_CLICK:"displayClick",JWPLAYER_PLAYLIST_COMPLETE:"playlistComplete",JWPLAYER_CAST_SESSION:"cast",JWPLAYER_MEDIA_ERROR:"mediaError",JWPLAYER_MEDIA_FIRST_FRAME:"firstFrame",JWPLAYER_MEDIA_PLAY_ATTEMPT:"playAttempt",JWPLAYER_MEDIA_LOADED:"loaded",JWPLAYER_MEDIA_SEEKED:"seeked",JWPLAYER_SETUP_ERROR:"setupError",JWPLAYER_ERROR:"error",JWPLAYER_PLAYER_STATE:"state",JWPLAYER_CAST_AVAILABLE:"castAvailable",JWPLAYER_MEDIA_BUFFER:"bufferChange",JWPLAYER_MEDIA_TIME:"time",JWPLAYER_MEDIA_TYPE:"mediaType",JWPLAYER_MEDIA_VOLUME:"volume",JWPLAYER_MEDIA_MUTE:"mute",JWPLAYER_MEDIA_META:"meta",JWPLAYER_MEDIA_LEVELS:"levels",JWPLAYER_MEDIA_LEVEL_CHANGED:"levelsChanged",JWPLAYER_CONTROLS:"controls",JWPLAYER_FULLSCREEN:"fullscreen",JWPLAYER_RESIZE:"resize",JWPLAYER_PLAYLIST_ITEM:"playlistItem",JWPLAYER_PLAYLIST_LOADED:"playlist",JWPLAYER_AUDIO_TRACKS:"audioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"audioTrackChanged",JWPLAYER_CONNECTING:"connecting",JWPLAYER_CONNECT_FAILD:"connectFaild",JWPLAYER_NO_LIVE_STREAM:"noLiveStream",JWPLAYER_ALIVE:"alive",JWPLAYER_LIVE_STOP:"liveStop",JWPLAYER_PLAYBACKRATE:"playbackRate",JWPLAYER_LOGO_CLICK:"logoClick",JWPLAYER_CAPTIONS_LIST:"captionsList",JWPLAYER_CAPTIONS_CHANGED:"captionsChanged",JWPLAYER_PROVIDER_CHANGED:"providerChanged",JWPLAYER_PROVIDER_FIRST_FRAME:"providerFirstFrame",JWPLAYER_USER_ACTION:"userAction",JWPLAYER_PROVIDER_CLICK:"providerClick",JWPLAYER_VIEW_TAB_FOCUS:"tabFocus",JWPLAYER_CONTROLBAR_DRAGGING:"scrubbing",JWPLAYER_INSTREAM_CLICK:"instreamClick",JWPLAYER_CUEPOINT:"cuepoint",JWPLAYER_SEEK_FORWARD_FORBIDDEN:"seekForwardForbidden"};return b.touchEvents=a,b}.apply(b,d))&&(a.exports=e)},function(a,b){"use strict";function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=b.RuntimeException=function(){function a(b){e(this,a),this._message=b}return a.prototype.toString=function(){return this.name+": "+this.message},f(a,[{key:"name",get:function(){return"RuntimeException"}},{key:"message",get:function(){return this._message}}]),a}();b.IllegalStateException=function(a){function b(d){return e(this,b),c(this,a.call(this,d))}return d(b,a),f(b,[{key:"name",get:function(){return"IllegalStateException"}}]),b}(g),b.InvalidArgumentException=function(a){function b(d){return e(this,b),c(this,a.call(this,d))}return d(b,a),f(b,[{key:"name",get:function(){return"InvalidArgumentException"}}]),b}(g),b.NotImplementedException=function(a){function b(d){return e(this,b),c(this,a.call(this,d))}return d(b,a),f(b,[{key:"name",get:function(){return"NotImplementedException"}}]),b}(g)},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var e=c(16),f=function(a){return a&&a.__esModule?a:{"default":a}}(e),g=function(){function a(){d(this,a)}return a.e=function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","error",d),a.ENABLE_ERROR&&(console.error?console.error(d):console.warn?console.warn(d):console.log(d))},a.i=function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","info",d),a.ENABLE_INFO&&(console.info?console.info(d):console.log(d))},a.w=function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","warn",d),a.ENABLE_WARN&&(console.warn?console.warn(d):console.log(d))},a.d=function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","debug",d),a.ENABLE_DEBUG&&(console.debug?console.debug(d):console.log(d))},a.v=function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","verbose",d),a.ENABLE_VERBOSE&&console.log(d)},a}();g.GLOBAL_TAG="flv.js",g.FORCE_GLOBAL_TAG=!1,g.ENABLE_ERROR=!0,g.ENABLE_INFO=!0,g.ENABLE_WARN=!0,g.ENABLE_DEBUG=!0,g.ENABLE_VERBOSE=!0,g.ENABLE_CALLBACK=!1,g.emitter=new f["default"],b["default"]=g,a.exports=b["default"]},function(a,b,c){var d,e;d=[],void 0!==(e=function(){return{BUFFERING:"buffering",IDLE:"idle",COMPLETE:"complete",PAUSED:"paused",PLAYING:"playing",ERROR:"error",LOADING:"loading",STALLED:"stalled"}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1)],void 0!==(e=function(a){function b(a){return!!/[\(,]format=m3u8-/i.test(a)&&"m3u8"}var c=function(a){return a.replace(/^\s+|\s+$/g,"")},d=function(a,b,c){for(a=""+a,c=c||"0";a.length<b;)a=c+a;return a},e=function(a,b){for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name&&a.attributes[c].name.toLowerCase()===b.toLowerCase())return a.attributes[c].value.toString();return""},f=function(a){if(!a||"rtmp"===a.substr(0,4))return"";var c=b(a);return c||(a=a.split("?")[0].split("#")[0],a.lastIndexOf(".")>-1?a.substr(a.lastIndexOf(".")+1,a.length).toLowerCase():void 0)},g=function(a){var b=parseInt(a/3600),c=parseInt(a/60)%60,e=a%60;return d(b,2)+":"+d(c,2)+":"+d(e.toFixed(3),6)},h=function(b){if(a.isNumber(b))return b;b=b.replace(",",".");var c=b.split(":"),d=0;return"s"===b.slice(-1)?d=parseFloat(b):"m"===b.slice(-1)?d=60*parseFloat(b):"h"===b.slice(-1)?d=3600*parseFloat(b):c.length>1?(d=parseFloat(c[c.length-1]),d+=60*parseFloat(c[c.length-2]),3===c.length&&(d+=3600*parseFloat(c[c.length-3]))):d=parseFloat(b),d},i=function(b,c){return a.map(b,function(a){return c+a})};return{trim:c,pad:d,xmlAttribute:e,extension:f,hms:g,seconds:h,suffix:function(b,c){return a.map(b,function(a){return a+c})},prefix:i}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(3),c(4),c(1),c(2)],void 0!==(e=function(a,b,c,d){function e(a,b){return/touch/.test(a.type)?(a.originalEvent||a).changedTouches[0]["page"+b]:a["page"+b]}function f(a){var b=a||window.event;return!!(d.isPoorIE()||a instanceof MouseEvent)&&("which"in b?3===b.which:"button"in b&&2===b.button)}function g(a,b,c){var e;e=!d.isPoorIE()&&b instanceof MouseEvent||!b.touches&&!b.changedTouches?b:b.touches&&b.touches.length?b.touches[0]:b.changedTouches[0];var f=document.documentElement.scrollLeft||document.body.scrollLeft,g=document.documentElement.scrollTop||document.body.scrollTop;return{type:a,target:b.target||b.srcElement,currentTarget:c,pageX:e.pageX||e.clientX+f,pageY:e.pageY||e.clientY+g}}function h(a){(d.isPoorIE()||a instanceof MouseEvent||a instanceof window.TouchEvent)&&(a.preventManipulation&&a.preventManipulation(),a.cancelable&&a.preventDefault&&a.preventDefault())}var i=!c.isUndefined(window.PointerEvent),j=!i&&d.isMobile(),k=!i&&!j,l=d.isFF()&&d.isOSX(),m=function(a,j){function m(a){(k||i&&"touch"!==a.pointerType)&&s(b.touchEvents.OVER,a)}function n(a){(k||i&&"touch"!==a.pointerType)&&s(b.touchEvents.MOVE,a)}function o(c){(k||i&&"touch"!==c.pointerType&&!a.contains(document.elementFromPoint(c.x,c.y)))&&s(b.touchEvents.OUT,c)}function p(b){t=b.target,x=e(b,"X"),y=e(b,"Y"),f(b)||(i?b.isPrimary&&(j.preventScrolling&&(u=b.pointerId,a.setPointerCapture(u)),d.addEventListener(a,"pointermove",q),d.addEventListener(a,"pointercancel",r),d.addEventListener(a,"pointerup",r)):k&&(d.addEventListener(document,"mousemove",q),l&&"object"===b.target.nodeName.toLowerCase()?d.addEventListener(a,"click",r):d.addEventListener(document,"mouseup",r)),t&&(d.addEventListener(t,"touchmove",q),d.addEventListener(t,"touchcancel",r),d.addEventListener(t,"touchend",r)))}function q(a){var c=b.touchEvents;if(w)s(c.DRAG,a);else{var d=e(a,"X"),f=e(a,"Y"),g=d-x,i=f-y;g*g+i*i>36&&(s(c.DRAG_START,a),w=!0,s(c.DRAG,a))}j.preventScrolling&&h(a)}function r(c){var e=b.touchEvents;i?(j.preventScrolling&&a.releasePointerCapture(u),d.removeEventListener(a,"pointermove",q),d.removeEventListener(a,"pointercancel",r),d.removeEventListener(a,"pointerup",r)):k&&(d.removeEventListener(document,"mousemove",q),d.removeEventListener(document,"mouseup",r)),t&&(d.removeEventListener(t,"touchmove",q),d.removeEventListener(t,"touchcancel",r),d.removeEventListener(t,"touchend",r)),w?s(e.DRAG_END,c):j.directSelect&&c.target!==a||-1!==c.type.indexOf("cancel")||(i&&c instanceof window.PointerEvent?"touch"===c.pointerType?s(e.TAP,c):s(e.CLICK,c):k?s(e.CLICK,c):(s(e.TAP,c),h(c))),t=null,w=!1}function s(a,d){var e;if(j.enableDoubleTap&&(a===b.touchEvents.CLICK||a===b.touchEvents.TAP))if(c.now()-z<A){var f=a===b.touchEvents.CLICK?b.touchEvents.DOUBLE_CLICK:b.touchEvents.DOUBLE_TAP;e=g(f,d,v),B.trigger(f,e),z=0}else z=c.now();e=g(a,d,v),B.trigger(a,e)}var t,u,v=a,w=!1,x=0,y=0,z=0,A=300;j=j||{},i?(d.addEventListener(a,"pointerdown",p),j.useHover&&(d.addEventListener(a,"pointerover",m),d.addEventListener(a,"pointerout",o)),j.useMove&&d.addEventListener(a,"pointermove",n)):k&&(d.addEventListener(a,"mousedown",p),j.useHover&&(d.addEventListener(a,"mouseover",m),d.addEventListener(a,"mouseout",o)),j.useMove&&d.addEventListener(a,"mousemove",n)),d.addEventListener(a,"touchstart",p);var B=this;return this.triggerEvent=s,this.destroy=function(){d.removeEventListener(a,"touchstart",p),d.removeEventListener(a,"mousedown",p),t&&(d.removeEventListener(t,"touchmove",q),d.removeEventListener(t,"touchcancel",r),d.removeEventListener(t,"touchend",r)),i&&(j.preventScrolling&&a.releasePointerCapture(u),d.removeEventListener(a,"pointerover",m),d.removeEventListener(a,"pointerdown",p),d.removeEventListener(a,"pointermove",q),d.removeEventListener(a,"pointermove",n),d.removeEventListener(a,"pointercancel",r),d.removeEventListener(a,"pointerout",o),d.removeEventListener(a,"pointerup",r)),d.removeEventListener(a,"click",r),d.removeEventListener(a,"mouseover",m),d.removeEventListener(a,"mousemove",n),d.removeEventListener(a,"mouseout",o),d.removeEventListener(document,"mousemove",q),d.removeEventListener(document,"mouseup",r)},this};return c.extend(m.prototype,a),m}.apply(b,d))&&(a.exports=e)},function(a,b,c){a.exports=c(157)["default"]},,function(a,b){"use strict";function c(a){return k[a]}function d(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function e(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function f(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return m.test(a)?a.replace(l,c):a}function g(a){return!a&&0!==a||!(!p(a)||0!==a.length)}function h(a){var b=d({},a);return b._parent=a,b}function i(a,b){return a.path=b,a}function j(a,b){return(a?a+".":"")+b}b.__esModule=!0,b.extend=d,b.indexOf=e,b.escapeExpression=f,b.isEmpty=g,b.createFrame=h,b.blockParams=i,b.appendContextPath=j;var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},l=/[&<>"'`=]/g,m=/[&<>"'`=]/,n=Object.prototype.toString;b.toString=n;var o=function(a){return"function"==typeof a};o(/x/)&&(b.isFunction=o=function(a){return"function"==typeof a&&"[object Function]"===n.call(a)}),b.isFunction=o;var p=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===n.call(a)};b.isArray=p},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0,b.BaseLoader=b.LoaderErrors=b.LoaderStatus=void 0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(5),g=b.LoaderStatus={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4};b.LoaderErrors={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},b.BaseLoader=function(){function a(b){d(this,a),this._type=b||"undefined",this._status=g.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return a.prototype.destroy=function(){this._status=g.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},a.prototype.isWorking=function(){return this._status===g.kConnecting||this._status===g.kBuffering},a.prototype.open=function(a,b){throw new f.NotImplementedException("Unimplemented abstract function!")},a.prototype.abort=function(){throw new f.NotImplementedException("Unimplemented abstract function!")},e(a,[{key:"type",get:function(){return this._type}},{key:"status",get:function(){return this._status}},{key:"needStashBuffer",get:function(){return this._needStash}},{key:"onContentLengthKnown",get:function(){return this._onContentLengthKnown},set:function(a){this._onContentLengthKnown=a}},{key:"onURLRedirect",get:function(){return this._onURLRedirect},set:function(a){this._onURLRedirect=a}},{key:"onDataArrival",get:function(){return this._onDataArrival},set:function(a){this._onDataArrival=a}},{key:"onError",get:function(){return this._onError},set:function(a){this._onError=a}},{key:"onComplete",get:function(){return this._onComplete},set:function(a){this._onComplete=a}}]),a}()},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=[c(8),c(71)],void 0!==(e=function(a,b){function c(a){a=a.split("-");for(var b=1;b<a.length;b++)a[b]=a[b].charAt(0).toUpperCase()+a[b].slice(1);return a.join("")}function d(b,c,d){if(""===c||void 0===c||null===c)return"";var e=d?" !important":"";return"string"==typeof c&&isNaN(c)?/png|gif|jpe?g/i.test(c)&&c.indexOf("url")<0?"url("+c+")":c+e:0===c||"z-index"===b||"opacity"===b?""+c+e:/color/i.test(b)?"#"+a.pad(c.toString(16).replace(/^0x/i,""),6)+e:Math.ceil(c)+"px"+e}var e=function(a,c,d){d=d||"all-players";var e="";if("object"===(void 0===c?"undefined":f(c))){var h=document.createElement("div");g(h,c),e="{"+h.style.cssText+"}"}else"string"==typeof c&&(e=c);b.style([[a,a+e]],d)},g=function(a,b){if(void 0!==a&&null!==a){void 0===a.length&&(a=[a]);var e,f={};for(e in b)f[e]=d(e,b[e]);for(var g=0;g<a.length;g++){var h,i=a[g];if(void 0!==i&&null!==i)for(e in f)h=c(e),i.style[h]!==f[e]&&(i.style[h]=f[e])}}},h=function(a,b){g(a,{transform:b,webkitTransform:b,msTransform:b,mozTransform:b,oTransform:b})},i=function(a,b){g(a,{animation:b,webkitAnimation:b,msAnimation:b,mozAnimation:b,oAnimation:b})},j=function(a,b){var c="rgb";a?(a=String(a).replace("#",""),3===a.length&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2))):a="000000";var d=[parseInt(a.substr(0,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(4,2),16)];return void 0!==b&&100!==b&&(c+="a",d.push(b/100)),c+"("+d.join(",")+")"};return{css:e,style:g,clearCss:b.clear,transform:h,animation:i,hexToRgba:j}}.apply(b,d))&&(a.exports=e)},,function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}a.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if((b=arguments[1])instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),c.apply(this,h)}else if(f(c))for(h=Array.prototype.slice.call(arguments,1),j=c.slice(),e=j.length,i=0;i<e;i++)j[i].apply(this,h);return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned&&(e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners)&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace()),this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(e<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){return this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(d(b))return 1;if(b)return b.length}return 0},c.listenerCount=function(a,b){return a.listenerCount(b)}},function(a,b){"use strict";function c(a,b){var e=b&&b.loc,f=void 0,g=void 0,h=void 0,i=void 0;e&&(f=e.start.line,g=e.end.line,h=e.start.column,i=e.end.column,a+=" - "+f+":"+h);for(var j=Error.prototype.constructor.call(this,a),k=0;k<d.length;k++)this[d[k]]=j[d[k]];Error.captureStackTrace&&Error.captureStackTrace(this,c);try{e&&(this.lineNumber=f,this.endLineNumber=g,Object.defineProperty?(Object.defineProperty(this,"column",{value:h,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:i,enumerable:!0})):(this.column=h,this.endColumn=i))}catch(a){}}b.__esModule=!0;var d=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];c.prototype=new Error,b["default"]=c,a.exports=b["default"]},function(a,b,c){var d,e;d=[],void 0!==(e=function(){return"3.5.6"}.apply(b,d))&&(a.exports=e)
},function(a,b){"use strict";b.__esModule=!0;var c={};(function(){var a=self.navigator.userAgent.toLowerCase(),b=/(edge)\/([\w.]+)/.exec(a)||/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(iemobile)[\/]([\w.]+)/.exec(a)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(a)||[],d=/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(android)/.exec(a)||/(windows)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||[],e={browser:b[5]||b[3]||b[1]||"",version:b[2]||b[4]||"0",majorVersion:b[4]||b[2]||"0",platform:d[0]||""},f={};if(e.browser){f[e.browser]=!0;var g=e.majorVersion.split(".");f.version={major:parseInt(e.majorVersion,10),string:e.version},g.length>1&&(f.version.minor=parseInt(g[1],10)),g.length>2&&(f.version.build=parseInt(g[2],10))}if(e.platform&&(f[e.platform]=!0),(f.chrome||f.opr||f.safari)&&(f.webkit=!0),f.rv||f.iemobile){f.rv&&delete f.rv;var h="msie";e.browser=h,f[h]=!0}if(f.edge){delete f.edge;var i="msedge";e.browser=i,f[i]=!0}if(f.opr){var j="opera";e.browser=j,f[j]=!0}if(f.safari&&f.android){var k="android";e.browser=k,f[k]=!0}f.name=e.browser,f.platform=e.platform;for(var l in c)c.hasOwnProperty(l)&&delete c[l];Object.assign(c,f)})(),b["default"]=c,a.exports=b["default"]},function(a,b,c){var d,e;d=[c(8)],void 0!==(e=function(a){return{localName:function(a){return a?a.localName?a.localName:a.baseName?a.baseName:"":""},textContent:function(b){return b?b.textContent?a.trim(b.textContent):b.text?a.trim(b.text):"":""},getChildNode:function(a,b){return a.childNodes[b]},numChildren:function(a){return a.childNodes?a.childNodes.length:0}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(4),c(7),c(1)],void 0!==(e=function(a,b,c,d){var e=a.noop,f=d.constant(!1);return{supports:f,play:e,load:e,stop:e,volume:e,mute:e,seek:e,resize:e,remove:e,destroy:e,setVisibility:e,setFullscreen:f,getFullscreen:e,getContainer:e,setContainer:f,getName:e,getQualityLevels:e,getCurrentQuality:e,setCurrentQuality:e,getAudioTracks:e,getCurrentAudioTrack:e,setCurrentAudioTrack:e,checkComplete:e,setControls:e,attachMedia:e,detachMedia:e,setState:function(a){var d=this.state||c.IDLE;this.state=a,a!==d&&this.trigger(b.JWPLAYER_PLAYER_STATE,{newstate:a})},sendMediaType:function(a){var c=a[0].type,d="oga"===c||"aac"===c||"mp3"===c||"mpeg"===c||"vorbis"===c;this.trigger(b.JWPLAYER_MEDIA_TYPE,{mediaType:d?"audio":"video"})}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(21),c(61),c(125),c(1)],void 0!==(e=function(a,b,d,e){function f(a){this.providers=b.slice(),this.config=a||{},this.reorderProviders()}return f.registerProvider=function(c){var f=c.getName().name;if(!d[f]){if(!e.find(b,e.matches({name:f}))){if(!e.isFunction(c.supports))throw{message:"Tried to register a provider with an invalid object"};b.unshift({name:f,supports:c.supports})}var g=function(){};g.prototype=a,c.prototype=new g,d[f]=c}},f.load=function(a){return Promise.all(e.map(a,function(a){return new Promise(function(b){switch(a.name){case"html5":!function(require){b(c(42))}();break;case"flash":!function(require){b(c(41))}();break;default:b()}}).then(function(a){a&&f.registerProvider(a)})}))},e.extend(f.prototype,{reorderProviders:function(){var a,b,c,d;"flash"===this.config.primary&&(a=e.indexOf(this.providers,e.findWhere(this.providers,{name:"flash"})),b=this.providers.splice(a,1)[0],c=e.indexOf(this.providers,e.findWhere(this.providers,{name:"html5"})),this.providers.splice(c,0,b)),"videojs"===this.config.primary&&(a=e.indexOf(this.providers,e.findWhere(this.providers,{name:"flash"})),b=this.providers.splice(a,1)[0],c=e.indexOf(this.providers,e.findWhere(this.providers,{name:"html5"})),d=this.providers.splice(c,1)[0],this.providers.push(d),this.providers.push(b)),"justflash"===this.config.primary&&(a=e.indexOf(this.providers,e.findWhere(this.providers,{name:"flash"})),b=this.providers.splice(a,1)[0],this.providers=[],this.providers.push(b))},providerSupports:function(a,b){return a.supports(b)},required:function(a,b){return a=a.slice(),e.compact(e.map(this.providers,function(c){for(var d=!1,e=a.length;e--;){var f=a[e],g=c.supports(f.sources[0],b);g&&a.splice(e,1),d=d||g}if(d)return c}))},choose:function(a){a=e.isObject(a)?a:{};for(var b=this.providers.length,c=0;c<b;c++){var f=this.providers[c];if(this.providerSupports(f,a)){return{priority:b-c-1,name:f.name,type:a.type,provider:d[f.name]}}}return null}}),f}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){return{repo:"https://cdn.bdstatic.com/jwplayer/",SkinsIncluded:["bce"],SkinsLoadable:["beelden","bekle","five","glow","roundster","six","seven","stormtrooper","vapor"],dvrSeekLimit:-25}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(8),c(1),c(129),c(127)],void 0!==(e=function(a,b,c,d){var e={};e.createElement=function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild},e.styleDimension=function(a){return a+(a.toString().indexOf("%")>0?"":"px")};var f=function(a){return b.isString(a.className)?a.className.split(" "):[]},g=function(b,c){c=a.trim(c),b.className!==c&&(b.className=c)};return e.classList=function(a){return a.classList?a.classList:f(a)},e.hasClass=c.hasClass,e.addClass=function(a,c){var d=f(a),e=b.isArray(c)?c:c.split(" ");b.each(e,function(a){b.contains(d,a)||d.push(a)}),g(a,d.join(" "))},e.removeClass=function(a,c){var d=f(a),e=b.isArray(c)?c:c.split(" ");g(a,b.difference(d,e).join(" "))},e.replaceClass=function(a,b,c){var d=a.className||"";b.test(d)?d=d.replace(b,c):c&&(d+=" "+c),g(a,d)},e.toggleClass=function(a,c,d){var f=e.hasClass(a,c);(d=b.isBoolean(d)?d:!f)!==f&&(d?e.addClass(a,c):e.removeClass(a,c))},e.emptyElement=function(a){if(a)for(var b=0;a.childElementCount-b>0;){if(a.children[b].hasAttribute("remove-ignore")){var c=a.children[b].getAttribute("remove-ignore");if(c===d.DOM_REMOVE_IGNORE){b++;continue}}a.removeChild(a.children[b])}},e.addStyleSheet=function(a){var b=document.createElement("link");b.rel="stylesheet",b.href=a,document.getElementsByTagName("head")[0].appendChild(b)},e.empty=function(a){if(a)for(var b=0;a.childElementCount-b>0;){if(a.children[b].hasAttribute("remove-ignore")){var c=a.children[b].getAttribute("remove-ignore");if(c===d.DOM_REMOVE_IGNORE){b++;continue}}a.removeChild(a.children[b])}},e.bounds=function(a){var b={left:0,right:0,width:0,height:0,top:0,bottom:0};if(!a||!document.body.contains(a))return b;var c=a.getBoundingClientRect(a),d=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,e=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft;return c.width||c.height||c.left||c.top?(b.left=c.left+e,b.right=c.right+e,b.top=c.top+d,b.bottom=c.bottom+d,b.width=c.right-c.left,b.height=c.bottom-c.top,b):b},e}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=[c(1),c(8)],void 0!==(e=function(a,b){var c={};return c.exists=function(a){switch(void 0===a?"undefined":f(a)){case"string":return a.length>0;case"object":return null!==a;case"undefined":return!1}return!0},c.isHTTPS=function(){return 0===window.location.href.indexOf("https")},c.isRtmp=function(a,b){return a&&(0===a.indexOf("rtmp")||"rtmp"===b)},c.isHls=function(a,c){return a&&("m3u8"===b.extension(a)||"hls"===b.extension(a)||"hls"===c)},c.isFlv=function(a,c){return a&&("flv"===b.extension(a)||"flv"===c)},c.isMp4=function(a,c){return a&&("mp4"===b.extension(a)||"mp4"===c)},c.isMpegTs=function(a,c){return a&&("ts"===b.extension(a)||"ts"===c)},c.isHtml5Flv=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c.isFlv(a,b)&&c.isFlvjsSupported()},c.isFlvjsSupported=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},c.isMutipleHls=function(b){if(a.isArray(b)&&b.length>1){var d=0;if(a.each(b,function(a){c.isHls(a.file,a.type)&&d++}),d===b.length)return!0}return!1},c.typeOf=function(b){if(null===b)return"null";var c=void 0===b?"undefined":f(b);return"object"===c&&a.isArray(b)?"array":c},c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(64),c(2)],void 0!==(e=function(a,b){return a.extend({constructor:function(a){if(this.el=document.createElement("div"),this.el.className="jw-icon jw-icon-tooltip "+a+" jw-button-color jw-reset jw-hidden",this.container=document.createElement("div"),this.container.className="jw-overlay jw-reset",this.openClass="jw-open",this.componentType="tooltip","jw-icon-hd"===a){var b=document.createElement("span");b.className="jw-hd-label",this.el.appendChild(b)}else if("jw-icon-playrate"===a){var c=document.createElement("span");c.className="jw-playrate-label",this.el.appendChild(c)}else if("jw-icon-cc"===a){var d=document.createElement("span");d.className="jw-cc-label",this.el.appendChild(d)}this.el.appendChild(this.container)},addContent:function(a){this.content&&this.removeContent(),this.content=a,this.container.appendChild(a)},removeContent:function(){this.content&&(this.container.removeChild(this.content),this.content=null)},hasContent:function(){return!!this.content},element:function(){return this.el},openTooltip:function(a){this.trigger("open-"+this.componentType,a,{isOpen:!0}),this.isOpen=!0,b.toggleClass(this.el,this.openClass,this.isOpen)},closeTooltip:function(a){this.trigger("close-"+this.componentType,a,{isOpen:!1}),this.isOpen=!1,b.toggleClass(this.el,this.openClass,this.isOpen)},toggleOpenState:function(a){this.isOpen?this.closeTooltip(a):this.openTooltip(a)}})}.apply(b,d))&&(a.exports=e)},function(a,b){"use strict";b.__esModule=!0;var c={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"};b["default"]=c,a.exports=b["default"]},function(a,b,c){var d,e;d=[c(8)],void 0!==(e=function(a){var b={},c=b.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};return b.getPluginPathType=function(b){if("string"==typeof b){b=b.split("?")[0];var d=b.indexOf("://");if(d>0)return c.ABSOLUTE;var e=b.indexOf("/"),f=a.extension(b);return!(d<0&&e<0)||f&&isNaN(f)?c.RELATIVE:c.CDN}},b.getPluginName=function(a){return a.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},b.getPluginVersion=function(a){return a.replace(/[^-]*-?([^\.]*).*$/,"$1")},b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(22),c(48),c(88),c(1),c(3),c(132),c(4),c(7),c(79)],void 0!==(e=function(a,b,c,d,e,f,g,h,i,j){var k=function(){function g(a,b){var c=e.extend({},b,{type:a});switch(a){case"flashThrottle":var d="resume"!==b.state;this.set("flashThrottle",d),this.set("flashBlocked",d);break;case"flashBlocked":return void this.set("flashBlocked",!0);case"flashUnblocked":return void this.set("flashBlocked",!1);case"volume":case"mute":return void this.set(a,b[a]);case h.JWPLAYER_MEDIA_TYPE:return void(this.mediaModel.get("mediaType")!==b.mediaType&&(this.mediaModel.set("mediaType",b.mediaType),this.mediaController.trigger(a,c)));case h.JWPLAYER_PLAYER_STATE:return void this.mediaModel.set("state",b.newstate);case h.JWPLAYER_MEDIA_BUFFER:this.set("buffer",b.bufferPercent);case h.JWPLAYER_MEDIA_META:var f=b.duration;e.isNumber(f)&&(this.mediaModel.set("duration",f),this.set("duration",f)),b.duration===1/0&&this.trigger("alive");break;case h.JWPLAYER_MEDIA_BUFFER_FULL:this.mediaModel.get("playAttempt")?this.playVideo():this.mediaModel.on("change:playAttempt",function(){this.playVideo()},this);break;case h.JWPLAYER_MEDIA_TIME:this.mediaModel.set("position",b.position),this.set("position",b.position),e.isNumber(b.duration)&&(this.mediaModel.set("duration",b.duration),this.set("duration",b.duration),b.duration>0&&this.recordMediaPosition(b.position,b.duration),b.duration===1/0&&this.trigger("alive")),this.advManage&&this.get("imageAdvs").advs&&this.advManage.refreshProcessAdv(b.position);break;case h.JWPLAYER_PROVIDER_CHANGED:this.set("provider",m.getName());break;case h.JWPLAYER_MEDIA_LEVELS:this.setQualityLevel(b.currentQuality,b.levels),this.mediaModel.set("levels",b.levels);break;case h.JWPLAYER_MEDIA_LEVEL_CHANGED:this.setQualityLevel(b.currentQuality,b.levels),this.persistQualityLevel(b.currentQuality,b.levels);break;case h.JWPLAYER_AUDIO_TRACKS:this.setCurrentAudioTrack(b.currentTrack,b.tracks),this.mediaModel.set("audioTracks",b.tracks);break;case h.JWPLAYER_AUDIO_TRACK_CHANGED:this.setCurrentAudioTrack(b.currentTrack,b.tracks);break;case h.JWPLAYER_CONNECTING:this.trigger("connecting");break;case h.JWPLAYER_CONNECT_FAILD:this.trigger("connectFaild");break;case h.JWPLAYER_ALIVE:this.trigger("alive");break;case h.JWPLAYER_NO_LIVE_STREAM:this.trigger("noLiveStream");break;case h.JWPLAYER_LIVE_STOP:this.trigger("liveStop");break;case"stop":this.set("duration",0);break;case"subtitlesTrackChanged":this.setVideoSubtitleTrack(b.currentTrack,b.tracks);break;case"visualQuality":var g=e.extend({},b);this.mediaModel.set("visualQuality",g);break;case h.JWPLAYER_PLAYBACKRATE:this.set("playbackRate",b.playbackRate),this.mediaModel.set("playbackRate",b.playbackRate)}this.mediaController.trigger(a,c)}var k,m,n,o,p=this,q=a.noop;this.mediaController=e.extend({},f),this.mediaModel=new l,this.advManage=null,d.model(this),this.set("mediaModel",this.mediaModel),this.setup=function(b){return o=new c,e.extend(this.attributes,b,{item:0,state:i.IDLE,flashBlocked:!1,fullscreen:!1,compactUI:!1,scrubbing:!1,duration:0,position:0,buffer:0}),a.isMobile()&&!b.mobileSdk&&this.set("autostart",!1),this.get("imageAdvs")&&(this.advManage=new j(this.get("imageAdvs"))),this.updateProviders(),this},this.getConfiguration=function(){return e.omit(this.clone(),["mediaModel"])},this.updateProviders=function(){k=new b(this.getConfiguration())},this.recordMediaPosition=function(a,b){var c=n&&n.sources&&n.sources[0];c&&c.file&&!isNaN(a)&&!isNaN(b)&&b>0&&!1!==isFinite(b)&&e.each(n.sources,function(c){a<b&&a>2?o.setItem("filePostion."+c.file,a):a>=b&&o.clearItem("filePostion."+c.file)})},this.getLastPosition=function(b){var c=0;return b&&"array"===a.typeOf(b.sources)&&b.sources.length>0&&o.getItem("filePostion."+b.sources[0].file)&&(c=o.getItem("filePostion."+b.sources[0].file)),c},this.setQualityLevel=function(a,b){a>-1&&b.length>1&&this.mediaModel.set("currentLevel",parseInt(a))},this.setCurrentQuality=function(a){m.setCurrentQuality(a)},this.persistQualityLevel=function(a,b){var c=b[a]||{},d=c.label;this.set("qualityLabel",d)},this.setCurrentAudioTrack=function(a,b){a>-1&&b.length>0&&a<b.length&&this.mediaModel.set("currentAudioTrack",parseInt(a))},this.onMediaContainer=function(){var a=this.get("mediaContainer");q.setContainer(a)},this.changeVideoProvider=function(a){var b=function(){this.setVolume(this.get("volume"))};if(this.off("change:mediaContainer",this.onMediaContainer),m&&(m.off(null,null,this),m.getContainer()&&m.remove()),!a)return m=q=a,void this.set("provider",void 0);q=new a(p.get("id"),p.getConfiguration());var c=this.get("mediaContainer");c?q.setContainer(c):this.once("change:mediaContainer",this.onMediaContainer),this.once("change:provider",b,this),this.set("provider",q.getName()),-1===q.getName().name.indexOf("flash")&&(this.set("flashThrottle",void 0),this.set("flashBlocked",!1)),m=q,m.volume(p.get("volume")),m.mute(p.get("mute")),m.on("all",g,this)},this.destroy=function(){m&&(m.off(null,null,this),m.destroy())},this.getVideo=function(){return m},this.setFullscreen=function(a){(a=!!a)!==p.get("fullscreen")&&p.set("fullscreen",a)},this.chooseProvider=function(a){return k.choose(a).provider},this.setActiveItem=function(a){this.mediaModel.off(),this.mediaModel=new l,this.set("mediaModel",this.mediaModel),this.set("position",a.starttime||0),this.set("duration",a.duration||0),this.setProvider(a)},this.setProvider=function(a){var b=a&&a.sources&&a.sources[0];if(void 0!==b){n=a;var c=this.chooseProvider(b);c&&q instanceof c||p.changeVideoProvider(c),q&&(q.init&&q.init(a,this.attributes),this.trigger("itemReady",a))}},this.getCurrentItem=function(){return n},this.getProviders=function(){return k},this.resetProvider=function(){q=null},this.setVolume=function(a){a=Math.round(a),a=m&&"html5"===m.getName().name?Math.min(a,100):Math.min(a,500),p.set("volume",a),m&&m.volume(a);var b=0===a;b!==p.get("mute")&&p.setMute(b)},this.enableGPU=function(){m.enableGPU()},this.disableGPU=function(){m.disableGPU()},this.setToken=function(a){var b=[];"string"==typeof arguments[0]&&"string"==typeof arguments[1]&&(b[0]={file:arguments[0],tokenText:arguments[1]},a=b),m.setToken&&m.setToken(a)},this.setMute=function(b){if(a.exists(b)||(b=!this.get("mute")),this.set("mute",b),m&&m.mute(b),!b){var c=Math.max(10,this.get("volume"));this.setVolume(c)}},this.loadVideo=function(a){if(!a){var b=this.get("item");a=this.get("playlist")[b]}a.starttime=this.getLastPosition(a),void 0!==this.get("starttime")&&(a.starttime=this.get("starttime")),this.set("position",a.starttime||0),this.set("duration",a.duration||0),this.mediaModel.set("playAttempt",!0),this.mediaController.trigger(h.JWPLAYER_MEDIA_PLAY_ATTEMPT,{playReason:this.get("playReason")}),m.load(a)},this.stopVideo=function(){m&&m.stop()},this.playVideo=function(){m.play()},this.persistCaptionsTrack=function(){var a=this.get("captionsTrack");a?this.set("captionLabel",a.label):this.set("captionLabel","Off")},this.setVideoSubtitleTrack=function(a,b){this.set("captionsIndex",a),a&&b&&a<=b.length&&b[a-1].data&&this.set("captionsTrack",b[a-1]),m&&m.setSubtitlesTrack&&m.setSubtitlesTrack(a)},this.persistVideoSubtitleTrack=function(a){this.setVideoSubtitleTrack(a),this.persistCaptionsTrack()},this.setPlaybackRate=function(a){m.setPlaybackRate(a)}},l=k.MediaModel=function(){this.set("state",i.IDLE)};return e.extend(k.prototype,g),e.extend(l.prototype,g),k}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(7)],void 0!==(e=function(a){function b(b){return b===a.COMPLETE||b===a.ERROR?a.IDLE:b}return function(a,c,d){if(c=b(c),d=b(d),c!==d){var e=c.replace(/(?:ing|d)$/,""),f={type:e,newstate:c,oldstate:d,reason:a.mediaModel.get("state")};"play"===e&&(f.playReason=a.get("playReason")),this.trigger(e,f)}}}.apply(b,d))&&(a.exports=e)},function(a,b){"use strict";function c(){return Object.assign({},d)}b.__esModule=!0,b.createDefaultConfig=c;var d=b.defaultConfig={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0}},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var d=function(){function a(){c(this,a),this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return a.prototype.isComplete=function(){var a=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,b=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&a&&b},a.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},a.prototype.getNearestKeyframe=function(a){if(null==this.keyframesIndex)return null;var b=this.keyframesIndex,c=this._search(b.times,a);return{index:c,milliseconds:b.times[c],fileposition:b.filepositions[c]}},a.prototype._search=function(a,b){var c=0,d=a.length-1,e=0,f=0,g=d;for(b<a[0]&&(c=0,f=g+1);f<=g;){if((e=f+Math.floor((g-f)/2))===d||b>=a[e]&&b<a[e+1]){c=e;break}a[e]<b?f=e+1:g=e-1}return c},a}();b["default"]=d,a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0;var c={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"};b["default"]=c,a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0;var c={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"};b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(16),h=d(g),i=c(6),j=d(i),k=function(){function a(){e(this,a)}return a.getConfig=function(){return{globalTag:j["default"].GLOBAL_TAG,forceGlobalTag:j["default"].FORCE_GLOBAL_TAG,enableVerbose:j["default"].ENABLE_VERBOSE,enableDebug:j["default"].ENABLE_DEBUG,enableInfo:j["default"].ENABLE_INFO,enableWarn:j["default"].ENABLE_WARN,enableError:j["default"].ENABLE_ERROR,enableCallback:j["default"].ENABLE_CALLBACK}},a.applyConfig=function(a){j["default"].GLOBAL_TAG=a.globalTag,j["default"].FORCE_GLOBAL_TAG=a.forceGlobalTag,j["default"].ENABLE_VERBOSE=a.enableVerbose,j["default"].ENABLE_DEBUG=a.enableDebug,j["default"].ENABLE_INFO=a.enableInfo,j["default"].ENABLE_WARN=a.enableWarn,j["default"].ENABLE_ERROR=a.enableError,j["default"].ENABLE_CALLBACK=a.enableCallback},a._notifyChange=function(){var b=a.emitter;if(b.listenerCount("change")>0){var c=a.getConfig();b.emit("change",c)}},a.registerListener=function(b){a.emitter.addListener("change",b)},a.removeListener=function(b){a.emitter.removeListener("change",b)},a.addLogListener=function(b){j["default"].emitter.addListener("log",b),j["default"].emitter.listenerCount("log")>0&&(j["default"].ENABLE_CALLBACK=!0,a._notifyChange())},a.removeLogListener=function(b){j["default"].emitter.removeListener("log",b),0===j["default"].emitter.listenerCount("log")&&(j["default"].ENABLE_CALLBACK=!1,a._notifyChange())},f(a,null,[{key:"forceGlobalTag",get:function(){return j["default"].FORCE_GLOBAL_TAG},set:function(b){j["default"].FORCE_GLOBAL_TAG=b,a._notifyChange()}},{key:"globalTag",get:function(){return j["default"].GLOBAL_TAG},set:function(b){j["default"].GLOBAL_TAG=b,a._notifyChange()}},{key:"enableAll",get:function(){return j["default"].ENABLE_VERBOSE&&j["default"].ENABLE_DEBUG&&j["default"].ENABLE_INFO&&j["default"].ENABLE_WARN&&j["default"].ENABLE_ERROR},set:function(b){j["default"].ENABLE_VERBOSE=b,j["default"].ENABLE_DEBUG=b,j["default"].ENABLE_INFO=b,j["default"].ENABLE_WARN=b,j["default"].ENABLE_ERROR=b,a._notifyChange()}},{key:"enableDebug",get:function(){return j["default"].ENABLE_DEBUG},set:function(b){j["default"].ENABLE_DEBUG=b,a._notifyChange()}},{key:"enableVerbose",get:function(){return j["default"].ENABLE_VERBOSE},set:function(b){j["default"].ENABLE_VERBOSE=b,a._notifyChange()}},{key:"enableInfo",get:function(){return j["default"].ENABLE_INFO},set:function(b){j["default"].ENABLE_INFO=b,a._notifyChange()}},{key:"enableWarn",get:function(){return j["default"].ENABLE_WARN},set:function(b){j["default"].ENABLE_WARN=b,a._notifyChange()}},{key:"enableError",get:function(){return j["default"].ENABLE_ERROR},set:function(b){j["default"].ENABLE_ERROR=b,a._notifyChange()}}]),a}();k.emitter=new h["default"],b["default"]=k,a.exports=b["default"]},function(a,b,c){var d,e;d=[c(2),c(8)],void 0!==(e=function(a,b){function c(a){var b={},c=a.split("\r\n");1===c.length&&(c=a.split("\n"));var e=1;if(c[0].indexOf(" --\x3e ")>0&&(e=0),c.length>e+1&&c[e+1]){var f=c[e],g=f.indexOf(" --\x3e ");g>0&&(b.begin=d(f.substr(0,g)),b.end=d(f.substr(g+5)),b.text=c.slice(e+1).join("<br/>"))}return b}var d=a.seconds;return function(a){var d=[];a=b.trim(a);var e=a.split("\r\n\r\n");1===e.length&&(e=a.split("\n\n"));for(var f=0;f<e.length;f++)if("WEBVTT"!==e[f]){var g=c(e[f]);g.text&&d.push(g)}return d}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(121),c(123),c(60),c(28)],void 0!==(e=function(a,b,c,d){var e={},f={};return{loadPlugins:function(c,d){return f[c]=new a(new b(e),d),f[c]},registerPlugin:function(a,b,f,g){var h=d.getPluginName(a);e[h]||(e[h]=new c(a)),e[h].registerPlugin(a,b,f,g)}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){this.message=a}var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.prototype=new Error,a.prototype.name="InvalidCharacterError",window.btoa||(window.btoa=function(c){for(var d,e,f=String(c),g=0,h=b,i="";f.charAt(0|g)||(h="=",g%1);i+=h.charAt(63&d>>8-g%1*8)){if((e=f.charCodeAt(g+=.75))>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");d=d<<8|e}return i}),window.atob||(window.atob=function(c){var d=String(c).replace(/=+$/,"");if(d.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,f,g=0,h=0,i="";f=d.charAt(h++);~f&&(e=g%4?64*e+f:f,g++%4)?i+=String.fromCharCode(255&e>>(-2*g&6)):0)f=b.indexOf(f);return i})}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=[],void 0!==(e=function(){"object"!==("undefined"==typeof JSON?"undefined":f(JSON))&&(JSON={}),function(){"use strict";function a(a){return a<10?"0"+a:a}function b(a){return e.lastIndex=0,e.test(a)?'"'+a.replace(e,function(a){var b=i[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var e,i,k,l,m,n=g,o=d[a];switch(o&&"object"===(void 0===o?"undefined":f(o))&&"function"==typeof o.toJSON&&(o=o.toJSON(a)),"function"==typeof j&&(o=j.call(d,a,o)),void 0===o?"undefined":f(o)){case"string":return b(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(g+=h,m=[],"[object Array]"===Object.prototype.toString.apply(o)){for(l=o.length,e=0;e<l;e+=1)m[e]=c(e,o)||"null";return k=0===m.length?"[]":g?"[\n"+g+m.join(",\n"+g)+"\n"+n+"]":"["+m.join(",")+"]",g=n,k}if(j&&"object"===(void 0===j?"undefined":f(j)))for(l=j.length,e=0;e<l;e+=1)"string"==typeof j[e]&&(i=j[e],(k=c(i,o))&&m.push(b(i)+(g?": ":":")+k));else for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(k=c(i,o))&&m.push(b(i)+(g?": ":":")+k);return k=0===m.length?"{}":g?"{\n"+g+m.join(",\n"+g)+"\n"+n+"}":"{"+m.join(",")+"}",g=n,k}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d,e,g,h,i,j;"function"!=typeof JSON.stringify&&(e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,d){var e;if(g="",h="","number"==typeof d)for(e=0;e<d;e+=1)h+=" ";else"string"==typeof d&&(h=d);if(j=b,b&&"function"!=typeof b&&("object"!==(void 0===b?"undefined":f(b))||"number"!=typeof b.length))throw new Error("JSON.stringify");return c("",{"":a})}),"function"!=typeof JSON.parse&&(d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(a,b){function c(a,d){var e,g,h=a[d];if(h&&"object"===(void 0===h?"undefined":f(h)))for(e in h)Object.prototype.hasOwnProperty.call(h,e)&&(g=c(h,e),void 0!==g?h[e]=g:delete h[e]);return b.call(a,d,h)}var e;if(a=String(a),d.lastIndex=0,d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"==typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse")})}(),window.JSON||(window.JSON=JSON)}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=[c(1)],void 0!==(e=function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if("object"!==f(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],j(a,b(e,this),b(g,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(b){return void a.reject(b)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"===(void 0===a?"undefined":f(a))||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void j(b(c,a),b(e,this),b(g,this))}this._state=!0,this._value=a,h.call(this)}catch(a){g.call(this,a)}}function g(a){this._state=!1,this._value=a,h.call(this)}function h(){for(var a=0,b=this._deferreds.length;a<b;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function i(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function j(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(a){if(d)return;d=!0,c(a)}}var k=a.defer,l=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.prototype["catch"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new i(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(g,h){try{if(h&&("object"===(void 0===h?"undefined":f(h))||"function"==typeof h)){var i=h.then;if("function"==typeof i)return void i.call(h,function(a){d(g,a)},c)}a[g]=h,0==--e&&b(a)}catch(a){c(a)}}if(0===a.length)return b([]);for(var e=a.length,g=0;g<a.length;g++)d(g,a[g])})},c.resolve=function(a){
return a&&"object"===(void 0===a?"undefined":f(a))&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;d<e;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){k=a},window.Promise||(window.Promise=c)}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(1),c(4),c(7),c(128),c(21),c(3)],void 0!==(e=function(a,b,c,d,e,f,g){function h(a){return a+"_swf_"+k++}function i(b){var c=document.createElement("a");c.href=b.flashplayer;var d=c.hostname===window.location.host;return a.isChrome()&&!d}function j(j,k){function l(a){if(G)for(var b=0;b<a.length;b++){var c=a[b];if(c.bitrate){var d=Math.round(c.bitrate/1e3);c.label=m(d)}}}function m(a){var b=G[a];if(!b){for(var c=1/0,d=G.bitrates.length;d--;){var e=Math.abs(G.bitrates[d]-a);if(e>c)break;c=e}b=G.labels[G.bitrates[d+1]],G[a]=b}return b}function n(){u=setTimeout(function(){g.trigger.call(D,"flashBlocked")},3e4),r.once("embedded",function(){p(),g.trigger.call(D,"flashUnblocked")},D)}function o(){p(),n()}function p(){clearTimeout(u),a.removeEventListener(window,"focus",o,!1)}var q,r,s,t=null,u=-1,v=!1,w=-1,x=null,y=-1,z=null,A=!0,B=!1,C=null,D=this,E=function(){return r&&r.__ready},F=function(){r&&r.triggerFlash.apply(r,arguments)},G=function(){var a=k.hlslabels;if(!a)return null;var b={},c=[];for(var d in a){var e=parseFloat(d);if(!isNaN(e)){var f=Math.round(e);b[f]=a[d],c.push(f)}}return 0===c.length?null:(c.sort(function(a,b){return a-b}),{labels:b,bitrates:c})}();b.extend(this,g,{init:function(a){a.preload&&"none"!==a.preload&&!k.autostart&&(t=a)},load:function(a){t=a,v=!1,this.setState(d.LOADING),F("load",a),a.sources.length&&"hls"!==a.sources[0].type&&this.sendMediaType(a.sources)},play:function(){F("play")},pause:function(){F("pause"),this.setState(d.PAUSED)},stop:function(){F("stop"),w=-1,t=null,C=null,this.setState(d.IDLE),this.trigger("stop")},seek:function(a){F("seek",a)},volume:function(a){if(b.isNumber(a)){var c=Math.min(Math.max(0,a),100);E()&&F("volume",c)}},enableGPU:function(){F("enableGPU")},disableGPU:function(){F("disableGPU")},setToken:function(a){F("setToken",a)},mute:function(a){E()&&F("mute",a)},setState:function(){return f.setState.apply(this,arguments)},checkComplete:function(){return v},attachMedia:function(){A=!0,v&&(this.setState(d.COMPLETE),this.trigger(c.JWPLAYER_MEDIA_COMPLETE),v=!1)},detachMedia:function(){return A=!1,null},getSwfObject:function(a){var b=a.getElementsByTagName("object")[0];return b?(b.off(null,null,this),b):e.embed(k.flashplayer,a,h(j),k.wmode,k.playlistItem,k.flashUI)},getContainer:function(){return q},setContainer:function(e){if(q!==e){q=e,r=this.getSwfObject(e),document.hasFocus()?n():a.addEventListener(window,"focus",o,!1),r.once("ready",function(){p(),r.once("pluginsLoaded",function(){r.queueCommands=!1,F("setupCommandQueue",r.__commandQueue),r.__commandQueue=[]});var a=b.extend({},k),d=r.triggerFlash("setup",a);d===r?r.__ready=!0:this.trigger(c.JWPLAYER_MEDIA_ERROR,d),t&&F("init",t)},this);var f=[c.JWPLAYER_MEDIA_META,c.JWPLAYER_MEDIA_ERROR,c.JWPLAYER_MEDIA_SEEK,c.JWPLAYER_MEDIA_SEEKED,"subtitlesTracks","subtitlesTrackChanged","subtitlesTrackData","mediaType"],h=[c.JWPLAYER_MEDIA_BUFFER,c.JWPLAYER_MEDIA_TIME],j=[c.JWPLAYER_MEDIA_BUFFER_FULL];r.on(c.JWPLAYER_MEDIA_LEVELS,function(a){l(a.levels),w=a.currentQuality,x=a.levels,this.trigger(a.type,a)},this),r.on(c.JWPLAYER_MEDIA_LEVEL_CHANGED,function(a){l(a.levels),w=a.currentQuality,x=a.levels,this.trigger(a.type,a)},this),r.on(c.JWPLAYER_AUDIO_TRACKS,function(a){y=a.currentTrack,z=a.tracks,this.trigger(a.type,a)},this),r.on(c.JWPLAYER_AUDIO_TRACK_CHANGED,function(a){y=a.currentTrack,z=a.tracks,this.trigger(a.type,a)},this),r.on(c.JWPLAYER_PLAYER_STATE,function(a){var b=a.newstate;b!==d.IDLE&&this.setState(b)},this),r.on(h.join(" "),function(a){"Infinity"===a.duration&&(a.duration=1/0),this.trigger(a.type,a)},this),r.on(f.join(" "),function(a){this.trigger(a.type,a)},this),r.on(j.join(" "),function(a){this.trigger(a.type)},this),r.on(c.JWPLAYER_CONNECTING,function(a){g.trigger.call(D,"connecting",a)},this),r.on(c.JWPLAYER_CONNECT_FAILD,function(a){g.trigger.call(D,"connectFaild",a),g.trigger.call(D,c.JWPLAYER_MEDIA_ERROR,{message:""})},this),r.on(c.JWPLAYER_ALIVE,function(a){g.trigger.call(D,"alive",a)},this),r.on(c.JWPLAYER_NO_LIVE_STREAM,function(a){g.trigger.call(D,"noLiveStream",a)},this),r.on(c.JWPLAYER_LIVE_STOP,function(a){g.trigger.call(D,"liveStop",a)},this),r.on(c.JWPLAYER_CUEPOINT,function(a){g.trigger.call(D,a.name,a.args)},this),r.on(c.JWPLAYER_MEDIA_BEFORECOMPLETE,function(a){v=!0,this.trigger(a.type),!0===A&&(v=!1)},this),r.on(c.JWPLAYER_MEDIA_COMPLETE,function(a){v||(this.setState(d.COMPLETE),this.trigger(a.type))},this),r.on("visualQuality",function(a){a.reason=a.reason||"api",this.trigger("visualQuality",a),this.trigger(c.JWPLAYER_PROVIDER_FIRST_FRAME,{})},this),r.on(c.JWPLAYER_PROVIDER_CHANGED,function(a){s=a.message,this.trigger(c.JWPLAYER_PROVIDER_CHANGED,a)},this),r.on(c.JWPLAYER_ERROR,function(b){a.log("Error playing media: %o %s",b.code,b.message,b),this.trigger(c.JWPLAYER_MEDIA_ERROR,b)},this),i(k)&&r.on("throttle",function(a){p(),"resume"===a.state?g.trigger.call(D,"flashThrottle",a):u=setTimeout(function(){g.trigger.call(D,"flashThrottle",a)},250)},this)}},remove:function(){w=-1,x=null,e.remove(r)},setVisibility:function(a){a=!!a,q.style.opacity=a?1:0},resize:function(a,b,c){c&&F("stretch",c)},setControls:function(a){F("setControls",a)},setFullscreen:function(a){B=a,F("fullscreen",a)},getFullScreen:function(){return B},setCurrentQuality:function(a){F("setCurrentQuality",a)},getCurrentQuality:function(){return w},setSubtitlesTrack:function(a){F("setSubtitlesTrack",a)},getName:function(){return s?{name:"flash_"+s}:{name:"flash"}},getQualityLevels:function(){return x||t.sources},getAudioTracks:function(){return z},getCurrentAudioTrack:function(){return y},setCurrentAudioTrack:function(a){F("setCurrentAudioTrack",a)},destroy:function(){p(),this.remove(),r&&(r.off(),r=null),q=null,t=null,this.off()}}),this.trigger=function(a,b){if(A)return g.trigger.call(this,a,b)}}var k=0,l=function(){};return l.prototype=f,j.prototype=new l,j.getName=function(){return{name:"flash"}},j}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(14),c(2),c(24),c(1),c(4),c(7),c(21),c(3),c(43),c(52)],void 0!==(e=function(a,b,c,d,e,f,g,h,i,j){function k(a,c){b.foreach(a,function(a,d){b.addEventListener(c,a,d,!1)})}function l(a,c){b.foreach(a,function(a,d){b.removeEventListener(c,a,d,!1)})}function m(a){if("hls"===a.type)if(!1!==a.androidhls){var c=b.isAndroidNative;if(c(2)||c(3)||c("4.0"))return!1;if(b.isAndroid())return!0}else if(b.isAndroid())return!1;return null}function n(n,y){function z(){za&&(ja(Na.audioTracks),ta.setTextTracks(Na.textTracks),Na.setAttribute("jw-loaded","data"),La.isLive&&K())}function A(){za&&Na.setAttribute("jw-loaded","started")}function B(a){ta.trigger("click",a)}function C(){za&&!Ba&&(J(I()),G(ca(),qa,pa))}function D(){za&&G(ca(),qa,pa)}function E(){o(xa),va=!0,za&&(ta.state===f.STALLED?ta.setState(f.PLAYING):ta.state===f.PLAYING&&(xa=setTimeout(ba,p)),Ba&&Na.duration===1/0&&0===Na.currentTime||(J(I()),H(Na.currentTime),G(ca(),qa,pa),ta.state===f.PLAYING&&(ta.trigger(e.JWPLAYER_MEDIA_TIME,{position:qa,duration:pa}),F())))}function F(){var a=Ja.level;if(a.width!==Na.videoWidth||a.height!==Na.videoHeight){if(a.width=Na.videoWidth,a.height=Na.videoHeight,na(),!a.width||!a.height)return;Ja.reason=Ja.reason||"auto",Ja.mode="hls"===sa[Aa].type?"auto":"manual",Ja.bitrate=0,a.index=Aa,a.label=sa[Aa].label,ta.trigger("visualQuality",Ja),Ja.reason=""}}function G(a,b,c){a===ya&&c===pa||(ya=a,ta.trigger(e.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*a,position:b,duration:c}))}function H(a){pa<0&&(a=-($()-a)),qa=a}function I(){var a=Na.duration,b=$();if(a===1/0&&b){var c=b-Na.seekable.start(0);c!==1/0&&c>120&&(a=-c)}return a}function J(a){pa=a,wa&&a&&a!==1/0&&ta.seek(wa)}function K(){var a=I();Ba&&a===1/0&&(a=0);var b={duration:a,height:Na.videoHeight,width:Na.videoWidth};ta.trigger(e.JWPLAYER_MEDIA_META,b),J(a)}function L(){za&&(va=!0,Ba||na(),N())}function M(){za&&(Na.muted&&(Na.muted=!1,Na.muted=!0),Na.setAttribute("jw-loaded","meta"),K())}function N(){ra||(ra=!0,ta.trigger(e.JWPLAYER_MEDIA_BUFFER_FULL))}function O(){ta.setState(f.PLAYING),Na.hasAttribute("jw-played")||Na.setAttribute("jw-played",""),ta.trigger(e.JWPLAYER_PROVIDER_FIRST_FRAME,{})}function P(){ta.state!==f.COMPLETE&&Na.currentTime!==Na.duration&&ta.setState(f.PAUSED)}function Q(){Ba||Na.paused||Na.ended||ta.state!==f.LOADING&&ta.state!==f.ERROR&&(ta.seeking||ta.setState(f.STALLED))}function R(){if(za){b.log("Error playing media: %o %s",Na.error,Na.src);var a=": ";b.isMobile()&&b.isHls(Na.src)&&La.tokenEncrypt&&!b.isFlvjsSupported()&&(a="tokenhls"),ta.trigger(e.JWPLAYER_MEDIA_ERROR,{message:a,code:"111",detail:Na.error,videoSrc:Na.src})}}function S(a){var c;return"array"===b.typeOf(a)&&a.length>0&&(c=d.map(a,function(a,b){return{label:a.label||b}})),c}function T(a){sa=a,Aa=U(a);var b=S(a);b&&ta.trigger(e.JWPLAYER_MEDIA_LEVELS,{levels:b,currentQuality:Aa})}function U(a){var b=Math.max(0,Aa),c=y.qualityLabel;if(a)for(var d=0;d<a.length;d++)if(a[d]["default"]&&(b=d),c&&a[d].label===c)return d;return Ja.reason="initial choice",Ja.level={},b}function V(){return Na.play()}function W(a,c){wa=0,o(xa);var d=document.createElement("source");d.src=sa[Aa].file;var e=Na.src!==d.src,g=Na.getAttribute("jw-loaded"),h=Na.hasAttribute("jw-played");e||"none"===g||"started"===g?(pa=c,ta.setupSideloadedTracks(Ia),b.isHtml5Flv(sa[Aa].file,sa[Aa].type)&&Ka?(Ka.load(),Ka.play()):(X(sa[Aa]),Na.load()),t&&Na.paused&&V()):(0===a&&Na.currentTime>0&&(wa=-1,ta.seek(a)),b.isHtml5Flv(sa[Aa].file,sa[Aa].type)&&Ka?Ka.play():V()),qa=Na.currentTime,s&&!h&&(N(),Na.paused||ta.state===f.PLAYING||ta.setState(f.LOADING)),b.isIOS()&&ta.getFullScreen()&&(Na.controls=!0),a>0&&ta.seek(a),La.playbackRate>1&&ta.setPlaybackRate(La.playbackRate)}function X(a){Fa=null,Ga=-1,Ha=-1,Ja.reason||(Ja.reason="initial choice",Ja.level={}),va=!1,ra=!1,Ba=m(a);var b=a.preload||"metadata";"none"!==b&&Na.setAttribute("preload",b);var c=document.createElement("source");c.src=a.file,Na.src!==c.src&&(Na.setAttribute("jw-loaded","none"),Na.src=a.file)}function Y(){Na&&(ta.disableTextTrack(),Na.removeAttribute("crossorigin"),Na.removeAttribute("preload"),Na.removeAttribute("src"),Na.removeAttribute("jw-loaded"),Na.removeAttribute("jw-played"),c.emptyElement(Na),Aa=-1,Ia=null,!r&&"load"in Na&&Na.load(),ta.trigger("stop"))}function Z(){for(var a=Na.seekable?Na.seekable.length:0,b=1/0;a--;)b=Math.min(b,Na.seekable.start(a));return b}function $(){for(var a=Na.seekable?Na.seekable.length:0,b=0;a--;)b=Math.max(b,Na.seekable.end(a));return b}function _(){ta.seeking=!1,ta.trigger(e.JWPLAYER_MEDIA_SEEKED)}function aa(){ta.trigger("volume",{volume:Math.round(100*Na.volume)}),ta.trigger("mute",{mute:Na.muted})}function ba(){Na.currentTime===qa&&Q()}function ca(){var a=Na.buffered,c=Na.duration;return!a||0===a.length||c<=0||c===1/0?0:b.between(a.end(a.length-1)/c,0,1)}function da(){if(za&&ta.state!==f.IDLE&&ta.state!==f.COMPLETE){if(o(xa),Aa=-1,Da=!0,ta.trigger(e.JWPLAYER_MEDIA_BEFORECOMPLETE),!za)return;ea()}}function ea(){o(xa),ta.setState(f.COMPLETE),Da=!1,ta.trigger(e.JWPLAYER_MEDIA_COMPLETE)}function fa(a){Ea=!0,ia(a),b.isIOS()&&(Na.controls=!1)}function ga(){for(var a=-1,b=0;b<Na.audioTracks.length;b++)if(Na.audioTracks[b].enabled){a=b;break}ka(a)}function ha(a){Ea=!1,ia(a),b.isIOS()&&(Na.controls=!1)}function ia(a){ta.trigger("fullscreenchange",{target:a.target,jwstate:Ea})}function ja(a){if(Fa=null,a){if(a.length){for(var b=0;b<a.length;b++)if(a[b].enabled){Ga=b;break}-1===Ga&&(Ga=0,a[Ga].enabled=!0),Fa=d.map(a,function(a){return{name:a.label||a.language,language:a.language}})}ta.addTracksListener(a,"change",ga),Fa&&ta.trigger("audioTracks",{currentTrack:Ga,tracks:Fa})}}function ka(a){Na&&Na.audioTracks&&Fa&&a>-1&&a<Na.audioTracks.length&&a!==Ga&&(Na.audioTracks[Ga].enabled=!1,Ga=a,Na.audioTracks[Ga].enabled=!0,ta.trigger("audioTrackChanged",{currentTrack:Ga,tracks:Fa}))}function la(){return Fa||[]}function ma(){return Ga}function na(){if("hls"===sa[0].type){var a="video";0===Na.videoHeight&&(a="audio"),ta.trigger("mediaType",{mediaType:a})}}this.state=f.IDLE,this.seeking=!1,d.extend(this,h,i),this.trigger=function(a,b){if(za)return h.trigger.call(this,a,b)},this.setState=function(a){if(za)return g.setState.call(this,a)};var oa,pa,qa,ra,sa,ta=this,ua={click:B,durationchange:C,ended:da,error:R,loadstart:A,loadeddata:z,loadedmetadata:M,canplay:L,playing:O,progress:D,pause:P,seeked:_,timeupdate:E,volumechange:aa,webkitbeginfullscreen:fa,webkitendfullscreen:ha},va=!1,wa=0,xa=-1,ya=-1,za=!0,Aa=-1,Ba=null,Ca=!!y.sdkplatform,Da=!1,Ea=!1,Fa=null,Ga=-1,Ha=-1,Ia=null,Ja={level:{}},Ka=null,La=null,Ma=document.getElementById(n),Na=Ma?Ma.querySelector("video"):void 0;Na=Na||document.createElement("video"),Na.className="jw-video jw-reset",this.isSDK=Ca,this.itemTracks=Ia,this.video=Na,d.isObject(y.cast)&&y.cast.appid&&Na.setAttribute("disableRemotePlayback",""),k(ua,Na),v||(Na.controls=!0,Na.controls=!1),Na.setAttribute("disableRemotePlayback",""),Na.setAttribute("x-webkit-airplay","allow"),Na.setAttribute("webkit-playsinline",""),Na.setAttribute("playsinline",""),Na.setAttribute("x5-video-player-type","h5-page"),Na.setAttribute("x5-video-player-fullscreen","true"),this.stop=function(){o(xa),za&&(Y(),b.isIETrident()&&Na.pause(),this.setState(f.IDLE))},this.destroy=function(){l(ua,Na),this.removeTracksListener(Na.audioTracks,"change",ga),this.removeTracksListener(Na.textTracks,"change",ta.textTrackChangeHandler),this.remove(),this.off(),Ka&&(Ka.destroy(),Ka=null)},this.init=function(a,c){za&&(Ia=null,sa=a.sources,Aa=U(a.sources),a.sources.length&&"hls"!==a.sources[0].type&&this.sendMediaType(a.sources),qa=a.starttime||0,pa=a.duration||0,Ja.reason="",X(sa[Aa]),this.setupSideloadedTracks(a.tracks),Ia=this.itemTracks,La=c,b.isHtml5Flv(sa[Aa].file,sa[Aa].type)&&this.initFlvPlayer(),La.crossoriginAnonymous&&Na.setAttribute("crossorigin","anonymous"))},this.initFlvPlayer=function(){var a=this;Ka&&Ka.destroy();var b={enableWorker:!1,lazyLoadMaxDuration:180,seekType:"range"};La.minBufferLength>0&&(b.lazyLoadMaxDuration=La.minBufferLength,La.minBufferLength<30&&(b.lazyLoadRecoverDuration=La.minBufferLength));var c=d.extend({hasAudio:!0,hasVideo:!0,isLive:La.isLive,type:"flv",url:sa[Aa].file,withCredentials:!1},La.flvjs||{});Ka=j.createPlayer(c,b),Ka.attachMediaElement(Na),Ka.on(e.JWPLAYER_ERROR,function(b,c,d){"CodecUnsupported"===c&&(Ka.unload(),Ka.detachMediaElement()),a.trigger(e.JWPLAYER_MEDIA_ERROR,{type:b,detail:c+","+d.msg,code:"111",message:": "})}),Ka.on(e.JWPLAYER_ALIVE,function(){a.trigger(e.JWPLAYER_ALIVE)}),Ka.on(e.JWPLAYER_NO_LIVE_STREAM,function(){a.trigger(e.JWPLAYER_NO_LIVE_STREAM)})},this.load=function(a){za&&(T(a.sources),a.sources.length&&"hls"!==a.sources[0].type&&this.sendMediaType(a.sources),s&&!Na.hasAttribute("jw-played")||ta.setState(f.LOADING),W(a.starttime||0,a.duration||0))},this.play=function(){return ta.seeking?(ta.setState(f.LOADING),void ta.once(e.JWPLAYER_MEDIA_SEEKED,ta.play)):void V()},this.pause=function(){o(xa),Na.pause(),this.setState(f.PAUSED)},this.seek=function(a){if(za)if(a<0&&(a+=Z()+$()),0===wa&&this.trigger(e.JWPLAYER_MEDIA_SEEK,{position:Na.currentTime,offset:a}),va||(va=!!$()),va){wa=0;try{ta.seeking=!0,Na.currentTime=a}catch(b){ta.seeking=!1,wa=a}}else wa=a,t&&Na.paused&&V()},this.volume=function(a){a=b.between(a/100,0,1),Na.volume=a},this.enableGPU=function(){throw"FlashGPU"},this.disableGPU=function(){throw"FlashGPU"},this.mute=function(a){Na.muted=!!a},this.checkComplete=function(){return Da},this.detachMedia=function(){return o(xa),this.disableTextTrack(),za=!1,Na},this.attachMedia=function(){za=!0,va=!1,this.seeking=!1,Na.loop=!1,Da&&ea()},this.setContainer=function(a){oa=a,a.appendChild(Na)},this.getContainer=function(){return oa},this.remove=function(){Y(),o(xa),oa===Na.parentNode&&oa.removeChild(Na),Ka&&(Ka.pause(),Ka.unload(),Ka.detachMediaElement())},this.setVisibility=function(b){b=!!b,b||u?a.style(oa,{visibility:"visible",opacity:1}):a.style(oa,{visibility:"",opacity:0})},this.resize=function(b,c,d){if(!(b&&c&&Na.videoWidth&&Na.videoHeight))return!1;var e={objectFit:""};if("uniform"===d){var f=b/c,g=Na.videoWidth/Na.videoHeight;Math.abs(f-g)<.09&&(e.objectFit="fill",d="exactfit")}if(q||u||v||w){var h=-Math.floor(Na.videoWidth/2+1),i=-Math.floor(Na.videoHeight/2+1),j=Math.ceil(100*b/Na.videoWidth)/100,k=Math.ceil(100*c/Na.videoHeight)/100;"none"===d?j=k=1:"fill"===d?j=k=Math.max(j,k):"uniform"===d&&(j=k=Math.min(j,k)),e.width=Na.videoWidth,e.height=Na.videoHeight,e.top=e.left="50%",e.margin=0,a.transform(Na,"translate("+h+"px, "+i+"px) scale("+j.toFixed(2)+", "+k.toFixed(2)+")")}return a.style(Na,e),!1},this.setFullscreen=function(a){if(a=!!a){return!(b.tryCatch(function(){var a=Na.webkitEnterFullscreen||Na.webkitEnterFullScreen;a&&a.apply(Na)})instanceof b.Error)&&ta.getFullScreen()}var c=Na.webkitExitFullscreen||Na.webkitExitFullScreen;return c&&c.apply(Na),a},ta.getFullScreen=function(){return Ea||!!Na.webkitDisplayingFullscreen},this.setCurrentQuality=function(a){if(Aa!==a&&a>=0&&sa&&sa.length>a){Aa=a,Ja.reason="api",Ja.level={},this.trigger(e.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:a,levels:S(sa)}),y.qualityLabel=sa[a].label;var c=Na.currentTime||0,d=Na.duration||0;d<=0&&(d=pa),ta.setState(f.LOADING),b.isHtml5Flv(sa[Aa].file,sa[Aa].type)&&this.initFlvPlayer(),W(c,d)}},this.getCurrentQuality=function(){return Aa},this.getQualityLevels=function(){return S(sa)},this.getName=function(){return{name:x}},this.setCurrentAudioTrack=ka,this.getAudioTracks=la,this.getCurrentAudioTrack=ma,this.setPlaybackRate=function(a){La.isLive||(Na.playbackRate=a,this.trigger(e.JWPLAYER_PLAYBACKRATE,{playbackRate:a}))}}var o=window.clearTimeout,p=256,q=b.isIE(),r=b.isMSIE(),s=b.isMobile(),t=b.isFF(),u=b.isAndroidNative(),v=b.isIOS(7),w=b.isIOS(8),x="html5",y=function(){};return y.prototype=g,n.prototype=new y,n.getName=function(){return{name:"html5"}},n}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1),c(65),c(2),c(24)],void 0!==(e=function(a,b,c,d){function e(c){var d=c.currentTarget.activeCues;if(d&&d.length){var e=d[d.length-1].startTime,f=[];if(a.each(d,function(a){a.startTime<e||(a.data?f.push(a):a.text&&this.trigger("meta",{metadataTime:e,metadata:JSON.parse(a.text)}))},this),f.length){var g=b.parseID3(f);this.trigger("meta",{metadataTime:e,metadata:g})}}}function f(){var a=this.video.textTracks;if(v=-1,a){if(t||k(),a.length){var b=0,c=a.length;for(w=0,b;b<c;b++){var d=a[b];if(!u[b+d.kind])if("metadata"===d.kind)d.oncuechange=e.bind(this),d.mode="showing",u[b+d.kind]=d,"ID3 Metadata"===d.label&&w++;else if("subtitles"===d.kind||"captions"===d.kind){var f=d.mode;if(d.mode="hidden",!d.cues.length&&"caterpillar"===this.getName().name&&"Unknown CC"===d.label)continue;d.mode=f,t.push(d),u[b+d.kind]=d,"Unknown CC"===d.label&&w++}}}this.addTracksListener(a,"change",p),t&&t.length&&this.trigger("subtitlesTracks",{tracks:t})}}function g(a){var b=c.isChrome()||c.isIOS()||c.isSafari();!this._isSDK&&b&&a&&(h.call(this,a)||(r(),d.emptyElement(this.video),i(),this.itemTracks=a,j.call(this,a)))}function h(a){return a===this.itemTracks&&t&&t.length===w+this.itemTracks.length}function i(){if(t){var b=a.filter(t,function(a){return"Unknown CC"===a.label||"ID3 Metadata"===a.label});k(),a.each(b,function(a,b){u[b+a]=a}),t=b}}function j(a){if(a){var b=!1;t||k();for(var d=0;d<a.length;d++){var e=a[d];if(/\.(?:web)?vtt(?:\?.*)?$/i.test(e.file)){if(/subtitles|captions|descriptions|chapters|metadata/i.test(e.kind)){b||!this.video.hasAttribute("crossorigin")&&c.crossdomain(e.file)&&(this.video.setAttribute("crossorigin","anonymous"),b=!0);var f=document.createElement("track");f.src=e.file,f.kind=e.kind,f.srclang=e.language||"",f.label=e.label,f.mode="disabled",f.id=e.defaulttrack?"default":"",this.video.appendChild(f)}}else t.push(e),u[d+e.kind]=f}}}function k(){t=[],u={}}function l(b){t&&(0===b&&a.each(t,function(a){a.mode="disabled"}),v!==b-1&&(r(),v=b-1,t[v]&&(t[v].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:v+1,tracks:t})))}function m(){return v}function n(a,b,c){c=c.bind(this),a.addEventListener?a.addEventListener(b,c):a["on"+b]=c}function o(a,b,c){a&&(a.removeEventListener?a.removeEventListener(b,c):a["on"+b]=null)}function p(){if(t){var a=-1,b=0;for(b;b<t.length;b++)if("showing"===t[b].mode){a=b;break}this.setSubtitlesTrack(a+1)}else this.setTextTracks()}function q(){t=null,u=null,w=0}function r(){t&&t[v]&&(t[v].mode="disabled")}var s={addTracksListener:n,clearTracks:q,disableTextTrack:r,getSubtitlesTrack:m,removeTracksListener:o,setTextTracks:f,setupSideloadedTracks:g,setSubtitlesTrack:l,textTrackChangeHandler:p},t=null,u=null,v=-1,w=0;return s}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1),c(25)],void 0!==(e=function(a,b){function c(a){return/^(?:(?:https?|file)\:)?\/\//.test(a)}function d(b){return a.some(b,function(a){return"parsererror"===a.nodeName})}var e={};return e.getAbsolutePath=function(a,d){if(b.exists(d)||(d=document.location.href),b.exists(a)){if(c(a))return a;var e,f=d.substring(0,d.indexOf("://")+3),g=d.substring(f.length,d.indexOf("/",f.length+1));if(0===a.indexOf("/"))e=a.split("/");else{var h=d.split("?")[0];h=h.substring(f.length+g.length+1,h.lastIndexOf("/")),e=h.split("/").concat(a.split("/"))}for(var i=[],j=0;j<e.length;j++)e[j]&&b.exists(e[j])&&"."!==e[j]&&(".."===e[j]?i.pop():i.push(e[j]));return f+g+"/"+i.join("/")}},e.getScriptPath=a.memoize(function(a){for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++){var d=b[c].src;if(d&&d.indexOf(a)>=0)return d.substr(0,d.indexOf(a))}return""}),e.parseXML=function(a){var b=null;try{"DOMParser"in window?(b=(new window.DOMParser).parseFromString(a,"text/xml"),(d(b.childNodes)||b.childNodes&&d(b.childNodes[0].childNodes))&&(b=null)):(b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(a){}return b},e.serialize=function(a){if(void 0===a)return null;if("string"==typeof a&&a.length<6){var b=a.toLowerCase();if("true"===b)return!0;if("false"===b)return!1;if(!isNaN(Number(a))&&!isNaN(parseFloat(a)))return Number(a)}return a},e.parseDimension=function(a){return"string"==typeof a?""===a?0:a.lastIndexOf("%")>-1?a:parseInt(a.replace("px",""),10):a},e.timeFormat=function(a,b){if(a<=0&&!b)return"00:00";var c=a<0?"-":"";a=Math.abs(a);var d=Math.floor(a/3600),e=Math.floor((a-3600*d)/60),f=Math.floor(a%60);return c+(d?d+":":"")+(e<10?"0":"")+e+":"+(f<10?"0":"")+f},e.adaptiveType=function(a){if(0!==a){if(a<=-120)return"DVR";if(a<0||a===1/0)return"LIVE"}return"VOD"},e}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(4),c(3),c(1)],void 0!==(e=function(a,b,c){var d={},e={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},f=function(f,g){function h(b){k=e.ERROR,j.trigger(a.ERROR,b)}function i(b){k=e.COMPLETE,j.trigger(a.COMPLETE,b)}var j=c.extend(this,b),k=e.NEW;this.addEventListener=this.on,this.removeEventListener=this.off,this.makeStyleLink=function(a){var b=document.createElement("link");return b.type="text/css",b.rel="stylesheet",b.href=a,b},this.makeScriptTag=function(a){var b=document.createElement("script");return b.src=a,b},this.makeTag=g?this.makeStyleLink:this.makeScriptTag,this.load=function(){if(k===e.NEW){var b=d[f];if(b&&(k=b.getStatus())<2)return b.on(a.ERROR,h),void b.on(a.COMPLETE,i);var c=document.getElementsByTagName("head")[0]||document.documentElement,j=this.makeTag(f),l=!1;j.onload=j.onreadystatechange=function(a){l||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(l=!0,i(a),j.onload=j.onreadystatechange=null,c&&j.parentNode&&!g&&c.removeChild(j))},j.onerror=h,c.insertBefore(j,c.firstChild),k=e.LOADING,d[f]=this}},this.getStatus=function(){return k}};return f.loaderstatus=e,f}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(64),c(9),c(184),c(2)],void 0!==(e=function(a,b,c,d){return a.extend({constructor:function(a,b){this.className=a+" jw-background-color jw-reset",this.orientation=b,this.dragStartListener=this.dragStart.bind(this),this.dragMoveListener=this.dragMove.bind(this),this.dragEndListener=this.dragEnd.bind(this),this.tapListener=this.tap.bind(this),this.setup()},setup:function(){var a={"default":this["default"],className:this.className,orientation:"jw-slider-"+this.orientation};this.el=d.createElement(c(a)),this.elementRail=d.getElementsByClassName("jw-slider-container",this.el)[0],this.elementBuffer=d.getElementsByClassName("jw-buffer",this.el)[0],this.elementProgress=d.getElementsByClassName("jw-progress",this.el)[0],this.elementThumb=d.getElementsByClassName("jw-knob",this.el)[0],this.userInteract=new b(this.element(),{preventScrolling:!0}),this.userInteract.on("dragStart",this.dragStartListener),this.userInteract.on("drag",this.dragMoveListener),this.userInteract.on("dragEnd",this.dragEndListener),this.userInteract.on("tap click",this.tapListener)},dragStart:function(){this.trigger("dragStart"),this.railBounds=d.bounds(this.elementRail)},dragEnd:function(a){this.dragMove(a),this.trigger("dragEnd")},dragMove:function(a){var b,c,e=this.railBounds=this.railBounds?this.railBounds:d.bounds(this.elementRail);"horizontal"===this.orientation?(b=a.pageX,c=b<e.left?0:b>e.right?100:100*d.between((b-e.left)/e.width,0,1)):(b=a.pageY,c=b>=e.bottom?0:b<=e.top?100:100*d.between((e.height-(b-e.top))/e.height,0,1));var f=this.limit(c);return this.render(f),"drag"===a.type&&d.hasClass(a.currentTarget,"jw-slider-time")||this.update(f),!1},tap:function(a){this.railBounds=d.bounds(this.elementRail),this.dragMove(a)},limit:function(a){return a},update:function(a){this.trigger("update",{percentage:a})},render:function(a){a=Math.max(0,Math.min(a,100)),"horizontal"===this.orientation?(this.elementThumb.style.left=a+"%",this.elementProgress.style.width=a+"%"):(this.elementThumb.style.bottom=a+"%",this.elementProgress.style.height=a+"%")},updateBuffer:function(a){a&&(this.elementBuffer.style.width=a+"%")},element:function(){return this.el}})}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(76),c(1),c(22),c(61),c(37)],void 0!==(e=function(a,b,c,d,e){var f=[],g=0,h=function(b){var c,d;return b?"string"==typeof b?(c=i(b))||(d=document.getElementById(b)):"number"==typeof b?c=f[b]:b.nodeType&&(d=b,c=i(d.id)):c=f[0],c||(d?j(new a(d,k)):{registerPlugin:e.registerPlugin})},i=function(a){for(var b=0;b<f.length;b++)if(f[b].id===a)return f[b];return null},j=function(a){return g++,a.uniqueId=g,f.push(a),a},k=function(a){for(var b=f.length;b--;)if(f[b].uniqueId===a.uniqueId){f.splice(b,1);break}},l={selectPlayer:h,registerProvider:c.registerProvider,availableProviders:d,registerPlugin:e.registerPlugin};return h.api=l,_hmt=[],function(){try{if(navigator.onLine){var a=document.createElement("script");a.onerror=function(){_hmt=null},a.src="https://hm.baidu.com/hm.js?20ba3a41aeedac500c94bdef787f57e6";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b),_hmt.push(["_setAutoPageview",!1])}else _hmt=null}catch(a){_hmt=null}}(),l}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1),c(2)],void 0!==(e=function(a,b){function c(a){return("baiducyberplayer."+a).toString()}function d(){return a.reduce(this.persistItems,function(a,d){var e=k[c(d)];return e&&(a[d]=b.serialize(e)),a},{})}function e(a,b){try{k[c(a)]=b}catch(a){}}function f(a){return k[c(a)]}function g(a){return k.removeItem(c(a))}function h(){a.each(this.persistItems,function(a){k.removeItem(c(a))})}function i(){this.persistItems=["volume","mute","captionLabel","qualityLabel","playbackRate"]}function j(b){a.each(this.persistItems,function(a){b.on("change:"+a,function(b,c){e(a,c)})})}var k={getItem:b.noop,setItem:b.noop,removeItem:b.noop};try{k=window.localStorage}catch(a){}return a.extend(i.prototype,{getAllItems:d,track:j,clear:h,setItem:e,getItem:f,clearItem:g}),i}.apply(b,d))&&(a.exports=e)},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b.SampleInfo=function e(a,b,d,f,g){c(this,e),this.dts=a,this.pts=b,this.duration=d,this.originalDts=f,this.isSyncPoint=g,this.fileposition=null},b.MediaSegmentInfo=function(){function a(){c(this,a),this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return a.prototype.appendSyncPoint=function(a){a.isSyncPoint=!0,this.syncPoints.push(a)},a}(),b.IDRSampleList=function(){function a(){c(this,a),this._list=[]}return a.prototype.clear=function(){this._list=[]},a.prototype.appendArray=function(a){var b=this._list;0!==a.length&&(b.length>0&&a[0].originalDts<b[b.length-1].originalDts&&this.clear(),Array.prototype.push.apply(b,a))},a.prototype.getLastSyncPointBeforeDts=function(a){if(0==this._list.length)return null;var b=this._list,c=0,d=b.length-1,e=0,f=0,g=d;for(a<b[0].dts&&(c=0,f=g+1);f<=g;){if((e=f+Math.floor((g-f)/2))===d||a>=b[e].dts&&a<b[e+1].dts){c=e;break}b[e].dts<a?f=e+1:g=e-1}return this._list[c]},a}(),b.MediaSegmentInfoList=function(){function a(b){c(this,a),this._type=b,this._list=[],this._lastAppendLocation=-1}return a.prototype.isEmpty=function(){return 0===this._list.length},a.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},a.prototype._searchNearestSegmentBefore=function(a){var b=this._list;if(0===b.length)return-2;var c=b.length-1,d=0,e=0,f=c,g=0;if(a<b[0].originalBeginDts)return g=-1;for(;e<=f;){if((d=e+Math.floor((f-e)/2))===c||a>b[d].lastSample.originalDts&&a<b[d+1].originalBeginDts){g=d;break}b[d].originalBeginDts<a?e=d+1:f=d-1}return g},a.prototype._searchNearestSegmentAfter=function(a){return this._searchNearestSegmentBefore(a)+1},a.prototype.append=function(a){var b=this._list,c=a,d=this._lastAppendLocation,e=0;-1!==d&&d<b.length&&c.originalBeginDts>=b[d].lastSample.originalDts&&(d===b.length-1||d<b.length-1&&c.originalBeginDts<b[d+1].originalBeginDts)?e=d+1:b.length>0&&(e=this._searchNearestSegmentBefore(c.originalBeginDts)+1),this._lastAppendLocation=e,this._list.splice(e,0,c)},a.prototype.getLastSegmentBefore=function(a){var b=this._searchNearestSegmentBefore(a);return b>=0?this._list[b]:null},a.prototype.getLastSampleBefore=function(a){var b=this.getLastSegmentBefore(a);return null!=b?b.lastSample:null},a.prototype.getLastSyncPointBefore=function(a){for(var b=this._searchNearestSegmentBefore(a),c=this._list[b].syncPoints;0===c.length&&b>0;)b--,c=this._list[b].syncPoints;return c.length>0?c[c.length-1]:null},d(a,[{key:"type",get:function(){return this._type}},{key:"length",get:function(){return this._list.length}}]),a}()},function(a,b){"use strict";b.__esModule=!0;var c={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var f=c(16),g=d(f),h=c(6),i=d(h),j=c(19),k=d(j),l=c(32),m=d(l),n=c(96),o=d(n),p=c(110),q=d(p),r=c(33),s=d(r),t=c(53),u=d(t),v=c(27),w=d(v),x=(c(13),function(){function a(b,c){e(this,a),this.TAG="TransmuxingController",this._emitter=new g["default"],this._config=c,b.segments||(b.segments=[{duration:b.duration,filesize:b.filesize,url:b.url}]),"boolean"!=typeof b.cors&&(b.cors=!0),"boolean"!=typeof b.withCredentials&&(b.withCredentials=!1),
this._mediaDataSource=b,this._currentSegmentIndex=0;var d=0;this._mediaDataSource.segments.forEach(function(a){a.timestampBase=d,d+=a.duration,a.cors=b.cors,a.withCredentials=b.withCredentials,c.referrerPolicy&&(a.referrerPolicy=c.referrerPolicy)}),isNaN(d)||this._mediaDataSource.duration===d||(this._mediaDataSource.duration=d),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return a.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},a.prototype.on=function(a,b){this._emitter.addListener(a,b)},a.prototype.off=function(a,b){this._emitter.removeListener(a,b)},a.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},a.prototype._loadSegment=function(a,b){this._currentSegmentIndex=a;var c=this._mediaDataSource.segments[a],d=this._ioctl=new u["default"](c,this._config,a);d.onError=this._onIOException.bind(this),d.onSeeked=this._onIOSeeked.bind(this),d.onComplete=this._onIOComplete.bind(this),d.onRedirect=this._onIORedirect.bind(this),d.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),b?this._demuxer.bindDataSource(this._ioctl):d.onDataArrival=this._onInitChunkArrival.bind(this),d.open(b)},a.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},a.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},a.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},a.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},a.prototype.seek=function(a){if(null!=this._mediaInfo&&this._mediaInfo.isSeekable()){var b=this._searchSegmentIndexContains(a);if(b===this._currentSegmentIndex){var c=this._mediaInfo.segments[b];if(void 0==c)this._pendingSeekTime=a;else{var d=c.getNearestKeyframe(a);this._remuxer.seek(d.milliseconds),this._ioctl.seek(d.fileposition),this._pendingResolveSeekPoint=d.milliseconds}}else{var e=this._mediaInfo.segments[b];if(void 0==e)this._pendingSeekTime=a,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(b);else{var f=e.getNearestKeyframe(a);this._internalAbort(),this._remuxer.seek(a),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[b].timestampBase,this._loadSegment(b,f.fileposition),this._pendingResolveSeekPoint=f.milliseconds,this._reportSegmentMediaInfo(b)}}this._enableStatisticsReporter()}},a.prototype._searchSegmentIndexContains=function(a){for(var b=this._mediaDataSource.segments,c=b.length-1,d=0;d<b.length;d++)if(a<b[d].timestampBase){c=d-1;break}return c},a.prototype._onInitChunkArrival=function(a,b){var c=this,d=null,e=0;if(b>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,e=this._demuxer.parseChunks(a,b);else if((d=o["default"].probe(a)).match){this._demuxer=new o["default"](d,this._config),this._remuxer||(this._remuxer=new q["default"](this._config));var f=this._mediaDataSource;void 0==f.duration||isNaN(f.duration)||(this._demuxer.overridedDuration=f.duration),"boolean"==typeof f.hasAudio&&(this._demuxer.overridedHasAudio=f.hasAudio),"boolean"==typeof f.hasVideo&&(this._demuxer.overridedHasVideo=f.hasVideo),this._demuxer.timestampBase=f.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),e=this._demuxer.parseChunks(a,b)}else d=null,i["default"].e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){c._internalAbort()}),this._emitter.emit(w["default"].DEMUX_ERROR,s["default"].FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),e=0;return e},a.prototype._onMediaInfo=function(a){var b=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},a),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,m["default"].prototype));var c=Object.assign({},a);Object.setPrototypeOf(c,m["default"].prototype),this._mediaInfo.segments[this._currentSegmentIndex]=c,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then(function(){var a=b._pendingSeekTime;b._pendingSeekTime=null,b.seek(a)})},a.prototype._onMetaDataArrived=function(a){this._emitter.emit(w["default"].METADATA_ARRIVED,a)},a.prototype._onScriptDataArrived=function(a){this._emitter.emit(w["default"].SCRIPTDATA_ARRIVED,a)},a.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},a.prototype._onIOComplete=function(a){var b=a,c=b+1;c<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(c)):(this._remuxer.flushStashedSamples(),this._emitter.emit(w["default"].LOADING_COMPLETE),this._disableStatisticsReporter())},a.prototype._onIORedirect=function(a){var b=this._ioctl.extraData;this._mediaDataSource.segments[b].redirectedURL=a},a.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(w["default"].RECOVERED_EARLY_EOF)},a.prototype._onIOException=function(a,b){i["default"].e(this.TAG,"IOException: type = "+a+", code = "+b.code+", msg = "+b.msg),this._emitter.emit(w["default"].IO_ERROR,a,b),this._disableStatisticsReporter()},a.prototype._onDemuxException=function(a,b){i["default"].e(this.TAG,"DemuxException: type = "+a+", info = "+b),this._emitter.emit(w["default"].DEMUX_ERROR,a,b)},a.prototype._onRemuxerInitSegmentArrival=function(a,b){this._emitter.emit(w["default"].INIT_SEGMENT,a,b)},a.prototype._onRemuxerMediaSegmentArrival=function(a,b){if(null==this._pendingSeekTime&&(this._emitter.emit(w["default"].MEDIA_SEGMENT,a,b),null!=this._pendingResolveSeekPoint&&"video"===a)){var c=b.info.syncPoints,d=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,k["default"].safari&&c.length>0&&c[0].originalDts===d&&(d=c[0].pts),this._emitter.emit(w["default"].RECOMMEND_SEEKPOINT,d)}},a.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},a.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},a.prototype._reportSegmentMediaInfo=function(a){var b=this._mediaInfo.segments[a],c=Object.assign({},b);c.duration=this._mediaInfo.duration,c.segmentCount=this._mediaInfo.segmentCount,delete c.segments,delete c.keyframesIndex,this._emitter.emit(w["default"].MEDIA_INFO,c)},a.prototype._reportStatisticsInfo=function(){var a={};a.url=this._ioctl.currentURL,a.hasRedirect=this._ioctl.hasRedirect,a.hasRedirect&&(a.redirectedURL=this._ioctl.currentRedirectedURL),a.speed=this._ioctl.currentSpeed,a.loaderType=this._ioctl.loaderType,a.currentSegmentIndex=this._currentSegmentIndex,a.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(w["default"].STATISTICS_INFO,a)},a}());b["default"]=x,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=a;if(null==c||"object"!==(void 0===c?"undefined":h(c)))throw new w.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!c.hasOwnProperty("type"))throw new w.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(c.type){case"flv":return new o["default"](c,b);default:return new q["default"](c,b)}}function f(){return l["default"].supportMSEH264Playback()}function g(){return l["default"].getFeatureList()}b.__esModule=!0;var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=c(56),j=d(i),k=c(90),l=d(k),m=c(13),n=c(106),o=d(n),p=c(107),q=d(p),r=c(34),s=d(r),t=c(55),u=c(35),v=d(u),w=c(5);j["default"].install();var x={};x.createPlayer=e,x.isSupported=f,x.getFeatureList=g,x.BaseLoader=m.BaseLoader,x.LoaderStatus=m.LoaderStatus,x.LoaderErrors=m.LoaderErrors,x.Events=s["default"],x.ErrorTypes=t.ErrorTypes,x.ErrorDetails=t.ErrorDetails,x.FlvPlayer=o["default"],x.NativePlayer=q["default"],x.LoggingControl=v["default"],window.flvjs||(window.flvjs=x),b["default"]=x,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(6),h=d(g),i=c(54),j=d(i),k=c(13),l=c(99),m=d(l),n=c(103),o=d(n),p=c(104),q=(d(p),c(105)),r=d(q),s=c(102),t=d(s),u=c(101),v=d(u),w=c(100),x=d(w),y=c(5),z=function(){function a(b,c,d){e(this,a),this.TAG="IOController",this._config=c,this._extraData=d,this._stashInitialSize=393216,void 0!=c.stashInitialSize&&c.stashInitialSize>0&&(this._stashInitialSize=c.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,!1===c.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=b,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(b.url),this._refTotalLength=b.filesize?b.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new j["default"],this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return a.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},a.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},a.prototype.isPaused=function(){return this._paused},a.prototype._selectSeekHandler=function(){var a=this._config;if("range"===a.seekType)this._seekHandler=new v["default"](this._config.rangeLoadZeroStart);else if("param"===a.seekType){var b=a.seekParamStart||"bstart",c=a.seekParamEnd||"bend";this._seekHandler=new x["default"](b,c)}else{if("custom"!==a.seekType)throw new y.InvalidArgumentException("Invalid seekType in config: "+a.seekType);if("function"!=typeof a.customSeekHandler)throw new y.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new a.customSeekHandler}},a.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=t["default"];else if(m["default"].isSupported())this._loaderClass=m["default"];else if(o["default"].isSupported())this._loaderClass=o["default"];else{if(!r["default"].isSupported())throw new y.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=r["default"]}},a.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},a.prototype.open=function(a){this._currentRange={from:0,to:-1},a&&(this._currentRange.from=a),this._speedSampler.reset(),a||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},a.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},a.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},a.prototype.resume=function(){if(this._paused){this._paused=!1;var a=this._resumeFrom;this._resumeFrom=0,this._internalSeek(a,!0)}},a.prototype.seek=function(a){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(a,!0)},a.prototype._internalSeek=function(a,b){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(b),this._loader.destroy(),this._loader=null;var c={from:a,to:-1};this._currentRange={from:c.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,c),this._onSeeked&&this._onSeeked()},a.prototype.updateUrl=function(a){if(!a||"string"!=typeof a||0===a.length)throw new y.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=a},a.prototype._expandBuffer=function(a){for(var b=this._stashSize;b+1048576<a;)b*=2;if((b+=1048576)!==this._bufferSize){var c=new ArrayBuffer(b);if(this._stashUsed>0){var d=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(c,0,b).set(d,0)}this._stashBuffer=c,this._bufferSize=b}},a.prototype._normalizeSpeed=function(a){var b=this._speedNormalizeList,c=b.length-1,d=0,e=0,f=c;if(a<b[0])return b[0];for(;e<=f;){if((d=e+Math.floor((f-e)/2))===c||a>=b[d]&&a<b[d+1])return b[d];b[d]<a?e=d+1:f=d-1}},a.prototype._adjustStashSize=function(a){var b=0;(b=this._config.isLive?a:a<512?a:a>=512&&a<=1024?Math.floor(1.5*a):2*a)>8192&&(b=8192);var c=1024*b+1048576;this._bufferSize<c&&this._expandBuffer(c),this._stashSize=1024*b},a.prototype._dispatchChunks=function(a,b){return this._currentRange.to=b+a.byteLength-1,this._onDataArrival(a,b)},a.prototype._onURLRedirect=function(a){this._redirectedURL=a,this._onRedirect&&this._onRedirect(a)},a.prototype._onContentLengthKnown=function(a){a&&this._fullRequestFlag&&(this._totalLength=a,this._fullRequestFlag=!1)},a.prototype._onLoaderChunkArrival=function(a,b,c){if(!this._onDataArrival)throw new y.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(a.byteLength);var d=this._speedSampler.lastSecondKBps;if(0!==d){var e=this._normalizeSpeed(d);this._speedNormalized!==e&&(this._speedNormalized=e,this._adjustStashSize(e))}if(this._enableStash)if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=b),this._stashUsed+a.byteLength<=this._stashSize){var f=new Uint8Array(this._stashBuffer,0,this._stashSize);f.set(new Uint8Array(a),this._stashUsed),this._stashUsed+=a.byteLength}else{var g=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var h=this._stashBuffer.slice(0,this._stashUsed),i=this._dispatchChunks(h,this._stashByteStart);if(i<h.byteLength){if(i>0){var j=new Uint8Array(h,i);g.set(j,0),this._stashUsed=j.byteLength,this._stashByteStart+=i}}else this._stashUsed=0,this._stashByteStart+=i;this._stashUsed+a.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+a.byteLength),g=new Uint8Array(this._stashBuffer,0,this._bufferSize)),g.set(new Uint8Array(a),this._stashUsed),this._stashUsed+=a.byteLength}else{var k=this._dispatchChunks(a,b);if(k<a.byteLength){var l=a.byteLength-k;l>this._bufferSize&&(this._expandBuffer(l),g=new Uint8Array(this._stashBuffer,0,this._bufferSize)),g.set(new Uint8Array(a,k),0),this._stashUsed+=l,this._stashByteStart=b+k}}}else if(0===this._stashUsed){var m=this._dispatchChunks(a,b);if(m<a.byteLength){var n=a.byteLength-m;n>this._bufferSize&&this._expandBuffer(n);var o=new Uint8Array(this._stashBuffer,0,this._bufferSize);o.set(new Uint8Array(a,m),0),this._stashUsed+=n,this._stashByteStart=b+m}}else{this._stashUsed+a.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+a.byteLength);var p=new Uint8Array(this._stashBuffer,0,this._bufferSize);p.set(new Uint8Array(a),this._stashUsed),this._stashUsed+=a.byteLength;var q=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(q<this._stashUsed&&q>0){var r=new Uint8Array(this._stashBuffer,q);p.set(r,0)}this._stashUsed-=q,this._stashByteStart+=q}}},a.prototype._flushStashBuffer=function(a){if(this._stashUsed>0){var b=this._stashBuffer.slice(0,this._stashUsed),c=this._dispatchChunks(b,this._stashByteStart),d=b.byteLength-c;if(c<b.byteLength){if(!a){if(c>0){var e=new Uint8Array(this._stashBuffer,0,this._bufferSize),f=new Uint8Array(b,c);e.set(f,0),this._stashUsed=f.byteLength,this._stashByteStart+=c}return 0}h["default"].w(this.TAG,d+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,d}return 0},a.prototype._onLoaderComplete=function(a,b){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},a.prototype._onLoaderError=function(a,b){switch(h["default"].e(this.TAG,"Loader error, code = "+b.code+", msg = "+b.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,a=k.LoaderErrors.UNRECOVERABLE_EARLY_EOF),a){case k.LoaderErrors.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var c=this._currentRange.to+1;return void(c<this._totalLength&&(h["default"].w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(c,!1)))}a=k.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break;case k.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case k.LoaderErrors.CONNECTING_TIMEOUT:case k.LoaderErrors.HTTP_STATUS_CODE_INVALID:case k.LoaderErrors.EXCEPTION:}if(!this._onError)throw new y.RuntimeException("IOException: "+b.msg);this._onError(a,b)},f(a,[{key:"status",get:function(){return this._loader.status}},{key:"extraData",get:function(){return this._extraData},set:function(a){this._extraData=a}},{key:"onDataArrival",get:function(){return this._onDataArrival},set:function(a){this._onDataArrival=a}},{key:"onSeeked",get:function(){return this._onSeeked},set:function(a){this._onSeeked=a}},{key:"onError",get:function(){return this._onError},set:function(a){this._onError=a}},{key:"onComplete",get:function(){return this._onComplete},set:function(a){this._onComplete=a}},{key:"onRedirect",get:function(){return this._onRedirect},set:function(a){this._onRedirect=a}},{key:"onRecoveredEarlyEof",get:function(){return this._onRecoveredEarlyEof},set:function(a){this._onRecoveredEarlyEof=a}},{key:"currentURL",get:function(){return this._dataSource.url}},{key:"hasRedirect",get:function(){return null!=this._redirectedURL||void 0!=this._dataSource.redirectedURL}},{key:"currentRedirectedURL",get:function(){return this._redirectedURL||this._dataSource.redirectedURL}},{key:"currentSpeed",get:function(){return this._loaderClass===r["default"]?this._loader.currentSpeed:this._speedSampler.lastSecondKBps}},{key:"loaderType",get:function(){return this._loader.type}}]),a}();b["default"]=z,a.exports=b["default"]},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(){c(this,a),this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return a.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},a.prototype.addBytes=function(a){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=a,this._totalBytes+=a):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=a,this._totalBytes+=a):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=a,this._totalBytes+=a,this._lastCheckpoint=this._now())},d(a,[{key:"currentKBps",get:function(){this.addBytes(0);var a=(this._now()-this._lastCheckpoint)/1e3;return 0==a&&(a=1),this._intervalBytes/a/1024}},{key:"lastSecondKBps",get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0}},{key:"averageKBps",get:function(){var a=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/a/1024}}]),a}();b["default"]=e,a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0,b.ErrorDetails=b.ErrorTypes=void 0;var d=c(13),e=c(33),f=function(a){return a&&a.__esModule?a:{"default":a}}(e);b.ErrorTypes={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},b.ErrorDetails={NETWORK_EXCEPTION:d.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:d.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:d.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:d.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:f["default"].FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:f["default"].FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:f["default"].CODEC_UNSUPPORTED}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var e=function(){function a(){d(this,a)}return a.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},Object.assign=Object.assign||function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}return b},"function"!=typeof self.Promise&&c(156).polyfill()},a}();e.install(),b["default"]=e,a.exports=b["default"]},function(a,b,c){var d,e;d=[c(1),c(59),c(120)],void 0!==(e=function(a,b,c){var d={sources:[],tracks:[]};return function(e){e=e||{},a.isArray(e.tracks)||delete e.tracks;var f=a.extend({},d,e);a.isObject(f.sources)&&!a.isArray(f.sources)&&(f.sources=[b(f.sources)]),a.isArray(f.sources)&&0!==f.sources.length||(e.levels?f.sources=e.levels:f.sources=[b(e)]);for(var g=0;g<f.sources.length;g++){var h=f.sources[g];if(h){var i=h["default"];h["default"]=!!i&&"true"===i.toString(),f.sources[g].label||(f.sources[g].label=g.toString()),f.sources[g]=b(f.sources[g])}}return f.sources=a.compact(f.sources),a.isArray(f.tracks)||(f.tracks=[]),a.isArray(f.captions)&&(f.tracks=f.tracks.concat(f.captions),delete f.captions),f.tracks=a.compact(a.map(f.tracks,c)),f}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(20),c(118),c(2),c(4),c(3),c(1)],void 0!==(e=function(a,b,c,d,e,f){return function(){function g(e){c.tryCatch(function(){var c,g=e.responseXML?e.responseXML.childNodes:null,h="";if(g){for(var k=0;k<g.length&&(h=g[k],8===h.nodeType);k++);"xml"===a.localName(h)&&(h=h.nextSibling),"rss"===a.localName(h)&&(c={playlist:b.parse(h)})}if(!c)try{var l=JSON.parse(e.responseText);if(f.isArray(l))c={playlist:l};else{if(!f.isArray(l.playlist))throw null;c=l}}catch(a){return void i("Not a valid RSS/JSON feed")}j.trigger(d.JWPLAYER_PLAYLIST_LOADED,c)})instanceof c.Error&&i()}function h(a){i("Playlist load error: "+a)}function i(a){j.trigger(d.JWPLAYER_ERROR,{message:a||""})}var j=f.extend(this,e);this.load=function(a){c.ajax(a,g,h)},this.destroy=function(){this.off()}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(8),c(1)],void 0!==(e=function(a,b,c){var d={"default":!1,isHEVC:!1};return function(e){if(e&&e.file){(a.isRtmp(e.file)||a.isFlv(e.file))&&a.isMobile()&&e.fallbackfile&&a.isHls(e.fallbackfile)&&(e.file=e.fallbackfile),a.isMobile()||a.isFlvjsSupported()||!a.isHls(e.file)&&!a.isFlv(e.file)||!e.fallbackfile||(e.file=e.fallbackfile);var f=c.extend({},d,e);f.file=b.trim(""+f.file);var g=/^[^\/]+\/(?:x-)?([^\/]+)$/;if(a.isRtmp(f.file)?f.type="rtmp":g.test(f.type)?f.type=f.type.replace(g,"$1"):f.type||(f.type=b.extension(f.file)),f.type){switch(f.type){case"m3u8":case"vnd.apple.mpegurl":f.type="hls";break;case"dash+xml":f.type="dash";break;case"smil":f.type="rtmp";break;case"m4a":f.type="aac"}return c.each(f,function(a,b){""===a&&delete f[b]}),f}}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=[c(2),c(28),c(4),c(3),c(45),c(1)],void 0!==(e=function(a,b,c,d,e,g){var h={FLASH:0,JAVASCRIPT:1,HYBRID:2};return function(i){function j(){switch(b.getPluginPathType(i)){case b.pluginPathType.ABSOLUTE:return i;case b.pluginPathType.RELATIVE:return a.getAbsolutePath(i,window.location.href)}}function k(){g.defer(function(){r=e.loaderstatus.COMPLETE,q.trigger(c.COMPLETE)})}function l(){r=e.loaderstatus.ERROR,q.trigger(c.ERROR,{url:i})}var m,n,o,p,q=g.extend(this,d),r=e.loaderstatus.NEW;this.load=function(){if(r===e.loaderstatus.NEW){if(i.lastIndexOf(".swf")>0)return m=i,r=e.loaderstatus.COMPLETE,void q.trigger(c.COMPLETE);if(b.getPluginPathType(i)===b.pluginPathType.CDN)return r=e.loaderstatus.COMPLETE,void q.trigger(c.COMPLETE);r=e.loaderstatus.LOADING;var a=new e(j());a.on(c.COMPLETE,k),a.on(c.ERROR,l),a.load()}},this.registerPlugin=function(a,b,d,f){p&&(clearTimeout(p),p=void 0),o=b,d&&f?(m=f,n=d):"string"==typeof d?m=d:"function"==typeof d?n=d:d||f||(m=a),r=e.loaderstatus.COMPLETE,q.trigger(c.COMPLETE)},this.getStatus=function(){return r},this.getPluginName=function(){return b.getPluginName(i)},this.getFlashPath=function(){if(m)switch(b.getPluginPathType(m)){case b.pluginPathType.ABSOLUTE:return m;case b.pluginPathType.RELATIVE:return i.lastIndexOf(".swf")>0?a.getAbsolutePath(m,window.location.href):a.getAbsolutePath(m,j())}return null},this.getJS=function(){return n},this.getTarget=function(){return o},this.getPluginmode=function(){return void 0!==(void 0===m?"undefined":f(m))&&void 0!==(void 0===n?"undefined":f(n))?h.HYBRID:void 0!==(void 0===m?"undefined":f(m))?h.FLASH:void 0!==(void 0===n?"undefined":f(n))?h.JAVASCRIPT:void 0},this.getNewInstance=function(a,b,c){return new n(a,b,c)},this.getURL=function(){return i}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(1),c(134)],void 0!==(e=function(a,b,c){function d(b){if("hls"===b.type)if(!1!==b.androidhls){var c=a.isAndroidNative;if(c(2)||c(3)||c("4.0"))return!1;if(a.isAndroid())return!0}else if(a.isAndroid())return!1;return null}return[{name:"h265web",supports:function(a){return a.isHEVC}},{name:"html5",supports:function(b){var e={aac:"audio/mp4",mp4:"video/mp4",f4v:"video/mp4",m4v:"video/mp4",mov:"video/mp4",mkv:"video/mp4",mp3:"audio/mpeg",wav:"audio/wav",mpeg:"audio/mpeg",ogv:"video/ogg",ogg:"video/ogg",oga:"video/ogg",vorbis:"video/ogg",webm:"video/webm",f4a:"video/aac",m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",hls:"application/vnd.apple.mpegurl"};a.isFlvjsSupported()&&(e.flv="video/mp4");var f=b.file,g=b.type,h=d(b);if(null!==h)return h;if(a.isRtmp(f,g))return!1;if(!e[g])return!1;if(a.isEdge()&&a.isHls(f,g))return!1;if(a.isPoorIE())return!1;if(a.isHls(f,g)&&a.isSafari()&&!a.isMobile())return!1;if(c.canPlayType){return!!c.canPlayType(e[g])}return!1}},{name:"videojs",supports:function(b){return!(a.isChrome()&&parseInt(a.getChromeVersion())<50)&&window.videojs&&window.videojs.MediaSource&&window.videojs.MediaSource.supportsNativeMediaSources()&&a.isHls(b.file,b.type)}},{name:"flash",supports:function(c){var d={flv:"video",f4v:"video",mov:"video",m4a:"video",m4v:"video",mp4:"video",aac:"video",f4a:"video",mp3:"sound",mpeg:"sound",smil:"rtmp",m3u8:"hls",hls:"hls"},e=b.keys(d);if(!a.isFlashSupported())return!1;var f=c.file,g=c.type;return!!a.isRtmp(f,g)||b.contains(e,g)}}]}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1),c(44)],void 0!==(e=function(a,b){function c(a){a.onload=null,a.onprogress=null,a.onreadystatechange=null,a.onerror=null,"abort"in a&&a.abort()}function d(b,d){return function(e){var f=e&&e.currentTarget||d.xhr;if(clearTimeout(d.timeoutId),d.retryWithoutCredentials&&d.xhr.withCredentials){c(f);var g=a.extend({},d,{xhr:null,withCredentials:!1,retryWithoutCredentials:!1});return void l(g)}d.onerror(b,d.url,f)}}function e(a){return function(b){var c=b&&b.currentTarget||a.xhr;if(4===c.readyState){if(clearTimeout(a.timeoutId),c.status>=400){var d;return d=404===c.status?"File not found":c.status+"("+c.statusText+")",a.onerror(d,a.url,c)}if(200===c.status)return f(a)(b)}}}function f(a){return function(c){var d=c&&c.currentTarget||a.xhr;if(clearTimeout(a.timeoutId),a.responseType){if("json"===a.responseType)return g(d,a)}else{var e,f=d.responseXML;if(f)try{e=f.firstChild}catch(a){}if(f&&e)return h(d,f,a);if(j&&d.responseText&&!f&&(f=b.parseXML(d.responseText))&&f.firstChild)return h(d,f,a);if(a.requireValidXML)return void a.onerror("Invalid XML",a.url,d)}a.oncomplete(d)}}function g(b,c){if(!b.response||a.isString(b.response)&&'"'!==b.responseText.substr(1))try{b=a.extend({},b,{response:JSON.parse(b.responseText)})}catch(a){return void c.onerror("Invalid JSON",c.url,b)}return c.oncomplete(b)}function h(b,c,d){var e=c.documentElement;return d.requireValidXML&&("parsererror"===e.nodeName||e.getElementsByTagName("parsererror").length)?void d.onerror("Invalid XML",d.url,b):(b.responseXML||(b=a.extend({},b,{responseXML:c})),d.oncomplete(b))}var i=function(){},j=!1,k=function(a){var b=document.createElement("a"),c=document.createElement("a");b.href=location.href;try{return c.href=a,c.href=c.href,b.protocol+"//"+b.host!=c.protocol+"//"+c.host}catch(a){}return!0},l=function(b,g,h,l){a.isObject(b)&&(l=b,b=l.url);var m,n=a.extend({xhr:null,url:b,withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,oncomplete:g||i,onerror:h||i,mimeType:l&&!l.responseType?"text/xml":"",requireValidXML:!1,responseType:l&&l.plainText?"text":""},l);if("XDomainRequest"in window&&k(b))m=n.xhr=new window.XDomainRequest,m.onload=f(n),m.ontimeout=m.onprogress=i,j=!0;else{
if(!("XMLHttpRequest"in window))return void n.onerror("",b);m=n.xhr=new window.XMLHttpRequest,m.onreadystatechange=e(n)}var o=d("",n);m.onerror=o,"overrideMimeType"in m?n.mimeType&&m.overrideMimeType(n.mimeType):j=!0;try{b=b.replace(/#.*$/,""),m.open("GET",b,!0)}catch(a){return o(a),m}if(n.responseType)try{m.responseType=n.responseType}catch(a){}n.timeout&&(n.timeoutId=setTimeout(function(){c(m),n.onerror("Timeout",b,m)},n.timeout),m.onabort=function(){clearTimeout(n.timeoutId)});try{n.withCredentials&&"withCredentials"in m&&(m.withCredentials=!0),m.send()}catch(a){o(a)}return m};return{ajax:l,crossdomain:k}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1)],void 0!==(e=function(a){function b(a){return function(){return d(a)}}var c={},d=a.memoize(function(a){return null!==navigator.userAgent.toLowerCase().match(a)}),e=c.isInt=function(a){return parseFloat(a)%1==0};c.isFlashSupported=function(){var a=c.flashVersion();return a&&a>=31},c.isFF=b(/firefox/i),c.isIPod=b(/iP(hone|od)/i),c.isIPad=b(/iPad/i),c.isSafari602=b(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),c.isOSX=b(/Mac OS X/i),c.isEdge=b(/\sedge\/\d+/i);var f=c.isIETrident=function(a){return!!c.isEdge()||(a?(a=parseFloat(a).toFixed(1),d(new RegExp("trident/.+rv:\\s*"+a,"i"))):d(/trident/i))},g=c.isMSIE=function(a){return a?(a=parseFloat(a).toFixed(1),d(new RegExp("msie\\s*"+a,"i"))):d(/msie/i)},h=b(/chrome/i);c.isChrome=function(){return h()&&!c.isEdge()},c.isChrome66=function(){var a=window.navigator.userAgent.toLowerCase(),b=a.match(/chrome\/([\d.]+)/);return!!(this.isChrome()&&b&&b[1]&&parseInt(b[1])>=66)},c.isIE=function(a){return a?(a=parseFloat(a).toFixed(1),a>=11?f(a):g(a)):g()||f()},c.isSafari=function(){return d(/safari/i)&&!d(/chrome/i)&&!d(/chromium/i)&&!d(/android/i)};var i=c.isIOS=function(a){return d(a?new RegExp("iP(hone|ad|od).+\\s(OS\\s"+a+"|.*\\sVersion/"+a+")","i"):/iP(hone|ad|od)/i)};c.isAndroidNative=function(a){return j(a,!0)};var j=c.isAndroid=function(a,b){return!(b&&d(/chrome\/[123456789]/i)&&!d(/chrome\/18/))&&(a?(e(a)&&!/\./.test(a)&&(a+="."),d(new RegExp("Android\\s*"+a,"i"))):d(/Android/i))};return c.isMobile=function(){return i()||j()},c.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName},c.flashVersion=function(){if(c.isAndroid())return 0;var a,b=navigator.plugins;if(b&&(a=b["Shockwave Flash"])&&a.description)return parseFloat(a.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if("undefined"!=typeof window.ActiveXObject){try{if(a=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(a.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(a){return 0}return a}return 0},c.getBrowserInfo=function(){var a=window.navigator.userAgent.toLowerCase(),b="";if(this.isIE())b=a.match(/msie ([\d.]+)/)?"IE-"+a.match(/msie ([\d.]+)/)[1]:"IE-unknown";else if(this.isChrome()){var c=a.match(/chrome\/([\d.]+)/);b=c&&c.length>1?"Chrome-"+c[1]:"Chrome-unknown"}else if(this.isFF())b="Firefox-"+a.match(/firefox\/([\d.]+)/)[1];else if(this.isSafari()){var d=a.match(/version\/([\d.]+)/);b="Safari"+(d&&d.length?"-"+a.match(/version\/([\d.]+)/)[1]:"")}else b=i()?"ios":j()?"android":"other";return b},c.isPoorIE=function(){return this.isIE()&&(g(8)||g(7)||g(6)||document.documentMode&&document.documentMode<=8)},c.getChromeVersion=function(){var a=window.navigator.userAgent.toLowerCase();if(this.isChrome()){var b=a.match(/chrome\/([\d.]+)/);return b&&b.length>1?b[1]:-1}return-1},c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(3),c(1)],void 0!==(e=function(a,b){function c(){}var d=function(a,c){var d,e=this;d=a&&b.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},b.extend(d,e,c);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&b.extend(d.prototype,a),d.__super__=e.prototype,d};return c.extend=d,b.extend(c.prototype,a),c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1)],void 0!==(e=function(a){var b={},c={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"};return b.utf8ArrayToStr=function(a,b){var c,d,e,f,g,h;for(c="",e=a.length,d=b||0;d<e;)if(0!==(f=a[d++])&&3!==f)switch(f>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(f);break;case 12:case 13:g=a[d++],c+=String.fromCharCode((31&f)<<6|63&g);break;case 14:g=a[d++],h=a[d++],c+=String.fromCharCode((15&f)<<12|(63&g)<<6|(63&h)<<0)}return c},b.utf16BigEndianArrayToStr=function(a,b){var c,d,e;for(c="",e=a.length-1,d=b||0;d<e;)254===a[d]&&255===a[d+1]||(c+=String.fromCharCode((a[d]<<8)+a[d+1])),d+=2;return c},b.syncSafeInt=function(a){var c=b.arrayToInt(a);return 127&c|(32512&c)>>1|(8323072&c)>>2|(2130706432&c)>>3},b.arrayToInt=function(a){for(var b="0x",c=0;c<a.length;c++)b+=a[c].toString(16);return parseInt(b)},b.parseID3=function(d){return a.reduce(d,function(d,e){if(!("value"in e)&&"data"in e&&e.data instanceof ArrayBuffer){var f=e,g=new Uint8Array(f.data),h=g.length;e={value:{key:"",data:""}};for(var i=10;i<14&&i<g.length&&0!==g[i];)e.value.key+=String.fromCharCode(g[i]),i++;var j=19,k=g[j];3!==k&&0!==k||(k=g[++j],h--);var l=0;if(1!==k&&2!==k)for(var m=j+1;m<h;m++)if(0===g[m]){l=m-j;break}if(l>0){var n=b.utf8ArrayToStr(g.subarray(j,j+=l),0);if("PRIV"===e.value.key){if("com.apple.streaming.transportStreamTimestamp"===n){var o=1&b.syncSafeInt(g.subarray(j,j+=4)),p=b.syncSafeInt(g.subarray(j,j+=4));o&&(p+=4294967296),e.value.data=p}else e.value.data=b.utf8ArrayToStr(g,j+1);e.value.info=n}else e.value.info=n,e.value.data=b.utf8ArrayToStr(g,j+1)}else{var q=g[j];e.value.data=1===q||2===q?b.utf16BigEndianArrayToStr(g,j+1):b.utf8ArrayToStr(g,j+1)}}if(c.hasOwnProperty(e.value.key)&&(d[c[e.value.key]]=e.value.data),e.value.info){var r=d[e.value.key];a.isObject(r)||(r={},d[e.value.key]=r),r[e.value.info]=e.value.data}else d[e.value.key]=e.value.data;return d},{})},b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1)],void 0!==(e=function(a){return function(){var b={},c={},d={},e={};return{start:function(c){b[c]=a.now(),d[c]=d[c]+1||1},end:function(d){if(b[d]){var e=a.now()-b[d];c[d]=c[d]+e||e}},dump:function(){return{counts:d,sums:c,events:e}},tick:function(b,c){e[b]=c||a.now()},between:function(a,b){return e[b]&&e[a]?e[b]-e[a]:-1}}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}b.__esModule=!0,b.HandlebarsEnvironment=e;var f=c(12),g=c(17),h=d(g),i=c(68),j=c(158),k=c(70),l=d(k),m=c(69);b.VERSION="4.7.7";b.COMPILER_REVISION=8;b.LAST_COMPATIBLE_COMPILER_REVISION=7;var n={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};b.REVISION_CHANGES=n;var o="[object Object]";e.prototype={constructor:e,logger:l["default"],log:l["default"].log,registerHelper:function(a,b){if(f.toString.call(a)===o){if(b)throw new h["default"]("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===o)f.extend(this.partials,a);else{if(void 0===b)throw new h["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===o){if(b)throw new h["default"]("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]},resetLoggedPropertyAccesses:function(){m.resetLoggedProperties()}};var p=l["default"].log;b.log=p,b.createFrame=f.createFrame,b.logger=l["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){h["default"](a),j["default"](a),l["default"](a),n["default"](a),p["default"](a),r["default"](a),t["default"](a)}function f(a,b,c){a.helpers[b]&&(a.hooks[b]=a.helpers[b],c||delete a.helpers[b])}b.__esModule=!0,b.registerDefaultHelpers=e,b.moveHelperToHooks=f;var g=c(160),h=d(g),i=c(161),j=d(i),k=c(162),l=d(k),m=c(163),n=d(m),o=c(164),p=d(o),q=c(165),r=d(q),s=c(166),t=d(s)},function(a,b,c){"use strict";function d(a){var b=Object.create(null);b.constructor=!1,b.__defineGetter__=!1,b.__defineSetter__=!1,b.__lookupGetter__=!1;var c=Object.create(null);return c.__proto__=!1,{properties:{whitelist:i.createNewLookupObject(c,a.allowedProtoProperties),defaultValue:a.allowProtoPropertiesByDefault},methods:{whitelist:i.createNewLookupObject(b,a.allowedProtoMethods),defaultValue:a.allowProtoMethodsByDefault}}}function e(a,b,c){return"function"==typeof a?f(b.methods,c):f(b.properties,c)}function f(a,b){return void 0!==a.whitelist[b]?!0===a.whitelist[b]:void 0!==a.defaultValue?a.defaultValue:(g(b),!1)}function g(a){!0!==l[a]&&(l[a]=!0,k.log("error",'Handlebars: Access has been denied to resolve the property "'+a+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}function h(){Object.keys(l).forEach(function(a){delete l[a]})}b.__esModule=!0,b.createProtoAccessControl=d,b.resultIsAllowed=e,b.resetLoggedProperties=h;var i=c(167),j=c(70),k=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(j),l=Object.create(null)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(12),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];console[b].apply(console,d)}}};b["default"]=e,a.exports=b["default"]},function(a,b,c){var d;void 0!==(d=function(require,a,b){function c(a,b){e(b,f(a))}function d(a){var b=k[a];if(b){for(var c=Object.keys(b),d=0;d<c.length;d+=1)for(var e=b[c[d]],f=0;f<e.parts.length;f+=1)e.parts[f]();delete k[a]}}function e(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=(k[a]||{})[d.id];if(e){for(var f=0;f<e.parts.length;f++)e.parts[f](d.parts[f]);for(;f<d.parts.length;f++)e.parts.push(i(a,d.parts[f]))}else{for(var g=[],f=0;f<d.parts.length;f++)g.push(i(a,d.parts[f]));k[a]=k[a]||{},k[a][d.id]={id:d.id,parts:g}}}}function f(a){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d],f=e[0],g=e[1],h=e[2],i={css:g,media:h};c[f]?c[f].parts.push(i):b.push(c[f]={id:f,parts:[i]})}return b}function g(a){m().appendChild(a)}function h(a){var b=document.createElement("style");return b.type="text/css",b.setAttribute("data-jwplayer-id",a),g(b),b}function i(a,b){var c,d,e,f=l[a];f||(f=l[a]={element:h(a),counter:0});var g=f.counter++;return c=f.element,d=j.bind(null,c,g,!1),e=j.bind(null,c,g,!0),d(b),function(a){if(a){if(a.css===b.css&&a.media===b.media)return;d(b=a)}else e()}}function j(a,b,c,d){var e=c?"":d.css;if(a.styleSheet)a.styleSheet.cssText=n(b,e);else{var f=document.createTextNode(e),g=a.childNodes;g[b]&&a.removeChild(g[b]),g.length?a.insertBefore(f,g[b]):a.appendChild(f)}}var k={},l={},m=function(a){var b;return function(){return void 0===b&&(b=a.apply(this,arguments)),b}}(function(){return document.head||document.getElementsByTagName("head")[0]});b.exports={style:c,clear:d};var n=function(){var a=[];return function(b,c){return a[b]=c,a.filter(Boolean).join("\n")}}()}.call(b,c,b,a))&&(a.exports=d)},,function(a,b,c){b=a.exports=c(155)(),
b.push([a.id,".jw-reset{color:inherit;background-color:transparent;padding:0;margin:0;float:none;font-family:Arial,Helvetica,sans-serif;font-size:1em;line-height:1em;list-style:none;text-align:left;text-transform:none;vertical-align:baseline;border:0;direction:ltr;font-variant:inherit;font-stretch:inherit;-webkit-tap-highlight-color:rgba(255,255,255,0)}@font-face{font-family:jw-icons;src:url("+c(186)+') format("woff"),url('+c(187)+') format("truetype");font-weight:400;font-style:normal}.jw-controlbar .jw-menu .jw-option:before,.jw-icon-display,.jw-icon-inline,.jw-icon-tooltip{font-family:jw-icons;-webkit-font-smoothing:antialiased;font-style:normal;font-weight:400;text-transform:none;background-color:transparent;font-variant:normal;-ms-font-feature-settings:"liga" 1;-o-font-feature-settings:"liga";font-feature-settings:"liga";-moz-osx-font-smoothing:grayscale}.jw-icon-audio-tracks:before{content:"\\E600"}.jw-icon-buffer:before{content:"\\E601"}.jw-icon-cast:before{content:"\\E603"}.jw-icon-cast.jw-off:before{content:"\\E602"}.jw-icon-cc:before{content:"\\E605"}.jw-icon-cue:before,.jw-icon-menu-bullet:before{content:"\\E606"}.jw-icon-error:before{content:"\\E607"}.jw-icon-fullscreen:before{content:"\\E608"}.jw-icon-fullscreen.jw-off:before{content:"\\E613"}.jw-icon-hd:before{content:none}.jw-rightclick-logo:before,.jw-watermark:before{content:"\\E60B"}.jw-icon-next:before{content:"\\E60C"}.jw-icon-pause:before{content:"\\E60D"}.jw-icon-play:before{content:"\\E60E"}.jw-icon-prev:before{content:"\\E60F"}.jw-icon-replay:before{content:"\\E610"}.jw-icon-volume:before{content:"\\E612"}.jw-icon-volume.jw-off:before{content:"\\E611"}.jw-icon-more:before{content:"\\E614"}.jw-icon-close:before{content:"\\E615"}.jw-icon-playlist:before{content:"\\E616"}.jw-icon-barlogo:before{content:"\\E617"}.jw-icon-barlogo-new:before{content:"\\E618"}.jwplayer{width:100%;font-size:16px;position:relative;display:block;min-height:0;overflow:visible;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;background-color:#000;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.jwplayer *{box-sizing:inherit}.jwplayer.jw-flag-aspect-mode{height:auto!important}.jwplayer.jw-flag-aspect-mode .jw-aspect{display:block}.jwplayer .jw-aspect{display:none}.jwplayer.jw-no-focus:focus,.jwplayer .jw-swf{outline:none}.jwplayer.jw-ie:focus{outline:1px dotted #585858}.jwplayer:hover .jw-display-icon-container{background-color:#333;background:#333;background-size:#333}.jw-adv,.jw-controls,.jw-media,.jw-overlays,.jw-preview{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}.jwplayer .jw-adv{background-size:100% 100%;cursor:pointer}.jwplayer .jw-adv .adv-countdown{position:absolute;width:95px;padding-left:10px;height:30px;line-height:30px;background-color:#202020;opacity:.7;color:#ee6002;font-size:14px;top:0;right:0;display:none}.jwplayer .jw-adv .adv-close{position:absolute;height:22px;line-height:22px;color:#fff;font-weight:700;font-size:14px;width:20px;top:0;right:5px;display:none;text-align:center}.jw-media{overflow:hidden;cursor:pointer}.jw-overlays{cursor:auto}.jw-media.jw-media-show{visibility:visible;opacity:1}.jw-controls.jw-controls-disabled{display:none}.jw-controls .jw-controls-right{position:absolute;top:0;right:0;left:0;bottom:2em}.jw-warning{color:red;top:30px;right:10px;position:absolute;z-index:10000;width:320px;display:none}.jw-warning a{color:#108cee}.jw-marquee{opacity:0;color:#fff;width:auto;font-size:16px;font-weight:700;white-space:nowrap;position:absolute}@keyframes marquee1{0%{left:100%}to{left:-110px}}@keyframes marquee2{0%{left:100%}to{left:-110px}}.jw-text{height:1em;font-family:Arial,Helvetica,sans-serif;font-size:.75em;font-style:normal;font-weight:400;color:#fff;text-align:center;font-variant:normal;font-stretch:normal}.jw-plugin{position:absolute;bottom:2.5em}.jw-plugin .jw-banner{max-width:100%;opacity:0;cursor:pointer;position:absolute;margin:auto auto 0;left:0;right:0;bottom:0;display:block}.jw-cast-screen{width:100%;height:100%}.jw-instream{position:absolute;top:0;right:0;bottom:0;left:0;display:none}.jw-icon-playback:before{content:"\\E60E"}.jw-captions,.jw-controls,.jw-overlays,.jw-preview,.jw-title{pointer-events:none}.jw-controlbar,.jw-display-icon-container,.jw-dock,.jw-logo,.jw-media,.jw-overlays>div,.jw-skip{pointer-events:all}.jwplayer video{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;margin:auto;background:transparent}.jwplayer video::-webkit-media-controls-start-playback-button{display:none}.jwplayer.jw-stretch-uniform video{-o-object-fit:contain;object-fit:contain}.jwplayer.jw-stretch-none video{-o-object-fit:none;object-fit:none}.jwplayer.jw-stretch-fill video{-o-object-fit:cover;object-fit:cover}.jwplayer.jw-stretch-exactfit video{-o-object-fit:fill;object-fit:fill}.jw-adv,.jw-click,.jw-preview{position:absolute;width:100%;height:100%}.jw-adv,.jw-preview{display:none;opacity:1;visibility:visible;background:#000 no-repeat 50% 50%}.jw-error .jw-preview,.jw-stretch-uniform .jw-preview,.jwplayer .jw-preview{background-size:100% 100%}.jw-stretch-none .jw-preview{background-size:auto auto}.jw-stretch-fill .jw-preview{background-size:cover}.jw-stretch-exactfit .jw-preview{background-size:100% 100%}.jw-display-icon-container{position:relative;top:50%;display:table;height:3.5em;width:3.5em;margin:-1.75em auto 0;cursor:pointer}.jw-display-icon-container .jw-icon-display{position:relative;display:table-cell;text-align:center;vertical-align:middle!important;background-position:50% 50%;background-repeat:no-repeat;font-size:2em}.jw-flag-audio-player .jw-display-icon-container,.jw-flag-dragging .jw-display-icon-container{display:none}.jw-icon{font-family:jw-icons;-webkit-font-smoothing:antialiased;font-style:normal;font-weight:400;text-transform:none;background-color:transparent;font-variant:normal;-ms-font-feature-settings:"liga" 1;-o-font-feature-settings:"liga";font-feature-settings:"liga";-moz-osx-font-smoothing:grayscale}.jw-controlbar{display:table;position:absolute;right:0;left:0;bottom:0;height:2em;padding:0 .25em}.jw-controlbar .jw-hidden{display:none}.jw-controlbar.jw-drawer-expanded .jw-controlbar-center-group,.jw-controlbar.jw-drawer-expanded .jw-controlbar-left-group{opacity:0}.jw-controlbar-textshow .jw-controlbar-center-group .jw-slider-time,.jw-controlbar-textshow .jw-controlbar-center-group .jw-text-duration,.jw-controlbar-textshow .jw-controlbar-center-group .jw-text-elapsed{display:none}.jw-controlbar-textshow .jw-controlbar-center-group .jw-text-alt{display:inline}.jw-background-color{background-color:#414040}.jw-group{display:table-cell}.jw-controlbar-center-group{width:100%;padding:0 .25em}.jw-controlbar-center-group .jw-slider-time,.jw-controlbar-center-group .jw-text-alt{padding:0}.jw-controlbar-center-group .jw-text-alt{display:none}.jw-controlbar-left-group,.jw-controlbar-right-group{white-space:nowrap}.jw-icon-display:hover,.jw-icon-inline:hover,.jw-icon-tooltip:hover,.jw-knob:hover,.jw-option:before:hover{color:#eee}.jw-icon-inline,.jw-icon-tooltip,.jw-slider-horizontal,.jw-text-duration,.jw-text-elapsed{display:inline-block;height:2em;position:relative;line-height:2em;vertical-align:middle;cursor:pointer}.jw-icon-inline,.jw-icon-tooltip{min-width:1.25em;text-align:center}.jw-icon-playback{min-width:2.25em}.jw-icon-barlogo{font-size:19px;min-width:1.75em}.jw-icon-barlogo-new{font-size:20px;min-width:1.5em;height:1em;line-height:1em}.jw-icon-volume{min-width:1.75em;text-align:left}.jw-time-tip{line-height:1em;pointer-events:none}.jw-icon-inline:after,.jw-icon-tooltip:after{width:100%;height:100%;font-size:1em}.jw-icon-cast,.jw-icon-inline.jw-icon-volume,.jw-slider-volume.jw-slider-horizontal{display:none}.jw-icon-hd .jw-hd-label{font-size:12px;vertical-align:text-top;display:inline-block;height:14px;line-height:14px}.jw-controlbar .jw-icon-playrate .jw-overlay{bottom:1.5em}.jw-controlbar .jw-icon-playrate .jw-playrate-label{font-size:.75em;border-left:1px solid #666;padding:0 .7em;display:inline-block;line-height:16px;height:16px;vertical-align:text-top}.jw-controlbar .jw-icon-cc:before{content:none}.jw-controlbar .jw-icon-cc .jw-cc-label{font-size:.75em;padding:0 .7em;display:inline-block;line-height:16px;height:16px;vertical-align:text-top}.jw-dock{margin:.75em;display:block;opacity:1;clear:right}.jw-dock:after{content:"";clear:both;display:block}.jw-dock-button{cursor:pointer;float:right;position:relative;width:2.5em;height:2.5em;margin:.5em}.jw-dock-button .jw-arrow{display:none;position:absolute;bottom:-.2em;width:.5em;height:.2em;left:50%;margin-left:-.25em}.jw-dock-button .jw-overlay{display:none;position:absolute;top:2.5em;right:0;margin-top:.25em;padding:.5em;white-space:nowrap}.jw-dock-button:hover .jw-arrow,.jw-dock-button:hover .jw-overlay{display:block}.jw-dock-image{width:100%;height:100%;background-position:50% 50%;background-repeat:no-repeat;opacity:.75}.jw-title{display:none;position:absolute;top:0;width:100%;font-size:.875em;height:8em;background:linear-gradient(180deg,#000 0,#000 18%,transparent)}.jw-title-primary,.jw-title-secondary{padding:.75em 1.5em;min-height:2.5em;color:#fff;white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden}.jw-title-primary{font-weight:700}.jw-title-secondary{margin-top:-.5em}.jw-slider-container{display:inline-block;height:1em;position:relative;touch-action:none}.jw-buffer,.jw-progress,.jw-rail{position:absolute;cursor:pointer}.jw-progress{background-color:#fff}.jw-rail{background-color:#aaa}.jw-buffer{background-color:#202020}.jw-cue,.jw-knob{position:absolute;cursor:pointer}.jw-cue{background-color:#fff;width:.1em;height:.4em}.jw-knob{background-color:#aaa;width:.4em;height:.4em}.jw-slider-horizontal{width:4em;height:1em}.jw-slider-horizontal.jw-slider-volume{margin-right:5px}.jw-slider-horizontal .jw-buffer,.jw-slider-horizontal .jw-progress,.jw-slider-horizontal .jw-rail{width:100%;height:.4em}.jw-slider-horizontal .jw-buffer,.jw-slider-horizontal .jw-progress{width:0}.jw-slider-horizontal .jw-progress,.jw-slider-horizontal .jw-rail,.jw-slider-horizontal .jw-slider-container{width:100%}.jw-slider-horizontal .jw-knob{left:0;margin-left:-.325em}.jw-slider-vertical{width:.75em;height:4em;bottom:0;position:absolute;padding:1em}.jw-slider-vertical .jw-buffer,.jw-slider-vertical .jw-progress,.jw-slider-vertical .jw-rail{bottom:0;height:100%}.jw-slider-vertical .jw-buffer,.jw-slider-vertical .jw-progress{height:0}.jw-slider-vertical .jw-progress,.jw-slider-vertical .jw-rail,.jw-slider-vertical .jw-slider-container{bottom:0;width:.75em;height:100%;left:0;right:0;margin:0 auto}.jw-slider-vertical .jw-slider-container{height:4em;position:relative}.jw-slider-vertical .jw-knob{bottom:0;left:0;right:0;margin:0 auto}.jw-slider-time{right:0;left:0;width:100%}.jw-tooltip-time{position:absolute}.jw-slider-volume .jw-buffer{display:none}.jwplayer .jw-process-adv{position:absolute;top:0;left:0;display:none}.jwplayer .jw-process-adv img{border:none}.jw-captions{position:absolute;display:none;margin:0 auto;width:100%;left:0;bottom:3em;right:0;max-width:90%;text-align:center}.jw-captions.jw-captions-enabled{display:block}.jw-captions-window{display:none;padding:.25em;border-radius:.25em}.jw-captions-text,.jw-captions-window.jw-captions-window-active{display:inline-block}.jw-captions-text{color:#fff;background-color:#000;word-wrap:break-word;white-space:pre-line;font-style:normal;font-weight:400;text-align:center;text-decoration:none;line-height:1.3em;padding:.1em .8em}.jwplayer video::-webkit-media-controls{justify-content:flex-start}.jwplayer video::-webkit-media-text-track-container{max-height:84.5%;line-height:1.3em}.jwplayer.jw-flag-compact-player video::-webkit-media-text-track-container{max-height:82%}.jwplayer .jw-rightclick{display:none;position:absolute;white-space:nowrap}.jwplayer .jw-rightclick.jw-open{display:block}.jwplayer .jw-rightclick ul{list-style:none;font-weight:700;border-radius:.15em;margin:0;border:1px solid #444;padding:0}.jwplayer .jw-rightclick ul li{background-color:#000;border-bottom:1px solid #444;margin:0}.jwplayer .jw-rightclick ul li .jw-rightclick-logo{font-size:2em;color:#ff0147;vertical-align:middle;padding-right:.3em;margin-right:.3em;border-right:1px solid #444}.jwplayer .jw-rightclick ul li a{color:#fff;text-decoration:none;padding:1em;display:block;font-size:.6875em;line-height:1em}.jwplayer .jw-rightclick ul li:last-child{border-bottom:none}.jwplayer .jw-rightclick ul li:hover{background-color:#1a1a1a;cursor:pointer}.jwplayer .jw-rightclick ul .jw-featured{background-color:#252525;vertical-align:middle}.jwplayer .jw-rightclick ul .jw-featured a{color:#777}.jw-logo{position:absolute;margin:.75em;cursor:pointer;pointer-events:all;background-repeat:no-repeat;background-size:contain;top:auto;right:auto;left:auto;bottom:auto}.jw-logo .jw-flag-audio-player{display:none}.jw-logo-top-right{top:0;right:0}.jw-logo-top-left{top:0;left:0}.jw-logo-bottom-left{bottom:0;left:0}.jw-logo-bottom-right,.jw-watermark{bottom:0;right:0}.jw-watermark{position:absolute;top:50%;left:0;text-align:center;font-size:14em;color:#eee;opacity:.33;pointer-events:none}.jw-icon-tooltip.jw-open .jw-overlay{opacity:1;visibility:visible}.jw-icon-tooltip.jw-hidden,.jw-icon-tooltip.jw-open-drawer:before,.jw-overlay-horizontal{display:none}.jw-icon-tooltip.jw-open-drawer .jw-overlay-horizontal{opacity:1;display:inline-block;vertical-align:top}.jw-overlay:before{position:absolute;top:0;bottom:0;left:-50%;width:100%;background-color:transparent;content:" "}.jw-slider-time .jw-overlay:before{height:1em;top:auto}.jw-menu,.jw-time-tip,.jw-volume-tip{position:relative;left:-50%;border:1px solid #000;margin:0}.jw-volume-value-tip{font-size:12px;position:absolute;top:-26px;right:20px;background-color:#000;line-height:20px;border-radius:3px;padding:0 3px;color:#fff}.jw-volume-tip{width:100%;height:100%;display:block}.jw-time-tip{text-align:center;font-family:inherit;color:#aaa;bottom:1em;border:4px solid #000}.jw-time-tip .jw-text{line-height:1em}.jw-controlbar .jw-overlay{margin:0;position:absolute;bottom:2em;left:50%;opacity:0;visibility:hidden}.jw-controlbar .jw-overlay .jw-contents{position:relative}.jw-controlbar .jw-option{position:relative;white-space:nowrap;cursor:pointer;list-style:none;height:1.5em;font-family:inherit;line-height:1.5em;color:#aaa;padding:0 .5em;font-size:.8em}.jw-controlbar .jw-option:before:hover,.jw-controlbar .jw-option:hover{color:#eee}.jw-controlbar .jw-option:before{padding-right:.125em}.jw-playlist-container ::-webkit-scrollbar-track{background-color:#333;border-radius:10px}.jw-playlist-container ::-webkit-scrollbar{width:5px;border:10px solid #000;border-bottom:0;border-top:0}.jw-playlist-container ::-webkit-scrollbar-thumb{background-color:#fff;border-radius:5px}.jw-tooltip-title{border-bottom:1px solid #444;text-align:left;padding-left:.7em}.jw-playlist{max-height:11em;min-height:4.5em;overflow-x:hidden;overflow-y:scroll;width:calc(100% - 4px)}.jw-playlist .jw-option{height:3em;margin-right:5px;color:#fff;padding-left:1em;font-size:.8em}.jw-playlist .jw-label,.jw-playlist .jw-name{display:inline-block;line-height:3em;text-align:left;overflow:hidden;white-space:nowrap}.jw-playlist .jw-label{width:1em}.jw-playlist .jw-name{width:11em}.jw-skip{cursor:default;position:absolute;float:right;display:inline-block;right:.75em;bottom:3em}.jw-skip.jw-skippable{cursor:pointer}.jw-skip.jw-hidden{visibility:hidden}.jw-skip .jw-skip-icon{display:none;margin-left:-.75em}.jw-skip .jw-skip-icon:before{content:"\\E60C"}.jw-skip .jw-skip-icon,.jw-skip .jw-text{color:#aaa;vertical-align:middle;line-height:1.5em;font-size:.7em}.jw-skip.jw-skippable:hover{cursor:pointer}.jw-skip.jw-skippable:hover .jw-skip-icon,.jw-skip.jw-skippable:hover .jw-text{color:#eee}.jw-skip.jw-skippable .jw-skip-icon{display:inline;margin:0}.jwplayer.jw-state-paused.jw-flag-casting .jw-display-icon-container,.jwplayer.jw-state-playing.jw-flag-casting .jw-display-icon-container{display:table}.jwplayer.jw-flag-casting .jw-display-icon-container{border-radius:0;border:1px solid #fff;position:absolute;top:auto;left:.5em;right:.5em;bottom:50%;margin-bottom:-12.5%;height:50%;width:50%;padding:0;background-repeat:no-repeat;background-position:50%}.jwplayer.jw-flag-casting .jw-display-icon-container .jw-icon{font-size:3em}.jwplayer.jw-flag-casting.jw-state-complete .jw-preview{display:none}.jw-cast{position:absolute;width:100%;height:100%;background-repeat:no-repeat;background-size:auto;background-position:50% 50%}.jw-cast-label{position:absolute;left:.5em;right:.5em;bottom:75%;margin-bottom:1.5em;text-align:center}.jw-cast-name{color:#ccc}.jw-state-idle .jw-preview{display:block}.jw-state-idle .jw-icon-display:before{content:"\\E60E"}.jw-state-idle .jw-captions,.jw-state-idle .jw-controlbar{display:none}.jw-state-idle .jw-title{display:block}.jwplayer.jw-state-playing .jw-display-icon-container{display:none}.jwplayer.jw-state-playing .jw-display-icon-container .jw-icon-display:before,.jwplayer.jw-state-playing .jw-icon-playback:before{content:"\\E60D"}.jwplayer.jw-state-paused .jw-display-icon-container{display:none}.jwplayer.jw-state-paused .jw-display-icon-container .jw-icon-display:before,.jwplayer.jw-state-paused .jw-icon-playback:before{content:"\\E60E"}.jwplayer.jw-state-buffering .jw-display-icon-container .jw-icon-display{animation:spin 2s linear infinite}.jwplayer.jw-state-buffering .jw-display-icon-container .jw-icon-display:before{content:"\\E601"}@keyframes spin{to{transform:rotate(1turn)}}.jwplayer.jw-state-buffering .jw-display-icon-container .jw-text{display:none}.jwplayer.jw-state-buffering .jw-icon-playback:before{content:"\\E60D"}.jwplayer.jw-state-complete .jw-preview{display:block}.jwplayer.jw-state-complete .jw-display-icon-container{z-index:10}.jwplayer.jw-state-complete .jw-display-icon-container .jw-icon-display:before{content:"\\E610"}.jwplayer.jw-state-complete .jw-display-icon-container .jw-text{display:none}.jwplayer.jw-state-complete .jw-icon-playback:before{content:"\\E60E"}.jwplayer.jw-state-complete .jw-captions{display:none}.jwplayer.jw-state-error .jw-title,body .jw-error .jw-title{display:block;z-index:1;pointer-events:auto}.jwplayer.jw-state-error .jw-title .jw-title-primary,body .jw-error .jw-title .jw-title-primary{white-space:normal}.jwplayer.jw-state-error .jw-title .jw-title-primary a,body .jw-error .jw-title .jw-title-primary a{cursor:pointer;color:#699f00;pointer-events:auto}.jwplayer.jw-state-error .jw-preview,body .jw-error .jw-preview{display:block}.jwplayer.jw-state-error .jw-captions,.jwplayer.jw-state-error .jw-controlbar,body .jw-error .jw-captions,body .jw-error .jw-controlbar{display:none}.jwplayer.jw-state-error:hover .jw-display-icon-container,body .jw-error:hover .jw-display-icon-container{cursor:default;color:#fff;background:#000}.jwplayer.jw-state-error .jw-icon-display,body .jw-error .jw-icon-display{cursor:default;font-family:jw-icons;-webkit-font-smoothing:antialiased;font-style:normal;font-weight:400;text-transform:none;background-color:transparent;font-variant:normal;-ms-font-feature-settings:"liga" 1;-o-font-feature-settings:"liga";font-feature-settings:"liga";-moz-osx-font-smoothing:grayscale}.jwplayer.jw-state-error .jw-icon-display:before,body .jw-error .jw-icon-display:before{content:"\\E607"}.jwplayer.jw-state-error .jw-icon-display:hover,body .jw-error .jw-icon-display:hover{color:#fff}body .jw-error{font-size:16px;background-color:#000;color:#eee;width:100%;height:100%;display:table;opacity:1;position:relative}body .jw-error .jw-icon-container{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}.jwplayer.jw-flag-cast-available .jw-controlbar{display:table}.jwplayer.jw-flag-cast-available .jw-icon-cast{display:inline-block}.jwplayer.jw-flag-skin-loading .jw-captions,.jwplayer.jw-flag-skin-loading .jw-controls,.jwplayer.jw-flag-skin-loading .jw-title{display:none}.jwplayer.jw-flag-fullscreen{width:100%!important;height:100%!important;top:0;right:0;bottom:0;left:0;z-index:1000;margin:0;position:fixed}.jwplayer.jw-flag-live .jw-controlbar{border-top:1px solid #333}.jwplayer.jw-flag-live .jw-controlbar .jw-icon-playrate,.jwplayer.jw-flag-live .jw-controlbar .jw-slider-time,.jwplayer.jw-flag-live .jw-controlbar .jw-text-duration,.jwplayer.jw-flag-live .jw-controlbar .jw-text-elapsed,.jwplayer.jw-flag-live .jw-controlbar .jw-text-split{display:none}.jwplayer.jw-flag-live .jw-controlbar .jw-text-alt{display:inline}.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-controlbar,.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-dock,.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-logo.jw-hide{display:none}.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-captions,.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-plugin{bottom:.5em}.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-media{cursor:none;-webkit-cursor-visibility:auto-hide}.jwplayer.jw-flag-user-inactive.jw-state-playing video::-webkit-media-text-track-container{max-height:none}.jwplayer.jw-flag-user-inactive.jw-state-buffering .jw-controlbar{display:none}.jwplayer.jw-flag-media-audio .jw-controlbar,.jwplayer.jw-flag-media-audio.jw-flag-user-inactive .jw-controlbar{display:table}.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing .jw-captions,.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing .jw-plugin{bottom:3em}.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing video::-webkit-media-text-track-container{max-height:84.5%}.jw-flag-media-audio .jw-preview{display:block}.jwplayer.jw-flag-ads .jw-captions.jw-captions-enabled,.jwplayer.jw-flag-ads .jw-dock,.jwplayer.jw-flag-ads .jw-logo,.jwplayer.jw-flag-ads .jw-preview{display:none}.jwplayer.jw-flag-ads video::-webkit-media-text-track-container{display:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-horizontal,.jwplayer.jw-flag-ads .jw-controlbar .jw-text{display:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-fullscreen,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-playback,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-volume,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume{display:inline-block}.jwplayer.jw-flag-ads .jw-controlbar .jw-text-alt{display:inline}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline.jw-icon-volume,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume.jw-slider-horizontal{display:inline-block}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip.jw-icon-volume{display:none}.jwplayer.jw-flag-ads-googleima .jw-controlbar{display:table;bottom:0}.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-controlbar{font-size:1em}.jwplayer.jw-flag-ads-googleima.jw-flag-touch.jw-state-paused .jw-display-icon-container{display:none}.jwplayer.jw-flag-ads-googleima.jw-skin-seven .jw-controlbar{font-size:.9em}.jwplayer.jw-flag-ads-vpaid .jw-controlbar{display:none}.jwplayer.jw-flag-ads-hide-controls .jw-controls{display:none!important}.jwplayer.jw-flag-ads.jw-flag-touch .jw-controlbar{display:table}.jwplayer.jw-flag-overlay-open-related .jw-controls,.jwplayer.jw-flag-overlay-open-related .jw-title,.jwplayer.jw-flag-overlay-open-sharing .jw-controls,.jwplayer.jw-flag-overlay-open-sharing .jw-title,.jwplayer.jw-flag-overlay-open .jw-controls-right .jw-logo,.jwplayer.jw-flag-overlay-open .jw-title{display:none}.jwplayer.jw-flag-rightclick-open{overflow:visible}.jwplayer.jw-flag-rightclick-open .jw-rightclick{z-index:16777215}.jw-flag-controls-disabled .jw-controls{visibility:hidden}.jw-flag-controls-disabled .jw-logo{visibility:visible}.jw-flag-controls-disabled .jw-media{cursor:auto}body .jwplayer.jw-flag-flash-blocked .jw-title{display:block}body .jwplayer.jw-flag-flash-blocked .jw-controls,body .jwplayer.jw-flag-flash-blocked .jw-overlays,body .jwplayer.jw-flag-flash-blocked .jw-preview{display:none}.jw-flag-touch .jw-controlbar,.jw-flag-touch .jw-plugin,.jw-flag-touch .jw-skip{font-size:1.5em}.jw-flag-touch .jw-captions{bottom:4.25em}.jw-flag-touch video::-webkit-media-text-track-container{max-height:70%}.jw-flag-touch .jw-icon-tooltip.jw-open-drawer:before{display:inline;content:"\\E615"}.jw-flag-touch .jw-display-icon-container{pointer-events:none}.jw-flag-touch.jw-state-paused .jw-display-icon-container{display:table}.jw-flag-compact-player .jw-icon-playlist,.jw-flag-compact-player .jw-text-duration,.jw-flag-compact-player .jw-text-elapsed,.jw-flag-touch.jw-state-paused.jw-flag-dragging .jw-display-icon-container{display:none}.jwplayer.jw-flag-audio-player{background-color:transparent}.jwplayer.jw-flag-audio-player .jw-media{visibility:hidden}.jwplayer.jw-flag-audio-player .jw-media object{width:1px;height:1px}.jwplayer.jw-flag-audio-player .jw-display-icon-container,.jwplayer.jw-flag-audio-player .jw-preview{display:none}.jwplayer.jw-flag-audio-player .jw-controlbar{display:table;height:auto;left:0;bottom:0;margin:0;width:100%;min-width:100%;opacity:1}.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-fullscreen,.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip{display:none}.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-inline.jw-icon-volume,.jwplayer.jw-flag-audio-player .jw-controlbar .jw-slider-volume.jw-slider-horizontal{display:inline-block}.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip.jw-icon-volume{display:none}.jwplayer.jw-flag-audio-player.jw-flag-user-inactive .jw-controlbar{display:table}.jw-ie-poorie.jw-flag-media-audio .jw-preview{display:none}.jw-ie-poorie .jw-display-icon-container .jw-icon-display{background-image:url("http://cyberplayer.bcelive.com/resource/img/display_play.png");width:56px;height:56px}.jw-ie-poorie.jw-state-complete .jw-icon-display,.jw-ie-poorie.jw-state-idle .jw-icon-display,.jw-ie-poorie.jwplayer.jw-flag-audio-player .jw-media{visibility:visible}.jw-ie-poorie.jwplayer.jw-flag-audio-player .jw-media object{width:100%;height:100%}.background-base{background-repeat:no-repeat;background-position:50%}.jw-ie-poorie .jw-playlist-container .jw-label .jw-icon-play{background-image:url("http://cyberplayer.bcelive.com/resource/img/play_small.png");background-repeat:no-repeat;background-position:0}.jw-ie-poorie .jw-controlbar .jw-icon-barlogo{background-image:url("http://cyberplayer.bcelive.com/resource/img/baiduLogo.png");background-repeat:no-repeat;background-position:50%;width:15px;height:15px}.jw-ie-poorie .jw-controlbar .jw-icon-barlogo-new{background-image:url("http://cyberplayer.bcelive.com/resource/img/bce.png");background-repeat:no-repeat;background-position:50%;width:13px;height:14px}.jw-ie-poorie .jw-controlbar .jw-icon-playback{background-image:url("http://cyberplayer.bcelive.com/resource/img/play.png");background-repeat:no-repeat;background-position:50%;width:15px;height:15px}.jw-ie-poorie .jw-controlbar .jw-icon-prev{background-image:url("http://cyberplayer.bcelive.com/resource/img/prev.png");background-repeat:no-repeat;background-position:50%;width:26px;height:21px}.jw-ie-poorie .jw-controlbar .jw-icon-next{background-image:url("http://cyberplayer.bcelive.com/resource/img/next.png");background-repeat:no-repeat;background-position:50%}.jw-ie-poorie .jw-controlbar .jw-icon-playlist{background-image:url("http://cyberplayer.bcelive.com/resource/img/playlist.png");background-repeat:no-repeat;background-position:50%}.jw-ie-poorie .jw-controlbar .jw-knob{background-image:url("http://cyberplayer.bcelive.com/resource/img/cue.png");background-repeat:no-repeat;background-position:50%;width:10px;height:10px;background-color:inherit}.jw-ie-poorie .jw-controlbar .jw-icon-cc{background-image:url("http://cyberplayer.bcelive.com/resource/img/cc.png");background-repeat:no-repeat;background-position:50%}.jw-ie-poorie .jw-controlbar .jw-icon-volume{background-image:url("http://cyberplayer.bcelive.com/resource/img/volume.png");background-repeat:no-repeat;background-position:50%}.jw-ie-poorie .jw-controlbar .jw-icon-fullscreen{background-image:url("http://cyberplayer.bcelive.com/resource/img/fullscreen.png");background-repeat:no-repeat;background-position:50%}.jw-ie-poorie .jw-controls-right{display:none}.jw-ie-poorie .jw-display-icon-container{text-align:center}.jw-ie-poorie.jw-state-buffering .jw-icon-playback,.jw-ie-poorie.jw-state-playing .jw-icon-playback{background-image:url("http://cyberplayer.bcelive.com/resource/img/pause.png");background-repeat:no-repeat;background-position:50%}.jw-ie-poorie.jw-state-buffering .jw-icon-display{background-image:url("http://cyberplayer.bcelive.com/resource/img/loading.gif");background-repeat:no-repeat;background-position:50%;width:56px;height:56px}.jw-ie-poorie.jw-state-error .jw-icon-display{background-image:url("http://cyberplayer.bcelive.com/resource/img/error.png");background-repeat:no-repeat;background-position:50%;width:36px;height:32px}.jw-ie-poorie.jw-state-complete .jw-icon-display{background-image:url("http://cyberplayer.bcelive.com/resource/img/replay.png");background-repeat:no-repeat;background-position:50%;width:28px;height:32px}.jw-flashui .jw-controlbar,.jw-flashui.jw-state-buffering .jw-display-icon-container{display:none}.jw-skin-bce{outline:none}.jw-skin-bce .jw-background-color{background:#000}.jw-skin-bce .jw-controlbar{border:none;height:2.5em}.jw-skin-bce .jw-group{vertical-align:middle}.jw-skin-bce .jw-playlist{background-color:rgba(0,0,0,.5)}.jw-skin-bce .jw-playlist-container{left:-43%;background-color:rgba(0,0,0,.5)}.jw-skin-bce .jw-playlist-container .jw-option{border-bottom:1px solid #444}.jw-skin-bce .jw-playlist-container .jw-option.jw-active-option,.jw-skin-bce .jw-playlist-container .jw-option:hover{background-color:#000}.jw-skin-bce .jw-playlist-container .jw-option:hover .jw-label{color:#108cee}.jw-skin-bce .jw-playlist-container .jw-icon-playlist{margin-left:0}.jw-skin-bce .jw-playlist-container .jw-label .jw-icon-play{color:#108cee}.jw-skin-bce .jw-playlist-container .jw-label .jw-icon-play:before{padding-left:0}.jw-skin-bce .jw-icon-playlist .jw-overlay{z-index:100;bottom:1.6em}.jw-skin-bce .jw-tooltip-title{background-color:#000;color:#fff}.jw-skin-bce .jw-button-color,.jw-skin-bce .jw-text{color:#fff}.jw-skin-bce .jw-button-color:hover,.jw-skin-bce .jw-toggle{color:#108cee}.jw-skin-bce .jw-toggle.jw-off{color:#fff}.jw-skin-bce .jw-controlbar .jw-icon:before,.jw-skin-bce .jw-text-duration,.jw-skin-bce .jw-text-elapsed{padding:0 .7em}.jw-skin-bce .jw-controlbar .jw-icon-barlogo-new:before{padding:0}.jw-skin-bce .jw-controlbar .jw-icon-prev:before{padding-right:.25em}.jw-skin-bce .jw-controlbar .jw-icon-playlist:before{padding:0 .45em}.jw-skin-bce .jw-controlbar .jw-icon-next:before{padding-left:.25em}.jw-skin-bce .jw-controlbar .jw-icon-hd:before{content:none}.jw-skin-bce .jw-controlbar .jw-icon-hd .jw-hd-label{color:#000;background:#fff;padding:0 4px;border-radius:2px;margin:0 .7em;margin-top:1px}.jw-skin-bce .jw-controlbar .jw-icon-hd .jw-hd-label:hover{background:#108cee}.jw-skin-bce .jw-icon-next,.jw-skin-bce .jw-icon-prev{font-size:.7em}.jw-skin-bce .jw-icon-prev:before{border-left:1px solid #666}.jw-skin-bce .jw-icon-next:before{border-right:1px solid #666}.jw-skin-bce .jw-icon-display{color:#fff}.jw-skin-bce .jw-icon-display:before{padding-left:0}.jw-skin-bce .jw-display-icon-container{border-radius:50%;border:1px solid #333}.jw-skin-bce .jw-rail{background-color:#333;box-shadow:none}.jw-skin-bce .jw-buffer{background-color:#666f82}.jw-skin-bce .jw-progress{background:#108cee}.jw-skin-bce .jw-knob{width:.6em;height:.6em;background-color:#fff;border-radius:1em;display:none}.jw-skin-bce .jw-slider-volume .jw-knob{display:inline-block}.jw-skin-bce .jw-slider-horizontal .jw-slider-container{position:relative;height:.95em;vertical-align:top}.jw-skin-bce .jw-slider-horizontal .jw-buffer,.jw-skin-bce .jw-slider-horizontal .jw-progress,.jw-skin-bce .jw-slider-horizontal .jw-rail{height:.2em;top:5px;border-radius:0}.jw-skin-bce .jw-slider-horizontal .jw-knob{top:-.2em;top:0}.jw-skin-bce .jw-slider-horizontal .jw-cue{top:.2em;width:.4em;height:.4em;background-color:#fff;border-radius:50%;margin-left:-.325em}.jw-skin-bce .jw-slider-vertical .jw-buffer,.jw-skin-bce .jw-slider-vertical .jw-progress,.jw-skin-bce .jw-slider-vertical .jw-rail{width:.2em}.jw-skin-bce .jw-slider-vertical .jw-knob{margin-bottom:-.3em}.jw-skin-bce .jw-volume-tip{width:100%;left:-45%;padding-bottom:.7em}.jw-skin-bce .jw-text-duration{color:#666f82}.jw-skin-bce .jw-controlbar-right-group .jw-icon-inline:first-child:before{border:none}.jw-skin-bce .jw-dock .jw-dock-button{border-radius:50%;border:1px solid #333}.jw-skin-bce .jw-dock .jw-overlay{border-radius:2.5em}.jw-skin-bce .jw-icon-tooltip .jw-active-option{background-color:#108cee;color:#fff}.jw-skin-bce .jw-icon-volume{min-width:2.6em}.jw-skin-bce .jw-menu,.jw-skin-bce .jw-skip,.jw-skin-bce .jw-time-tip,.jw-skin-bce .jw-volume-tip{border:1px solid #333}.jw-skin-bce .jw-time-tip{padding:.2em;bottom:-18px}.jw-skin-bce .jw-menu,.jw-skin-bce .jw-volume-tip{bottom:.24em}.jw-skin-bce .jw-skip{padding:.4em;border-radius:1.75em}.jw-skin-bce .jw-skip .jw-icon-inline,.jw-skin-bce .jw-skip .jw-text{color:#fff;line-height:1.75em}.jw-skin-bce .jw-skip.jw-skippable:hover .jw-icon-inline,.jw-skin-bce .jw-skip.jw-skippable:hover .jw-text{color:#108cee}.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon:before,.jw-skin-bce.jw-flag-touch .jw-text-duration,.jw-skin-bce.jw-flag-touch .jw-text-elapsed{padding:0 .35em}.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon-prev:before{padding:0 .125em 0 .7em}.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon-next:before{padding:0 .7em 0 .125em}.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon-playlist:before{padding:0 .225em}.jw-skin-bce .jw-slider-time{background:0 0;position:absolute;top:-8px;height:8px;line-height:1em}.jw-skin-bce .jw-slider-time .jw-slider-container{height:8px;vertical-align:top}.jw-skin-bce .jw-slider-time:hover .jw-knob{display:block}.jw-skin-bce .jw-slider-time:hover .jw-slider-container{vertical-align:top}.jw-skin-bce .jw-slider-time:hover .jw-slider-container .jw-buffer,.jw-skin-bce .jw-slider-time:hover .jw-slider-container .jw-progress,.jw-skin-bce .jw-slider-time:hover .jw-slider-container .jw-rail{height:.6em;border-radius:0;top:0}.jw-skin-bce .jw-slider-time:hover .jw-cue{top:0;width:.6em;height:.6em}.jw-skin-bce .jw-controlbar-left-group .jw-text-elapsed{padding-right:0;cursor:default}.jw-skin-bce .jw-controlbar-left-group .jw-text-split{padding:0 2px;cursor:default}.jw-skin-bce .jw-controlbar-left-group .jw-text-duration{padding-left:0;color:#fff;cursor:default}.jw-skin-bce .jw-controlbar-center-group .jw-tooltip-time{top:-7px;height:1em}.jw-skin-bce .jw-controlbar-center-group .jw-overlay{z-index:100}.jw-skin-bce .jw-controlbar-right-group .jw-icon-playrate{height:24px;line-height:24px;margin-top:-2px}.jw-skin-bce .jw-controlbar-right-group .jw-icon-playrate .jw-playrate-label{border:1px solid #333;line-height:24px;height:24px;vertical-align:bottom}.jw-skin-bce .jw-media{width:100%;height:100%}',""])
},function(a,b,c){var d,e;d=[c(37),c(1)],void 0!==(e=function(a,b){return function(c,d){var e=["seek","skipAd","stop","playlistNext","playlistPrev","playlistItem","resize","addButton","removeButton","registerPlugin","attachMedia"];b.each(e,function(a){c[a]=function(){return d[a].apply(d,arguments),c}}),c.registerPlugin=a.registerPlugin}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1)],void 0!==(e=function(a){return function(b,c){var d=["buffer","controls","position","duration","fullscreen","volume","mute","item","stretching","playlist","captions","playbackRate"];a.each(d,function(a){var d=a.slice(0,1).toUpperCase()+a.slice(1);b["get"+d]=function(){return c._model.get(a)}});var e=["getAudioTracks","getCaptionsList","getWidth","getHeight","getCurrentAudioTrack","setCurrentAudioTrack","getCurrentCaptions","setCurrentCaptions","getCurrentQuality","setCurrentQuality","getQualityLevels","getVisualQuality","getConfig","getState","getSafeRegion","isBeforeComplete","isBeforePlay","getProvider","detachMedia"],f=["setControls","setKeyControls","setFullscreen","setVolume","enableGPU","disableGPU","setMute","setCues","setCaptions","setToken","setThumbnails","setPlaybackRate"];a.each(e,function(a){b[a]=function(){return c[a]?c[a].apply(c,arguments):null}}),a.each(f,function(a){b[a]=function(){return c[a].apply(c,arguments),b}}),b.getPlaylistIndex=b.getItem}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(4),c(7),c(3),c(2),c(66),c(1),c(84),c(74),c(75),c(77),c(81),c(18)],void 0!==(e=function(a,b,c,d,e,f,g,h,i,j,k,l){return function(m,n){var o,p=this,q=!1,r={};f.extend(this,c),this.utils=d,this._=f,this.Events=c,this.version=l,this.trigger=function(a,b){return b=f.isObject(b)?f.extend({},b):{},b.type=a,window.jwplayer&&window.jwplayer.debug?c.trigger.call(p,a,b):c.triggerSafe.call(p,a,b)},this.dispatchEvent=this.trigger,this.removeEventListener=this.off.bind(this);var s=function(){o=new g(m),h(p,o),i(p,o),o.on(a.JWPLAYER_PLAYLIST_ITEM,function(){r={}}),o.on(a.JWPLAYER_MEDIA_META,function(a){f.extend(r,a)}),o.on(a.JWPLAYER_READY,function(a){q=!0,t.tick("ready"),a.setupTime=t.between("setup","ready"),new k(p.getConfig(),p).userCertify()}),o.on("all",p.trigger),o.on(a.JWPLAYER_ERROR,function(a){if("mediaError"===a.type&&d.isMp4(a.videoSrc)&&a.detail&&("DEMUXER_ERROR_COULD_NOT_OPEN: FFmpegDemuxer: open context failed"===a.detail.message||4===a.detail.code)){var b=p.getConfig().options;b.primary="justflash",o.setup(b,p)}})};s(),j(this),this.id=m.id;var t=this._qoe=new e;t.tick("init");var u=function(){q=!1,r={},p.off(),o&&o.off(),o&&o.playerDestroy&&o.playerDestroy()};return this.getPlugin=function(a){return p.plugins&&p.plugins[a]},this.addPlugin=function(a,b){this.plugins=this.plugins||{},this.plugins[a]=b,this.onReady(b.addToPlayer),b.resize&&this.onResize(b.resizeHandler)},this.setup=function(a){return t.tick("setup"),u(),s(),d.foreach(a.events,function(a,b){var c=p[a];"function"==typeof c&&c.call(p,b)}),a.id=p.id,o.setup(a,this),p},this.qoe=function(){var b=o.getItemQoe();return{setupTime:t.between("setup","ready"),firstFrame:b.between(a.JWPLAYER_MEDIA_PLAY_ATTEMPT,a.JWPLAYER_MEDIA_FIRST_FRAME),player:t.dump(),item:b.dump()}},this.getContainer=function(){return o.getContainer?o.getContainer():m},this.getMeta=this.getItemMeta=function(){return r},this.getPlaylistItem=function(a){if(!d.exists(a))return o._model.get("playlistItem");var b=p.getPlaylist();return b?b[a]:null},this.getRenderingMode=function(){return"html5"},this.load=function(a){var b=this.getPlugin("vast")||this.getPlugin("googima");return b&&b.destroy(),o.load(a),p},this.play=function(a,c){if(f.isBoolean(a)||(c=a),c||(c={reason:"external"}),!0===a)return o.play(c),p;if(!1===a)return o.pause(),p;switch(a=p.getState()){case b.PLAYING:o.pause();break;default:o.play(c)}return p},this.pause=function(a){return f.isBoolean(a)?this.play(!a):this.play()},this.createInstream=function(){return o.createInstream()},this.castToggle=function(){o&&o.castToggle&&o.castToggle()},this.playAd=this.pauseAd=d.noop,this.remove=function(){return n(p),p.trigger("remove"),u(),p},this}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1),c(4)],void 0!==(e=function(a,b){return function(c){var d={onBufferChange:b.JWPLAYER_MEDIA_BUFFER,onBufferFull:b.JWPLAYER_MEDIA_BUFFER_FULL,onError:b.JWPLAYER_ERROR,onSetupError:b.JWPLAYER_SETUP_ERROR,onFullscreen:b.JWPLAYER_FULLSCREEN,onMeta:b.JWPLAYER_MEDIA_META,onMute:b.JWPLAYER_MEDIA_MUTE,onPlaylist:b.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:b.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:b.JWPLAYER_PLAYLIST_COMPLETE,onReady:b.JWPLAYER_READY,onCoverImageReady:b.JWPLAYER_H265WEB_COVERLOADED,onResize:b.JWPLAYER_RESIZE,onComplete:b.JWPLAYER_MEDIA_COMPLETE,onSeek:b.JWPLAYER_MEDIA_SEEK,onTime:b.JWPLAYER_MEDIA_TIME,onVolume:b.JWPLAYER_MEDIA_VOLUME,onBeforePlay:b.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:b.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:b.JWPLAYER_DISPLAY_CLICK,onControls:b.JWPLAYER_CONTROLS,onQualityLevels:b.JWPLAYER_MEDIA_LEVELS,onQualityChange:b.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:b.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:b.JWPLAYER_CAPTIONS_CHANGED,onAdError:b.JWPLAYER_AD_ERROR,onAdClick:b.JWPLAYER_AD_CLICK,onAdImpression:b.JWPLAYER_AD_IMPRESSION,onAdTime:b.JWPLAYER_AD_TIME,onAdComplete:b.JWPLAYER_AD_COMPLETE,onAdCompanions:b.JWPLAYER_AD_COMPANIONS,onAdSkipped:b.JWPLAYER_AD_SKIPPED,onAdPlay:b.JWPLAYER_AD_PLAY,onAdPause:b.JWPLAYER_AD_PAUSE,onAdMeta:b.JWPLAYER_AD_META,onCast:b.JWPLAYER_CAST_SESSION,onAudioTrackChange:b.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:b.JWPLAYER_AUDIO_TRACKS,onCuepoint:b.JWPLAYER_CUEPOINT,onSeekForwardForbidden:b.JWPLAYER_SEEK_FORWARD_FORBIDDEN,onConnection:b.JWPLAYER_CONNECTING,onAlive:b.JWPLAYER_ALIVE,onNoLiveStream:b.JWPLAYER_NO_LIVE_STREAM,onLiveStop:b.JWPLAYER_LIVE_STOP,onPlaybackRate:b.JWPLAYER_PLAYBACKRATE},e={onBuffer:"buffer",onPause:"pause",onPlay:"play",onIdle:"idle",onStop:"stop"};a.each(e,function(b,d){c[d]=a.partial(c.on,b,a)}),a.each(d,function(b,d){c[d]=a.partial(c.on,b,a)})}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(1)],void 0!==(e=function(a,b){function d(c){b.each(c,function(b,d){c[d]=a.serialize(b)})}function e(a){return a.slice&&"px"===a.slice(-2)&&(a=a.slice(0,-2)),a}function f(b){return(a.isMSIE(7)||a.isMSIE(6))&&(b.flashUI=!0),b.skin="bce",b.startseek=!1,delete b.skinColorInactive,delete b.skinColorActive,delete b.skinColorBackground,b}function g(b,c){if(-1===c.toString().indexOf("%"))return 0;if("string"!=typeof b||!a.exists(b))return 0;if(/^\d*\.?\d+%$/.test(b))return b;var d=b.indexOf(":");if(-1===d)return 0;var e=parseFloat(b.substr(0,d)),f=parseFloat(b.substr(d+1));return e<=0||f<=0?0:f/e*100+"%"}var h={autostart:!1,controls:!0,keyControls:!0,displaytitle:!0,displaydescription:!0,mobilecontrols:!1,repeat:!1,castAvailable:!1,skin:"bce",stretching:"uniform",mute:!1,volume:100,width:480,height:270,controlbar:{barLogo:!1,barLogoUrl:"https://cloud.baidu.com/solution/media.html",canDrag:!0},marquee:{show:!1,text:"",fontSize:12,color:"#FFF"},startseek:!0,flashUI:!1,playRate:!0,playbackRate:1,playRateConfig:[{label:"1"},{label:"1.5"},{label:"2"},{label:"3"},{label:"4"},{label:"5"}],isLive:!1,allowDoubleClickFullscreen:!0,allowClickToDisplay:!0,retryCount:0,tokenEncrypt:!1,crossoriginAnonymous:!1,withLog:!0};return function(i,j){i.autoStart&&(i.autostart=!0),"over"!==i.controls&&"none"!==i.controls||(i.controls="over"===i.controls),i.startParam&&(i.startparam=i.startParam);var k=j&&j.getAllItems(),l=b.extend({},(window.jwplayer||{}).defaults,k,i);d(l);var m=b.extend({},h,l);if(m.options=i,void 0===m.controlbar.canDrag&&(m.controlbar.canDrag=!0),"."===m.base&&(m.base=a.getScriptPath("cyberplayer.js")),m.playRate||(m.playbackRate=1),m.base=(m.base||a.loadFrom()).replace(/\/?$/,"/"),c.p=m.base,m.width=e(m.width),m.height=e(m.height),m.flashplayer=m.flashplayer||a.getScriptPath("cyberplayer.js")+"cyberplayer.flash.swf","http:"===window.location.protocol&&(m.flashplayer=m.flashplayer.replace("https","http")),m.aspectratio=g(m.aspectratio,m.width),b.isObject(m.skin)&&(m.skinUrl=m.skin.url,m.skinColorInactive=m.skin.inactive,m.skinColorActive=m.skin.active,m.skinColorBackground=m.skin.background,m.skin=b.isString(m.skin.name)?m.skin.name:h.skin),b.isString(m.skin)&&m.skin.indexOf(".xml")>0&&(console.log("JW Player does not support XML skins, please update your config"),m.skin=m.skin.replace(".xml","")),m.aspectratio||delete m.aspectratio,!m.playlist){var n=b.pick(m,["title","description","type","mediaid","image","file","sources","tracks","preload","fallbackfile"]);m.playlist=[n]}return a.isPoorIE()&&(m=f(m)),a.isChrome66()&&(m.originVolume=m.volume,m.volume=0),m}}.apply(b,d))&&(a.exports=e)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var f=c(182),g=d(f),h=c(1),i=d(h),j=c(2),k=d(j),l=c(14),m=d(l),n=function(){function a(b){e(this,a),this.api=null,b&&b.advs&&i["default"].isArray(b.advs)&&b.advs.length?(this.processAdvs=b.advs,this.hasProcessAdv=!0,this.el=k["default"].createElement((0,g["default"])())):this.hasProcessAdv=!1,this.activeAdv=null}return a.prototype.setApi=function(a){this.api=a},a.prototype.refreshProcessAdv=function(a){var b=i["default"].find(this.processAdvs,function(b){return a>=b.begin&&a<=b.end});b?b!==this.activeAdv&&(this.showAdv(b),this.activeAdv=b):this.hideAllProcessAdvs()},a.prototype.showAdv=function(a){var b=this.element().getElementsByTagName("a")[0],c=b.getElementsByTagName("img")[0];b.setAttribute("href",a.material.landingPage),c.setAttribute("src",a.material.image);var d={display:"block","z-index":500,opacity:.9,left:"auto",right:"auto",top:"auto",bottom:"auto"};"left"===a.material.horizontalPosition?d.left=10:d.right=10,"top"===a.material.verticalPosition?d.top=10:d.bottom=50,m["default"].style(this.element(),d)},a.prototype.hideAllProcessAdvs=function(){this.element().style.display="none",this.activeAdv=null},a.prototype.element=function(){if(this.api){var a=this.api.getContainer();if(k["default"].getElementsByClassName("jw-process-adv",a).length>0)return k["default"].getElementsByClassName("jw-process-adv",a)[0]}return this.el},a}();b["default"]=n,a.exports=b["default"]},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=[c(47),c(1)],void 0!==(e=function(a,b){function c(a){for(var c={},d=a.substr(a.indexOf("?")+1).split("&"),g=0;g<d.length;g++){var h=d[g],i=h.indexOf("=");if(i>-1){var j=h.substr(0,i),k=decodeURIComponent(h.substr(i+1));b.contains(e,j)&&(k=k.replace(/'/g,'"'),k="object"===("undefined"==typeof JSON?"undefined":f(JSON))&&"function"==typeof JSON.parse?JSON.parse(k):eval("("+k+")")),c[j]=k}}return c}function d(){for(var d=document.getElementsByTagName("script"),e=d.length;e--;){var f=d[e],g=f.src;if(g.indexOf("cyberplayer.js")>-1){var h=c(g);if(b.size(h)>3&&"DIV"===f.parentNode.nodeName)return a.selectPlayer(f.parentNode).setup(h)}}}var e=["imageAdvs","playlist","listbar","tracks","captions","controlbar","logo","skin","marquee"];return d(),{getParams:c,loadPlayer:d}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(18),c(2)],void 0!==(e=function(a,b){function c(){for(var a=b.getElementsByClassName("jw-warning"),c=0;c<a.length;c++){a[c].style.display="block"}}var d=function(a){!a.code||"UNAUTHORIZED"!==a.code&&"BAD_REQUEST"!==a.code||c()},e=function(a,b){this.config=a,this.api=b};return e.prototype={userCertify:function(){if(!1===this.config.withLog)return!1;var d=this.config.ak?this.config.ak:"";if(!/^[a-zA-Z0-9]{32}$/.test(d))return c(),!1;var e="web-html5-"+a,f=b.getBrowserInfo(),g="https://drm.media.baidubce.com/v1/playerAuth?ak="+d+"&player="+e+"&platform="+f+"&callback="+this._getCallback();g=encodeURI(g);var h=document.createElement("script");h.type="text/javascript",h.src=g,document.getElementsByTagName("head")[0].appendChild(h)},_getCallback:function(){var a=(new Date).getTime(),b=1e9*Math.random()>>>0,c="jwplayer_"+a+"_"+b;return window[c]=function(a){try{d(a),delete window[c]}catch(a){window[c]=null}},c}},e}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(89),c(3),c(1),c(4)],void 0!==(e=function(a,b,c,d){var e=function(b,e,f,g){function h(){m("",""+q+"")}function i(){c.each(p,function(a){!0!==a.complete&&!0!==a.running&&null!==b&&k(a.depends)&&(a.running=!0,j(a))})}function j(a){var c=function(b){b=b||{},l(a,b)};a.method(c,e,b,f,g)}function k(a){return c.all(a,function(a){return p[a].complete})}function l(a,b){"error"===b.type?m(b.msg,b.reason,b.code||""):"complete"===b.type?(clearTimeout(n),o.trigger(d.JWPLAYER_READY)):(a.complete=!0,i())}function m(a,b,c){clearTimeout(n),o.trigger(d.JWPLAYER_SETUP_ERROR,{message:a+": "+b,code:c}),o.destroy()}var n,o=this,p=a.getQueue(),q=30;this.start=function(){n=setTimeout(h,1e3*q),i()},this.destroy=function(){clearTimeout(n),this.off(),p.length=0,b=null,e=null,f=null}};return e.prototype=b,e}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(20),c(36),c(115),c(2)],void 0!==(e=function(a,b,c,d){return function(e,f){function g(a){if(a.tracks.length){f.mediaController.off("meta",h),u=[],v={},w={},x=0;for(var b=a.tracks||[],c=0;c<b.length;c++){var d=b[c];d.id=d.name,d.label=d.name||d.language,m(d)}var e=p();this.setCaptionsList(e),q()}}function h(a){var b=a.metadata;if(b&&"textdata"===b.type){if(!b.text)return;var c=v[b.trackid];if(!c){c={kind:"captions",id:b.trackid,data:[]},m(c);var d=p();this.setCaptionsList(d)}var e,g;b.useDTS?(c.source||(c.source=b.source||"mpegts"),e=b.begin,g=b.begin+"_"+b.text):(e=a.position||f.get("position"),g=Math.round(10*e)+"_"+b.text);var h=w[g];h||(h={begin:e,text:b.text},b.end&&(h.end=b.end),w[g]=h,c.data.push(h))}}function i(a){d.log("CAPTIONS("+a+")")}function j(a,b){t=b,u=[],v={},w={},x=0}function k(a){j(f,a),f.mediaController.off("meta",h),f.mediaController.off("subtitlesTracks",g);var b,c,e,i,k=a.tracks,l="flash"===f.get("provider").name,o=d.isChrome()||d.isIOS()||d.isSafari();for(i=0;i<k.length;i++)b=k[i],e=b.file&&/\.(?:web)?vtt(?:\?.*)?$/i.test(b.file),!l&&e&&!s&&o||"captions"!==(c=b.kind.toLowerCase())&&"subtitles"!==c||(b.file?(m(b),n(b)):b.data&&m(b));u.length||(f.mediaController.on("meta",h,this),f.mediaController.on("subtitlesTracks",g,this));var r=p();this.setCaptionsList(r),q()}function l(a,b){var c=null;0!==b&&(c=u[b-1]),a.set("captionsTrack",c)}function m(a){"number"!=typeof a.id&&(a.id=a.name||a.file||"cc"+u.length),a.data=a.data||[],a.label||(a.label="Unknown CC",++x>1&&(a.label+=" ("+x+")")),u.push(a),v[a.id]=a}function n(a){d.ajax(a.file,function(b){o(b,a)},i)}function o(d,e){var f=d.responseXML?d.responseXML.firstChild:null;if(f)for("xml"===a.localName(f)&&(f=f.nextSibling);f.nodeType===f.COMMENT_NODE;)f=f.nextSibling;try{f&&"tt"===a.localName(f)?e.data=c(d.responseXML):e.data=b(d.responseText)}catch(a){i(a.message+": "+e.file)}}function p(){for(var a=[{id:"off",label:"Off"}],b=0;b<u.length;b++)a.push({id:u[b].id,label:u[b].label||"Unknown CC"});return a}function q(){var a=0,b=f.get("captionLabel");if("Off"===b)return void f.set("captionsIndex",0);for(var c=0;c<u.length;c++){var d=u[c];if(b&&b===d.label){a=c+1;break}d["default"]||d.defaulttrack||"default"===d.id?a=c+1:d.autoselect}r(a)}function r(a){u.length?f.setVideoSubtitleTrack(a,u):f.set("captionsIndex",a)}f.on("change:playlistItem",j,this),f.on("change:captionsIndex",l,this),f.on("itemReady",k,this),f.mediaController.on("subtitlesTracks",g,this),f.mediaController.on("subtitlesTrackData",function(a){var b=v[a.name];if(b){b.source=a.source;for(var c=a.captions||[],d=!1,e=0;e<c.length;e++){var f=c[e],g=a.name+"_"+f.begin+"_"+f.end;w[g]||(w[g]=f,b.data.push(f),d=!0)}d&&b.data.sort(function(a,b){return a.begin-b.begin})}},this),f.mediaController.on("meta",h,this);var s=!!f.get("sdkplatform"),t={},u=[],v={},w={},x=0;this.getCurrentIndex=function(){return f.get("captionsIndex")},this.getCaptionsList=function(){return f.get("captionsList")},this.setCaptionsList=function(a){f.set("captionsList",a)}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=[c(78),c(85),c(1),c(82),c(83),c(29),c(48),c(119),c(58),c(2),c(154),c(22),c(3),c(30),c(7),c(4),c(148),c(122),c(25)],void 0!==(e=function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(a){return function(){var b=Array.prototype.slice.call(arguments,0);this._model.getVideo()?this["_"+a].apply(this,b):this.eventsQueue.push([a,b])}}function v(a){return a===p.LOADING||a===p.STALLED?p.BUFFERING:a}var w=function(a){this.originalContainer=this.currentContainer=a,this.eventsQueue=[],c.extend(this,n),this._model=new g};return w.prototype={play:u("play"),pause:u("pause"),setVolume:u("setVolume"),enableGPU:u("enableGPU"),disableGPU:u("disableGPU"),setToken:u("setToken"),setMute:u("setMute"),seek:u("seek"),stop:u("stop"),load:u("load"),playlistNext:u("next"),playlistPrev:u("prev"),playlistItem:u("item"),setFullscreen:u("setFullscreen"),setCurrentCaptions:u("setCurrentCaptions"),setCurrentQuality:u("setCurrentQuality"),setup:function(g,n){function r(){ca.mediaModel.on("change:state",function(a,b){"playing"===b&&k.isChrome66()&&0===n.getVolume()&&ca.setVolume(ia.originVolume);var c=v(b);ca.set("state",c)})}function t(){_=null,H(ca.get("item")),ca.on("change:state",o,this),ca.on("change:castState",function(a,b){fa.trigger(q.JWPLAYER_CAST_SESSION,b)}),ca.on("change:fullscreen",function(a,b){fa.trigger(q.JWPLAYER_FULLSCREEN,{fullscreen:b})}),ca.on("itemReady",function(){fa.trigger(q.JWPLAYER_PLAYLIST_ITEM,{index:ca.get("item"),item:ca.get("playlistItem")})}),ca.on("change:playlist",function(a,b){b.length&&fa.trigger(q.JWPLAYER_PLAYLIST_LOADED,{playlist:b})}),ca.on("change:volume",function(a,b){fa.trigger(q.JWPLAYER_MEDIA_VOLUME,{volume:b})}),ca.on("change:mute",function(a,b){fa.trigger(q.JWPLAYER_MEDIA_MUTE,{mute:b})}),ca.on("change:controls",function(a,b){fa.trigger(q.JWPLAYER_CONTROLS,{controls:b})}),ca.on("change:scrubbing",function(a,b){b?C():A()}),ca.on("change:captionsList",function(a,b){fa.trigger(q.JWPLAYER_CAPTIONS_LIST,{tracks:b,track:U()})}),ca.mediaModel.set("mediaType",null),ca.mediaController.on("all",fa.trigger.bind(fa)),Z.on("all",fa.trigger.bind(fa)),this.showView(Z.element()),c.defer(u)}function u(){fa.trigger(q.JWPLAYER_READY,{setupTime:0}),fa.trigger(q.JWPLAYER_PLAYLIST_LOADED,{playlist:ca.get("playlist")}),fa.trigger(q.JWPLAYER_PLAYLIST_ITEM,{index:ca.get("item"),item:ca.get("playlistItem")}),fa.trigger(q.JWPLAYER_CAPTIONS_LIST,{tracks:ca.get("captionsList"),track:ca.get("captionsIndex")}),ca.get("autostart")&&(!k.isPoorIE()&&ca.get("imageAdvs")&&ca.get("imageAdvs").start?Z.beginStartAdv():A({reason:"autostart"})),w()}function w(){for(;fa.eventsQueue.length>0;){var a=fa.eventsQueue.shift(),b=a[0],c=a[1]||[];fa["_"+b].apply(fa,c)}}function x(a){switch(ca.get("state")===p.ERROR&&ca.set("state",p.IDLE),B(!0),ca.get("autostart")&&ca.once("itemReady",A),void 0===a?"undefined":f(a)){case"string":y(a);break;case"object":var b=i(a),c=ca.get("edition"),d=ca.getProviders(),e=d.required(b,c);m.load(e,c).then(function(){fa.getProvider()||(ca.setProvider(ca.get("playlistItem")),w())});G(a)&&H(0);break;case"number":H(a)}}function y(a){var b=new j;b.on(q.JWPLAYER_PLAYLIST_LOADED,function(a){x(a.playlist)}),b.on(q.JWPLAYER_ERROR,function(a){a.message=": "+a.message,this.triggerError(a)},this),b.load(a)}function z(){var a=fa._instreamAdapter&&fa._instreamAdapter.getState();return c.isString(a)?a:ca.get("state")}function A(a){var b;if(a&&ca.set("playReason",a.reason),ca.get("state")!==p.ERROR){var d=fa._instreamAdapter&&fa._instreamAdapter.getState();if(c.isString(d))return n.pauseAd(!1);if(ca.get("state")===p.COMPLETE&&(B(!0),H(0)),!da){da=!0;var e=ca.getVideo().getCurrentQuality(),f=ca.get("playlistItem"),g=!1;if(e<0&&f&&ca.get("qualityLabel")){for(var h=0;h<f.sources.length;h++)f.sources[h].label.toString()===ca.get("qualityLabel").toString()&&(e=h);"flash"===ca.getVideo().getName().name&&(g=!0)}if(e<0&&(e=0),fa.trigger(q.JWPLAYER_MEDIA_BEFOREPLAY,{file:ca.get("file")||ca.get("playlistItem").sources[e].file,currentQuality:g?++e:e}),da=!1,ba)return ba=!1,void(aa=null)}if(!0===ca.get("hevc"))b=k.tryCatch(function(){ca.playVideo()});else if(D()){if(0===ca.get("playlist").length)return!1;!k.isPoorIE()&&ca.get("imageAdvs")&&ca.get("imageAdvs").start?Z.beginStartAdv():b=k.tryCatch(function(){ca.loadVideo()})}else ca.get("state")===p.PAUSED&&(b=k.tryCatch(function(){ca.playVideo()}));return!(b instanceof k.Error&&(fa.triggerError(b),aa=null,1))}}function B(a){ca.off("itemReady",A);var b=!a;aa=null;var c=k.tryCatch(function(){ca.stopVideo()},fa);return c instanceof k.Error?(fa.triggerError(c),!1):(b&&(ea=!0),da&&(ba=!0),!0)}function C(){aa=null;var a=fa._instreamAdapter&&fa._instreamAdapter.getState();if(c.isString(a))return n.pauseAd(!0);switch(ca.get("state")){case p.ERROR:return!1;case p.PLAYING:case p.BUFFERING:var b=k.tryCatch(function(){ga().pause()},this);if(b instanceof k.Error)return fa.triggerError(b),!1;break;default:da&&(ba=!0)}return!0}function D(){var a=ca.get("state");return a===p.IDLE||a===p.COMPLETE||a===p.ERROR}function E(a){if(ca.get("state")!==p.ERROR){if(this.getConfig().disableSeekForward&&a>this._model.get("position"))return void fa.trigger(q.JWPLAYER_SEEK_FORWARD_FORBIDDEN);ca.get("scrubbing")||ca.get("state")===p.PLAYING||A(!0),ga().seek(a)}}function F(a,b){B(!0),H(a),A(b)}function G(a){var b=i(a);return b=i.filterPlaylist(b,ca.getProviders(),ca.get("androidhls"),ca.get("drm"),ca.get("preload"),ca.get("feedid"),ca.get("withCredentials"),ca.get("hevc")),ca.set("playlist",b),!(!c.isArray(b)||0===b.length)}function H(a){void 0!==_hmt&&null!==_hmt&&_hmt.push(["_trackPageview","/init/playerItem/hevc/"+(!0===ca.get("hevc"))]);var b=ca.get("playlist");a=parseInt(a,10)||0,a=(a+b.length)%b.length,ca.set("item",a),ca.set("playlistItem",b[a]),ca.setActiveItem(b[a])}function I(a){F(ca.get("item")-1,a||{reason:"external"})}function J(a){F(ca.get("item")+1,a||{reason:"external"})}function K(){if(D()){if(ea)return void(ea=!1);aa=K;return ca.get("item")===ca.get("playlist").length-1?void(ca.get("repeat")?J({reason:"repeat"}):(ca.set("state",p.COMPLETE),fa.trigger(q.JWPLAYER_PLAYLIST_COMPLETE,{}))):void J({reason:"playlist"})}}function L(a){ga()&&(a=parseInt(a,10)||0,ga().setCurrentQuality(a))}function M(){return ga()?ga().getCurrentQuality():-1}function N(){if(this._model)return this._model.getConfiguration()}function O(){if(this._model.mediaModel)return this._model.mediaModel.get("visualQuality");var a=P();if(a){var b=M(),d=a[b];if(d)return{level:c.extend({index:b},d),mode:"",reason:""}}return null}function P(){return ga()?ga().getQualityLevels():null}function Q(a){ga()&&(a=parseInt(a,10)||0,ga().setCurrentAudioTrack(a))}function R(){return ga()?ga().getCurrentAudioTrack():-1}function S(){return ga()?ga().getAudioTracks():null}function T(a){a=parseInt(a,10)||0,ca.persistVideoSubtitleTrack(a),fa.trigger(q.JWPLAYER_CAPTIONS_CHANGED,{tracks:V(),track:a})}function U(){return $.getCurrentIndex()}function V(){return $.getCaptionsList()}function W(){var a=ca.getVideo();if(a){var b=a.detachMedia();if(b instanceof HTMLVideoElement)return b}return null}function X(){var a=k.tryCatch(function(){ca.getVideo().attachMedia()});return a instanceof k.Error?void k.log("Error calling _attachMedia",a):void("function"==typeof aa&&aa())}function Y(a){c.isBoolean(a)||(a=!ca.get("fullscreen")),ca.set("fullscreen",a),this._instreamAdapter&&this._instreamAdapter._adModel&&this._instreamAdapter._adModel.set("fullscreen",a)}var Z,$,_,aa,ba,ca=this._model,da=!1,ea=!1,fa=this,ga=function(){return ca.getVideo()},ha=new h;ha.track(ca);var ia=new a(g,ha);ca.setup(ia,ha),ca.advManage&&ca.advManage.setApi(n),Z=this._view=new l(n,ca),new s(n,ca),$=new e(n,ca),_=new d(n,ca,Z,G),_.on(q.JWPLAYER_READY,t,this),_.on(q.JWPLAYER_SETUP_ERROR,this.setupError,this),ca.mediaController.on(q.JWPLAYER_MEDIA_COMPLETE,function(){c.defer(K)}),ca.mediaController.on(q.JWPLAYER_MEDIA_ERROR,this.triggerError,this),ca.on("change:flashBlocked",function(a,b){if(!b)return void this._model.set("errorEvent",void 0);var c=!!a.get("flashThrottle"),d={message:c?"Click to run Flash":"Flash plugin failed to load"};c||this.trigger(q.JWPLAYER_ERROR,d),this._model.set("errorEvent",d)},this),r(),ca.on("change:mediaModel",r),this._play=A,this._pause=C,this._seek=E,this._stop=B,this._load=x,this._next=J,this._prev=I,this._item=F,this._setCurrentCaptions=T,this._setCurrentQuality=L,this._setFullscreen=Y,this.detachMedia=W,this.attachMedia=X,this.getCurrentQuality=M,this.getQualityLevels=P,this.setCurrentAudioTrack=Q,this.getCurrentAudioTrack=R,this.getAudioTracks=S,this.getCurrentCaptions=U,this.getCaptionsList=V,this.getVisualQuality=O,this.getConfig=N,this.getState=z,this.setVolume=ca.setVolume.bind(ca),this.setMute=ca.setMute.bind(ca),this.enableGPU=ca.enableGPU,this.disableGPU=ca.disableGPU,this.setToken=ca.setToken,this.setPlaybackRate=ca.setPlaybackRate,this.getProvider=function(){return ca.get("provider")},this.getWidth=function(){return ca.get("containerWidth")},this.getHeight=function(){return ca.get("containerHeight")},this.getContainer=function(){return this.currentContainer},this.resize=Z.resize,this.getSafeRegion=Z.getSafeRegion,this.setCues=Z.addCues,this.setThumbnails=Z.addThumbnails,this.setCaptions=Z.setCaptions,this.addButton=function(a,b,d,e,f){var g={img:a,tooltip:b,callback:d,id:e,btnClass:f},h=ca.get("dock");h=h?h.slice(0):[],h=c.reject(h,c.matches({id:g.id})),h.push(g),ca.set("dock",h)},this.removeButton=function(a){var b=ca.get("dock")||[];b=c.reject(b,c.matches({id:a})),ca.set("dock",b)},this.checkBeforePlay=function(){return da},this.getItemQoe=function(){return ca._qoeItem},this.setControls=function(a){c.isBoolean(a)||(a=!ca.get("controls")),ca.set("controls",a);var b=ca.getVideo();b&&b.setControls(a)},this.setKeyControls=function(a){ca.set("keyControls",a)},this.playerDestroy=function(){this.stop(),this.showView(this.originalContainer),Z&&Z.destroy(),ca&&ca.destroy(),_&&(_.destroy(),_=null)},this.isBeforePlay=this.checkBeforePlay,this.isBeforeComplete=function(){return ca.getVideo().checkComplete()},this.createInstream=function(){return this.instreamDestroy(),this._instreamAdapter=new b(this,ca,Z),this._instreamAdapter},this.skipAd=function(){this._instreamAdapter&&this._instreamAdapter.skipAd()},this.instreamDestroy=function(){fa._instreamAdapter&&fa._instreamAdapter.destroy()},_.start()},showView:function(a){(document.documentElement.contains(this.currentContainer)||(this.currentContainer=document.getElementById(this._model.get("id")),this.currentContainer))&&(this.currentContainer.parentElement&&this.currentContainer.parentElement.replaceChild(a,this.currentContainer),this.currentContainer=a)},triggerError:function(a){this._model.set("errorEvent",a),this._model.set("state",p.ERROR),this._model.once("change:state",function(){this._model.set("errorEvent",void 0)},this),this.trigger(q.JWPLAYER_ERROR,a)},setupError:function(a){var b=a.message,d=k.createElement(r(this._model.get("id"),this._model.get("skin"),b)),e=this._model.get("width"),f=this._model.get("height");k.style(d,{width:e.toString().indexOf("%")>0?e:e+"px",height:f.toString().indexOf("%")>0?f:f+"px"}),this.showView(d);var g=this;c.defer(function(){g.trigger(q.JWPLAYER_SETUP_ERROR,{message:b,code:a.code})})}},w}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(87),c(86),c(4),c(7),c(2),c(3),c(1)],void 0!==(e=function(a,b,c,d,e,f,g){function h(c){return(c.get("provider").name||"").indexOf("flash")>=0?b:a}var i={skipoffset:null,tag:null},j=function(a,b,f){function j(a,b){"complete"!==a&&(b=b||{},u.tag&&!b.tag&&(b.tag=u.tag),this.trigger(a,b))}function k(a){s._adModel.set("duration",a.duration),s._adModel.set("position",a.position)}function l(a){var d={};if(u.tag&&(d.tag=u.tag),m&&t+1<m.length){this.trigger(c.JWPLAYER_MEDIA_COMPLETE,d),s._adModel.set("state","buffering"),b.set("skipButton",!1),t++;var e,f=m[t];n&&(e=n[t]),this.loadItem(f,e)}else a.type===c.JWPLAYER_MEDIA_COMPLETE&&(this.trigger(c.JWPLAYER_MEDIA_COMPLETE,d),this.trigger(c.JWPLAYER_PLAYLIST_COMPLETE,{})),this.destroy()}var m,n,o,p,q,r=h(b),s=new r(a,b),t=0,u={},v=g.bind(function(a){a=a||{},a.hasControls=!!b.get("controls"),this.trigger(c.JWPLAYER_INSTREAM_CLICK,a),s&&s._adModel&&(s._adModel.get("state")===d.PAUSED?a.hasControls&&s.instreamPlay():s.instreamPause())},this),w=g.bind(function(){s&&s._adModel&&s._adModel.get("state")===d.PAUSED&&b.get("controls")&&(a.setFullscreen(),a.play())},this);this.type="instream",this.init=function(){o=b.getVideo(),p=b.get("position"),q=b.get("playlist")[b.get("item")],s.on("all",j,this),s.on(c.JWPLAYER_MEDIA_TIME,k,this),s.on(c.JWPLAYER_MEDIA_COMPLETE,l,this),s.init(),o.detachMedia(),b.mediaModel.set("state",d.BUFFERING),a.checkBeforePlay()||0===p&&!o.checkComplete()?(p=0,b.set("preInstreamState","instream-preroll")):o&&o.checkComplete()||b.get("state")===d.COMPLETE?b.set("preInstreamState","instream-postroll"):b.set("preInstreamState","instream-midroll");var g=b.get("state");return g!==d.PLAYING&&g!==d.BUFFERING||o.pause(),f.setupInstream(s._adModel),s._adModel.set("state",d.BUFFERING),f.clickHandler().setAlternateClickHandlers(e.noop,null),this.setText("Loading ad"),this},this.loadItem=function(a,d){if(e.isAndroid(2.3))return void this.trigger({type:c.JWPLAYER_ERROR,message:"Android 2.3"});g.isArray(a)&&(m=a,n=d,a=m[t],n&&(d=n[t])),this.trigger(c.JWPLAYER_PLAYLIST_ITEM,{index:t,item:a}),u=g.extend({},i,d),s.load(a),this.addClickHandler();var f=a.skipoffset||u.skipoffset;f&&(s._adModel.set("skipMessage",u.skipMessage),s._adModel.set("skipText",u.skipText),s._adModel.set("skipOffset",f),b.set("skipButton",!0))},this.applyProviderListeners=function(a){s.applyProviderListeners(a),this.addClickHandler()},this.play=function(){s.instreamPlay()},this.pause=function(){s.instreamPause()},this.hide=function(){s.hide()},this.addClickHandler=function(){f.clickHandler().setAlternateClickHandlers(v,w),s.on(c.JWPLAYER_MEDIA_META,this.metaHandler,this)},this.skipAd=function(a){var b=c.JWPLAYER_AD_SKIPPED;this.trigger(b,a),l.call(this,{type:b})},this.metaHandler=function(a){a.width&&a.height&&f.resizeMedia()},this.destroy=function(){if(this.off(),b.set("skipButton",!1),s){f.clickHandler()&&f.clickHandler().revertAlternateClickHandlers(),s.instreamDestroy(),f.destroyInstream(),s=null,a.attachMedia();switch(b.get("preInstreamState")){case"instream-preroll":case"instream-midroll":var c=g.extend({},q);c.starttime=p,b.loadVideo(c),e.isMobile()&&b.mediaModel.get("state")===d.BUFFERING&&o.setState(d.BUFFERING),o.play();break;case"instream-postroll":case"instream-idle":o.stop()}}},this.getState=function(){return!(!s||!s._adModel)&&s._adModel.get("state")},this.setText=function(a){f.setAltText(a||"")},this.hide=function(){f.useExternalControls()}};return g.extend(j.prototype,f),j}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(3),c(29),c(30),c(4),c(7),c(2),c(1)],void 0!==(e=function(a,b,c,d,e,f,g){var h=function(a,d){this.model=d,this._adModel=(new b).setup({id:d.get("id"),volume:d.get("volume"),fullscreen:d.get("fullscreen"),mute:d.get("mute")}),this._adModel.on("change:state",c,this);var e=a.getContainer();this.swf=e.querySelector("object")};return h.prototype=g.extend({init:function(){if(f.isChrome()){var a=-1,b=!1;this.swf.on("throttle",function(c){if(clearTimeout(a),"resume"===c.state)b&&(b=!1,this.instreamPlay());else{var d=this;a=setTimeout(function(){d._adModel.get("state")===e.PLAYING&&(b=!0,d.instreamPause())},250)}},this)}this.swf.on("instream:state",function(a){switch(a.newstate){
case e.PLAYING:this._adModel.set("state",a.newstate);break;case e.PAUSED:this._adModel.set("state",a.newstate)}},this).on("instream:time",function(a){this._adModel.set("position",a.position),this._adModel.set("duration",a.duration),this.trigger(d.JWPLAYER_MEDIA_TIME,a)},this).on("instream:complete",function(a){this.trigger(d.JWPLAYER_MEDIA_COMPLETE,a)},this).on("instream:error",function(a){this.trigger(d.JWPLAYER_MEDIA_ERROR,a)},this),this.swf.triggerFlash("instream:init"),this.applyProviderListeners=function(a){this.model.on("change:volume",function(b,c){a.volume(c)},this),this.model.on("change:mute",function(b,c){a.mute(c)},this)}},instreamDestroy:function(){this._adModel&&(this.off(),this.swf.off(null,null,this),this.swf.triggerFlash("instream:destroy"),this.swf=null,this._adModel.off(),this._adModel=null,this.model=null)},load:function(a){this.swf.triggerFlash("instream:load",a)},instreamPlay:function(){this.swf.triggerFlash("instream:play")},instreamPause:function(){this.swf.triggerFlash("instream:pause")}},a),h}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1),c(3),c(30),c(4),c(7),c(29)],void 0!==(e=function(a,b,c,d,e,f){return function(g,h){function i(b){var e=b||m.getVideo();if(n!==e){if(n=e,!e)return;e.off(),e.on("all",function(b,c){c=a.extend({},c,{type:b}),this.trigger(b,c)},o),e.on(d.JWPLAYER_MEDIA_BUFFER_FULL,l),e.on(d.JWPLAYER_PLAYER_STATE,j),e.attachMedia(),e.volume(h.get("volume")),e.mute(h.get("mute")),m.on("change:state",c,o)}}function j(a){switch(a.newstate){case e.PLAYING:m.set("state",a.newstate);break;case e.PAUSED:m.set("state",a.newstate)}}function k(a){h.trigger(a.type,a),o.trigger(d.JWPLAYER_FULLSCREEN,{fullscreen:a.jwstate})}function l(){m.getVideo().play()}var m,n,o=a.extend(this,b);return g.on(d.JWPLAYER_FULLSCREEN,function(a){this.trigger(d.JWPLAYER_FULLSCREEN,a)},o),this.init=function(){m=(new f).setup({id:h.get("id"),volume:h.get("volume"),fullscreen:h.get("fullscreen"),mute:h.get("mute")}),m.on("fullscreenchange",k),this._adModel=m},o.load=function(a){m.set("item",0),m.set("playlistItem",a),m.setActiveItem(a),i(),m.off(d.JWPLAYER_ERROR),m.on(d.JWPLAYER_ERROR,function(a){this.trigger(d.JWPLAYER_ERROR,a)},o),m.loadVideo(a)},o.applyProviderListeners=function(a){i(a),a.off(d.JWPLAYER_ERROR),a.on(d.JWPLAYER_ERROR,function(a){this.trigger(d.JWPLAYER_ERROR,a)},o),h.on("change:volume",function(a,b){n.volume(b)},o),h.on("change:mute",function(a,b){n.mute(b)},o)},this.instreamDestroy=function(){m&&(m.off(),this.off(),n&&(n.detachMedia(),n.off(),m.getVideo()&&n.destroy()),m=null,g.off(null,null,this),g=null)},o.instreamPlay=function(){m.getVideo()&&m.getVideo().play(!0)},o.instreamPause=function(){m.getVideo()&&m.getVideo().pause(!0)},o}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(66),c(4),c(1)],void 0!==(e=function(a,b,c){function d(a){a.mediaController.off(b.JWPLAYER_MEDIA_PLAY_ATTEMPT,a._onPlayAttempt),a.mediaController.off(b.JWPLAYER_PROVIDER_FIRST_FRAME,a._triggerFirstFrame),a.mediaController.off(b.JWPLAYER_MEDIA_TIME,a._onTime)}function e(a){d(a),a._triggerFirstFrame=c.once(function(){var c=a._qoeItem;c.tick(b.JWPLAYER_MEDIA_FIRST_FRAME);var e=c.between(b.JWPLAYER_MEDIA_PLAY_ATTEMPT,b.JWPLAYER_MEDIA_FIRST_FRAME);a.mediaController.trigger(b.JWPLAYER_MEDIA_FIRST_FRAME,{loadTime:e}),d(a)}),a._onTime=g(a._triggerFirstFrame),a._onPlayAttempt=function(){a._qoeItem.tick(b.JWPLAYER_MEDIA_PLAY_ATTEMPT)},a.mediaController.on(b.JWPLAYER_MEDIA_PLAY_ATTEMPT,a._onPlayAttempt),a.mediaController.once(b.JWPLAYER_PROVIDER_FIRST_FRAME,a._triggerFirstFrame),a.mediaController.on(b.JWPLAYER_MEDIA_TIME,a._onTime)}function f(c){function d(c,d,f){c._qoeItem&&f&&c._qoeItem.end(f.get("state")),c._qoeItem=new a,c._qoeItem.tick(b.JWPLAYER_PLAYLIST_ITEM),c._qoeItem.start(d.get("state")),e(c),d.on("change:state",function(a,b,d){c._qoeItem.end(d),c._qoeItem.start(b)})}c.on("change:mediaModel",d)}var g=function(a){var b=Number.MIN_VALUE;return function(c){c.position>b&&a(),b=c.position}};return{model:f}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(22),c(37),c(58),c(45),c(23),c(1),c(2),c(4),c(8),c(18)],void 0!==(e=function(a,b,d,e,f,g,h,i,j,k){function l(){return{LOAD_PROMISE_POLYFILL:{method:m,depends:[]},LOAD_BASE64_POLYFILL:{method:n,depends:[]},LOAD_JSON2:{method:o,depends:[]},LOADED_POLYFILLS:{method:u,depends:["LOAD_PROMISE_POLYFILL","LOAD_BASE64_POLYFILL","LOAD_JSON2"]},LOAD_PLUGINS:{method:v,depends:["LOADED_POLYFILLS"]},INIT_PLUGINS:{method:w,depends:["LOAD_PLUGINS","SETUP_VIEW"]},LOAD_FLVJS:{method:p,depends:[]},LOAD_VIDEOJS_LEVELS:{method:r,depends:["LOAD_VIDEOJS_HLS"]},LOAD_VIDEOJS_HLS:{method:s,depends:["LOAD_VIDEOJS"]},LOAD_VIDEOJS:{method:t,depends:[]},LOAD_PROVIDERS:{method:H,depends:["FILTER_PLAYLIST"]},LOAD_SKIN:{method:G,depends:["LOADED_POLYFILLS"]},LOAD_PLAYLIST:{method:y,depends:["LOADED_POLYFILLS"]},FILTER_PLAYLIST:{method:z,depends:["LOAD_PLAYLIST","LOAD_FLVJS","LOAD_VIDEOJS_LEVELS"]},SETUP_VIEW:{method:I,depends:["LOAD_SKIN"]},SEND_READY:{method:J,depends:["INIT_PLUGINS","LOAD_PROVIDERS","SETUP_VIEW"]}}}function m(a){window.Promise?a():function(require){c(40),a()}()}function n(a){window.btoa&&window.atob?a():function(require){c(38),a()}()}function o(a){window.JSON?a():function(require){c(39),a()}()}function p(a,b){var d=b.get("playlist");!0!==b.get("hevc")&&h.isFlvjsSupported()&&(h.isFlv(d[0].file)||d[0].sources&&h.isFlv(d[0].sources[0].file))?c.e(1,function(require){a()}):a()}function q(a){return h.isFlvjsSupported()&&!h.isMobile()&&(h.isHls(a[0].file)||a[0].sources&&h.isHls(a[0].sources[0].file))}function r(a,b){if(q(b.get("playlist"))&&window.videojs&&!window.videojs.getPlugin("qualityLevels")&&!b.get("isLive")){var c=new e(""+f.repo+k+"/videojs/videojs-contrib-quality-levels.min.js",!1);c.addEventListener(i.COMPLETE,function(){a()}),c.load()}else a()}function s(a,b){if(q(b.get("playlist"))&&window.videojs&&!window.videojs.m3u8){var c=new e(""+f.repo+k+"/videojs/videojs-contrib-hls.min.js",!1);c.addEventListener(i.COMPLETE,function(){a()}),c.load()}else a()}function t(a,b){if(q(b.get("playlist"))&&!window.videojs){var c=new e(""+f.repo+k+"/videojs/video.min.js",!1);c.addEventListener(i.COMPLETE,function(){a()}),c.load()}else a()}function u(a){a()}function v(a,c){L=b.loadPlugins(c.get("id"),c.get("plugins")),L.on(i.COMPLETE,a),L.on(i.ERROR,g.partial(x,a)),L.load()}function w(a,b,c){L.setupPlugins(c,b),a()}function x(a,b){K(a,"Could not load plugin",b.message)}function y(a,b){var c=b.get("playlist");g.isString(c)?(M=new d,M.on(i.JWPLAYER_PLAYLIST_LOADED,function(c){b.set("playlist",c.playlist),b.set("feedid",c.feedid),a()}),M.on(i.JWPLAYER_ERROR,g.partial(D,a)),M.load(c)):a()}function z(a,b,c,d,e){var f=b.get("playlist");if(e(f))a();else{var g={},h=A(f);g.message=h.errorMessage,g.code=h.errorCode,"111"===g.code?B(a,g):C(a,g)}}function A(a){var b="",c="";return h.flashVersion()||h.isMobile()?h.flashVersion()&&h.flashVersion()<11.2?(b='Flash Player11.2, <a href="https://get.adobe.com/cn/flashplayer/" target="_blank">Flash Player</a>',c="102"):h.isMobile()&&(h.isRtmp(a[0].file)||h.isFlv(a[0].file))&&(b="rtmpflv",c="111"):(b='Flash Player<a href="https://get.adobe.com/cn/flashplayer/" target="_blank"></a>',c="101"),{errorMessage:b,errorCode:c}}function B(a,b){b&&b.message&&K(a,"",b.message,b.code||"")}function C(a,b){b&&b.message&&K(a,"",b.message,b.code||"")}function D(a,b){b&&b.message?K(a,"",b.message):K(a,"","")}function E(a,b){if(g.contains(f.SkinsLoadable,a))return b+"skins/"+a+".css"}function F(a){for(var b=document.styleSheets,c=0,d=b.length;c<d;c++)if(b[c].href===a)return!0;return!1}function G(a,b){var c=b.get("skin"),d=b.get("skinUrl");if(g.contains(f.SkinsIncluded,c))return void a();if(!d){d=E(c,f.repo)}if(g.isString(d)&&!F(d)){b.set("skin-loading",!0);var h=new e(d,!0);h.addEventListener(i.COMPLETE,function(){b.set("skin-loading",!1)}),h.addEventListener(i.ERROR,function(){b.set("skin","bce"),b.set("skin-loading",!1)}),h.load()}g.defer(function(){a()})}function H(b,c){var d=c.getProviders(),e=c.get("playlist"),f=d.required(e);a.load(f).then(b)}function I(a,b,c,d){d.setup(),a()}function J(a){a({type:"complete"})}function K(a,b,c,d){a({type:"error",msg:b,reason:c,code:d||""})}var L,M;return{getQueue:l,error:K}}.apply(b,d))&&(a.exports=e)},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var e=c(53),f=function(a){return a&&a.__esModule?a:{"default":a}}(e),g=c(31),h=function(){function a(){d(this,a)}return a.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},a.supportNetworkStreamIO=function(){var a=new f["default"]({},(0,g.createDefaultConfig)()),b=a.loaderType;return a.destroy(),"fetch-stream-loader"==b||"xhr-moz-chunked-loader"==b},a.getNetworkLoaderTypeName=function(){var a=new f["default"]({},(0,g.createDefaultConfig)()),b=a.loaderType;return a.destroy(),b},a.supportNativeMediaPlayback=function(b){void 0==a.videoElement&&(a.videoElement=window.document.createElement("video"));var c=a.videoElement.canPlayType(b);return"probably"===c||"maybe"==c},a.getFeatureList=function(){var b={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return b.mseFlvPlayback=a.supportMSEH264Playback(),b.networkStreamIO=a.supportNetworkStreamIO(),b.networkLoaderName=a.getNetworkLoaderTypeName(),b.mseLiveFlvPlayback=b.mseFlvPlayback&&b.networkStreamIO,b.nativeMP4H264Playback=a.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),b.nativeWebmVP8Playback=a.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),b.nativeWebmVP9Playback=a.supportNativeMediaPlayback('video/webm; codecs="vp9"'),b},a}();b["default"]=h,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var f=c(16),g=d(f),h=c(6),i=d(h),j=c(19),k=d(j),l=c(50),m=d(l),n=c(49),o=c(5),p=function(){function a(b){e(this,a),this.TAG="MSEController",this._config=b,this._emitter=new g["default"],this._config.isLive&&void 0==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new n.IDRSampleList}return a.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},a.prototype.on=function(a,b){this._emitter.addListener(a,b)},a.prototype.off=function(a,b){this._emitter.removeListener(a,b)},a.prototype.attachMediaElement=function(a){if(this._mediaSource)throw new o.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var b=this._mediaSource=new window.MediaSource;b.addEventListener("sourceopen",this.e.onSourceOpen),b.addEventListener("sourceended",this.e.onSourceEnded),b.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=a,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),a.src=this._mediaSourceObjectURL},a.prototype.detachMediaElement=function(){if(this._mediaSource){var a=this._mediaSource;for(var b in this._sourceBuffers){var c=this._pendingSegments[b];c.splice(0,c.length),this._pendingSegments[b]=null,this._pendingRemoveRanges[b]=null,this._lastInitSegments[b]=null;var d=this._sourceBuffers[b];if(d){if("closed"!==a.readyState){try{a.removeSourceBuffer(d)}catch(a){i["default"].e(this.TAG,a.message)}d.removeEventListener("error",this.e.onSourceBufferError),d.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[b]=null,this._sourceBuffers[b]=null}}if("open"===a.readyState)try{a.endOfStream()}catch(a){i["default"].e(this.TAG,a.message)}a.removeEventListener("sourceopen",this.e.onSourceOpen),a.removeEventListener("sourceended",this.e.onSourceEnded),a.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},a.prototype.appendInitSegment=function(a,b){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(a),void this._pendingSegments[a.type].push(a);var c=a,d=""+c.container;c.codec&&c.codec.length>0&&(d+=";codecs="+c.codec);var e=!1;if(i["default"].v(this.TAG,"Received Initialization Segment, mimeType: "+d),this._lastInitSegments[c.type]=c,d!==this._mimeTypes[c.type]){if(this._mimeTypes[c.type])i["default"].v(this.TAG,"Notice: "+c.type+" mimeType changed, origin: "+this._mimeTypes[c.type]+", target: "+d);else{e=!0;try{var f=this._sourceBuffers[c.type]=this._mediaSource.addSourceBuffer(d);f.addEventListener("error",this.e.onSourceBufferError),f.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(a){return i["default"].e(this.TAG,a.message),void this._emitter.emit(m["default"].ERROR,{code:a.code,msg:a.message})}}this._mimeTypes[c.type]=d}b||this._pendingSegments[c.type].push(c),e||this._sourceBuffers[c.type]&&!this._sourceBuffers[c.type].updating&&this._doAppendSegments(),k["default"].safari&&"audio/mpeg"===c.container&&c.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=c.mediaDuration/1e3,this._updateMediaSourceDuration())},a.prototype.appendMediaSegment=function(a){var b=a;this._pendingSegments[b.type].push(b),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var c=this._sourceBuffers[b.type];!c||c.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},a.prototype.seek=function(a){for(var b in this._sourceBuffers)if(this._sourceBuffers[b]){var c=this._sourceBuffers[b];if("open"===this._mediaSource.readyState)try{c.abort()}catch(a){i["default"].e(this.TAG,a.message)}this._idrList.clear();var d=this._pendingSegments[b];if(d.splice(0,d.length),"closed"!==this._mediaSource.readyState){for(var e=0;e<c.buffered.length;e++){var f=c.buffered.start(e),g=c.buffered.end(e);this._pendingRemoveRanges[b].push({start:f,end:g})}if(c.updating||this._doRemoveRanges(),k["default"].safari){var h=this._lastInitSegments[b];h&&(this._pendingSegments[b].push(h),c.updating||this._doAppendSegments())}}}},a.prototype.endOfStream=function(){var a=this._mediaSource,b=this._sourceBuffers;return a&&"open"===a.readyState?void(b.video&&b.video.updating||b.audio&&b.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,a.endOfStream())):void(a&&"closed"===a.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0))},a.prototype.getNearestKeyframe=function(a){return this._idrList.getLastSyncPointBeforeDts(a)},a.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var a=this._mediaElement.currentTime;for(var b in this._sourceBuffers){var c=this._sourceBuffers[b];if(c){var d=c.buffered;if(d.length>=1&&a-d.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},a.prototype._doCleanupSourceBuffer=function(){var a=this._mediaElement.currentTime;for(var b in this._sourceBuffers){var c=this._sourceBuffers[b];if(c){for(var d=c.buffered,e=!1,f=0;f<d.length;f++){var g=d.start(f),h=d.end(f);if(g<=a&&a<h+3){if(a-g>=this._config.autoCleanupMaxBackwardDuration){e=!0;var i=a-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[b].push({start:g,end:i})}}else h<a&&(e=!0,this._pendingRemoveRanges[b].push({start:g,end:h}))}e&&!c.updating&&this._doRemoveRanges()}}},a.prototype._updateMediaSourceDuration=function(){var a=this._sourceBuffers;if(0!==this._mediaElement.readyState&&"open"===this._mediaSource.readyState&&!(a.video&&a.video.updating||a.audio&&a.audio.updating)){var b=this._mediaSource.duration,c=this._pendingMediaDuration;c>0&&(isNaN(b)||c>b)&&(i["default"].v(this.TAG,"Update MediaSource duration from "+b+" to "+c),this._mediaSource.duration=c),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},a.prototype._doRemoveRanges=function(){for(var a in this._pendingRemoveRanges)if(this._sourceBuffers[a]&&!this._sourceBuffers[a].updating)for(var b=this._sourceBuffers[a],c=this._pendingRemoveRanges[a];c.length&&!b.updating;){var d=c.shift();b.remove(d.start,d.end)}},a.prototype._doAppendSegments=function(){var a=this._pendingSegments;for(var b in a)if(this._sourceBuffers[b]&&!this._sourceBuffers[b].updating&&a[b].length>0){var c=a[b].shift();if(c.timestampOffset){var d=this._sourceBuffers[b].timestampOffset,e=c.timestampOffset/1e3,f=Math.abs(d-e);f>.1&&(i["default"].v(this.TAG,"Update MPEG audio timestampOffset from "+d+" to "+e),this._sourceBuffers[b].timestampOffset=e),delete c.timestampOffset}if(!c.data||0===c.data.byteLength)continue;try{this._sourceBuffers[b].appendBuffer(c.data),this._isBufferFull=!1,"video"===b&&c.hasOwnProperty("info")&&this._idrList.appendArray(c.info.syncPoints)}catch(a){this._pendingSegments[b].unshift(c),22===a.code?(this._isBufferFull||this._emitter.emit(m["default"].BUFFER_FULL),this._isBufferFull=!0):(i["default"].e(this.TAG,a.message),this._emitter.emit(m["default"].ERROR,{code:a.code,msg:a.message}))}}},a.prototype._onSourceOpen=function(){if(i["default"].v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var a=this._pendingSourceBufferInit;a.length;){var b=a.shift();this.appendInitSegment(b,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(m["default"].SOURCE_OPEN)},a.prototype._onSourceEnded=function(){i["default"].v(this.TAG,"MediaSource onSourceEnded")},a.prototype._onSourceClose=function(){i["default"].v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},a.prototype._hasPendingSegments=function(){var a=this._pendingSegments;return a.video.length>0||a.audio.length>0},a.prototype._hasPendingRemoveRanges=function(){var a=this._pendingRemoveRanges;return a.video.length>0||a.audio.length>0},a.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(m["default"].UPDATE_END)},a.prototype._onSourceBufferError=function(a){i["default"].e(this.TAG,"SourceBuffer Error: "+a)},a}();b["default"]=p,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var f=c(16),g=d(f),h=c(6),i=d(h),j=c(35),k=d(j),l=c(51),m=d(l),n=c(27),o=d(n),p=c(93),q=d(p),r=c(32),s=d(r),t=function(){function a(b,d){if(e(this,a),this.TAG="Transmuxer",this._emitter=new g["default"],d.enableWorker&&"undefined"!=typeof Worker)try{var f=c(173);this._worker=f(q["default"]),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[b,d]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},k["default"].registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:k["default"].getConfig()})}catch(a){i["default"].e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new m["default"](b,d)}else this._controller=new m["default"](b,d);if(this._controller){var h=this._controller;h.on(o["default"].IO_ERROR,this._onIOError.bind(this)),h.on(o["default"].DEMUX_ERROR,this._onDemuxError.bind(this)),h.on(o["default"].INIT_SEGMENT,this._onInitSegment.bind(this)),h.on(o["default"].MEDIA_SEGMENT,this._onMediaSegment.bind(this)),h.on(o["default"].LOADING_COMPLETE,this._onLoadingComplete.bind(this)),h.on(o["default"].RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),h.on(o["default"].MEDIA_INFO,this._onMediaInfo.bind(this)),h.on(o["default"].METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),h.on(o["default"].SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),h.on(o["default"].STATISTICS_INFO,this._onStatisticsInfo.bind(this)),h.on(o["default"].RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return a.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),k["default"].removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},a.prototype.on=function(a,b){this._emitter.addListener(a,b)},a.prototype.off=function(a,b){this._emitter.removeListener(a,b)},a.prototype.hasWorker=function(){return null!=this._worker},a.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},a.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},a.prototype.seek=function(a){this._worker?this._worker.postMessage({cmd:"seek",param:a}):this._controller.seek(a)},a.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},a.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},a.prototype._onInitSegment=function(a,b){var c=this;Promise.resolve().then(function(){c._emitter.emit(o["default"].INIT_SEGMENT,a,b)})},a.prototype._onMediaSegment=function(a,b){var c=this;Promise.resolve().then(function(){c._emitter.emit(o["default"].MEDIA_SEGMENT,a,b)})},a.prototype._onLoadingComplete=function(){var a=this;Promise.resolve().then(function(){a._emitter.emit(o["default"].LOADING_COMPLETE)})},a.prototype._onRecoveredEarlyEof=function(){var a=this;Promise.resolve().then(function(){a._emitter.emit(o["default"].RECOVERED_EARLY_EOF)})},a.prototype._onMediaInfo=function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(o["default"].MEDIA_INFO,a)})},a.prototype._onMetaDataArrived=function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(o["default"].METADATA_ARRIVED,a)})},a.prototype._onScriptDataArrived=function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(o["default"].SCRIPTDATA_ARRIVED,a)})},a.prototype._onStatisticsInfo=function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(o["default"].STATISTICS_INFO,a)})},a.prototype._onIOError=function(a,b){var c=this;Promise.resolve().then(function(){c._emitter.emit(o["default"].IO_ERROR,a,b)})},a.prototype._onDemuxError=function(a,b){var c=this;Promise.resolve().then(function(){c._emitter.emit(o["default"].DEMUX_ERROR,a,b)})},a.prototype._onRecommendSeekpoint=function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(o["default"].RECOMMEND_SEEKPOINT,a)})},a.prototype._onLoggingConfigChanged=function(a){this._worker&&this._worker.postMessage({cmd:"logging_config",param:a})},a.prototype._onWorkerMessage=function(a){var b=a.data,c=b.data;if("destroyed"===b.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(b.msg){case o["default"].INIT_SEGMENT:case o["default"].MEDIA_SEGMENT:this._emitter.emit(b.msg,c.type,c.data);break;case o["default"].LOADING_COMPLETE:case o["default"].RECOVERED_EARLY_EOF:this._emitter.emit(b.msg);break;case o["default"].MEDIA_INFO:Object.setPrototypeOf(c,s["default"].prototype),this._emitter.emit(b.msg,c);break;case o["default"].METADATA_ARRIVED:case o["default"].SCRIPTDATA_ARRIVED:case o["default"].STATISTICS_INFO:this._emitter.emit(b.msg,c);break;case o["default"].IO_ERROR:case o["default"].DEMUX_ERROR:this._emitter.emit(b.msg,c.type,c.info);break;case o["default"].RECOMMEND_SEEKPOINT:this._emitter.emit(b.msg,c);break;case"logcat_callback":i["default"].emitter.emit("log",c.type,c.logcat)}},a}();b["default"]=t,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var e=c(6),f=(d(e),c(35)),g=d(f),h=c(56),i=d(h),j=c(51),k=d(j),l=c(27),m=d(l),n=function(a){function b(b,c){var d={msg:m["default"].INIT_SEGMENT,data:{type:b,data:c}};a.postMessage(d,[c.data])}function c(b,c){var d={msg:m["default"].MEDIA_SEGMENT,data:{type:b,data:c}};a.postMessage(d,[c.data])}function d(){var b={msg:m["default"].LOADING_COMPLETE};a.postMessage(b)}function e(){var b={msg:m["default"].RECOVERED_EARLY_EOF};a.postMessage(b)}function f(b){var c={msg:m["default"].MEDIA_INFO,data:b};a.postMessage(c)}function h(b){var c={msg:m["default"].METADATA_ARRIVED,data:b};a.postMessage(c)}function j(b){var c={msg:m["default"].SCRIPTDATA_ARRIVED,data:b};a.postMessage(c)}function l(b){var c={msg:m["default"].STATISTICS_INFO,data:b};a.postMessage(c)}function n(b,c){a.postMessage({msg:m["default"].IO_ERROR,data:{type:b,info:c}})}function o(b,c){a.postMessage({msg:m["default"].DEMUX_ERROR,data:{type:b,info:c}})}function p(b){a.postMessage({msg:m["default"].RECOMMEND_SEEKPOINT,data:b})}function q(b,c){a.postMessage({msg:"logcat_callback",data:{type:b,logcat:c}})}var r=null,s=q.bind(this);i["default"].install(),a.addEventListener("message",function(i){switch(i.data.cmd){case"init":r=new k["default"](i.data.param[0],i.data.param[1]),r.on(m["default"].IO_ERROR,n.bind(this)),r.on(m["default"].DEMUX_ERROR,o.bind(this)),r.on(m["default"].INIT_SEGMENT,b.bind(this)),r.on(m["default"].MEDIA_SEGMENT,c.bind(this)),r.on(m["default"].LOADING_COMPLETE,d.bind(this)),r.on(m["default"].RECOVERED_EARLY_EOF,e.bind(this)),r.on(m["default"].MEDIA_INFO,f.bind(this)),r.on(m["default"].METADATA_ARRIVED,h.bind(this)),r.on(m["default"].SCRIPTDATA_ARRIVED,j.bind(this)),r.on(m["default"].STATISTICS_INFO,l.bind(this)),r.on(m["default"].RECOMMEND_SEEKPOINT,p.bind(this));break;case"destroy":r&&(r.destroy(),r=null),a.postMessage({msg:"destroyed"});break;case"start":r.start();break;case"stop":r.stop();break;case"seek":r.seek(i.data.param);break;case"pause":r.pause();break;case"resume":r.resume();break;case"logging_config":var q=i.data.param;g["default"].applyConfig(q),!0===q.enableCallback?g["default"].addLogListener(s):g["default"].removeLogListener(s)}})};b["default"]=n,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var f=c(6),g=d(f),h=c(111),i=d(h),j=c(5),k=function(){var a=new ArrayBuffer(2);return new DataView(a).setInt16(0,256,!0),256===new Int16Array(a)[0]}(),l=function(){function a(){e(this,a)}return a.parseScriptData=function(b,c,d){var e={};try{var f=a.parseValue(b,c,d),h=a.parseValue(b,c+f.size,d-f.size);e[f.data]=h.data}catch(a){g["default"].e("AMF",a.toString())}return e},a.parseObject=function(b,c,d){if(d<3)throw new j.IllegalStateException("Data not enough when parse ScriptDataObject");var e=a.parseString(b,c,d),f=a.parseValue(b,c+e.size,d-e.size),g=f.objectEnd;return{data:{name:e.data,value:f.data},size:e.size+f.size,objectEnd:g}},a.parseVariable=function(b,c,d){return a.parseObject(b,c,d)},a.parseString=function(a,b,c){if(c<2)throw new j.IllegalStateException("Data not enough when parse String");var d=new DataView(a,b,c),e=d.getUint16(0,!k),f=void 0;return f=e>0?(0,i["default"])(new Uint8Array(a,b+2,e)):"",{data:f,size:2+e}},a.parseLongString=function(a,b,c){if(c<4)throw new j.IllegalStateException("Data not enough when parse LongString");var d=new DataView(a,b,c),e=d.getUint32(0,!k),f=void 0;return f=e>0?(0,i["default"])(new Uint8Array(a,b+4,e)):"",{data:f,size:4+e}},a.parseDate=function(a,b,c){if(c<10)throw new j.IllegalStateException("Data size invalid when parse Date");var d=new DataView(a,b,c),e=d.getFloat64(0,!k);return e+=60*d.getInt16(8,!k)*1e3,{data:new Date(e),size:10}},a.parseValue=function(b,c,d){if(d<1)throw new j.IllegalStateException("Data not enough when parse Value");var e=new DataView(b,c,d),f=1,h=e.getUint8(0),i=void 0,l=!1;try{switch(h){case 0:i=e.getFloat64(1,!k),f+=8;break;case 1:i=!!e.getUint8(1),f+=1;break;case 2:var m=a.parseString(b,c+1,d-1);i=m.data,f+=m.size;break;case 3:i={};var n=0;for(9==(16777215&e.getUint32(d-4,!k))&&(n=3);f<d-4;){var o=a.parseObject(b,c+f,d-f-n);if(o.objectEnd)break;i[o.data.name]=o.data.value,f+=o.size}if(f<=d-3){9===(16777215&e.getUint32(f-1,!k))&&(f+=3)}break;case 8:i={},f+=4;var p=0;for(9==(16777215&e.getUint32(d-4,!k))&&(p=3);f<d-8;){var q=a.parseVariable(b,c+f,d-f-p);if(q.objectEnd)break;i[q.data.name]=q.data.value,f+=q.size}if(f<=d-3){9===(16777215&e.getUint32(f-1,!k))&&(f+=3)}break;case 9:i=void 0,f=1,l=!0;break;case 10:i=[];var r=e.getUint32(1,!k);f+=4;for(var s=0;s<r;s++){var t=a.parseValue(b,c+f,d-f);i.push(t.data),f+=t.size}break;case 11:var u=a.parseDate(b,c+1,d-1);i=u.data,f+=u.size;break;case 12:var v=a.parseString(b,c+1,d-1);i=v.data,f+=v.size;break;default:f=d,g["default"].w("AMF","Unsupported AMF value type "+h)}}catch(a){g["default"].e("AMF",a.toString())}return{data:i,size:f,objectEnd:l}},a}();b["default"]=l,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var e=c(5),f=function(){function a(b){d(this,a),this.TAG="ExpGolomb",this._buffer=b,this._buffer_index=0,this._total_bytes=b.byteLength,this._total_bits=8*b.byteLength,this._current_word=0,this._current_word_bits_left=0}return a.prototype.destroy=function(){this._buffer=null},a.prototype._fillCurrentWord=function(){var a=this._total_bytes-this._buffer_index;if(a<=0)throw new e.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var b=Math.min(4,a),c=new Uint8Array(4);c.set(this._buffer.subarray(this._buffer_index,this._buffer_index+b)),this._current_word=new DataView(c.buffer).getUint32(0,!1),this._buffer_index+=b,this._current_word_bits_left=8*b},a.prototype.readBits=function(a){if(a>32)throw new e.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(a<=this._current_word_bits_left){var b=this._current_word>>>32-a;return this._current_word<<=a,this._current_word_bits_left-=a,b}var c=this._current_word_bits_left?this._current_word:0;c>>>=32-this._current_word_bits_left;var d=a-this._current_word_bits_left;this._fillCurrentWord();var f=Math.min(d,this._current_word_bits_left),g=this._current_word>>>32-f;return this._current_word<<=f,this._current_word_bits_left-=f,c=c<<f|g},a.prototype.readBool=function(){return 1===this.readBits(1)},a.prototype.readByte=function(){return this.readBits(8)},a.prototype._skipLeadingZero=function(){var a=void 0;for(a=0;a<this._current_word_bits_left;a++)if(0!=(this._current_word&2147483648>>>a))return this._current_word<<=a,
this._current_word_bits_left-=a,a;return this._fillCurrentWord(),a+this._skipLeadingZero()},a.prototype.readUEG=function(){var a=this._skipLeadingZero();return this.readBits(a+1)-1},a.prototype.readSEG=function(){var a=this.readUEG();return 1&a?a+1>>>1:-1*(a>>>1)},a}();b["default"]=f,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){return a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3]}b.__esModule=!0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(6),j=d(i),k=c(94),l=d(k),m=c(97),n=d(m),o=c(33),p=d(o),q=c(32),r=d(q),s=c(5),t=function(){function a(b,c){e(this,a),this.TAG="FLVDemuxer",this._config=c,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=b.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=b.hasAudioTrack,this._hasVideo=b.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new r["default"],this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var a=new ArrayBuffer(2);return new DataView(a).setInt16(0,256,!0),256===new Int16Array(a)[0]}()}return a.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},a.probe=function(a){var b=new Uint8Array(a),c={match:!1};if(70!==b[0]||76!==b[1]||86!==b[2]||1!==b[3])return c;var d=(4&b[4])>>>2!=0,e=0!=(1&b[4]),g=f(b,5);return g<9?c:{match:!0,consumed:g,dataOffset:g,hasAudioTrack:d,hasVideoTrack:e}},a.prototype.bindDataSource=function(a){return a.onDataArrival=this.parseChunks.bind(this),this},a.prototype.resetMediaInfo=function(){this._mediaInfo=new r["default"]},a.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},a.prototype.parseChunks=function(b,c){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new s.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var d=0,e=this._littleEndian;if(0===c){if(!(b.byteLength>13))return 0;var f=a.probe(b);d=f.dataOffset,this.overridedHasVideo=f.hasVideoTrack,this.overridedHasAudio=f.hasAudioTrack}if(this._firstParse){this._firstParse=!1,c+d!==this._dataOffset&&j["default"].w(this.TAG,"First time parsing but chunk byteStart invalid!");0!==new DataView(b,d).getUint32(0,!e)&&j["default"].w(this.TAG,"PrevTagSize0 !== 0 !!!"),d+=4}for(;d<b.byteLength;){this._dispatch=!0;var g=new DataView(b,d);if(d+11+4>b.byteLength)break;var h=g.getUint8(0),i=16777215&g.getUint32(0,!e);if(d+11+i+4>b.byteLength)break;if(8===h||9===h||18===h){var k=g.getUint8(4),l=g.getUint8(5),m=g.getUint8(6),n=g.getUint8(7),o=m|l<<8|k<<16|n<<24;0!==(16777215&g.getUint32(7,!e))&&j["default"].w(this.TAG,"Meet tag which has StreamID != 0!");var p=d+11;switch(h){case 8:this._parseAudioData(b,p,i,o);break;case 9:this._parseVideoData(b,p,i,o,c+d);break;case 18:this._parseScriptData(b,p,i)}var q=g.getUint32(11+i,!e);q!==11+i&&j["default"].w(this.TAG,"Invalid PrevTagSize "+q),d+=11+i+4}else j["default"].w(this.TAG,"Unsupported tag type "+h+", skipped"),d+=11+i+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),d},a.prototype._parseScriptData=function(a,b,c){var d=l["default"].parseScriptData(a,b,c);if(d.hasOwnProperty("onMetaData")){if(null==d.onMetaData||"object"!==g(d.onMetaData))return void j["default"].w(this.TAG,"Invalid onMetaData structure!");this._metadata&&j["default"].w(this.TAG,"Found another onMetaData tag!"),this._metadata=d;var e=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},e)),"boolean"==typeof e.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=e.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof e.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=e.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof e.audiodatarate&&(this._mediaInfo.audioDataRate=e.audiodatarate),"number"==typeof e.videodatarate&&(this._mediaInfo.videoDataRate=e.videodatarate),"number"==typeof e.width&&(this._mediaInfo.width=e.width),"number"==typeof e.height&&(this._mediaInfo.height=e.height),"number"==typeof e.duration){if(!this._durationOverrided){var f=Math.floor(e.duration*this._timescale);this._duration=f,this._mediaInfo.duration=f}}else this._mediaInfo.duration=0;if("number"==typeof e.framerate){var h=Math.floor(1e3*e.framerate);if(h>0){var i=h/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=i,this._referenceFrameRate.fps_num=h,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=i}}if("object"===g(e.keyframes)){this._mediaInfo.hasKeyframesIndex=!0;var k=e.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(k),e.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=e,j["default"].v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(d).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},d))},a.prototype._parseKeyframesIndex=function(a){for(var b=[],c=[],d=1;d<a.times.length;d++){var e=this._timestampBase+Math.floor(1e3*a.times[d]);b.push(e),c.push(a.filepositions[d])}return{times:b,filepositions:c}},a.prototype._parseAudioData=function(a,b,c,d){if(c<=1)return void j["default"].w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){var e=(this._littleEndian,new DataView(a,b,c)),f=e.getUint8(0),g=f>>>4;if(2!==g&&10!==g)return void this._onError(p["default"].CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+g);var h=0,i=(12&f)>>>2;if(!(i>=0&&i<=4))return void this._onError(p["default"].FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+i);h=this._flvSoundRateTable[i];var k=1&f,l=this._audioMetadata,m=this._audioTrack;if(l||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),l=this._audioMetadata={},l.type="audio",l.id=m.id,l.timescale=this._timescale,l.duration=this._duration,l.audioSampleRate=h,l.channelCount=0===k?1:2),10===g){var n=this._parseAACAudioData(a,b+1,c-1);if(void 0==n)return;if(0===n.packetType){l.config&&j["default"].w(this.TAG,"Found another AudioSpecificConfig!");var o=n.data;l.audioSampleRate=o.samplingRate,l.channelCount=o.channelCount,l.codec=o.codec,l.originalCodec=o.originalCodec,l.config=o.config,l.refSampleDuration=1024/l.audioSampleRate*l.timescale,j["default"].v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",l);var q=this._mediaInfo;q.audioCodec=l.originalCodec,q.audioSampleRate=l.audioSampleRate,q.audioChannelCount=l.channelCount,q.hasVideo?null!=q.videoCodec&&(q.mimeType='video/x-flv; codecs="'+q.videoCodec+","+q.audioCodec+'"'):q.mimeType='video/x-flv; codecs="'+q.audioCodec+'"',q.isComplete()&&this._onMediaInfo(q)}else if(1===n.packetType){var r=this._timestampBase+d,s={unit:n.data,length:n.data.byteLength,dts:r,pts:r};m.samples.push(s),m.length+=n.data.length}else j["default"].e(this.TAG,"Flv: Unsupported AAC data type "+n.packetType)}else if(2===g){if(!l.codec){var t=this._parseMP3AudioData(a,b+1,c-1,!0);if(void 0==t)return;l.audioSampleRate=t.samplingRate,l.channelCount=t.channelCount,l.codec=t.codec,l.originalCodec=t.originalCodec,l.refSampleDuration=1152/l.audioSampleRate*l.timescale,j["default"].v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",l);var u=this._mediaInfo;u.audioCodec=l.codec,u.audioSampleRate=l.audioSampleRate,u.audioChannelCount=l.channelCount,u.audioDataRate=t.bitRate,u.hasVideo?null!=u.videoCodec&&(u.mimeType='video/x-flv; codecs="'+u.videoCodec+","+u.audioCodec+'"'):u.mimeType='video/x-flv; codecs="'+u.audioCodec+'"',u.isComplete()&&this._onMediaInfo(u)}var v=this._parseMP3AudioData(a,b+1,c-1,!1);if(void 0==v)return;var w=this._timestampBase+d,x={unit:v,length:v.byteLength,dts:w,pts:w};m.samples.push(x),m.length+=v.length}}},a.prototype._parseAACAudioData=function(a,b,c){if(c<=1)return void j["default"].w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");var d={},e=new Uint8Array(a,b,c);return d.packetType=e[0],0===e[0]?d.data=this._parseAACAudioSpecificConfig(a,b+1,c-1):d.data=e.subarray(1),d},a.prototype._parseAACAudioSpecificConfig=function(a,b,c){var d=new Uint8Array(a,b,c),e=null,f=0,g=0,h=0,i=null;if(f=g=d[0]>>>3,(h=(7&d[0])<<1|d[1]>>>7)<0||h>=this._mpegSamplingRates.length)return void this._onError(p["default"].FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");var j=this._mpegSamplingRates[h],k=(120&d[1])>>>3;if(k<0||k>=8)return void this._onError(p["default"].FORMAT_ERROR,"Flv: AAC invalid channel configuration");5===f&&(i=(7&d[1])<<1|d[2]>>>7,d[2]);var l=self.navigator.userAgent.toLowerCase();return-1!==l.indexOf("firefox")?h>=6?(f=5,e=new Array(4),i=h-3):(f=2,e=new Array(2),i=h):-1!==l.indexOf("android")?(f=2,e=new Array(2),i=h):(f=5,i=h,e=new Array(4),h>=6?i=h-3:1===k&&(f=2,e=new Array(2),i=h)),e[0]=f<<3,e[0]|=(15&h)>>>1,e[1]=(15&h)<<7,e[1]|=(15&k)<<3,5===f&&(e[1]|=(15&i)>>>1,e[2]=(1&i)<<7,e[2]|=8,e[3]=0),{config:e,samplingRate:j,channelCount:k,codec:"mp4a.40."+f,originalCodec:"mp4a.40."+g}},a.prototype._parseMP3AudioData=function(a,b,c,d){if(c<4)return void j["default"].w(this.TAG,"Flv: Invalid MP3 packet, header missing!");var e=(this._littleEndian,new Uint8Array(a,b,c)),f=null;if(d){if(255!==e[0])return;var g=e[1]>>>3&3,h=(6&e[1])>>1,i=(240&e[2])>>>4,k=(12&e[2])>>>2,l=e[3]>>>6&3,m=3!==l?2:1,n=0,o=0;switch(g){case 0:n=this._mpegAudioV25SampleRateTable[k];break;case 2:n=this._mpegAudioV20SampleRateTable[k];break;case 3:n=this._mpegAudioV10SampleRateTable[k]}switch(h){case 1:34,i<this._mpegAudioL3BitRateTable.length&&(o=this._mpegAudioL3BitRateTable[i]);break;case 2:33,i<this._mpegAudioL2BitRateTable.length&&(o=this._mpegAudioL2BitRateTable[i]);break;case 3:32,i<this._mpegAudioL1BitRateTable.length&&(o=this._mpegAudioL1BitRateTable[i])}f={bitRate:o,samplingRate:n,channelCount:m,codec:"mp3",originalCodec:"mp3"}}else f=e;return f},a.prototype._parseVideoData=function(a,b,c,d,e){if(c<=1)return void j["default"].w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");if(!0!==this._hasVideoFlagOverrided||!1!==this._hasVideo){var f=new Uint8Array(a,b,c)[0],g=(240&f)>>>4,h=15&f;return 7!==h?void this._onError(p["default"].CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+h):void this._parseAVCVideoPacket(a,b+1,c-1,d,e,g)}},a.prototype._parseAVCVideoPacket=function(a,b,c,d,e,f){if(c<4)return void j["default"].w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");var g=this._littleEndian,h=new DataView(a,b,c),i=h.getUint8(0),k=16777215&h.getUint32(0,!g),l=k<<8>>8;if(0===i)this._parseAVCDecoderConfigurationRecord(a,b+4,c-4);else if(1===i)this._parseAVCVideoData(a,b+4,c-4,d,e,f,l);else if(2!==i)return void this._onError(p["default"].FORMAT_ERROR,"Flv: Invalid video packet type "+i)},a.prototype._parseAVCDecoderConfigurationRecord=function(a,b,c){if(c<7)return void j["default"].w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");var d=this._videoMetadata,e=this._videoTrack,f=this._littleEndian,g=new DataView(a,b,c);d?"undefined"!=typeof d.avcc&&j["default"].w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),d=this._videoMetadata={},d.type="video",d.id=e.id,d.timescale=this._timescale,d.duration=this._duration);var h=g.getUint8(0),i=g.getUint8(1);if(g.getUint8(2),g.getUint8(3),1!==h||0===i)return void this._onError(p["default"].FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord");if(this._naluLengthSize=1+(3&g.getUint8(4)),3!==this._naluLengthSize&&4!==this._naluLengthSize)return void this._onError(p["default"].FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));var k=31&g.getUint8(5);if(0===k)return void this._onError(p["default"].FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS");k>1&&j["default"].w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+k);for(var l=6,m=0;m<k;m++){var o=g.getUint16(l,!f);if(l+=2,0!==o){var q=new Uint8Array(a,b+l,o);l+=o;var r=n["default"].parseSPS(q);if(0===m){d.codecWidth=r.codec_size.width,d.codecHeight=r.codec_size.height,d.presentWidth=r.present_size.width,d.presentHeight=r.present_size.height,d.profile=r.profile_string,d.level=r.level_string,d.bitDepth=r.bit_depth,d.chromaFormat=r.chroma_format,d.sarRatio=r.sar_ratio,d.frameRate=r.frame_rate,!1!==r.frame_rate.fixed&&0!==r.frame_rate.fps_num&&0!==r.frame_rate.fps_den||(d.frameRate=this._referenceFrameRate);var s=d.frameRate.fps_den,t=d.frameRate.fps_num;d.refSampleDuration=d.timescale*(s/t);for(var u=q.subarray(1,4),v="avc1.",w=0;w<3;w++){var x=u[w].toString(16);x.length<2&&(x="0"+x),v+=x}d.codec=v;var y=this._mediaInfo;y.width=d.codecWidth,y.height=d.codecHeight,y.fps=d.frameRate.fps,y.profile=d.profile,y.level=d.level,y.refFrames=r.ref_frames,y.chromaFormat=r.chroma_format_string,y.sarNum=d.sarRatio.width,y.sarDen=d.sarRatio.height,y.videoCodec=v,y.hasAudio?null!=y.audioCodec&&(y.mimeType='video/x-flv; codecs="'+y.videoCodec+","+y.audioCodec+'"'):y.mimeType='video/x-flv; codecs="'+y.videoCodec+'"',y.isComplete()&&this._onMediaInfo(y)}}}var z=g.getUint8(l);if(0===z)return void this._onError(p["default"].FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS");z>1&&j["default"].w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+z),l++;for(var A=0;A<z;A++){var B=g.getUint16(l,!f);l+=2,0!==B&&(l+=B)}d.avcc=new Uint8Array(c),d.avcc.set(new Uint8Array(a,b,c),0),j["default"].v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",d)},a.prototype._parseAVCVideoData=function(a,b,c,d,e,f,g){for(var h=this._littleEndian,i=new DataView(a,b,c),k=[],l=0,m=0,n=this._naluLengthSize,o=this._timestampBase+d,p=1===f;m<c;){if(m+4>=c){j["default"].w(this.TAG,"Malformed Nalu near timestamp "+o+", offset = "+m+", dataSize = "+c);break}var q=i.getUint32(m,!h);if(3===n&&(q>>>=8),q>c-n)return void j["default"].w(this.TAG,"Malformed Nalus near timestamp "+o+", NaluSize > DataSize!");var r=31&i.getUint8(m+n);5===r&&(p=!0);var s=new Uint8Array(a,b+m,n+q),t={type:r,data:s};k.push(t),l+=s.byteLength,m+=n+q}if(k.length){var u=this._videoTrack,v={units:k,length:l,isKeyframe:p,dts:o,cts:g,pts:o+g};p&&(v.fileposition=e),u.samples.push(v),u.length+=l}},h(a,[{key:"onTrackMetadata",get:function(){return this._onTrackMetadata},set:function(a){this._onTrackMetadata=a}},{key:"onMediaInfo",get:function(){return this._onMediaInfo},set:function(a){this._onMediaInfo=a}},{key:"onMetaDataArrived",get:function(){return this._onMetaDataArrived},set:function(a){this._onMetaDataArrived=a}},{key:"onScriptDataArrived",get:function(){return this._onScriptDataArrived},set:function(a){this._onScriptDataArrived=a}},{key:"onError",get:function(){return this._onError},set:function(a){this._onError=a}},{key:"onDataAvailable",get:function(){return this._onDataAvailable},set:function(a){this._onDataAvailable=a}},{key:"timestampBase",get:function(){return this._timestampBase},set:function(a){this._timestampBase=a}},{key:"overridedDuration",get:function(){return this._duration},set:function(a){this._durationOverrided=!0,this._duration=a,this._mediaInfo.duration=a}},{key:"overridedHasAudio",set:function(a){this._hasAudioFlagOverrided=!0,this._hasAudio=a,this._mediaInfo.hasAudio=a}},{key:"overridedHasVideo",set:function(a){this._hasVideoFlagOverrided=!0,this._hasVideo=a,this._mediaInfo.hasVideo=a}}]),a}();b["default"]=t,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var e=c(95),f=function(a){return a&&a.__esModule?a:{"default":a}}(e),g=function(){function a(){d(this,a)}return a._ebsp2rbsp=function(a){for(var b=a,c=b.byteLength,d=new Uint8Array(c),e=0,f=0;f<c;f++)f>=2&&3===b[f]&&0===b[f-1]&&0===b[f-2]||(d[e]=b[f],e++);return new Uint8Array(d.buffer,0,e)},a.parseSPS=function(b){var c=a._ebsp2rbsp(b),d=new f["default"](c);d.readByte();var e=d.readByte();d.readByte();var g=d.readByte();d.readUEG();var h=a.getProfileString(e),i=a.getLevelString(g),j=1,k=420,l=[0,420,422,444],m=8;if((100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e||138===e||144===e)&&(j=d.readUEG(),3===j&&d.readBits(1),j<=3&&(k=l[j]),m=d.readUEG()+8,d.readUEG(),d.readBits(1),d.readBool()))for(var n=3!==j?8:12,o=0;o<n;o++)d.readBool()&&(o<6?a._skipScalingList(d,16):a._skipScalingList(d,64));d.readUEG();var p=d.readUEG();if(0===p)d.readUEG();else if(1===p){d.readBits(1),d.readSEG(),d.readSEG();for(var q=d.readUEG(),r=0;r<q;r++)d.readSEG()}var s=d.readUEG();d.readBits(1);var t=d.readUEG(),u=d.readUEG(),v=d.readBits(1);0===v&&d.readBits(1),d.readBits(1);var w=0,x=0,y=0,z=0;d.readBool()&&(w=d.readUEG(),x=d.readUEG(),y=d.readUEG(),z=d.readUEG());var A=1,B=1,C=0,D=!0,E=0,F=0;if(d.readBool()){if(d.readBool()){var G=d.readByte(),H=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],I=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];G>0&&G<16?(A=H[G-1],B=I[G-1]):255===G&&(A=d.readByte()<<8|d.readByte(),B=d.readByte()<<8|d.readByte())}if(d.readBool()&&d.readBool(),d.readBool()&&(d.readBits(4),d.readBool()&&d.readBits(24)),d.readBool()&&(d.readUEG(),d.readUEG()),d.readBool()){var J=d.readBits(32),K=d.readBits(32);D=d.readBool(),E=K,F=2*J,C=E/F}}var L=1;1===A&&1===B||(L=A/B);var M=0,N=0;if(0===j)M=1,N=2-v;else{var O=3===j?1:2,P=1===j?2:1;M=O,N=P*(2-v)}var Q=16*(t+1),R=16*(u+1)*(2-v);Q-=(w+x)*M,R-=(y+z)*N;var S=Math.ceil(Q*L);return d.destroy(),d=null,{profile_string:h,level_string:i,bit_depth:m,ref_frames:s,chroma_format:k,chroma_format_string:a.getChromaFormatString(k),frame_rate:{fixed:D,fps:C,fps_den:F,fps_num:E},sar_ratio:{width:A,height:B},codec_size:{width:Q,height:R},present_size:{width:S,height:R}}},a._skipScalingList=function(a,b){for(var c=8,d=8,e=0,f=0;f<b;f++)0!==d&&(e=a.readSEG(),d=(c+e+256)%256),c=0===d?c:d},a.getProfileString=function(a){switch(a){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},a.getLevelString=function(a){return(a/10).toFixed(1)},a.getChromaFormatString=function(a){switch(a){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},a}();b["default"]=g,a.exports=b["default"]},,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}b.__esModule=!0;var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=c(6),j=(d(i),c(19)),k=d(j),l=c(13),m=c(5),n=function(a){function b(c,d){e(this,b);var g=f(this,a.call(this,"fetch-stream-loader"));return g.TAG="FetchStreamLoader",g._seekHandler=c,g._config=d,g._needStash=!0,g._requestAbort=!1,g._contentLength=null,g._receivedLength=0,g}return g(b,a),b.isSupported=function(){try{var a=k["default"].msedge&&k["default"].version.minor>=15048,b=!k["default"].msedge||a;return self.fetch&&self.ReadableStream&&b}catch(a){return!1}},b.prototype.destroy=function(){this.isWorking()&&this.abort(),a.prototype.destroy.call(this)},b.prototype.open=function(a,b){var c=this;this._dataSource=a,this._range=b;var d=a.url;this._config.reuseRedirectedURL&&void 0!=a.redirectedURL&&(d=a.redirectedURL);var e=this._seekHandler.getConfig(d,b),f=new self.Headers;if("object"===h(e.headers)){var g=e.headers;for(var i in g)g.hasOwnProperty(i)&&f.append(i,g[i])}var j={method:"GET",headers:f,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"===h(this._config.headers))for(var k in this._config.headers)f.append(k,this._config.headers[k]);!1===a.cors&&(j.mode="same-origin"),a.withCredentials&&(j.credentials="include"),a.referrerPolicy&&(j.referrerPolicy=a.referrerPolicy),this._status=l.LoaderStatus.kConnecting,self.fetch(e.url,j).then(function(a){if(c._requestAbort)return c._requestAbort=!1,void(c._status=l.LoaderStatus.kIdle);if(a.ok&&a.status>=200&&a.status<=299){if(a.url!==e.url&&c._onURLRedirect){var b=c._seekHandler.removeURLParameters(a.url);c._onURLRedirect(b)}var d=a.headers.get("Content-Length");return null!=d&&(c._contentLength=parseInt(d),0!==c._contentLength&&c._onContentLengthKnown&&c._onContentLengthKnown(c._contentLength)),c._pump.call(c,a.body.getReader())}if(c._status=l.LoaderStatus.kError,!c._onError)throw new m.RuntimeException("FetchStreamLoader: Http code invalid, "+a.status+" "+a.statusText);c._onError(l.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:a.status,msg:a.statusText})})["catch"](function(a){if(c._status=l.LoaderStatus.kError,!c._onError)throw a;c._onError(l.LoaderErrors.EXCEPTION,{code:-1,msg:a.message})})},b.prototype.abort=function(){this._requestAbort=!0},b.prototype._pump=function(a){var b=this;return a.read().then(function(c){if(c.done)if(null!==b._contentLength&&b._receivedLength<b._contentLength){b._status=l.LoaderStatus.kError;var d=l.LoaderErrors.EARLY_EOF,e={code:-1,msg:"Fetch stream meet Early-EOF"};if(!b._onError)throw new m.RuntimeException(e.msg);b._onError(d,e)}else b._status=l.LoaderStatus.kComplete,b._onComplete&&b._onComplete(b._range.from,b._range.from+b._receivedLength-1);else{if(!0===b._requestAbort)return b._requestAbort=!1,b._status=l.LoaderStatus.kComplete,a.cancel();b._status=l.LoaderStatus.kBuffering;var f=c.value.buffer,g=b._range.from+b._receivedLength;b._receivedLength+=f.byteLength,b._onDataArrival&&b._onDataArrival(f,g,b._receivedLength),b._pump(a)}})["catch"](function(a){if(11!==a.code||!k["default"].msedge){b._status=l.LoaderStatus.kError;var c=0,d=null;if(19!==a.code&&"network error"!==a.message||!(null===b._contentLength||null!==b._contentLength&&b._receivedLength<b._contentLength)?(c=l.LoaderErrors.EXCEPTION,d={code:a.code,msg:a.message}):(c=l.LoaderErrors.EARLY_EOF,d={code:a.code,msg:"Fetch stream meet Early-EOF"}),!b._onError)throw new m.RuntimeException(d.msg);b._onError(c,d)}})},b}(l.BaseLoader);b["default"]=n,a.exports=b["default"]},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var d=function(){function a(b,d){c(this,a),this._startName=b,this._endName=d}return a.prototype.getConfig=function(a,b){var c=a;if(0!==b.from||-1!==b.to){var d=!0;-1===c.indexOf("?")&&(c+="?",d=!1),d&&(c+="&"),c+=this._startName+"="+b.from.toString(),-1!==b.to&&(c+="&"+this._endName+"="+b.to.toString())}return{url:c,headers:{}}},a.prototype.removeURLParameters=function(a){var b=a.split("?")[0],c=void 0,d=a.indexOf("?");-1!==d&&(c=a.substring(d+1));var e="";if(void 0!=c&&c.length>0)for(var f=c.split("&"),g=0;g<f.length;g++){var h=f[g].split("="),i=g>0;h[0]!==this._startName&&h[0]!==this._endName&&(i&&(e+="&"),e+=f[g])}return 0===e.length?b:b+"?"+e},a}();b["default"]=d,a.exports=b["default"]},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var d=function(){function a(b){c(this,a),this._zeroStart=b||!1}return a.prototype.getConfig=function(a,b){var c={};if(0!==b.from||-1!==b.to){var d=void 0;d=-1!==b.to?"bytes="+b.from.toString()+"-"+b.to.toString():"bytes="+b.from.toString()+"-",c.Range=d}else this._zeroStart&&(c.Range="bytes=0-");return{url:a,headers:c}},a.prototype.removeURLParameters=function(a){return a},a}();b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}b.__esModule=!0;var g=c(6),h=(function(a){return a&&a.__esModule?a:{"default":a}}(g),c(13)),i=c(5),j=function(a){function b(){d(this,b);var c=e(this,a.call(this,"websocket-loader"));return c.TAG="WebSocketLoader",c._needStash=!0,c._ws=null,c._requestAbort=!1,c._receivedLength=0,c}return f(b,a),b.isSupported=function(){try{return"undefined"!=typeof self.WebSocket}catch(a){return!1}},b.prototype.destroy=function(){this._ws&&this.abort(),a.prototype.destroy.call(this)},b.prototype.open=function(a){try{var b=this._ws=new self.WebSocket(a.url);b.binaryType="arraybuffer",b.onopen=this._onWebSocketOpen.bind(this),b.onclose=this._onWebSocketClose.bind(this),b.onmessage=this._onWebSocketMessage.bind(this),b.onerror=this._onWebSocketError.bind(this),this._status=h.LoaderStatus.kConnecting}catch(a){this._status=h.LoaderStatus.kError;var c={code:a.code,msg:a.message};if(!this._onError)throw new i.RuntimeException(c.msg);this._onError(h.LoaderErrors.EXCEPTION,c)}},b.prototype.abort=function(){var a=this._ws;!a||0!==a.readyState&&1!==a.readyState||(this._requestAbort=!0,a.close()),this._ws=null,this._status=h.LoaderStatus.kComplete},b.prototype._onWebSocketOpen=function(a){this._status=h.LoaderStatus.kBuffering},b.prototype._onWebSocketClose=function(a){return!0===this._requestAbort?void(this._requestAbort=!1):(this._status=h.LoaderStatus.kComplete,void(this._onComplete&&this._onComplete(0,this._receivedLength-1)))},b.prototype._onWebSocketMessage=function(a){var b=this;if(a.data instanceof ArrayBuffer)this._dispatchArrayBuffer(a.data);else if(a.data instanceof Blob){var c=new FileReader;c.onload=function(){b._dispatchArrayBuffer(c.result)},c.readAsArrayBuffer(a.data)}else{this._status=h.LoaderStatus.kError;var d={code:-1,msg:"Unsupported WebSocket message type: "+a.data.constructor.name};if(!this._onError)throw new i.RuntimeException(d.msg);this._onError(h.LoaderErrors.EXCEPTION,d)}},b.prototype._dispatchArrayBuffer=function(a){var b=a,c=this._receivedLength;this._receivedLength+=b.byteLength,this._onDataArrival&&this._onDataArrival(b,c,this._receivedLength)},b.prototype._onWebSocketError=function(a){this._status=h.LoaderStatus.kError;var b={code:a.code,msg:a.message};if(!this._onError)throw new i.RuntimeException(b.msg);this._onError(h.LoaderErrors.EXCEPTION,b)},b}(h.BaseLoader);b["default"]=j,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}b.__esModule=!0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=c(6),i=function(a){return a&&a.__esModule?a:{"default":a}}(h),j=c(13),k=c(5),l=function(a){function b(c,f){d(this,b);var g=e(this,a.call(this,"xhr-moz-chunked-loader"));return g.TAG="MozChunkedLoader",g._seekHandler=c,g._config=f,g._needStash=!0,g._xhr=null,g._requestAbort=!1,g._contentLength=null,g._receivedLength=0,g}return f(b,a),b.isSupported=function(){try{var a=new XMLHttpRequest;return a.open("GET","https://example.com",!0),a.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===a.responseType}catch(a){return i["default"].w("MozChunkedLoader",a.message),!1}},b.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),a.prototype.destroy.call(this)},b.prototype.open=function(a,b){this._dataSource=a,this._range=b;var c=a.url;this._config.reuseRedirectedURL&&void 0!=a.redirectedURL&&(c=a.redirectedURL);var d=this._seekHandler.getConfig(c,b);this._requestURL=d.url;var e=this._xhr=new XMLHttpRequest;if(e.open("GET",d.url,!0),e.responseType="moz-chunked-arraybuffer",e.onreadystatechange=this._onReadyStateChange.bind(this),e.onprogress=this._onProgress.bind(this),e.onloadend=this._onLoadEnd.bind(this),
e.onerror=this._onXhrError.bind(this),a.withCredentials&&(e.withCredentials=!0),"object"===g(d.headers)){var f=d.headers;for(var h in f)f.hasOwnProperty(h)&&e.setRequestHeader(h,f[h])}if("object"===g(this._config.headers)){var i=this._config.headers;for(var k in i)i.hasOwnProperty(k)&&e.setRequestHeader(k,i[k])}this._status=j.LoaderStatus.kConnecting,e.send()},b.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=j.LoaderStatus.kComplete},b.prototype._onReadyStateChange=function(a){var b=a.target;if(2===b.readyState){if(void 0!=b.responseURL&&b.responseURL!==this._requestURL&&this._onURLRedirect){var c=this._seekHandler.removeURLParameters(b.responseURL);this._onURLRedirect(c)}if(0!==b.status&&(b.status<200||b.status>299)){if(this._status=j.LoaderStatus.kError,!this._onError)throw new k.RuntimeException("MozChunkedLoader: Http code invalid, "+b.status+" "+b.statusText);this._onError(j.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:b.status,msg:b.statusText})}else this._status=j.LoaderStatus.kBuffering}},b.prototype._onProgress=function(a){if(this._status!==j.LoaderStatus.kError){null===this._contentLength&&null!==a.total&&0!==a.total&&(this._contentLength=a.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var b=a.target.response,c=this._range.from+this._receivedLength;this._receivedLength+=b.byteLength,this._onDataArrival&&this._onDataArrival(b,c,this._receivedLength)}},b.prototype._onLoadEnd=function(a){return!0===this._requestAbort?void(this._requestAbort=!1):void(this._status!==j.LoaderStatus.kError&&(this._status=j.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)))},b.prototype._onXhrError=function(a){this._status=j.LoaderStatus.kError;var b=0,c=null;if(this._contentLength&&a.loaded<this._contentLength?(b=j.LoaderErrors.EARLY_EOF,c={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(b=j.LoaderErrors.EXCEPTION,c={code:-1,msg:a.constructor.name+" "+a.type}),!this._onError)throw new k.RuntimeException(c.msg);this._onError(b,c)},b}(j.BaseLoader);b["default"]=l,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}b.__esModule=!0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=c(6),i=function(a){return a&&a.__esModule?a:{"default":a}}(h),j=c(13),k=c(5),l=function(a){function b(c,f){d(this,b);var g=e(this,a.call(this,"xhr-msstream-loader"));return g.TAG="MSStreamLoader",g._seekHandler=c,g._config=f,g._needStash=!0,g._xhr=null,g._reader=null,g._totalRange=null,g._currentRange=null,g._currentRequestURL=null,g._currentRedirectedURL=null,g._contentLength=null,g._receivedLength=0,g._bufferLimit=16777216,g._lastTimeBufferSize=0,g._isReconnecting=!1,g}return f(b,a),b.isSupported=function(){try{if("undefined"==typeof self.MSStream||"undefined"==typeof self.MSStreamReader)return!1;var a=new XMLHttpRequest;return a.open("GET","https://example.com",!0),a.responseType="ms-stream","ms-stream"===a.responseType}catch(a){return i["default"].w("MSStreamLoader",a.message),!1}},b.prototype.destroy=function(){this.isWorking()&&this.abort(),this._reader&&(this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr=null),a.prototype.destroy.call(this)},b.prototype.open=function(a,b){this._internalOpen(a,b,!1)},b.prototype._internalOpen=function(a,b,c){this._dataSource=a,c?this._currentRange=b:this._totalRange=b;var d=a.url;this._config.reuseRedirectedURL&&(void 0!=this._currentRedirectedURL?d=this._currentRedirectedURL:void 0!=a.redirectedURL&&(d=a.redirectedURL));var e=this._seekHandler.getConfig(d,b);this._currentRequestURL=e.url;var f=this._reader=new self.MSStreamReader;f.onprogress=this._msrOnProgress.bind(this),f.onload=this._msrOnLoad.bind(this),f.onerror=this._msrOnError.bind(this);var h=this._xhr=new XMLHttpRequest;if(h.open("GET",e.url,!0),h.responseType="ms-stream",h.onreadystatechange=this._xhrOnReadyStateChange.bind(this),h.onerror=this._xhrOnError.bind(this),a.withCredentials&&(h.withCredentials=!0),"object"===g(e.headers)){var i=e.headers;for(var k in i)i.hasOwnProperty(k)&&h.setRequestHeader(k,i[k])}if("object"===g(this._config.headers)){var l=this._config.headers;for(var m in l)l.hasOwnProperty(m)&&h.setRequestHeader(m,l[m])}this._isReconnecting?this._isReconnecting=!1:this._status=j.LoaderStatus.kConnecting,h.send()},b.prototype.abort=function(){this._internalAbort(),this._status=j.LoaderStatus.kComplete},b.prototype._internalAbort=function(){this._reader&&(1===this._reader.readyState&&this._reader.abort(),this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.abort(),this._xhr.onreadystatechange=null,this._xhr=null)},b.prototype._xhrOnReadyStateChange=function(a){var b=a.target;if(2===b.readyState)if(b.status>=200&&b.status<=299){if(this._status=j.LoaderStatus.kBuffering,void 0!=b.responseURL){var c=this._seekHandler.removeURLParameters(b.responseURL);b.responseURL!==this._currentRequestURL&&c!==this._currentRedirectedURL&&(this._currentRedirectedURL=c,this._onURLRedirect&&this._onURLRedirect(c))}var d=b.getResponseHeader("Content-Length");if(null!=d&&null==this._contentLength){var e=parseInt(d);e>0&&(this._contentLength=e,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength))}}else{if(this._status=j.LoaderStatus.kError,!this._onError)throw new k.RuntimeException("MSStreamLoader: Http code invalid, "+b.status+" "+b.statusText);this._onError(j.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:b.status,msg:b.statusText})}else if(3===b.readyState&&b.status>=200&&b.status<=299){this._status=j.LoaderStatus.kBuffering;var f=b.response;this._reader.readAsArrayBuffer(f)}},b.prototype._xhrOnError=function(a){this._status=j.LoaderStatus.kError;var b=j.LoaderErrors.EXCEPTION,c={code:-1,msg:a.constructor.name+" "+a.type};if(!this._onError)throw new k.RuntimeException(c.msg);this._onError(b,c)},b.prototype._msrOnProgress=function(a){var b=a.target,c=b.result;if(null==c)return void this._doReconnectIfNeeded();var d=c.slice(this._lastTimeBufferSize);this._lastTimeBufferSize=c.byteLength;var e=this._totalRange.from+this._receivedLength;this._receivedLength+=d.byteLength,this._onDataArrival&&this._onDataArrival(d,e,this._receivedLength),c.byteLength>=this._bufferLimit&&(i["default"].v(this.TAG,"MSStream buffer exceeded max size near "+(e+d.byteLength)+", reconnecting..."),this._doReconnectIfNeeded())},b.prototype._doReconnectIfNeeded=function(){if(null==this._contentLength||this._receivedLength<this._contentLength){this._isReconnecting=!0,this._lastTimeBufferSize=0,this._internalAbort();var a={from:this._totalRange.from+this._receivedLength,to:-1};this._internalOpen(this._dataSource,a,!0)}},b.prototype._msrOnLoad=function(a){this._status=j.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._totalRange.from,this._totalRange.from+this._receivedLength-1)},b.prototype._msrOnError=function(a){this._status=j.LoaderStatus.kError;var b=0,c=null;if(this._contentLength&&this._receivedLength<this._contentLength?(b=j.LoaderErrors.EARLY_EOF,c={code:-1,msg:"MSStream meet Early-Eof"}):(b=j.LoaderErrors.EARLY_EOF,c={code:-1,msg:a.constructor.name+" "+a.type}),!this._onError)throw new k.RuntimeException(c.msg);this._onError(b,c)},b}(j.BaseLoader);b["default"]=l,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}b.__esModule=!0;var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(6),k=d(j),l=c(54),m=d(l),n=c(13),o=c(5),p=function(a){function b(c,d){e(this,b);var g=f(this,a.call(this,"xhr-range-loader"));return g.TAG="RangeLoader",g._seekHandler=c,g._config=d,g._needStash=!1,g._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],g._currentChunkSizeKB=384,g._currentSpeedNormalized=0,g._zeroSpeedChunkCount=0,g._xhr=null,g._speedSampler=new m["default"],g._requestAbort=!1,g._waitForTotalLength=!1,g._totalLengthReceived=!1,g._currentRequestURL=null,g._currentRedirectedURL=null,g._currentRequestRange=null,g._totalLength=null,g._contentLength=null,g._receivedLength=0,g._lastTimeLoaded=0,g}return g(b,a),b.isSupported=function(){try{var a=new XMLHttpRequest;return a.open("GET","https://example.com",!0),a.responseType="arraybuffer","arraybuffer"===a.responseType}catch(a){return k["default"].w("RangeLoader",a.message),!1}},b.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),a.prototype.destroy.call(this)},b.prototype.open=function(a,b){this._dataSource=a,this._range=b,this._status=n.LoaderStatus.kConnecting;var c=!1;void 0!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(c=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||c?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},b.prototype._openSubRange=function(){var a=1024*this._currentChunkSizeKB,b=this._range.from+this._receivedLength,c=b+a;null!=this._contentLength&&c-this._range.from>=this._contentLength&&(c=this._range.from+this._contentLength-1),this._currentRequestRange={from:b,to:c},this._internalOpen(this._dataSource,this._currentRequestRange)},b.prototype._internalOpen=function(a,b){this._lastTimeLoaded=0;var c=a.url;this._config.reuseRedirectedURL&&(void 0!=this._currentRedirectedURL?c=this._currentRedirectedURL:void 0!=a.redirectedURL&&(c=a.redirectedURL));var d=this._seekHandler.getConfig(c,b);this._currentRequestURL=d.url;var e=this._xhr=new XMLHttpRequest;if(e.open("GET",d.url,!0),e.responseType="arraybuffer",e.onreadystatechange=this._onReadyStateChange.bind(this),e.onprogress=this._onProgress.bind(this),e.onload=this._onLoad.bind(this),e.onerror=this._onXhrError.bind(this),a.withCredentials&&(e.withCredentials=!0),"object"===h(d.headers)){var f=d.headers;for(var g in f)f.hasOwnProperty(g)&&e.setRequestHeader(g,f[g])}if("object"===h(this._config.headers)){var i=this._config.headers;for(var j in i)i.hasOwnProperty(j)&&e.setRequestHeader(j,i[j])}e.send()},b.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=n.LoaderStatus.kComplete},b.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},b.prototype._onReadyStateChange=function(a){var b=a.target;if(2===b.readyState){if(void 0!=b.responseURL){var c=this._seekHandler.removeURLParameters(b.responseURL);b.responseURL!==this._currentRequestURL&&c!==this._currentRedirectedURL&&(this._currentRedirectedURL=c,this._onURLRedirect&&this._onURLRedirect(c))}if(b.status>=200&&b.status<=299){if(this._waitForTotalLength)return;this._status=n.LoaderStatus.kBuffering}else{if(this._status=n.LoaderStatus.kError,!this._onError)throw new o.RuntimeException("RangeLoader: Http code invalid, "+b.status+" "+b.statusText);this._onError(n.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:b.status,msg:b.statusText})}}},b.prototype._onProgress=function(a){if(this._status!==n.LoaderStatus.kError){if(null===this._contentLength){var b=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,b=!0;var c=a.total;this._internalAbort(),null!=c&0!==c&&(this._totalLength=c)}if(-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,b)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var d=a.loaded-this._lastTimeLoaded;this._lastTimeLoaded=a.loaded,this._speedSampler.addBytes(d)}},b.prototype._normalizeSpeed=function(a){var b=this._chunkSizeKBList,c=b.length-1,d=0,e=0,f=c;if(a<b[0])return b[0];for(;e<=f;){if((d=e+Math.floor((f-e)/2))===c||a>=b[d]&&a<b[d+1])return b[d];b[d]<a?e=d+1:f=d-1}},b.prototype._onLoad=function(a){if(this._status!==n.LoaderStatus.kError){if(this._waitForTotalLength)return void(this._waitForTotalLength=!1);this._lastTimeLoaded=0;var b=this._speedSampler.lastSecondKBps;if(0===b&&++this._zeroSpeedChunkCount>=3&&(b=this._speedSampler.currentKBps),0!==b){var c=this._normalizeSpeed(b);this._currentSpeedNormalized!==c&&(this._currentSpeedNormalized=c,this._currentChunkSizeKB=c)}var d=a.target.response,e=this._range.from+this._receivedLength;this._receivedLength+=d.byteLength;var f=!1;null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():f=!0,this._onDataArrival&&this._onDataArrival(d,e,this._receivedLength),f&&(this._status=n.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},b.prototype._onXhrError=function(a){this._status=n.LoaderStatus.kError;var b=0,c=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(b=n.LoaderErrors.EARLY_EOF,c={code:-1,msg:"RangeLoader meet Early-Eof"}):(b=n.LoaderErrors.EXCEPTION,c={code:-1,msg:a.constructor.name+" "+a.type}),!this._onError)throw new o.RuntimeException(c.msg);this._onError(b,c)},i(b,[{key:"currentSpeed",get:function(){return this._speedSampler.lastSecondKBps}}]),b}(n.BaseLoader);b["default"]=p,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(16),i=d(h),j=c(6),k=d(j),l=c(19),m=d(l),n=c(34),o=d(n),p=c(92),q=d(p),r=c(27),s=d(r),t=c(91),u=d(t),v=c(50),w=d(v),x=c(55),y=c(31),z=c(5),A=function(){function a(b,c){if(e(this,a),this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new i["default"],this._config=(0,y.createDefaultConfig)(),"object"===(void 0===c?"undefined":f(c))&&Object.assign(this._config,c),"flv"!==b.type.toLowerCase())throw new z.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");!0===b.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=b,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var d=m["default"].chrome&&(m["default"].version.major<50||50===m["default"].version.major&&m["default"].version.build<2661);this._alwaysSeekKeyframe=!!(d||m["default"].msedge||m["default"].msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return a.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},a.prototype.on=function(a,b){var c=this;a===o["default"].MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then(function(){c._emitter.emit(o["default"].MEDIA_INFO,c.mediaInfo)}):a===o["default"].STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then(function(){c._emitter.emit(o["default"].STATISTICS_INFO,c.statisticsInfo)}),this._emitter.addListener(a,b)},a.prototype.off=function(a,b){this._emitter.removeListener(a,b)},a.prototype.attachMediaElement=function(a){var b=this;if(this._mediaElement=a,a.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),a.addEventListener("seeking",this.e.onvSeeking),a.addEventListener("canplay",this.e.onvCanPlay),a.addEventListener("stalled",this.e.onvStalled),a.addEventListener("progress",this.e.onvProgress),this._msectl=new u["default"](this._config),this._msectl.on(w["default"].UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(w["default"].BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(w["default"].SOURCE_OPEN,function(){b._mseSourceOpened=!0,b._hasPendingLoad&&(b._hasPendingLoad=!1,b.load())}),this._msectl.on(w["default"].ERROR,function(a){b._emitter.emit(o["default"].ERROR,x.ErrorTypes.MEDIA_ERROR,x.ErrorDetails.MEDIA_MSE_ERROR,a)}),this._msectl.attachMediaElement(a),null!=this._pendingSeekTime)try{a.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(a){}},a.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},a.prototype.load=function(){var a=this;if(!this._mediaElement)throw new z.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new z.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");if(!this._hasPendingLoad){if(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened)return void(this._hasPendingLoad=!0);this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new q["default"](this._mediaDataSource,this._config),this._transmuxer.on(s["default"].INIT_SEGMENT,function(b,c){a._msectl.appendInitSegment(c)}),this._transmuxer.on(s["default"].MEDIA_SEGMENT,function(b,c){if(a._msectl.appendMediaSegment(c),a._config.lazyLoad&&!a._config.isLive){var d=a._mediaElement.currentTime;c.info.endDts>=1e3*(d+a._config.lazyLoadMaxDuration)&&null==a._progressChecker&&(k["default"].v(a.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),a._suspendTransmuxer())}}),this._transmuxer.on(s["default"].LOADING_COMPLETE,function(){a._msectl.endOfStream(),a._emitter.emit(o["default"].LOADING_COMPLETE)}),this._transmuxer.on(s["default"].RECOVERED_EARLY_EOF,function(){a._emitter.emit(o["default"].RECOVERED_EARLY_EOF)}),this._transmuxer.on(s["default"].IO_ERROR,function(b,c){a._emitter.emit(o["default"].ERROR,x.ErrorTypes.NETWORK_ERROR,b,c)}),this._transmuxer.on(s["default"].DEMUX_ERROR,function(b,c){a._emitter.emit(o["default"].ERROR,x.ErrorTypes.MEDIA_ERROR,b,{code:-1,msg:c})}),this._transmuxer.on(s["default"].MEDIA_INFO,function(b){a._mediaInfo=b,a._emitter.emit(o["default"].MEDIA_INFO,Object.assign({},b))}),this._transmuxer.on(s["default"].METADATA_ARRIVED,function(b){a._emitter.emit(o["default"].METADATA_ARRIVED,b)}),this._transmuxer.on(s["default"].SCRIPTDATA_ARRIVED,function(b){a._emitter.emit(o["default"].SCRIPTDATA_ARRIVED,b)}),this._transmuxer.on(s["default"].STATISTICS_INFO,function(b){a._statisticsInfo=a._fillStatisticsInfo(b),a._emitter.emit(o["default"].STATISTICS_INFO,Object.assign({},a._statisticsInfo))}),this._transmuxer.on(s["default"].RECOMMEND_SEEKPOINT,function(b){a._mediaElement&&!a._config.accurateSeek&&(a._requestSetTime=!0,a._mediaElement.currentTime=b/1e3)}),this._transmuxer.open()}},a.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},a.prototype.play=function(){return this._mediaElement.play()},a.prototype.pause=function(){this._mediaElement.pause()},a.prototype._fillStatisticsInfo=function(a){if(a.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return a;var b=!0,c=0,d=0;if(this._mediaElement.getVideoPlaybackQuality){var e=this._mediaElement.getVideoPlaybackQuality();c=e.totalVideoFrames,d=e.droppedVideoFrames}else void 0!=this._mediaElement.webkitDecodedFrameCount?(c=this._mediaElement.webkitDecodedFrameCount,d=this._mediaElement.webkitDroppedFrameCount):b=!1;return b&&(a.decodedFrames=c,a.droppedFrames=d),a},a.prototype._onmseUpdateEnd=function(){if(this._config.lazyLoad&&!this._config.isLive){for(var a=this._mediaElement.buffered,b=this._mediaElement.currentTime,c=0,d=0;d<a.length;d++){var e=a.start(d),f=a.end(d);if(e<=b&&b<f){e,c=f;break}}c>=b+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(k["default"].v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},a.prototype._onmseBufferFull=function(){k["default"].v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()},a.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},a.prototype._checkProgressAndResume=function(){for(var a=this._mediaElement.currentTime,b=this._mediaElement.buffered,c=!1,d=0;d<b.length;d++){var e=b.start(d),f=b.end(d);if(a>=e&&a<f){a>=f-this._config.lazyLoadRecoverDuration&&(c=!0);break}}c&&(window.clearInterval(this._progressChecker),this._progressChecker=null,c&&(k["default"].v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},a.prototype._isTimepointBuffered=function(a){for(var b=this._mediaElement.buffered,c=0;c<b.length;c++){var d=b.start(c),e=b.end(c);if(a>=d&&a<e)return!0}return!1},a.prototype._internalSeek=function(a){var b=this._isTimepointBuffered(a),c=!1,d=0;if(a<1&&this._mediaElement.buffered.length>0){var e=this._mediaElement.buffered.start(0);(e<1&&a<e||m["default"].safari)&&(c=!0,d=m["default"].safari?.1:e)}if(c)this._requestSetTime=!0,this._mediaElement.currentTime=d;else if(b){if(this._alwaysSeekKeyframe){var f=this._msectl.getNearestKeyframe(Math.floor(1e3*a));this._requestSetTime=!0,this._mediaElement.currentTime=null!=f?f.dts/1e3:a}else this._requestSetTime=!0,this._mediaElement.currentTime=a;null!=this._progressChecker&&this._checkProgressAndResume()}else null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(a),this._transmuxer.seek(Math.floor(1e3*a)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=a)},a.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var a=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(a)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(a),this._transmuxer.seek(Math.floor(1e3*a)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=a))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},a.prototype._checkAndResumeStuckPlayback=function(a){var b=this._mediaElement;if(a||!this._receivedCanPlay||b.readyState<2){var c=b.buffered;c.length>0&&b.currentTime<c.start(0)&&(k["default"].w(this.TAG,"Playback seems stuck at "+b.currentTime+", seek to "+c.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=c.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},a.prototype._onvLoadedMetadata=function(a){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},a.prototype._onvSeeking=function(a){var b=this._mediaElement.currentTime,c=this._mediaElement.buffered;if(this._requestSetTime)return void(this._requestSetTime=!1);if(b<1&&c.length>0){var d=c.start(0);if(d<1&&b<d||m["default"].safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=m["default"].safari?.1:d)}if(this._isTimepointBuffered(b)){if(this._alwaysSeekKeyframe){var e=this._msectl.getNearestKeyframe(Math.floor(1e3*b));null!=e&&(this._requestSetTime=!0,this._mediaElement.currentTime=e.dts/1e3)}return void(null!=this._progressChecker&&this._checkProgressAndResume())}this._seekpointRecord={seekPoint:b,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},a.prototype._onvCanPlay=function(a){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},a.prototype._onvStalled=function(a){this._checkAndResumeStuckPlayback(!0)},a.prototype._onvProgress=function(a){this._checkAndResumeStuckPlayback()},g(a,[{key:"type",get:function(){return this._type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(a){this._mediaElement.volume=a}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(a){this._mediaElement.muted=a}},{key:"currentTime",get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(a){this._mediaElement?this._internalSeek(a):this._pendingSeekTime=a}},{key:"mediaInfo",get:function(){return Object.assign({},this._mediaInfo)}},{key:"statisticsInfo",get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)}}]),a}();b["default"]=A,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(16),i=d(h),j=c(34),k=d(j),l=c(31),m=c(5),n=function(){function a(b,c){if(e(this,a),this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new i["default"],this._config=(0,l.createDefaultConfig)(),"object"===(void 0===c?"undefined":f(c))&&Object.assign(this._config,c),"flv"===b.type.toLowerCase())throw new m.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(b.hasOwnProperty("segments"))throw new m.InvalidArgumentException("NativePlayer("+b.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=b,this._mediaElement=null}return a.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},a.prototype.on=function(a,b){var c=this;a===k["default"].MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){c._emitter.emit(k["default"].MEDIA_INFO,c.mediaInfo)}):a===k["default"].STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){c._emitter.emit(k["default"].STATISTICS_INFO,c.statisticsInfo)}),this._emitter.addListener(a,b)},a.prototype.off=function(a,b){this._emitter.removeListener(a,b)},a.prototype.attachMediaElement=function(a){if(this._mediaElement=a,a.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{a.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(a){}},a.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},a.prototype.load=function(){if(!this._mediaElement)throw new m.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},a.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},a.prototype.play=function(){return this._mediaElement.play()},a.prototype.pause=function(){this._mediaElement.pause()},a.prototype._onvLoadedMetadata=function(a){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(k["default"].MEDIA_INFO,this.mediaInfo)},a.prototype._reportStatisticsInfo=function(){this._emitter.emit(k["default"].STATISTICS_INFO,this.statisticsInfo)},g(a,[{key:"type",get:function(){return this._type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(a){this._mediaElement.volume=a}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(a){this._mediaElement.muted=a}},{key:"currentTime",get:function(){
return this._mediaElement?this._mediaElement.currentTime:0},set:function(a){this._mediaElement?this._mediaElement.currentTime=a:this._pendingSeekTime=a}},{key:"mediaInfo",get:function(){var a=this._mediaElement instanceof HTMLAudioElement?"audio/":"video/",b={mimeType:a+this._mediaDataSource.type};return this._mediaElement&&(b.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(b.width=this._mediaElement.videoWidth,b.height=this._mediaElement.videoHeight)),b}},{key:"statisticsInfo",get:function(){var a={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return a;var b=!0,c=0,d=0;if(this._mediaElement.getVideoPlaybackQuality){var e=this._mediaElement.getVideoPlaybackQuality();c=e.totalVideoFrames,d=e.droppedVideoFrames}else void 0!=this._mediaElement.webkitDecodedFrameCount?(c=this._mediaElement.webkitDecodedFrameCount,d=this._mediaElement.webkitDroppedFrameCount):b=!1;return b&&(a.decodedFrames=c,a.droppedFrames=d),a}}]),a}();b["default"]=n,a.exports=b["default"]},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var d=function(){function a(){c(this,a)}return a.getSilentFrame=function(a,b){if("mp4a.40.2"===a){if(1===b)return new Uint8Array([0,200,0,128,35,128]);if(2===b)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===b)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===b)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===b)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},a}();b["default"]=d,a.exports=b["default"]},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var d=function(){function a(){c(this,a)}return a.init=function(){a.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]};for(var b in a.types)a.types.hasOwnProperty(b)&&(a.types[b]=[b.charCodeAt(0),b.charCodeAt(1),b.charCodeAt(2),b.charCodeAt(3)]);var c=a.constants={};c.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),c.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),c.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),c.STSC=c.STCO=c.STTS,c.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),c.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),c.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),c.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),c.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),c.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},a.box=function(a){for(var b=8,c=null,d=Array.prototype.slice.call(arguments,1),e=d.length,f=0;f<e;f++)b+=d[f].byteLength;c=new Uint8Array(b),c[0]=b>>>24&255,c[1]=b>>>16&255,c[2]=b>>>8&255,c[3]=255&b,c.set(a,4);for(var g=8,h=0;h<e;h++)c.set(d[h],g),g+=d[h].byteLength;return c},a.generateInitSegment=function(b){var c=a.box(a.types.ftyp,a.constants.FTYP),d=a.moov(b),e=new Uint8Array(c.byteLength+d.byteLength);return e.set(c,0),e.set(d,c.byteLength),e},a.moov=function(b){var c=a.mvhd(b.timescale,b.duration),d=a.trak(b),e=a.mvex(b);return a.box(a.types.moov,c,d,e)},a.mvhd=function(b,c){return a.box(a.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>>24&255,b>>>16&255,b>>>8&255,255&b,c>>>24&255,c>>>16&255,c>>>8&255,255&c,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},a.trak=function(b){return a.box(a.types.trak,a.tkhd(b),a.mdia(b))},a.tkhd=function(b){var c=b.id,d=b.duration,e=b.presentWidth,f=b.presentHeight;return a.box(a.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c,0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,255&d,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,e>>>8&255,255&e,0,0,f>>>8&255,255&f,0,0]))},a.mdia=function(b){return a.box(a.types.mdia,a.mdhd(b),a.hdlr(b),a.minf(b))},a.mdhd=function(b){var c=b.timescale,d=b.duration;return a.box(a.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c,d>>>24&255,d>>>16&255,d>>>8&255,255&d,85,196,0,0]))},a.hdlr=function(b){var c=null;return c="audio"===b.type?a.constants.HDLR_AUDIO:a.constants.HDLR_VIDEO,a.box(a.types.hdlr,c)},a.minf=function(b){var c=null;return c="audio"===b.type?a.box(a.types.smhd,a.constants.SMHD):a.box(a.types.vmhd,a.constants.VMHD),a.box(a.types.minf,c,a.dinf(),a.stbl(b))},a.dinf=function(){return a.box(a.types.dinf,a.box(a.types.dref,a.constants.DREF))},a.stbl=function(b){return a.box(a.types.stbl,a.stsd(b),a.box(a.types.stts,a.constants.STTS),a.box(a.types.stsc,a.constants.STSC),a.box(a.types.stsz,a.constants.STSZ),a.box(a.types.stco,a.constants.STCO))},a.stsd=function(b){return"audio"===b.type?"mp3"===b.codec?a.box(a.types.stsd,a.constants.STSD_PREFIX,a.mp3(b)):a.box(a.types.stsd,a.constants.STSD_PREFIX,a.mp4a(b)):a.box(a.types.stsd,a.constants.STSD_PREFIX,a.avc1(b))},a.mp3=function(b){var c=b.channelCount,d=b.audioSampleRate,e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,c,0,16,0,0,0,0,d>>>8&255,255&d,0,0]);return a.box(a.types[".mp3"],e)},a.mp4a=function(b){var c=b.channelCount,d=b.audioSampleRate,e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,c,0,16,0,0,0,0,d>>>8&255,255&d,0,0]);return a.box(a.types.mp4a,e,a.esds(b))},a.esds=function(b){var c=b.config||[],d=c.length,e=new Uint8Array([0,0,0,0,3,23+d,0,1,0,4,15+d,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([d]).concat(c).concat([6,1,2]));return a.box(a.types.esds,e)},a.avc1=function(b){var c=b.avcc,d=b.codecWidth,e=b.codecHeight,f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>>8&255,255&d,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return a.box(a.types.avc1,f,a.box(a.types.avcC,c))},a.mvex=function(b){return a.box(a.types.mvex,a.trex(b))},a.trex=function(b){var c=b.id,d=new Uint8Array([0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return a.box(a.types.trex,d)},a.moof=function(b,c){return a.box(a.types.moof,a.mfhd(b.sequenceNumber),a.traf(b,c))},a.mfhd=function(b){var c=new Uint8Array([0,0,0,0,b>>>24&255,b>>>16&255,b>>>8&255,255&b]);return a.box(a.types.mfhd,c)},a.traf=function(b,c){var d=b.id,e=a.box(a.types.tfhd,new Uint8Array([0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,255&d])),f=a.box(a.types.tfdt,new Uint8Array([0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c])),g=a.sdtp(b),h=a.trun(b,g.byteLength+16+16+8+16+8+8);return a.box(a.types.traf,e,f,h,g)},a.sdtp=function(b){for(var c=b.samples||[],d=c.length,e=new Uint8Array(4+d),f=0;f<d;f++){var g=c[f].flags;e[f+4]=g.isLeading<<6|g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy}return a.box(a.types.sdtp,e)},a.trun=function(b,c){var d=b.samples||[],e=d.length,f=12+16*e,g=new Uint8Array(f);c+=8+f,g.set([0,0,15,1,e>>>24&255,e>>>16&255,e>>>8&255,255&e,c>>>24&255,c>>>16&255,c>>>8&255,255&c],0);for(var h=0;h<e;h++){var i=d[h].duration,j=d[h].size,k=d[h].flags,l=d[h].cts;g.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,j>>>24&255,j>>>16&255,j>>>8&255,255&j,k.isLeading<<2|k.dependsOn,k.isDependedOn<<6|k.hasRedundancy<<4|k.isNonSync,0,0,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*h)}return a.box(a.types.trun,g)},a.mdat=function(b){return a.box(a.types.mdat,b)},a}();d.init(),b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(6),h=d(g),i=c(109),j=d(i),k=c(108),l=d(k),m=c(19),n=d(m),o=c(49),p=c(5),q=function(){function a(b){e(this,a),this.TAG="MP4Remuxer",this._config=b,this._isLive=!0===b.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new o.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new o.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!n["default"].chrome||!(n["default"].version.major<50||50===n["default"].version.major&&n["default"].version.build<2661)),this._fillSilentAfterSeek=n["default"].msedge||n["default"].msie,this._mp3UseMpegAudio=!n["default"].firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return a.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},a.prototype.bindDataSource=function(a){return a.onDataAvailable=this.remux.bind(this),a.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},a.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},a.prototype.seek=function(a){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},a.prototype.remux=function(a,b){if(!this._onMediaSegment)throw new p.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(a,b),this._remuxVideo(b),this._remuxAudio(a)},a.prototype._onTrackMetadataReceived=function(a,b){var c=null,d="mp4",e=b.codec;if("audio"===a)this._audioMeta=b,"mp3"===b.codec&&this._mp3UseMpegAudio?(d="mpeg",e="",c=new Uint8Array):c=j["default"].generateInitSegment(b);else{if("video"!==a)return;this._videoMeta=b,c=j["default"].generateInitSegment(b)}if(!this._onInitSegment)throw new p.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(a,{type:a,data:c.buffer,codec:e,container:a+"/"+d,mediaDuration:b.duration})},a.prototype._calculateDtsBase=function(a,b){this._dtsBaseInited||(a.samples&&a.samples.length&&(this._audioDtsBase=a.samples[0].dts),b.samples&&b.samples.length&&(this._videoDtsBase=b.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},a.prototype.flushStashedSamples=function(){var a=this._videoStashedLastSample,b=this._audioStashedLastSample,c={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=a&&(c.samples.push(a),c.length=a.length);var d={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=b&&(d.samples.push(b),d.length=b.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(c,!0),this._remuxAudio(d,!0)},a.prototype._remuxAudio=function(a,b){if(null!=this._audioMeta){var c=a,d=c.samples,e=void 0,f=-1,g=-1,i=this._audioMeta.refSampleDuration,k="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,m=this._dtsBaseInited&&void 0===this._audioNextDts,p=!1;if(d&&0!==d.length&&(1!==d.length||b)){var q=0,r=null,s=0;k?(q=0,s=c.length):(q=8,s=8+c.length);var t=null;if(d.length>1&&(t=d.pop(),s-=t.length),null!=this._audioStashedLastSample){var u=this._audioStashedLastSample;this._audioStashedLastSample=null,d.unshift(u),s+=u.length}null!=t&&(this._audioStashedLastSample=t);var v=d[0].dts-this._dtsBase;if(this._audioNextDts)e=v-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())e=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(p=!0);else{var w=this._audioSegmentInfoList.getLastSampleBefore(v);if(null!=w){var x=v-(w.originalDts+w.duration);x<=3&&(x=0);var y=w.dts+w.duration+x;e=v-y}else e=0}if(p){var z=v-e,A=this._videoSegmentInfoList.getLastSegmentBefore(v);if(null!=A&&A.beginDts<z){var B=l["default"].getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(B){var C=A.beginDts,D=z-A.beginDts;h["default"].v(this.TAG,"InsertPrefixSilentAudio: dts: "+C+", duration: "+D),d.unshift({unit:B,dts:C,pts:C}),s+=B.byteLength}}else p=!1}for(var E=[],F=0;F<d.length;F++){var G=d[F],H=G.unit,I=G.dts-this._dtsBase,J=I-e;-1===f&&(f=J);var K=0;if(F!==d.length-1){K=d[F+1].dts-this._dtsBase-e-J}else if(null!=t){var L=t.dts-this._dtsBase-e;K=L-J}else K=E.length>=1?E[E.length-1].duration:Math.floor(i);var M=!1,N=null;if(K>1.5*i&&"mp3"!==this._audioMeta.codec&&this._fillAudioTimestampGap&&!n["default"].safari){M=!0;var O=Math.abs(K-i),P=Math.ceil(O/i),Q=J+i;h["default"].w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\ndts: "+(J+K)+" ms, expected: "+(J+Math.round(i))+" ms, delta: "+Math.round(O)+" ms, generate: "+P+" frames");var R=l["default"].getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);null==R&&(h["default"].w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),R=H),N=[];for(var S=0;S<P;S++){var T=Math.round(Q);if(N.length>0){var U=N[N.length-1];U.duration=T-U.dts}var V={dts:T,pts:T,cts:0,unit:R,size:R.byteLength,duration:0,originalDts:I,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};N.push(V),s+=V.size,Q+=i}var W=N[N.length-1];W.duration=J+K-W.dts,K=Math.round(i)}E.push({dts:J,pts:J,cts:0,unit:G.unit,size:G.unit.byteLength,duration:K,originalDts:I,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),M&&E.push.apply(E,N)}k?r=new Uint8Array(s):(r=new Uint8Array(s),r[0]=s>>>24&255,r[1]=s>>>16&255,r[2]=s>>>8&255,r[3]=255&s,r.set(j["default"].types.mdat,4));for(var X=0;X<E.length;X++){var Y=E[X].unit;r.set(Y,q),q+=Y.byteLength}var Z=E[E.length-1];g=Z.dts+Z.duration,this._audioNextDts=g;var $=new o.MediaSegmentInfo;$.beginDts=f,$.endDts=g,$.beginPts=f,$.endPts=g,$.originalBeginDts=E[0].originalDts,$.originalEndDts=Z.originalDts+Z.duration,$.firstSample=new o.SampleInfo(E[0].dts,E[0].pts,E[0].duration,E[0].originalDts,!1),$.lastSample=new o.SampleInfo(Z.dts,Z.pts,Z.duration,Z.originalDts,!1),this._isLive||this._audioSegmentInfoList.append($),c.samples=E,c.sequenceNumber++;var _=null;_=k?new Uint8Array:j["default"].moof(c,f),c.samples=[],c.length=0;var aa={type:"audio",data:this._mergeBoxes(_,r).buffer,sampleCount:E.length,info:$};k&&m&&(aa.timestampOffset=f),this._onMediaSegment("audio",aa)}}},a.prototype._remuxVideo=function(a,b){if(null!=this._videoMeta){var c=a,d=c.samples,e=void 0,f=-1,g=-1,h=-1,i=-1;if(d&&0!==d.length&&(1!==d.length||b)){var k=8,l=null,m=8+a.length,n=null;if(d.length>1&&(n=d.pop(),m-=n.length),null!=this._videoStashedLastSample){var p=this._videoStashedLastSample;this._videoStashedLastSample=null,d.unshift(p),m+=p.length}null!=n&&(this._videoStashedLastSample=n);var q=d[0].dts-this._dtsBase;if(this._videoNextDts)e=q-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())e=0;else{var r=this._videoSegmentInfoList.getLastSampleBefore(q);if(null!=r){var s=q-(r.originalDts+r.duration);s<=3&&(s=0);var t=r.dts+r.duration+s;e=q-t}else e=0}for(var u=new o.MediaSegmentInfo,v=[],w=0;w<d.length;w++){var x=d[w],y=x.dts-this._dtsBase,z=x.isKeyframe,A=y-e,B=x.cts,C=A+B;-1===f&&(f=A,h=C);var D=0;if(w!==d.length-1){D=d[w+1].dts-this._dtsBase-e-A}else if(null!=n){var E=n.dts-this._dtsBase-e;D=E-A}else D=v.length>=1?v[v.length-1].duration:Math.floor(this._videoMeta.refSampleDuration);if(z){var F=new o.SampleInfo(A,C,D,x.dts,!0);F.fileposition=x.fileposition,u.appendSyncPoint(F)}v.push({dts:A,pts:C,cts:B,units:x.units,size:x.length,isKeyframe:z,duration:D,originalDts:y,flags:{isLeading:0,dependsOn:z?2:1,isDependedOn:z?1:0,hasRedundancy:0,isNonSync:z?0:1}})}l=new Uint8Array(m),l[0]=m>>>24&255,l[1]=m>>>16&255,l[2]=m>>>8&255,l[3]=255&m,l.set(j["default"].types.mdat,4);for(var G=0;G<v.length;G++)for(var H=v[G].units;H.length;){var I=H.shift(),J=I.data;l.set(J,k),k+=J.byteLength}var K=v[v.length-1];if(g=K.dts+K.duration,i=K.pts+K.duration,this._videoNextDts=g,u.beginDts=f,u.endDts=g,u.beginPts=h,u.endPts=i,u.originalBeginDts=v[0].originalDts,u.originalEndDts=K.originalDts+K.duration,u.firstSample=new o.SampleInfo(v[0].dts,v[0].pts,v[0].duration,v[0].originalDts,v[0].isKeyframe),u.lastSample=new o.SampleInfo(K.dts,K.pts,K.duration,K.originalDts,K.isKeyframe),this._isLive||this._videoSegmentInfoList.append(u),c.samples=v,c.sequenceNumber++,this._forceFirstIDR){var L=v[0].flags;L.dependsOn=2,L.isNonSync=0}var M=j["default"].moof(c,f);c.samples=[],c.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(M,l).buffer,sampleCount:v.length,info:u})}}},a.prototype._mergeBoxes=function(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);return c.set(a,0),c.set(b,a.byteLength),c},f(a,[{key:"onInitSegment",get:function(){return this._onInitSegment},set:function(a){this._onInitSegment=a}},{key:"onMediaSegment",get:function(){return this._onMediaSegment},set:function(a){this._onMediaSegment=a}}]),a}();b["default"]=q,a.exports=b["default"]},function(a,b){"use strict";function c(a,b,c){var d=a;if(b+c<d.length){for(;c--;)if(128!=(192&d[++b]))return!1;return!0}return!1}function d(a){for(var b=[],d=a,e=0,f=a.length;e<f;)if(d[e]<128)b.push(String.fromCharCode(d[e])),++e;else{if(d[e]<192);else if(d[e]<224){if(c(d,e,1)){var g=(31&d[e])<<6|63&d[e+1];if(g>=128){b.push(String.fromCharCode(65535&g)),e+=2;continue}}}else if(d[e]<240){if(c(d,e,2)){var h=(15&d[e])<<12|(63&d[e+1])<<6|63&d[e+2];if(h>=2048&&55296!=(63488&h)){b.push(String.fromCharCode(65535&h)),e+=3;continue}}}else if(d[e]<248&&c(d,e,3)){var i=(7&d[e])<<18|(63&d[e+1])<<12|(63&d[e+2])<<6|63&d[e+3];if(i>65536&&i<1114112){i-=65536,b.push(String.fromCharCode(i>>>10|55296)),b.push(String.fromCharCode(1023&i|56320)),e+=4;continue}}b.push(String.fromCharCode(65533)),++e}return b.join("")}b.__esModule=!0,b["default"]=d,a.exports=b["default"]},function(a,b,c){var require,require,d,e,f,e,f;(function(c){"use strict";var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function h(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var i="function"==typeof require&&require;if(!g&&i)return require(f,!0);if(e)return e(f,!0);var j=new Error("Cannot find module '"+f+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[f]={exports:{}};a[f][0].call(k.exports,function(b){return d(a[f][1][b]||b)},k,k.exports,h,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){b.exports=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}},{}],2:[function(a,b,c){function d(a,c,g){return f()?b.exports=d=Reflect.construct:b.exports=d=function(a,b,c){var d=[null];d.push.apply(d,b);var f=new(Function.bind.apply(a,d));return c&&e(f,c.prototype),f},d.apply(null,arguments)}var e=a("./setPrototypeOf"),f=a("./isNativeReflectConstruct");b.exports=d},{"./isNativeReflectConstruct":7,"./setPrototypeOf":8}],3:[function(a,b,c){function d(){return b.exports=d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},d.apply(this,arguments)}b.exports=d},{}],4:[function(a,b,c){var d=a("./setPrototypeOf");b.exports=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&d(a,b)}},{"./setPrototypeOf":8}],5:[function(a,b,c){b.exports=function(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}},{}],6:[function(a,b,c){b.exports=function(a){return a&&a.__esModule?a:{"default":a}}},{}],7:[function(a,b,c){b.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}},{}],8:[function(a,b,c){function d(a,c){return b.exports=d=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},d(a,c)}b.exports=d},{}],9:[function(a,b,c){var d=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.reverseBytes=c.sliceBytes=c.bytesMatch=c.concatTypedArrays=c.stringToBytes=c.bytesToString=c.numberToBytes=c.bytesToNumber=c.IS_LITTLE_ENDIAN=c.IS_BIG_ENDIAN=c.ENDIANNESS=c.toBinaryString=c.toHexString=c.toUint8=c.isTypedArray=c.padStart=c.countBytes=c.countBits=void 0;var e=d(a("global/window")),f=function(a){return a.toString(2).length};c.countBits=f;var g=function(a){return Math.ceil(f(a)/8)};c.countBytes=g;var h=function(a,b,c){return void 0===c&&(c=" "),(function(a,b){for(var c="";b--;)c+=a;return c}(c,b)+a.toString()).slice(-b)};c.padStart=h;var i=function(a){return ArrayBuffer.isView(a)};c.isTypedArray=i;var j=function(a){return a instanceof Uint8Array?a:(Array.isArray(a)||i(a)||a instanceof ArrayBuffer||(a="number"!=typeof a||"number"==typeof a&&a!=a?0:[a]),new Uint8Array(a&&a.buffer||a,a&&a.byteOffset||0,a&&a.byteLength||0))};c.toUint8=j,c.toHexString=function(a){a=j(a);for(var b="",c=0;c<a.length;c++)b+=h(a[c].toString(16),2,"0");return b},c.toBinaryString=function(a){a=j(a);for(var b="",c=0;c<a.length;c++)b+=h(a[c].toString(2),8,"0");return b};var k,l,m=e["default"].BigInt||Number,n=[m("0x1"),m("0x100"),m("0x10000"),m("0x1000000"),m("0x100000000"),m("0x10000000000"),m("0x1000000000000"),m("0x100000000000000"),m("0x10000000000000000")],o=(k=new Uint16Array([65484]),255===(l=new Uint8Array(k.buffer,k.byteOffset,k.byteLength))[0]?"big":204===l[0]?"little":"unknown");c.ENDIANNESS=o;var p="big"===o;c.IS_BIG_ENDIAN=p;var q="little"===o;c.IS_LITTLE_ENDIAN=q,c.bytesToNumber=function(a,b){var c=void 0===b?{}:b,d=c.signed,e=void 0!==d&&d,f=c.le,g=void 0!==f&&f;a=j(a);var h=g?"reduce":"reduceRight",i=(a[h]?a[h]:Array.prototype[h]).call(a,function(b,c,d){var e=g?d:Math.abs(d+1-a.length);return b+m(c)*n[e]},m(0));if(e){var k=n[a.length]/m(2)-m(1);(i=m(i))>k&&(i-=k,i-=k,i-=m(2))}return Number(i)},c.numberToBytes=function(a,b){var c=(void 0===b?{}:b).le,d=void 0!==c&&c;("bigint"!=typeof a&&"number"!=typeof a||"number"==typeof a&&a!=a)&&(a=0),a=m(a);for(var e=g(a),f=new Uint8Array(new ArrayBuffer(e)),h=0;h<e;h++){var i=d?h:Math.abs(h+1-f.length);f[i]=Number(a/n[h]&m(255)),a<0&&(f[i]=Math.abs(~f[i]),f[i]-=0===h?1:2)}return f},c.bytesToString=function(a){if(!a)return"";a=Array.prototype.slice.call(a);var b=String.fromCharCode.apply(null,j(a));try{return decodeURIComponent(escape(b))}catch(a){}return b},c.stringToBytes=function(a,b){if("string"!=typeof a&&a&&"function"==typeof a.toString&&(a=a.toString()),"string"!=typeof a)return new Uint8Array;b||(a=unescape(encodeURIComponent(a)));for(var c=new Uint8Array(a.length),d=0;d<a.length;d++)c[d]=a.charCodeAt(d);return c},c.concatTypedArrays=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];if((b=b.filter(function(a){return a&&(a.byteLength||a.length)&&"string"!=typeof a})).length<=1)return j(b[0]);var d=b.reduce(function(a,b,c){return a+(b.byteLength||b.length)},0),e=new Uint8Array(d),f=0;return b.forEach(function(a){a=j(a),e.set(a,f),f+=a.byteLength}),e},c.bytesMatch=function(a,b,c){var d=void 0===c?{}:c,e=d.offset,f=void 0===e?0:e,g=d.mask,h=void 0===g?[]:g;a=j(a);var i=(b=j(b)).every?b.every:Array.prototype.every;return b.length&&a.length-f>=b.length&&i.call(b,function(b,c){return b===(h[c]?h[c]&a[f+c]:a[f+c])})},c.sliceBytes=function(a,b,c){return Uint8Array.prototype.slice?Uint8Array.prototype.slice.call(a,b,c):new Uint8Array(Array.prototype.slice.call(a,b,c))},c.reverseBytes=function(a){return a.reverse?a.reverse():Array.prototype.reverse.call(a)}},{"@babel/runtime/helpers/interopRequireDefault":6,"global/window":35}],10:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getHvcCodec=c.getAvcCodec=c.getAv1Codec=void 0;var d=a("./byte-helpers.js");c.getAv1Codec=function(a){var b,c="",e=a[1]>>>3,f=31&a[1],g=a[2]>>>7,h=(64&a[2])>>6,i=(32&a[2])>>5,j=(16&a[2])>>4,k=(8&a[2])>>3,l=(4&a[2])>>2,m=3&a[2];return c+=e+"."+(0,d.padStart)(f,2,"0"),0===g?c+="M":1===g&&(c+="H"),b=2===e&&h?i?12:10:h?10:8,c+="."+(0,d.padStart)(b,2,"0"),c+="."+j,c+="."+k+l+m},c.getAvcCodec=function(a){return""+(0,d.toHexString)(a[1])+(0,d.toHexString)(252&a[2])+(0,d.toHexString)(a[3])},c.getHvcCodec=function(a){var b="",c=a[1]>>6,e=31&a[1],f=(32&a[1])>>5,g=a.subarray(2,6),h=a.subarray(6,12),i=a[12];1===c?b+="A":2===c?b+="B":3===c&&(b+="C"),b+=e+".";var j=parseInt((0,d.toBinaryString)(g).split("").reverse().join(""),2);j>255&&(j=parseInt((0,d.toBinaryString)(g),2)),b+=j.toString(16)+".",b+=0===f?"L":"H",b+=i;for(var k="",l=0;l<h.length;l++){var m=h[l];m&&(k&&(k+="."),k+=m.toString(16))}return k&&(b+="."+k),b}},{"./byte-helpers.js":9}],11:[function(a,b,c){var d=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_VIDEO_CODEC=c.DEFAULT_AUDIO_CODEC=c.muxerSupportsCodec=c.browserSupportsCodec=c.getMimeForCodec=c.isTextCodec=c.isAudioCodec=c.isVideoCodec=c.codecsFromDefault=c.parseCodecs=c.mapLegacyAvcCodecs=c.translateLegacyCodecs=c.translateLegacyCodec=void 0;var e=d(a("global/window")),f={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},g=["video","audio","text"],h=["Video","Audio","Text"],i=function(a){return a?a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,c){return"avc1."+("00"+Number(b).toString(16)).slice(-2)+"00"+("00"+Number(c).toString(16)).slice(-2)}):a};c.translateLegacyCodec=i;var j=function(a){return a.map(i)};c.translateLegacyCodecs=j,c.mapLegacyAvcCodecs=function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a){return j([a])[0]})};var k=function(a){void 0===a&&(a="");var b=a.split(","),c=[];return b.forEach(function(a){var b;a=a.trim(),g.forEach(function(d){var e=f[d].exec(a.toLowerCase());if(e&&!(e.length<=1)){b=d;var g=a.substring(0,e[1].length),h=a.replace(g,"");c.push({type:g,details:h,mediaType:d})}}),b||c.push({type:a,details:"",mediaType:"unknown"})}),c};c.parseCodecs=k,c.codecsFromDefault=function(a,b){if(!a.mediaGroups.AUDIO||!b)return null;var c=a.mediaGroups.AUDIO[b];if(!c)return null;for(var d in c){var e=c[d];if(e["default"]&&e.playlists)return k(e.playlists[0].attributes.CODECS)}return null},c.isVideoCodec=function(a){return void 0===a&&(a=""),f.video.test(a.trim().toLowerCase())};var l=function(a){return void 0===a&&(a=""),f.audio.test(a.trim().toLowerCase())};c.isAudioCodec=l;var m=function(a){return void 0===a&&(a=""),f.text.test(a.trim().toLowerCase())};c.isTextCodec=m;var n=function(a){if(a&&"string"==typeof a){var b=a.toLowerCase().split(",").map(function(a){return i(a.trim())}),c="video";1===b.length&&l(b[0])?c="audio":1===b.length&&m(b[0])&&(c="application");var d="mp4";return b.every(function(a){return f.mp4.test(a)})?d="mp4":b.every(function(a){return f.webm.test(a)})?d="webm":b.every(function(a){return f.ogg.test(a)})&&(d="ogg"),c+"/"+d+';codecs="'+a+'"'}};c.getMimeForCodec=n,c.browserSupportsCodec=function(a){return void 0===a&&(a=""),e["default"].MediaSource&&e["default"].MediaSource.isTypeSupported&&e["default"].MediaSource.isTypeSupported(n(a))||!1},c.muxerSupportsCodec=function(a){return void 0===a&&(a=""),a.toLowerCase().split(",").every(function(a){a=a.trim();for(var b=0;b<h.length;b++)if(f["muxer"+h[b]].test(a))return!0;return!1})},c.DEFAULT_AUDIO_CODEC="mp4a.40.2",c.DEFAULT_VIDEO_CODEC="avc1.4d400d"},{"@babel/runtime/helpers/interopRequireDefault":6,"global/window":35}],12:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0}),c.isLikelyFmp4MediaSegment=c.detectContainerForBytes=c.isLikely=void 0;var d=a("./byte-helpers.js"),e=a("./mp4-helpers.js"),f=a("./ebml-helpers.js"),g=a("./id3-helpers.js"),h=a("./nal-helpers.js"),i={webm:(0,d.toUint8)([119,101,98,109]),matroska:(0,d.toUint8)([109,97,116,114,111,115,107,97]),flac:(0,d.toUint8)([102,76,97,67]),ogg:(0,d.toUint8)([79,103,103,83]),ac3:(0,d.toUint8)([11,119]),riff:(0,d.toUint8)([82,73,70,70]),avi:(0,d.toUint8)([65,86,73]),wav:(0,d.toUint8)([87,65,86,69]),"3gp":(0,d.toUint8)([102,116,121,112,51,103]),mp4:(0,d.toUint8)([102,116,121,112]),fmp4:(0,d.toUint8)([115,116,121,112]),mov:(0,d.toUint8)([102,116,121,112,113,116]),moov:(0,d.toUint8)([109,111,111,118]),moof:(0,d.toUint8)([109,111,111,102])},j={aac:function(a){var b=(0,g.getId3Offset)(a);return(0,d.bytesMatch)(a,[255,16],{offset:b,mask:[255,22]})},mp3:function(a){var b=(0,g.getId3Offset)(a);return(0,d.bytesMatch)(a,[255,2],{offset:b,mask:[255,6]})},webm:function(a){var b=(0,f.findEbml)(a,[f.EBML_TAGS.EBML,f.EBML_TAGS.DocType])[0];return(0,d.bytesMatch)(b,i.webm)},mkv:function(a){var b=(0,f.findEbml)(a,[f.EBML_TAGS.EBML,f.EBML_TAGS.DocType])[0];return(0,d.bytesMatch)(b,i.matroska)},mp4:function(a){return!j["3gp"](a)&&!j.mov(a)&&(!(!(0,d.bytesMatch)(a,i.mp4,{offset:4})&&!(0,d.bytesMatch)(a,i.fmp4,{offset:4}))||!(!(0,d.bytesMatch)(a,i.moof,{offset:4})&&!(0,d.bytesMatch)(a,i.moov,{offset:4}))||void 0)},mov:function(a){return(0,d.bytesMatch)(a,i.mov,{offset:4})},"3gp":function(a){return(0,d.bytesMatch)(a,i["3gp"],{offset:4})},ac3:function(a){var b=(0,g.getId3Offset)(a);return(0,d.bytesMatch)(a,i.ac3,{offset:b})},ts:function(a){if(a.length<189&&a.length>=1)return 71===a[0];for(var b=0;b+188<a.length&&b<188;){if(71===a[b]&&71===a[b+188])return!0;b+=1}return!1},flac:function(a){var b=(0,g.getId3Offset)(a);return(0,d.bytesMatch)(a,i.flac,{offset:b})},ogg:function(a){return(0,d.bytesMatch)(a,i.ogg)},avi:function(a){return(0,d.bytesMatch)(a,i.riff)&&(0,d.bytesMatch)(a,i.avi,{offset:8})},wav:function(a){return(0,d.bytesMatch)(a,i.riff)&&(0,d.bytesMatch)(a,i.wav,{offset:8})},h264:function(a){return(0,h.findH264Nal)(a,7,3).length},h265:function(a){return(0,h.findH265Nal)(a,[32,33],3).length}},k=Object.keys(j).filter(function(a){return"ts"!==a&&"h264"!==a&&"h265"!==a}).concat(["ts","h264","h265"]);k.forEach(function(a){var b=j[a];j[a]=function(a){return b((0,d.toUint8)(a))}});var l=j;c.isLikely=l,c.detectContainerForBytes=function(a){a=(0,d.toUint8)(a)
;for(var b=0;b<k.length;b++){var c=k[b];if(l[c](a))return c}return""},c.isLikelyFmp4MediaSegment=function(a){return(0,e.findBox)(a,["moof"]).length>0}},{"./byte-helpers.js":9,"./ebml-helpers.js":14,"./id3-helpers.js":15,"./mp4-helpers.js":17,"./nal-helpers.js":18}],13:[function(a,b,c){(function(d){var e=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){for(var b=(g=a,f["default"].atob?f["default"].atob(g):d.from(g,"base64").toString("binary")),c=new Uint8Array(b.length),e=0;e<b.length;e++)c[e]=b.charCodeAt(e);var g;return c};var f=e(a("global/window"));b.exports=c["default"]}).call(this,a("buffer").Buffer)},{"@babel/runtime/helpers/interopRequireDefault":6,buffer:32,"global/window":35}],14:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseData=c.parseTracks=c.decodeBlock=c.findEbml=c.EBML_TAGS=void 0;var d=a("./byte-helpers"),e=a("./codec-helpers.js"),f={EBML:(0,d.toUint8)([26,69,223,163]),DocType:(0,d.toUint8)([66,130]),Segment:(0,d.toUint8)([24,83,128,103]),SegmentInfo:(0,d.toUint8)([21,73,169,102]),Tracks:(0,d.toUint8)([22,84,174,107]),Track:(0,d.toUint8)([174]),TrackNumber:(0,d.toUint8)([215]),DefaultDuration:(0,d.toUint8)([35,227,131]),TrackEntry:(0,d.toUint8)([174]),TrackType:(0,d.toUint8)([131]),FlagDefault:(0,d.toUint8)([136]),CodecID:(0,d.toUint8)([134]),CodecPrivate:(0,d.toUint8)([99,162]),VideoTrack:(0,d.toUint8)([224]),AudioTrack:(0,d.toUint8)([225]),Cluster:(0,d.toUint8)([31,67,182,117]),Timestamp:(0,d.toUint8)([231]),TimestampScale:(0,d.toUint8)([42,215,177]),BlockGroup:(0,d.toUint8)([160]),BlockDuration:(0,d.toUint8)([155]),Block:(0,d.toUint8)([161]),SimpleBlock:(0,d.toUint8)([163])};c.EBML_TAGS=f;var g=[128,64,32,16,8,4,2,1],h=function(a,b,c,e){void 0===c&&(c=!0),void 0===e&&(e=!1);var f=function(a){for(var b=1,c=0;c<g.length&&!(a&g[c]);c++)b++;return b}(a[b]),h=a.subarray(b,b+f);return c&&((h=Array.prototype.slice.call(a,b,b+f))[0]^=g[f-1]),{length:f,value:(0,d.bytesToNumber)(h,{signed:e}),bytes:h}},i=function n(a){return"string"==typeof a?a.match(/.{1,2}/g).map(function(a){return n(a)}):"number"==typeof a?(0,d.numberToBytes)(a):a},j=function o(a,b,c){if(c>=b.length)return b.length;var e=h(b,c,!1);if((0,d.bytesMatch)(a.bytes,e.bytes))return c;var f=h(b,c+e.length);return o(a,b,c+f.length+f.value+e.length)},k=function p(a,b){b=function(a){return Array.isArray(a)?a.map(function(a){return i(a)}):[i(a)]}(b),a=(0,d.toUint8)(a);var c=[];if(!b.length)return c;for(var e=0;e<a.length;){var f=h(a,e,!1),g=h(a,e+f.length),k=e+f.length+g.length;127===g.value&&(g.value=j(f,a,k),g.value!==a.length&&(g.value-=k));var l=k+g.value>a.length?a.length:k+g.value,m=a.subarray(k,l);(0,d.bytesMatch)(b[0],f.bytes)&&(1===b.length?c.push(m):c=c.concat(p(m,b.slice(1)))),e+=f.length+g.length+m.length}return c};c.findEbml=k;var l=function(a,b,c,e){var g;"group"===b&&((g=k(a,[f.BlockDuration])[0])&&(g=1/c*(g=(0,d.bytesToNumber)(g))*c/1e3),a=k(a,[f.Block])[0],b="block");var i=new DataView(a.buffer,a.byteOffset,a.byteLength),j=h(a,0),l=i.getInt16(j.length,!1),m=a[j.length+2],n=a.subarray(j.length+3),o=1/c*(e+l)*c/1e3,p={duration:g,trackNumber:j.value,keyframe:"simple"===b&&m>>7==1,invisible:(8&m)>>3==1,lacing:(6&m)>>1,discardable:"simple"===b&&1==(1&m),frames:[],pts:o,dts:o,timestamp:l};if(!p.lacing)return p.frames.push(n),p;var q=n[0]+1,r=[],s=1;if(2===p.lacing)for(var t=(n.length-s)/q,u=0;u<q;u++)r.push(t);if(1===p.lacing)for(var v=0;v<q-1;v++){var w=0;do{w+=n[s],s++}while(255===n[s-1]);r.push(w)}if(3===p.lacing)for(var x=0,y=0;y<q-1;y++){var z=0===y?h(n,s):h(n,s,!0,!0);x+=z.value,r.push(x),s+=z.length}return r.forEach(function(a){p.frames.push(n.subarray(s,s+a)),s+=a}),p};c.decodeBlock=l;var m=function(a){a=(0,d.toUint8)(a);var b=[],c=k(a,[f.Segment,f.Tracks,f.Track]);return c.length||(c=k(a,[f.Tracks,f.Track])),c.length||(c=k(a,[f.Track])),c.length?(c.forEach(function(a){var c=k(a,f.TrackType)[0];if(c&&c.length){if(1===c[0])c="video";else if(2===c[0])c="audio";else{if(17!==c[0])return;c="subtitle"}var g={rawCodec:(0,d.bytesToString)(k(a,[f.CodecID])[0]),type:c,codecPrivate:k(a,[f.CodecPrivate])[0],number:(0,d.bytesToNumber)(k(a,[f.TrackNumber])[0]),defaultDuration:(0,d.bytesToNumber)(k(a,[f.DefaultDuration])[0]),"default":k(a,[f.FlagDefault])[0],rawData:a},h="";if(/V_MPEG4\/ISO\/AVC/.test(g.rawCodec))h="avc1."+(0,e.getAvcCodec)(g.codecPrivate);else if(/V_MPEGH\/ISO\/HEVC/.test(g.rawCodec))h="hev1."+(0,e.getHvcCodec)(g.codecPrivate);else if(/V_MPEG4\/ISO\/ASP/.test(g.rawCodec))h=g.codecPrivate?"mp4v.20."+g.codecPrivate[4].toString():"mp4v.20.9";else if(/^V_THEORA/.test(g.rawCodec))h="theora";else if(/^V_VP8/.test(g.rawCodec))h="vp8";else if(/^V_VP9/.test(g.rawCodec))if(g.codecPrivate){var i=function(a){for(var b=0,c={};b<a.length;){var d=127&a[b],e=a[b+1],f=void 0;f=1===e?a[b+2]:a.subarray(b+2,b+2+e),1===d?c.profile=f:2===d?c.level=f:3===d?c.bitDepth=f:4===d?c.chromaSubsampling=f:c[d]=f,b+=2+e}return c}(g.codecPrivate),j=i.profile,l=i.level,m=i.bitDepth,n=i.chromaSubsampling;h="vp09.",h+=(0,d.padStart)(j,2,"0")+".",h+=(0,d.padStart)(l,2,"0")+".",h+=(0,d.padStart)(m,2,"0")+".",h+=""+(0,d.padStart)(n,2,"0");var o=k(a,[224,[85,176],[85,177]])[0]||[],p=k(a,[224,[85,176],[85,185]])[0]||[],q=k(a,[224,[85,176],[85,186]])[0]||[],r=k(a,[224,[85,176],[85,187]])[0]||[];(o.length||p.length||q.length||r.length)&&(h+="."+(0,d.padStart)(r[0],2,"0"),h+="."+(0,d.padStart)(q[0],2,"0"),h+="."+(0,d.padStart)(o[0],2,"0"),h+="."+(0,d.padStart)(p[0],2,"0"))}else h="vp9";else/^V_AV1/.test(g.rawCodec)?h="av01."+(0,e.getAv1Codec)(g.codecPrivate):/A_ALAC/.test(g.rawCodec)?h="alac":/A_MPEG\/L2/.test(g.rawCodec)?h="mp2":/A_MPEG\/L3/.test(g.rawCodec)?h="mp3":/^A_AAC/.test(g.rawCodec)?h=g.codecPrivate?"mp4a.40."+(g.codecPrivate[0]>>>3).toString():"mp4a.40.2":/^A_AC3/.test(g.rawCodec)?h="ac-3":/^A_PCM/.test(g.rawCodec)?h="pcm":/^A_MS\/ACM/.test(g.rawCodec)?h="speex":/^A_EAC3/.test(g.rawCodec)?h="ec-3":/^A_VORBIS/.test(g.rawCodec)?h="vorbis":/^A_FLAC/.test(g.rawCodec)?h="flac":/^A_OPUS/.test(g.rawCodec)&&(h="opus");g.codec=h,b.push(g)}}),b.sort(function(a,b){return a.number-b.number})):b};c.parseTracks=m,c.parseData=function(a,b){var c=[],e=k(a,[f.Segment])[0],g=k(e,[f.SegmentInfo,f.TimestampScale])[0];g=g&&g.length?(0,d.bytesToNumber)(g):1e6;var h=k(e,[f.Cluster]);return b||(b=m(e)),h.forEach(function(a,b){var e=k(a,[f.SimpleBlock]).map(function(a){return{type:"simple",data:a}}),h=k(a,[f.BlockGroup]).map(function(a){return{type:"group",data:a}}),i=k(a,[f.Timestamp])[0]||0;i&&i.length&&(i=(0,d.bytesToNumber)(i)),e.concat(h).sort(function(a,b){return a.data.byteOffset-b.data.byteOffset}).forEach(function(a,b){var d=l(a.data,a.type,g,i);c.push(d)})}),{tracks:b,blocks:c}}},{"./byte-helpers":9,"./codec-helpers.js":10}],15:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getId3Offset=c.getId3Size=void 0;var d=a("./byte-helpers.js"),e=(0,d.toUint8)([73,68,51]),f=function(a,b){void 0===b&&(b=0);var c=(a=(0,d.toUint8)(a))[b+5],e=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(16&c)>>4?e+20:e+10};c.getId3Size=f,c.getId3Offset=function g(a,b){return void 0===b&&(b=0),(a=(0,d.toUint8)(a)).length-b<10||!(0,d.bytesMatch)(a,e,{offset:b})?b:g(a,b+=f(a,b))}},{"./byte-helpers.js":9}],16:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0}),c.simpleTypeFromSourceType=void 0;var d=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,e=/^application\/dash\+xml/i;c.simpleTypeFromSourceType=function(a){return d.test(a)?"hls":e.test(a)?"dash":"application/vnd.videojs.vhs+json"===a?"vhs-json":null}},{}],17:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseMediaInfo=c.parseTracks=c.addSampleDescription=c.buildFrameTable=c.findNamedBox=c.findBox=c.parseDescriptors=void 0;var d,e=a("./byte-helpers.js"),f=a("./codec-helpers.js"),g=a("./opus-helpers.js"),h=function(a){return"string"==typeof a?(0,e.stringToBytes)(a):a},i=function(a){a=(0,e.toUint8)(a);for(var b=[],c=0;a.length>c;){var f=a[c],g=0,h=0,i=a[++h];for(h++;128&i;)g=(127&i)<<7,i=a[h],h++;g+=127&i;for(var j=0;j<d.length;j++){var k=d[j],l=k.id,m=k.parser;if(f===l){b.push(m(a.subarray(h,h+g)));break}}c+=g+h}return b};c.parseDescriptors=i,d=[{id:3,parser:function(a){var b={tag:3,id:a[0]<<8|a[1],flags:a[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&b.flags&&(b.dependsOnEsId=a[b.size]<<8|a[b.size+1],b.size+=2),64&b.flags){var c=a[b.size];b.url=(0,e.bytesToString)(a.subarray(b.size+1,b.size+1+c)),b.size+=c}return 32&b.flags&&(b.ocrEsId=a[b.size]<<8|a[b.size+1],b.size+=2),b.descriptors=i(a.subarray(b.size))||[],b}},{id:4,parser:function(a){return{tag:4,oti:a[0],streamType:a[1],bufferSize:a[2]<<16|a[3]<<8|a[4],maxBitrate:a[5]<<24|a[6]<<16|a[7]<<8|a[8],avgBitrate:a[9]<<24|a[10]<<16|a[11]<<8|a[12],descriptors:i(a.subarray(13))}}},{id:5,parser:function(a){return{tag:5,bytes:a}}},{id:6,parser:function(a){return{tag:6,bytes:a}}}];var j=function o(a,b,c){void 0===c&&(c=!1),b=function(a){return Array.isArray(a)?a.map(function(a){return h(a)}):[h(a)]}(b),a=(0,e.toUint8)(a);var d=[];if(!b.length)return d;for(var f=0;f<a.length;){var g=(a[f]<<24|a[f+1]<<16|a[f+2]<<8|a[f+3])>>>0,i=a.subarray(f+4,f+8);if(0===g)break;var j=f+g;if(j>a.length){if(c)break;j=a.length}var k=a.subarray(f+8,j);(0,e.bytesMatch)(i,b[0])&&(1===b.length?d.push(k):d.push.apply(d,o(k,b.slice(1),c))),f=j}return d};c.findBox=j;var k=function(a,b){if(!(b=h(b)).length)return a.subarray(a.length);for(var c=0;c<a.length;){if((0,e.bytesMatch)(a.subarray(c,c+b.length),b)){var d=(a[c-4]<<24|a[c-3]<<16|a[c-2]<<8|a[c-1])>>>0,f=d>1?c+d:a.byteLength;return a.subarray(c+4,f)}c++}return a.subarray(a.length)};c.findNamedBox=k;var l=function(a,b,c){void 0===b&&(b=4),void 0===c&&(c=function(a){return(0,e.bytesToNumber)(a)});var d=[];if(!a||!a.length)return d;for(var f=(0,e.bytesToNumber)(a.subarray(4,8)),g=8;f;g+=b,f--)d.push(c(a.subarray(g,g+b)));return d},m=function(a,b){for(var c=l(j(a,["stss"])[0]),d=l(j(a,["stco"])[0]),f=l(j(a,["stts"])[0],8,function(a){return{sampleCount:(0,e.bytesToNumber)(a.subarray(0,4)),sampleDelta:(0,e.bytesToNumber)(a.subarray(4,8))}}),g=l(j(a,["stsc"])[0],12,function(a){return{firstChunk:(0,e.bytesToNumber)(a.subarray(0,4)),samplesPerChunk:(0,e.bytesToNumber)(a.subarray(4,8)),sampleDescriptionIndex:(0,e.bytesToNumber)(a.subarray(8,12))}}),h=j(a,["stsz"])[0],i=l(h&&h.length&&h.subarray(4)||null),k=[],m=0;m<d.length;m++){for(var n=void 0,o=0;o<g.length;o++){var p=g[o];if(m+1>=p.firstChunk&&(o+1>=g.length||m+1<g[o+1].firstChunk)){n=p.samplesPerChunk;break}}for(var q=d[m],r=0;r<n;r++){var s=i[k.length],t=!c.length;c.length&&-1!==c.indexOf(k.length+1)&&(t=!0);for(var u={keyframe:t,start:q,end:q+s},v=0;v<f.length;v++){var w=f[v],x=w.sampleCount,y=w.sampleDelta;if(k.length<=x){var z=k.length?k[k.length-1].timestamp:0;u.timestamp=z+y/b*1e3,u.duration=y;break}}k.push(u),q+=s}}return k};c.buildFrameTable=m;var n=function(a,b){var c=(0,e.bytesToString)(b.subarray(0,4));if("video"===a.type?(a.info=a.info||{},a.info.width=b[28]<<8|b[29],a.info.height=b[30]<<8|b[31]):"audio"===a.type&&(a.info=a.info||{},a.info.channels=b[20]<<8|b[21],a.info.bitDepth=b[22]<<8|b[23],a.info.sampleRate=b[28]<<8|b[29]),"avc1"===c){var d=k(b,"avcC");c+="."+(0,f.getAvcCodec)(d),a.info.avcC=d}else if("hvc1"===c||"hev1"===c)c+="."+(0,f.getHvcCodec)(k(b,"hvcC"));else if("mp4a"===c||"mp4v"===c){var h=k(b,"esds"),j=i(h.subarray(4))[0],l=j&&j.descriptors.filter(function(a){return 4===a.tag})[0];l?(c+="."+(0,e.toHexString)(l.oti),64===l.oti?c+="."+(l.descriptors[0].bytes[0]>>3).toString():32===l.oti?c+="."+l.descriptors[0].bytes[4].toString():221===l.oti&&(c="vorbis")):c+="audio"===a.type?".40.2":".20.9"}else if("av01"===c)c+="."+(0,f.getAv1Codec)(k(b,"av1C"));else if("vp09"===c){var m=k(b,"vpcC"),n=m[0],o=m[1],p=m[2]>>4,q=(15&m[2])>>1,r=(15&m[2])>>3,s=m[3],t=m[4],u=m[5];c+="."+(0,e.padStart)(n,2,"0"),c+="."+(0,e.padStart)(o,2,"0"),c+="."+(0,e.padStart)(p,2,"0"),c+="."+(0,e.padStart)(q,2,"0"),c+="."+(0,e.padStart)(s,2,"0"),c+="."+(0,e.padStart)(t,2,"0"),c+="."+(0,e.padStart)(u,2,"0"),c+="."+(0,e.padStart)(r,2,"0")}else if("theo"===c)c="theora";else if("spex"===c)c="speex";else if(".mp3"===c)c="mp4a.40.34";else if("msVo"===c)c="vorbis";else if("Opus"===c){c="opus";var v=k(b,"dOps");a.info.opus=(0,g.parseOpusHead)(v),a.info.codecDelay=65e5}else c=c.toLowerCase();a.codec=c};c.addSampleDescription=n,c.parseTracks=function(a,b){void 0===b&&(b=!0),a=(0,e.toUint8)(a);var c=j(a,["moov","trak"],!0),d=[];return c.forEach(function(a){var c={bytes:a},f=j(a,["mdia"])[0],g=j(f,["hdlr"])[0],h=(0,e.bytesToString)(g.subarray(8,12));c.type="soun"===h?"audio":"vide"===h?"video":h;var i=j(a,["tkhd"])[0];if(i){var k=new DataView(i.buffer,i.byteOffset,i.byteLength),l=k.getUint8(0);c.number=0===l?k.getUint32(12):k.getUint32(20)}var o=j(f,["mdhd"])[0];if(o){var p=0===o[0]?12:20;c.timescale=(o[p]<<24|o[p+1]<<16|o[p+2]<<8|o[p+3])>>>0}for(var q=j(f,["minf","stbl"])[0],r=j(q,["stsd"])[0],s=(0,e.bytesToNumber)(r.subarray(4,8)),t=8;s--;){var u=(0,e.bytesToNumber)(r.subarray(t,t+4)),v=r.subarray(t+4,t+4+u);n(c,v),t+=4+u}b&&(c.frameTable=m(q,c.timescale)),d.push(c)}),d},c.parseMediaInfo=function(a){var b=j(a,["moov","mvhd"],!0)[0];if(b&&b.length){var c={};return 1===b[0]?(c.timestampScale=(0,e.bytesToNumber)(b.subarray(20,24)),c.duration=(0,e.bytesToNumber)(b.subarray(24,32))):(c.timestampScale=(0,e.bytesToNumber)(b.subarray(12,16)),c.duration=(0,e.bytesToNumber)(b.subarray(16,20))),c.bytes=b,c}}},{"./byte-helpers.js":9,"./codec-helpers.js":10,"./opus-helpers.js":19}],18:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0}),c.findH265Nal=c.findH264Nal=c.findNal=c.discardEmulationPreventionBytes=c.EMULATION_PREVENTION=c.NAL_TYPE_TWO=c.NAL_TYPE_ONE=void 0;var d=a("./byte-helpers.js"),e=(0,d.toUint8)([0,0,0,1]);c.NAL_TYPE_ONE=e;var f=(0,d.toUint8)([0,0,1]);c.NAL_TYPE_TWO=f;var g=(0,d.toUint8)([0,0,3]);c.EMULATION_PREVENTION=g;var h=function(a){for(var b=[],c=1;c<a.length-2;)(0,d.bytesMatch)(a.subarray(c,c+3),g)&&(b.push(c+2),c++),c++;if(0===b.length)return a;var e=a.length-b.length,f=new Uint8Array(e),h=0;for(c=0;c<e;h++,c++)h===b[0]&&(h++,b.shift()),f[c]=a[h];return f};c.discardEmulationPreventionBytes=h;var i=function(a,b,c,g){void 0===g&&(g=1/0),a=(0,d.toUint8)(a),c=[].concat(c);for(var i,j=0,k=0;j<a.length&&(k<g||i);){var l=void 0;if((0,d.bytesMatch)(a.subarray(j),e)?l=4:(0,d.bytesMatch)(a.subarray(j),f)&&(l=3),l){if(k++,i)return h(a.subarray(i,j));var m=void 0;"h264"===b?m=31&a[j+l]:"h265"===b&&(m=a[j+l]>>1&63),-1!==c.indexOf(m)&&(i=j+l),j+=l+("h264"===b?1:2)}else j++}return a.subarray(0,0)};c.findNal=i,c.findH264Nal=function(a,b,c){return i(a,"h264",b,c)},c.findH265Nal=function(a,b,c){return i(a,"h265",b,c)}},{"./byte-helpers.js":9}],19:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0}),c.setOpusHead=c.parseOpusHead=c.OPUS_HEAD=void 0;var d=new Uint8Array([79,112,117,115,72,101,97,100]);c.OPUS_HEAD=d,c.parseOpusHead=function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=b.getUint8(0),d=0!==c,e={version:c,channels:b.getUint8(1),preSkip:b.getUint16(2,d),sampleRate:b.getUint32(4,d),outputGain:b.getUint16(8,d),channelMappingFamily:b.getUint8(10)};if(e.channelMappingFamily>0&&a.length>10){e.streamCount=b.getUint8(11),e.twoChannelStreamCount=b.getUint8(12),e.channelMapping=[];for(var f=0;f<e.channels;f++)e.channelMapping.push(b.getUint8(13+f))}return e},c.setOpusHead=function(a){var b=a.channelMappingFamily<=0?11:12+a.channels,c=new DataView(new ArrayBuffer(b)),d=0!==a.version;return c.setUint8(0,a.version),c.setUint8(1,a.channels),c.setUint16(2,a.preSkip,d),c.setUint32(4,a.sampleRate,d),c.setUint16(8,a.outputGain,d),c.setUint8(10,a.channelMappingFamily),a.channelMappingFamily>0&&(c.setUint8(11,a.streamCount),a.channelMapping.foreach(function(a,b){c.setUint8(12+b,a)})),new Uint8Array(c.buffer)}},{}],20:[function(a,b,c){var d=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=void 0;var e=d(a("url-toolkit")),f=d(a("global/window")),g=function(a,b){if(/^[a-z]+:/i.test(b))return b;/^data:/.test(a)&&(a=f["default"].location&&f["default"].location.href||"");var c="function"==typeof f["default"].URL,d=/^\/\//.test(a),g=!f["default"].location&&!/\/\//i.test(a);if(c?a=new f["default"].URL(a,f["default"].location||"http://example.com"):/\/\//i.test(a)||(a=e["default"].buildAbsoluteURL(f["default"].location&&f["default"].location.href||"",a)),c){var h=new URL(b,a);return g?h.href.slice("http://example.com".length):d?h.href.slice(h.protocol.length):h.href}return e["default"].buildAbsoluteURL(a,b)};c["default"]=g,b.exports=c["default"]},{"@babel/runtime/helpers/interopRequireDefault":6,"global/window":35,"url-toolkit":46}],21:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=void 0;var d=function(){function a(){this.listeners={}}var b=a.prototype;return b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},b.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a]=this.listeners[a].slice(0),this.listeners[a].splice(c,1),c>-1},b.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else for(var e=Array.prototype.slice.call(arguments,1),f=b.length,g=0;g<f;++g)b[g].apply(this,e)},b.dispose=function(){this.listeners={}},b.pipe=function(a){this.on("data",function(b){a.push(b)})},a}();c["default"]=d,b.exports=c["default"]},{}],22:[function(a,b,c){var d=a("global/window");b.exports=function(a,b){return void 0===b&&(b=!1),function(c,e,f){if(c)a(c);else if(e.statusCode>=400&&e.statusCode<=599){var g=f;if(b)if(d.TextDecoder){var h=function(a){return void 0===a&&(a=""),a.toLowerCase().split(";").reduce(function(a,b){var c=b.split("="),d=c[0],e=c[1];return"charset"===d.trim()?e.trim():a},"utf-8")}(e.headers&&e.headers["content-type"]);try{g=new TextDecoder(h).decode(f)}catch(a){}}else g=String.fromCharCode.apply(null,new Uint8Array(f));a({cause:g})}else a(null,f)}}},{"global/window":35}],23:[function(a,b,c){function d(a,b,c){var d=a;return i(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=h({},b,{uri:a}),d.callback=c,d}function e(a,b,c){return f(b=d(a,b,c))}function f(a){function b(){var a=void 0;if(a=j.response?j.response:j.responseText||function(a){try{if("document"===a.responseType)return a.responseXML;var b=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;if(""===a.responseType&&!b)return a.responseXML}catch(a){}return null}(j),q)try{a=JSON.parse(a)}catch(a){}return a}function c(a){return clearTimeout(k),a instanceof Error||(a=new Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,i(a,r)}function d(){if(!g){var c;clearTimeout(k),c=a.useXDR&&void 0===j.status?200:1223===j.status?204:j.status;var d=r,e=null;return 0!==c?(d={body:b(),statusCode:c,method:m,headers:{},url:l,rawRequest:j},j.getAllResponseHeaders&&(d.headers=function(a){var b={};return a?(a.trim().split("\n").forEach(function(a){var c=a.indexOf(":"),d=a.slice(0,c).trim().toLowerCase(),e=a.slice(c+1).trim();void 0===b[d]?b[d]=e:Array.isArray(b[d])?b[d].push(e):b[d]=[b[d],e]}),b):b}(j.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),i(e,d,d.body)}}if(void 0===a.callback)throw new Error("callback argument missing");var f,g,h=!1,i=function(b,c,d){h||(h=!0,a.callback(b,c,d))},j=a.xhr||null;j||(j=a.cors||a.useXDR?new e.XDomainRequest:new e.XMLHttpRequest);var k,l=j.url=a.uri||a.url,m=j.method=a.method||"GET",n=a.body||a.data,o=j.headers=a.headers||{},p=!!a.sync,q=!1,r={body:void 0,headers:{},statusCode:0,method:m,url:l,rawRequest:j};if("json"in a&&!1!==a.json&&(q=!0,o.accept||o.Accept||(o.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(o["content-type"]||o["Content-Type"]||(o["Content-Type"]="application/json"),n=JSON.stringify(!0===a.json?n:a.json))),j.onreadystatechange=function(){4===j.readyState&&setTimeout(d,0)},j.onload=d,j.onerror=c,j.onprogress=function(){},j.onabort=function(){g=!0},j.ontimeout=c,j.open(m,l,!p,a.username,a.password),p||(j.withCredentials=!!a.withCredentials),!p&&a.timeout>0&&(k=setTimeout(function(){if(!g){g=!0,j.abort("timeout");var a=new Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",c(a)}},a.timeout)),j.setRequestHeader)for(f in o)o.hasOwnProperty(f)&&j.setRequestHeader(f,o[f]);else if(a.headers&&!function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(j.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(j),j.send(n||null),j}var g=a("global/window"),h=a("@babel/runtime/helpers/extends"),i=a("is-function");e.httpHandler=a("./http-handler.js"),b.exports=e,b.exports["default"]=e,e.XMLHttpRequest=g.XMLHttpRequest||function(){},e.XDomainRequest="withCredentials"in new e.XMLHttpRequest?e.XMLHttpRequest:g.XDomainRequest,function(a,b){for(var c=0;c<a.length;c++)!function(a){e["delete"===a?"del":a]=function(b,c,e){return(c=d(b,c,e)).method=a.toUpperCase(),f(c)}}(a[c])}(["get","put","post","patch","head","delete"])},{"./http-handler.js":22,"@babel/runtime/helpers/extends":3,"global/window":35,"is-function":37}],24:[function(a,b,c){function d(a,b){return void 0===b&&(b=Object),b&&"function"==typeof b.freeze?b.freeze(a):a}var e=d({HTML:"text/html",isHTML:function(a){return a===e.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),f=d({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===f.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});c.freeze=d,c.MIME_TYPE=e,c.NAMESPACE=f},{}],25:[function(a,b,c){function d(a){this.options=a||{locator:{}}}function e(){this.cdata=!1}function f(a,b){b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber}function g(a){if(a)return"\n@"+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function h(a,b,c){return"string"==typeof a?a.substr(b,c):a.length>=b+c||b?new java.lang.String(a,b,c)+"":a}function i(a,b){a.currentElement?a.currentElement.appendChild(b):a.doc.appendChild(b)}var j=a("./conventions"),k=a("./dom"),l=a("./entities"),m=a("./sax"),n=k.DOMImplementation,o=j.NAMESPACE,p=m.ParseError,q=m.XMLReader;d.prototype.parseFromString=function(a,b){var c=this.options,d=new q,f=c.domBuilder||new e,h=c.errorHandler,i=c.locator,j=c.xmlns||{},k=/\/x?html?$/.test(b),m=k?l.HTML_ENTITIES:l.XML_ENTITIES;return i&&f.setDocumentLocator(i),d.errorHandler=function(a,b,c){function d(b){var d=a[b];!d&&h&&(d=2==a.length?function(c){a(b,c)}:a),f[b]=d&&function(a){d("[xmldom "+b+"]\t"+a+g(c))}||function(){}}if(!a){if(b instanceof e)return b;a=b}var f={},h=a instanceof Function;return c=c||{},d("warning"),d("error"),d("fatalError"),f}(h,f,i),d.domBuilder=c.domBuilder||f,k&&(j[""]=o.HTML),j.xml=j.xml||o.XML,a&&"string"==typeof a?d.parse(a,j,m):d.errorHandler.error("invalid doc source"),f.doc},e.prototype={startDocument:function(){this.doc=(new n).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(a,b,c,d){var e=this.doc,g=e.createElementNS(a,c||b),h=d.length;i(this,g),this.currentElement=g,this.locator&&f(this.locator,g);for(var j=0;j<h;j++){a=d.getURI(j);var k=d.getValue(j),l=(c=d.getQName(j),e.createAttributeNS(a,c));this.locator&&f(d.getLocator(j),l),l.value=l.nodeValue=k,g.setAttributeNode(l)}},endElement:function(a,b,c){var d=this.currentElement;d.tagName,this.currentElement=d.parentNode},startPrefixMapping:function(a,b){},endPrefixMapping:function(a){},processingInstruction:function(a,b){var c=this.doc.createProcessingInstruction(a,b);this.locator&&f(this.locator,c),i(this,c)},ignorableWhitespace:function(a,b,c){},characters:function(a,b,c){if(a=h.apply(this,arguments)){if(this.cdata)var d=this.doc.createCDATASection(a);else d=this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(d):/^\s*$/.test(a)&&this.doc.appendChild(d),this.locator&&f(this.locator,d)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){(this.locator=a)&&(a.lineNumber=0)},comment:function(a,b,c){a=h.apply(this,arguments);var d=this.doc.createComment(a);this.locator&&f(this.locator,d),i(this,d)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,b,c){var d=this.doc.implementation;if(d&&d.createDocumentType){var e=d.createDocumentType(a,b,c);this.locator&&f(this.locator,e),i(this,e),this.doc.doctype=e}},warning:function(a){g(this.locator)},error:function(a){console.error("[xmldom error]\t"+a,g(this.locator))},fatalError:function(a){throw new p(a,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){e.prototype[a]=function(){return null}}),c.__DOMHandler=e,c.DOMParser=d,c.DOMImplementation=k.DOMImplementation,c.XMLSerializer=k.XMLSerializer},{"./conventions":24,"./dom":26,"./entities":27,"./sax":29}],26:[function(a,b,c){function d(a){return""!==a}function e(a,b){return a.hasOwnProperty(b)||(a[b]=!0),a}function f(a){if(!a)return[];var b=function(a){return a?a.split(/[\t\n\f\r ]+/).filter(d):[]}(a);return Object.keys(b.reduce(e,{}))}function h(a,b){for(var c in a)b[c]=a[c]}function i(a,b){var c=a.prototype;if(!(c instanceof b)){var d=function(){};d.prototype=b.prototype,h(c,d=new d),a.prototype=c=d}c.constructor!=a&&("function"!=typeof a&&console.error("unknown Class:"+a),c.constructor=a)}function j(a,b){if(b instanceof Error)var c=b;else c=this,Error.call(this,fa[a]),this.message=fa[a],Error.captureStackTrace&&Error.captureStackTrace(this,j);return c.code=a,b&&(this.message=this.message+": "+b),c}function k(){}function l(a,b){this._node=a,this._refresh=b,m(this)}function m(a){var b=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=b){var c=a._refresh(a._node);R(a,"length",c.length),h(c,a),a._inc=b}}function n(){}function o(a,b){for(var c=a.length;c--;)if(a[c]===b)return c}function p(a,b,c,d){if(d?b[o(b,d)]=c:b[b.length++]=c,a){c.ownerElement=a;var e=a.ownerDocument;e&&(d&&w(e,a,d),function(a,b,c){a&&a._inc++,c.namespaceURI===S.XMLNS&&(b._nsMap[c.prefix?c.localName:""]=c.value)}(e,a,c))}}function q(a,b,c){var d=o(b,c);if(!(d>=0))throw j(ha,new Error(a.tagName+"@"+c));for(var e=b.length-1;d<e;)b[d]=b[++d];if(b.length=e,a){var f=a.ownerDocument;f&&(w(f,a,c),c.ownerElement=null)}}function r(){}function s(){}function t(a){return("<"==a?"&lt;":">"==a&&"&gt;")||"&"==a&&"&amp;"||'"'==a&&"&quot;"||"&#"+a.charCodeAt()+";"}function u(a,b){if(b(a))return!0;if(a=a.firstChild)do{if(u(a,b))return!0}while(a=a.nextSibling)}function v(){}function w(a,b,c,d){a&&a._inc++,c.namespaceURI===S.XMLNS&&delete b._nsMap[c.prefix?c.localName:""]}function x(a,b,c){if(a&&a._inc){a._inc++;var d=b.childNodes;if(c)d[d.length++]=c;else{for(var e=b.firstChild,f=0;e;)d[f++]=e,e=e.nextSibling;d.length=f}}}function y(a,b){var c=b.previousSibling,d=b.nextSibling;return c?c.nextSibling=d:a.firstChild=d,d?d.previousSibling=c:a.lastChild=c,x(a.ownerDocument,a),b}function z(a,b,c){var d=b.parentNode;if(d&&d.removeChild(b),b.nodeType===ca){var e=b.firstChild;if(null==e)return b;var f=b.lastChild}else e=f=b;var g=c?c.previousSibling:a.lastChild;e.previousSibling=g,f.nextSibling=c,g?g.nextSibling=e:a.firstChild=e,null==c?a.lastChild=f:c.previousSibling=f;do{e.parentNode=a}while(e!==f&&(e=e.nextSibling));return x(a.ownerDocument||a,a),b.nodeType==ca&&(b.firstChild=b.lastChild=null),b}function A(){this._nsMap={}}function B(){}function C(){}function D(){}function E(){}function F(){}function G(){}function H(){}function I(){}function J(){}function K(){}function L(){}function M(){}function N(a,b){var c=[],d=9==this.nodeType&&this.documentElement||this,e=d.prefix,f=d.namespaceURI;if(f&&null==e&&null==(e=d.lookupPrefix(f)))var g=[{namespace:f,prefix:null}];return Q(this,c,a,b,g),c.join("")}function O(a,b,c){var d=a.prefix||"",e=a.namespaceURI;if(!e)return!1;if("xml"===d&&e===S.XML||e===S.XMLNS)return!1;for(var f=c.length;f--;){var g=c[f];if(g.prefix===d)return g.namespace!==e}return!0}function P(a,b,c){a.push(" ",b,'="',c.replace(/[<&"]/g,t),'"')}function Q(a,b,c,d,e){if(e||(e=[]),d){if(!(a=d(a)))return;if("string"==typeof a)return void b.push(a)}switch(a.nodeType){case U:var f=a.attributes,g=f.length,h=a.firstChild,i=a.tagName,j=i;if(!(c=S.isHTML(a.namespaceURI)||c)&&!a.prefix&&a.namespaceURI){for(var k,l=0;l<f.length;l++)if("xmlns"===f.item(l).name){k=f.item(l).value;break}if(!k)for(var m=e.length-1;m>=0;m--)if(""===(n=e[m]).prefix&&n.namespace===a.namespaceURI){k=n.namespace;break}if(k!==a.namespaceURI)for(m=e.length-1;m>=0;m--){var n;if((n=e[m]).namespace===a.namespaceURI){n.prefix&&(j=n.prefix+":"+i);break}}}b.push("<",j);for(var o=0;o<g;o++)"xmlns"==(p=f.item(o)).prefix?e.push({prefix:p.localName,namespace:p.value}):"xmlns"==p.nodeName&&e.push({prefix:"",namespace:p.value});for(o=0;o<g;o++){var p,q,r;O(p=f.item(o),0,e)&&(P(b,(q=p.prefix||"")?"xmlns:"+q:"xmlns",r=p.namespaceURI),e.push({prefix:q,namespace:r})),Q(p,b,c,d,e)}if(i===j&&O(a,0,e)&&(P(b,(q=a.prefix||"")?"xmlns:"+q:"xmlns",r=a.namespaceURI),e.push({prefix:q,namespace:r})),h||c&&!/^(?:meta|link|img|br|hr|input)$/i.test(i)){if(b.push(">"),c&&/^script$/i.test(i))for(;h;)h.data?b.push(h.data):Q(h,b,c,d,e.slice()),h=h.nextSibling;else for(;h;)Q(h,b,c,d,e.slice()),h=h.nextSibling;b.push("</",j,">")}else b.push("/>");return;case aa:case ca:for(h=a.firstChild;h;)Q(h,b,c,d,e.slice()),h=h.nextSibling;return;case V:return P(b,a.name,a.value);case W:return b.push(a.data.replace(/[<&]/g,t).replace(/]]>/g,"]]&gt;"));case X:return b.push("<![CDATA[",a.data,"]]>");case _:return b.push("\x3c!--",a.data,"--\x3e");case ba:var s=a.publicId,u=a.systemId;if(b.push("<!DOCTYPE ",a.name),s)b.push(" PUBLIC ",s),u&&"."!=u&&b.push(" ",u),b.push(">");else if(u&&"."!=u)b.push(" SYSTEM ",u,">");else{var v=a.internalSubset;v&&b.push(" [",v,"]"),b.push(">")}return;case $:return b.push("<?",a.target," ",a.data,"?>");case Y:return b.push("&",a.nodeName,";");default:b.push("??",a.nodeName)}}function R(a,b,c){a[b]=c}var S=a("./conventions").NAMESPACE,T={},U=T.ELEMENT_NODE=1,V=T.ATTRIBUTE_NODE=2,W=T.TEXT_NODE=3,X=T.CDATA_SECTION_NODE=4,Y=T.ENTITY_REFERENCE_NODE=5,Z=T.ENTITY_NODE=6,$=T.PROCESSING_INSTRUCTION_NODE=7,_=T.COMMENT_NODE=8,aa=T.DOCUMENT_NODE=9,ba=T.DOCUMENT_TYPE_NODE=10,ca=T.DOCUMENT_FRAGMENT_NODE=11,da=T.NOTATION_NODE=12,ea={},fa={},ga=(ea.INDEX_SIZE_ERR=(fa[1]="Index size error",1),ea.DOMSTRING_SIZE_ERR=(fa[2]="DOMString size error",2),ea.HIERARCHY_REQUEST_ERR=(fa[3]="Hierarchy request error",3)),ha=(ea.WRONG_DOCUMENT_ERR=(fa[4]="Wrong document",4),ea.INVALID_CHARACTER_ERR=(fa[5]="Invalid character",5),ea.NO_DATA_ALLOWED_ERR=(fa[6]="No data allowed",6),ea.NO_MODIFICATION_ALLOWED_ERR=(fa[7]="No modification allowed",7),ea.NOT_FOUND_ERR=(fa[8]="Not found",8)),ia=(ea.NOT_SUPPORTED_ERR=(fa[9]="Not supported",9),ea.INUSE_ATTRIBUTE_ERR=(fa[10]="Attribute in use",10));ea.INVALID_STATE_ERR=(fa[11]="Invalid state",11),ea.SYNTAX_ERR=(fa[12]="Syntax error",12),ea.INVALID_MODIFICATION_ERR=(fa[13]="Invalid modification",13),ea.NAMESPACE_ERR=(fa[14]="Invalid namespace",14),ea.INVALID_ACCESS_ERR=(fa[15]="Invalid access",15),j.prototype=Error.prototype,h(ea,j),k.prototype={length:0,item:function(a){return this[a]||null},toString:function(a,b){for(var c=[],d=0;d<this.length;d++)Q(this[d],c,a,b);return c.join("")}},l.prototype.item=function(a){return m(this),this[a]},i(l,k),n.prototype={length:0,item:k.prototype.item,getNamedItem:function(a){for(var b=this.length;b--;){var c=this[b];if(c.nodeName==a)return c}},setNamedItem:function(a){var b=a.ownerElement;if(b&&b!=this._ownerElement)throw new j(ia)
;var c=this.getNamedItem(a.nodeName);return p(this._ownerElement,this,a,c),c},setNamedItemNS:function(a){var b,c=a.ownerElement;if(c&&c!=this._ownerElement)throw new j(ia);return b=this.getNamedItemNS(a.namespaceURI,a.localName),p(this._ownerElement,this,a,b),b},removeNamedItem:function(a){var b=this.getNamedItem(a);return q(this._ownerElement,this,b),b},removeNamedItemNS:function(a,b){var c=this.getNamedItemNS(a,b);return q(this._ownerElement,this,c),c},getNamedItemNS:function(a,b){for(var c=this.length;c--;){var d=this[c];if(d.localName==b&&d.namespaceURI==a)return d}return null}},r.prototype={hasFeature:function(a,b){return!0},createDocument:function(a,b,c){var d=new v;if(d.implementation=this,d.childNodes=new k,d.doctype=c||null,c&&d.appendChild(c),b){var e=d.createElementNS(a,b);d.appendChild(e)}return d},createDocumentType:function(a,b,c){var d=new G;return d.name=a,d.nodeName=a,d.publicId=b||"",d.systemId=c||"",d}},s.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(a,b){return z(this,a,b)},replaceChild:function(a,b){this.insertBefore(a,b),b&&this.removeChild(b)},removeChild:function(a){return y(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(a){return function b(a,c,d){var e=new c.constructor;for(var f in c){var h=c[f];"object"!=(void 0===h?"undefined":g(h))&&h!=e[f]&&(e[f]=h)}switch(c.childNodes&&(e.childNodes=new k),e.ownerDocument=a,e.nodeType){case U:var i=c.attributes,j=e.attributes=new n,l=i.length;j._ownerElement=e;for(var m=0;m<l;m++)e.setAttributeNode(b(a,i.item(m),!0));break;case V:d=!0}if(d)for(var o=c.firstChild;o;)e.appendChild(b(a,o,d)),o=o.nextSibling;return e}(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var b=a.nextSibling;b&&b.nodeType==W&&a.nodeType==W?(this.removeChild(b),a.appendData(b.data)):(a.normalize(),a=b)}},isSupported:function(a,b){return this.ownerDocument.implementation.hasFeature(a,b)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(a){for(var b=this;b;){var c=b._nsMap;if(c)for(var d in c)if(c[d]==a)return d;b=b.nodeType==V?b.ownerDocument:b.parentNode}return null},lookupNamespaceURI:function(a){for(var b=this;b;){var c=b._nsMap;if(c&&a in c)return c[a];b=b.nodeType==V?b.ownerDocument:b.parentNode}return null},isDefaultNamespace:function(a){return null==this.lookupPrefix(a)}},h(T,s),h(T,s.prototype),v.prototype={nodeName:"#document",nodeType:aa,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,b){if(a.nodeType==ca){for(var c=a.firstChild;c;){var d=c.nextSibling;this.insertBefore(c,b),c=d}return a}return null==this.documentElement&&a.nodeType==U&&(this.documentElement=a),z(this,a,b),a.ownerDocument=this,a},removeChild:function(a){return this.documentElement==a&&(this.documentElement=null),y(this,a)},importNode:function(a,b){return function c(a,b,d){var e;switch(b.nodeType){case U:(e=b.cloneNode(!1)).ownerDocument=a;case ca:break;case V:d=!0}if(e||(e=b.cloneNode(!1)),e.ownerDocument=a,e.parentNode=null,d)for(var f=b.firstChild;f;)e.appendChild(c(a,f,d)),f=f.nextSibling;return e}(this,a,b)},getElementById:function(a){var b=null;return u(this.documentElement,function(c){if(c.nodeType==U&&c.getAttribute("id")==a)return b=c,!0}),b},getElementsByClassName:function(a){var b=f(a);return new l(this,function(c){var d=[];return b.length>0&&u(c.documentElement,function(e){if(e!==c&&e.nodeType===U){var g=e.getAttribute("class");if(g){var h=a===g;if(!h){var i=f(g);h=b.every((j=i,function(a){return j&&-1!==j.indexOf(a)}))}h&&d.push(e)}}var j}),d})},createElement:function(a){var b=new A;return b.ownerDocument=this,b.nodeName=a,b.tagName=a,b.localName=a,b.childNodes=new k,(b.attributes=new n)._ownerElement=b,b},createDocumentFragment:function(){var a=new K;return a.ownerDocument=this,a.childNodes=new k,a},createTextNode:function(a){var b=new D;return b.ownerDocument=this,b.appendData(a),b},createComment:function(a){var b=new E;return b.ownerDocument=this,b.appendData(a),b},createCDATASection:function(a){var b=new F;return b.ownerDocument=this,b.appendData(a),b},createProcessingInstruction:function(a,b){var c=new L;return c.ownerDocument=this,c.tagName=c.target=a,c.nodeValue=c.data=b,c},createAttribute:function(a){var b=new B;return b.ownerDocument=this,b.name=a,b.nodeName=a,b.localName=a,b.specified=!0,b},createEntityReference:function(a){var b=new J;return b.ownerDocument=this,b.nodeName=a,b},createElementNS:function(a,b){var c=new A,d=b.split(":"),e=c.attributes=new n;return c.childNodes=new k,c.ownerDocument=this,c.nodeName=b,c.tagName=b,c.namespaceURI=a,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,e._ownerElement=c,c},createAttributeNS:function(a,b){var c=new B,d=b.split(":");return c.ownerDocument=this,c.nodeName=b,c.name=b,c.namespaceURI=a,c.specified=!0,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,c}},i(v,s),A.prototype={nodeType:U,hasAttribute:function(a){return null!=this.getAttributeNode(a)},getAttribute:function(a){var b=this.getAttributeNode(a);return b&&b.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,b){var c=this.ownerDocument.createAttribute(a);c.value=c.nodeValue=""+b,this.setAttributeNode(c)},removeAttribute:function(a){var b=this.getAttributeNode(a);b&&this.removeAttributeNode(b)},appendChild:function(a){return a.nodeType===ca?this.insertBefore(a,null):function(a,b){var c=b.parentNode;if(c){var d=a.lastChild;c.removeChild(b),d=a.lastChild}return d=a.lastChild,b.parentNode=a,b.previousSibling=d,b.nextSibling=null,d?d.nextSibling=b:a.firstChild=b,a.lastChild=b,x(a.ownerDocument,a,b),b}(this,a)},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);c&&this.removeAttributeNode(c)},hasAttributeNS:function(a,b){return null!=this.getAttributeNodeNS(a,b)},getAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);return c&&c.value||""},setAttributeNS:function(a,b,c){var d=this.ownerDocument.createAttributeNS(a,b);d.value=d.nodeValue=""+c,this.setAttributeNode(d)},getAttributeNodeNS:function(a,b){return this.attributes.getNamedItemNS(a,b)},getElementsByTagName:function(a){return new l(this,function(b){var c=[];return u(b,function(d){d===b||d.nodeType!=U||"*"!==a&&d.tagName!=a||c.push(d)}),c})},getElementsByTagNameNS:function(a,b){return new l(this,function(c){var d=[];return u(c,function(e){e===c||e.nodeType!==U||"*"!==a&&e.namespaceURI!==a||"*"!==b&&e.localName!=b||d.push(e)}),d})}},v.prototype.getElementsByTagName=A.prototype.getElementsByTagName,v.prototype.getElementsByTagNameNS=A.prototype.getElementsByTagNameNS,i(A,s),B.prototype.nodeType=V,i(B,s),C.prototype={data:"",substringData:function(a,b){return this.data.substring(a,a+b)},appendData:function(a){a=this.data+a,this.nodeValue=this.data=a,this.length=a.length},insertData:function(a,b){this.replaceData(a,0,b)},appendChild:function(a){throw new Error(fa[ga])},deleteData:function(a,b){this.replaceData(a,b,"")},replaceData:function(a,b,c){c=this.data.substring(0,a)+c+this.data.substring(a+b),this.nodeValue=this.data=c,this.length=c.length}},i(C,s),D.prototype={nodeName:"#text",nodeType:W,splitText:function(a){var b=this.data,c=b.substring(a);b=b.substring(0,a),this.data=this.nodeValue=b,this.length=b.length;var d=this.ownerDocument.createTextNode(c);return this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling),d}},i(D,C),E.prototype={nodeName:"#comment",nodeType:_},i(E,C),F.prototype={nodeName:"#cdata-section",nodeType:X},i(F,C),G.prototype.nodeType=ba,i(G,s),H.prototype.nodeType=da,i(H,s),I.prototype.nodeType=Z,i(I,s),J.prototype.nodeType=Y,i(J,s),K.prototype.nodeName="#document-fragment",K.prototype.nodeType=ca,i(K,s),L.prototype.nodeType=$,i(L,s),M.prototype.serializeToString=function(a,b,c){return N.call(a,b,c)},s.prototype.toString=N;try{Object.defineProperty&&(Object.defineProperty(l.prototype,"length",{get:function(){return m(this),this.$$length}}),Object.defineProperty(s.prototype,"textContent",{get:function(){return function a(b){switch(b.nodeType){case U:case ca:var c=[];for(b=b.firstChild;b;)7!==b.nodeType&&8!==b.nodeType&&c.push(a(b)),b=b.nextSibling;return c.join("");default:return b.nodeValue}}(this)},set:function(a){switch(this.nodeType){case U:case ca:for(;this.firstChild;)this.removeChild(this.firstChild);(a||String(a))&&this.appendChild(this.ownerDocument.createTextNode(a));break;default:this.data=a,this.value=a,this.nodeValue=a}}}),R=function(a,b,c){a["$$"+b]=c})}catch(a){}c.DocumentType=G,c.DOMException=j,c.DOMImplementation=r,c.Element=A,c.Node=s,c.NodeList=k,c.XMLSerializer=M},{"./conventions":24}],27:[function(a,b,c){var d=a("./conventions").freeze;c.XML_ENTITIES=d({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),c.HTML_ENTITIES=d({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",times:"",divide:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"","int":"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",euro:"",trade:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:""}),c.entityMap=c.HTML_ENTITIES},{"./conventions":24}],28:[function(a,b,c){var d=a("./dom");c.DOMImplementation=d.DOMImplementation,c.XMLSerializer=d.XMLSerializer,c.DOMParser=a("./dom-parser").DOMParser},{"./dom":26,"./dom-parser":25}],29:[function(a,b,c){function d(a,b){this.message=a,this.locator=b,Error.captureStackTrace&&Error.captureStackTrace(this,d)}function e(){}function f(a,b){return b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber,b}function g(a,b,c,d,e,f){function g(a,b,d){c.attributeNames.hasOwnProperty(a)&&f.fatalError("Attribute "+a+" redefined"),c.addValue(a,b,d)}for(var h,i=++b,j=0;;){var k=a.charAt(i);switch(k){case"=":if(1===j)h=a.slice(b,i),j=3;else{if(2!==j)throw new Error("attribute equal must after attrName");j=3}break;case"'":case'"':if(3===j||1===j){if(1===j&&(f.warning('attribute value must after "="'),h=a.slice(b,i)),b=i+1,!((i=a.indexOf(k,b))>0))throw new Error("attribute value no end '"+k+"' match");g(h,l=a.slice(b,i).replace(/&#?\w+;/g,e),b-1),j=5}else{if(4!=j)throw new Error('attribute value must after "="');g(h,l=a.slice(b,i).replace(/&#?\w+;/g,e),b),f.warning('attribute "'+h+'" missed start quot('+k+")!!"),b=i+1,j=5}break;case"/":switch(j){case 0:c.setTagName(a.slice(b,i));case 5:case 6:case 7:j=7,c.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return f.error("unexpected end of input"),0==j&&c.setTagName(a.slice(b,i)),i;case">":switch(j){case 0:c.setTagName(a.slice(b,i));case 5:case 6:case 7:break;case 4:case 1:"/"===(l=a.slice(b,i)).slice(-1)&&(c.closed=!0,l=l.slice(0,-1));case 2:2===j&&(l=h),4==j?(f.warning('attribute "'+l+'" missed quot(")!'),g(h,l.replace(/&#?\w+;/g,e),b)):(o.isHTML(d[""])&&l.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),g(l,l,b));break;case 3:throw new Error("attribute value missed!!")}return i;case"":k=" ";default:if(k<=" ")switch(j){case 0:c.setTagName(a.slice(b,i)),j=6;break;case 1:h=a.slice(b,i),j=2;break;case 4:var l=a.slice(b,i).replace(/&#?\w+;/g,e);f.warning('attribute "'+l+'" missed quot(")!!'),g(h,l,b);case 5:j=6}else switch(j){case 2:c.tagName,o.isHTML(d[""])&&h.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+h+'" missed value!! "'+h+'" instead2!!'),g(h,h,b),b=i,j=1;break;case 5:f.warning('attribute space is required"'+h+'"!!');case 6:j=1,b=i;break;case 3:j=4,b=i;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}i++}}function h(a,b,c){for(var d=a.tagName,e=null,f=a.length;f--;){var g=a[f],h=g.qName,i=g.value;if((n=h.indexOf(":"))>0)var j=g.prefix=h.slice(0,n),l=h.slice(n+1),m="xmlns"===j&&l;else l=h,j=null,m="xmlns"===h&&"";g.localName=l,!1!==m&&(null==e&&(e={},k(c,c={})),c[m]=e[m]=i,g.uri=o.XMLNS,b.startPrefixMapping(m,i))}for(f=a.length;f--;)(j=(g=a[f]).prefix)&&("xml"===j&&(g.uri=o.XML),"xmlns"!==j&&(g.uri=c[j||""]));var n;(n=d.indexOf(":"))>0?(j=a.prefix=d.slice(0,n),l=a.localName=d.slice(n+1)):(j=null,l=a.localName=d);var p=a.uri=c[j||""];if(b.startElement(p,l,d,a),!a.closed)return a.currentNSMap=c,a.localNSMap=e,!0;if(b.endElement(p,l,d),e)for(j in e)b.endPrefixMapping(j)}function i(a,b,c,d,e){if(/^(?:script|textarea)$/i.test(c)){var f=a.indexOf("</"+c+">",b),g=a.substring(b+1,f);if(/[&<]/.test(g))return/^script$/i.test(c)?(e.characters(g,0,g.length),f):(g=g.replace(/&#?\w+;/g,d),e.characters(g,0,g.length),f)}return b+1}function j(a,b,c,d){var e=d[c];return null==e&&((e=a.lastIndexOf("</"+c+">"))<b&&(e=a.lastIndexOf("</"+c)),d[c]=e),e<b}function k(a,b){for(var c in a)b[c]=a[c]}function l(a,b,c,d){switch(a.charAt(b+2)){case"-":return"-"===a.charAt(b+3)?(e=a.indexOf("--\x3e",b+4))>b?(c.comment(a,b+4,e-b-4),e+3):(d.error("Unclosed comment"),-1):-1;default:if("CDATA["==a.substr(b+3,6)){var e=a.indexOf("]]>",b+9);return c.startCDATA(),c.characters(a,b+9,e-b-9),c.endCDATA(),e+3}var f=function(a,b){var c,d=[],e=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(e.lastIndex=b,e.exec(a);c=e.exec(a);)if(d.push(c),c[1])return d}(a,b),g=f.length;if(g>1&&/!doctype/i.test(f[0][0])){var h=f[1][0],i=!1,j=!1;g>3&&(/^public$/i.test(f[2][0])?(i=f[3][0],j=g>4&&f[4][0]):/^system$/i.test(f[2][0])&&(j=f[3][0]));var k=f[g-1];return c.startDTD(h,i,j),c.endDTD(),k.index+k[0].length}}return-1}function m(a,b,c){var d=a.indexOf("?>",b);if(d){var e=a.substring(b,d).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return e?(e[0].length,c.processingInstruction(e[1],e[2]),d+2):-1}return-1}function n(){this.attributeNames={}}var o=a("./conventions").NAMESPACE,p=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,q=new RegExp("[\\-\\.0-9"+p.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+p.source+q.source+"*(?::"+p.source+q.source+"*)?$");d.prototype=new Error,d.prototype.name=d.name,e.prototype={parse:function(a,b,c){var e=this.domBuilder;e.startDocument(),k(b,b={}),function(a,b,c,e,k){function p(a){var b=a.slice(1,-1);return b in c?c[b]:"#"===b.charAt(0)?function(a){if(a>65535){var b=55296+((a-=65536)>>10),c=56320+(1023&a);return String.fromCharCode(b,c)}return String.fromCharCode(a)}(parseInt(b.substr(1).replace("x","0x"))):(k.error("entity not found:"+a),a)}function q(b){if(b>y){var c=a.substring(y,b).replace(/&#?\w+;/g,p);v&&r(y),e.characters(c,0,b-y),y=b}}function r(b,c){for(;b>=t&&(c=u.exec(a));)s=c.index,t=s+c[0].length,v.lineNumber++;v.columnNumber=b-s+1}for(var s=0,t=0,u=/.*(?:\r\n?|\n)|.*$/g,v=e.locator,w=[{currentNSMap:b}],x={},y=0;;){try{var z=a.indexOf("<",y);if(z<0){if(!a.substr(y).match(/^\s*$/)){var A=e.doc,B=A.createTextNode(a.substr(y));A.appendChild(B),e.currentElement=B}return}switch(z>y&&q(z),a.charAt(z+1)){case"/":var C=a.indexOf(">",z+3),D=a.substring(z+2,C).replace(/[ \t\n\r]+$/g,""),E=w.pop();C<0?(D=a.substring(z+2).replace(/[\s<].*/,""),k.error("end tag name: "+D+" is not complete:"+E.tagName),C=z+1+D.length):D.match(/\s</)&&(D=D.replace(/[\s<].*/,""),k.error("end tag name: "+D+" maybe not complete"),C=z+1+D.length);var F=E.localNSMap,G=E.tagName==D;if(G||E.tagName&&E.tagName.toLowerCase()==D.toLowerCase()){if(e.endElement(E.uri,E.localName,D),F)for(var H in F)e.endPrefixMapping(H);G||k.fatalError("end tag name: "+D+" is not match the current start tagName:"+E.tagName)}else w.push(E);C++;break;case"?":v&&r(z),C=m(a,z,e);break;case"!":v&&r(z),C=l(a,z,e,k);break;default:v&&r(z);var I=new n,J=w[w.length-1].currentNSMap,K=(C=g(a,z,I,J,p,k),I.length);if(!I.closed&&j(a,C,I.tagName,x)&&(I.closed=!0,c.nbsp||k.warning("unclosed xml attribute")),v&&K){for(var L=f(v,{}),M=0;M<K;M++){var N=I[M];r(N.offset),N.locator=f(v,{})}e.locator=L,h(I,e,J)&&w.push(I),e.locator=v}else h(I,e,J)&&w.push(I);o.isHTML(I.uri)&&!I.closed?C=i(a,C,I.tagName,p,e):C++}}catch(a){if(a instanceof d)throw a;k.error("element parse error: "+a),C=-1}C>y?y=C:q(Math.max(z,y)+1)}}(a,b,c,e,this.errorHandler),e.endDocument()}},n.prototype={setTagName:function(a){if(!r.test(a))throw new Error("invalid tagName:"+a);this.tagName=a},addValue:function(a,b,c){if(!r.test(a))throw new Error("invalid attribute:"+a);this.attributeNames[a]=this.length,this[this.length++]={qName:a,value:b,offset:c}},length:0,getLocalName:function(a){return this[a].localName},getLocator:function(a){return this[a].locator},getQName:function(a){return this[a].qName},getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}},c.XMLReader=e,c.ParseError=d},{"./conventions":24}],30:[function(a,b,c){function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");return-1===c&&(c=b),[c,c===b?0:4-c%4]}function e(a,b,c){for(var d,e,g=[],h=b;h<c;h+=3)d=(a[h]<<16&16711680)+(a[h+1]<<8&65280)+(255&a[h+2]),g.push(f[(e=d)>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]);return g.join("")}c.byteLength=function(a){var b=d(a),c=b[0],e=b[1];return 3*(c+e)/4-e},c.toByteArray=function(a){var b,c,e=d(a),f=e[0],i=e[1],j=new h(function(a,b,c){return 3*(b+c)/4-c}(0,f,i)),k=0,l=i>0?f-4:f;for(c=0;c<l;c+=4)b=g[a.charCodeAt(c)]<<18|g[a.charCodeAt(c+1)]<<12|g[a.charCodeAt(c+2)]<<6|g[a.charCodeAt(c+3)],j[k++]=b>>16&255,j[k++]=b>>8&255,j[k++]=255&b;return 2===i&&(b=g[a.charCodeAt(c)]<<2|g[a.charCodeAt(c+1)]>>4,j[k++]=255&b),1===i&&(b=g[a.charCodeAt(c)]<<10|g[a.charCodeAt(c+1)]<<4|g[a.charCodeAt(c+2)]>>2,j[k++]=b>>8&255,j[k++]=255&b),j},c.fromByteArray=function(a){for(var b,c=a.length,d=c%3,g=[],h=0,i=c-d;h<i;h+=16383)g.push(e(a,h,h+16383>i?i:h+16383));return 1===d?(b=a[c-1],g.push(f[b>>2]+f[b<<4&63]+"==")):2===d&&(b=(a[c-2]<<8)+a[c-1],g.push(f[b>>10]+f[b>>4&63]+f[b<<2&63]+"=")),g.join("")};for(var f=[],g=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=0,k=i.length;j<k;++j)f[j]=i[j],g[i.charCodeAt(j)]=j;g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63},{}],31:[function(a,b,c){},{}],32:[function(a,b,c){(function(b){function d(a){if(a>2147483647)throw new RangeError('The value "'+a+'" is invalid for option "size"');var c=new Uint8Array(a);return c.__proto__=b.prototype,c}function b(a,b,c){if("number"==typeof a){if("string"==typeof b)throw new TypeError('The "string" argument must be of type string. Received type number');return h(a)}return e(a,b,c)}function e(a,c,e){if("string"==typeof a)return function(a,c){if("string"==typeof c&&""!==c||(c="utf8"),!b.isEncoding(c))throw new TypeError("Unknown encoding: "+c);var e=0|k(a,c),f=d(e),g=f.write(a,c);return g!==e&&(f=f.slice(0,g)),f}(a,c);if(ArrayBuffer.isView(a))return i(a);if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===a?"undefined":g(a)));if(K(a,ArrayBuffer)||a&&K(a.buffer,ArrayBuffer))return function(a,c,d){if(c<0||a.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<c+(d||0))throw new RangeError('"length" is outside of buffer bounds');var e;return e=void 0===c&&void 0===d?new Uint8Array(a):void 0===d?new Uint8Array(a,c):new Uint8Array(a,c,d),e.__proto__=b.prototype,e}(a,c,e);if("number"==typeof a)throw new TypeError('The "value" argument must not be of type number. Received type number');var f=a.valueOf&&a.valueOf();if(null!=f&&f!==a)return b.from(f,c,e);var h=function(a){if(b.isBuffer(a)){var c=0|j(a.length),e=d(c);return 0===e.length||a.copy(e,0,0,c),e}return void 0!==a.length?"number"!=typeof a.length||L(a.length)?d(0):i(a):"Buffer"===a.type&&Array.isArray(a.data)?i(a.data):void 0}(a);if(h)return h;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return b.from(a[Symbol.toPrimitive]("string"),c,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===a?"undefined":g(a)))}function f(a){if("number"!=typeof a)throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function h(a){return f(a),d(a<0?0:0|j(a))}function i(a){for(var b=a.length<0?0:0|j(a.length),c=d(b),e=0;e<b;e+=1)c[e]=255&a[e];return c}function j(a){if(a>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|a}function k(a,c){if(b.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||K(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+(void 0===a?"undefined":g(a)));var d=a.length,e=arguments.length>2&&!0===arguments[2];if(!e&&0===d)return 0;for(var f=!1;;)switch(c){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return H(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*d;case"hex":return d>>>1;case"base64":return I(a).length;default:if(f)return e?-1:H(a).length;c=(""+c).toLowerCase(),f=!0}}function l(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),c<=0)return"";if((c>>>=0)<=(b>>>=0))return"";for(a||(a="utf8");;)switch(a){case"hex":return z(this,b,c);case"utf8":case"utf-8":return w(this,b,c);case"ascii":return x(this,b,c);case"latin1":case"binary":return y(this,b,c);case"base64":return v(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function m(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function n(a,c,d,e,f){if(0===a.length)return-1;if("string"==typeof d?(e=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),L(d=+d)&&(d=f?0:a.length-1),d<0&&(d=a.length+d),d>=a.length){if(f)return-1;d=a.length-1}else if(d<0){if(!f)return-1;d=0}if("string"==typeof c&&(c=b.from(c,e)),b.isBuffer(c))return 0===c.length?-1:o(a,c,d,e,f);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(a,c,d):Uint8Array.prototype.lastIndexOf.call(a,c,d):o(a,[c],d,e,f);throw new TypeError("val must be string, number or Buffer")}function o(a,b,c,d,e){function f(a,b){return 1===h?a[b]:a.readUInt16BE(b*h)}var g,h=1,i=a.length,j=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;h=2,i/=2,j/=2,c/=2}if(e){var k=-1;for(g=c;g<i;g++)if(f(a,g)===f(b,-1===k?0:g-k)){if(-1===k&&(k=g),g-k+1===j)return k*h}else-1!==k&&(g-=g-k),k=-1}else for(c+j>i&&(c=i-j),g=c;g>=0;g--){for(var l=!0,m=0;m<j;m++)if(f(a,g+m)!==f(b,m)){l=!1;break}if(l)return g}return-1}function p(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d))>e&&(d=e):d=e;var f=b.length;d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h=parseInt(b.substr(2*g,2),16);if(L(h))return g;a[c+g]=h}return g}function q(a,b,c,d){return J(H(b,a.length-c),a,c,d)}function r(a,b,c,d){return J(function(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}(b),a,c,d)}function s(a,b,c,d){return r(a,b,c,d)}function t(a,b,c,d){return J(I(b),a,c,d)}function u(a,b,c,d){return J(function(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}(b,a.length-c),a,c,d)}function v(a,b,c){return 0===b&&c===a.length?M.fromByteArray(a):M.fromByteArray(a.slice(b,c))}function w(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f,g,h,i,j=a[e],k=null,l=j>239?4:j>223?3:j>191?2:1;if(e+l<=c)switch(l){case 1:j<128&&(k=j);break;case 2:128==(192&(f=a[e+1]))&&(i=(31&j)<<6|63&f)>127&&(k=i);break;case 3:f=a[e+1],g=a[e+2],128==(192&f)&&128==(192&g)&&(i=(15&j)<<12|(63&f)<<6|63&g)>2047&&(i<55296||i>57343)&&(k=i);break;case 4:f=a[e+1],g=a[e+2],h=a[e+3],128==(192&f)&&128==(192&g)&&128==(192&h)&&(i=(15&j)<<18|(63&f)<<12|(63&g)<<6|63&h)>65535&&i<1114112&&(k=i)}null===k?(k=65533,l=1):k>65535&&(k-=65536,d.push(k>>>10&1023|55296),k=56320|1023&k),d.push(k),e+=l}return function(a){var b=a.length;if(b<=4096)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=4096));return c}(d)}function x(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function y(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function z(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=G(a[f]);return e}function A(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function B(a,b,c){if(a%1!=0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function C(a,c,d,e,f,g){if(!b.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>f||c<g)throw new RangeError('"value" argument is out of bounds');if(d+e>a.length)throw new RangeError("Index out of range")}function D(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function E(a,b,c,d,e){return b=+b,c>>>=0,e||D(a,0,c,4),N.write(a,b,c,d,23,4),c+4}function F(a,b,c,d,e){return b=+b,c>>>=0,e||D(a,0,c,8),N.write(a,b,c,d,52,8),c+8}function G(a){return a<16?"0"+a.toString(16):a.toString(16)}function H(a,b){var c;b=b||1/0;for(var d=a.length,e=null,f=[],g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=65536+(e-55296<<10|c-56320)}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function I(a){return M.toByteArray(function(a){if((a=(a=a.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}(a))}function J(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function K(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}function L(a){return a!=a}var M=a("base64-js"),N=a("ieee754");c.Buffer=b,c.SlowBuffer=function(a){return+a!=a&&(a=0),b.alloc(+a)},c.INSPECT_MAX_BYTES=50,c.kMaxLength=2147483647,b.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()}catch(a){return!1}}(),b.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),b.poolSize=8192,b.from=function(a,b,c){return e(a,b,c)},b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,b.alloc=function(a,b,c){return function(a,b,c){return f(a),a<=0?d(a):void 0!==b?"string"==typeof c?d(a).fill(b,c):d(a).fill(b):d(a)}(a,b,c)},b.allocUnsafe=function(a){return h(a)},b.allocUnsafeSlow=function(a){return h(a)},b.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==b.prototype},b.compare=function(a,c){if(K(a,Uint8Array)&&(a=b.from(a,a.offset,a.byteLength)),K(c,Uint8Array)&&(c=b.from(c,c.offset,c.byteLength)),!b.isBuffer(a)||!b.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===c)return 0;for(var d=a.length,e=c.length,f=0,g=Math.min(d,e);f<g;++f)if(a[f]!==c[f]){d=a[f],e=c[f];break}return d<e?-1:e<d?1:0},b.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(a,c){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return b.alloc(0);var d;if(void 0===c)for(c=0,d=0;d<a.length;++d)c+=a[d].length;var e=b.allocUnsafe(c),f=0;for(d=0;d<a.length;++d){var g=a[d];if(K(g,Uint8Array)&&(g=b.from(g)),!b.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(e,f),f+=g.length}return e},b.byteLength=k,b.prototype._isBuffer=!0,b.prototype.swap16=function(){var a=this.length;if(a%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)m(this,b,b+1);return this},b.prototype.swap32=function(){var a=this.length;if(a%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)m(this,b,b+3),m(this,b+1,b+2);return this},b.prototype.swap64=function(){var a=this.length;if(a%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)m(this,b,b+7),m(this,b+1,b+6),
m(this,b+2,b+5),m(this,b+3,b+4);return this},b.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?w(this,0,a):l.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(a){if(!b.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===b.compare(this,a)},b.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return a=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(a+=" ... "),"<Buffer "+a+">"},b.prototype.compare=function(a,c,d,e,f){if(K(a,Uint8Array)&&(a=b.from(a,a.offset,a.byteLength)),!b.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+(void 0===a?"undefined":g(a)));if(void 0===c&&(c=0),void 0===d&&(d=a?a.length:0),void 0===e&&(e=0),void 0===f&&(f=this.length),c<0||d>a.length||e<0||f>this.length)throw new RangeError("out of range index");if(e>=f&&c>=d)return 0;if(e>=f)return-1;if(c>=d)return 1;if(this===a)return 0;for(var h=(f>>>=0)-(e>>>=0),i=(d>>>=0)-(c>>>=0),j=Math.min(h,i),k=this.slice(e,f),l=a.slice(c,d),m=0;m<j;++m)if(k[m]!==l[m]){h=k[m],i=l[m];break}return h<i?-1:i<h?1:0},b.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)},b.prototype.indexOf=function(a,b,c){return n(this,a,b,c,!0)},b.prototype.lastIndexOf=function(a,b,c){return n(this,a,b,c,!1)},b.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return p(this,a,b,c);case"utf8":case"utf-8":return q(this,a,b,c);case"ascii":return r(this,a,b,c);case"latin1":case"binary":return s(this,a,b,c);case"base64":return t(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},b.prototype.slice=function(a,c){var d=this.length;(a=~~a)<0?(a+=d)<0&&(a=0):a>d&&(a=d),(c=void 0===c?d:~~c)<0?(c+=d)<0&&(c=0):c>d&&(c=d),c<a&&(c=a);var e=this.subarray(a,c);return e.__proto__=b.prototype,e},b.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||B(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},b.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||B(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},b.prototype.readUInt8=function(a,b){return a>>>=0,b||B(a,1,this.length),this[a]},b.prototype.readUInt16LE=function(a,b){return a>>>=0,b||B(a,2,this.length),this[a]|this[a+1]<<8},b.prototype.readUInt16BE=function(a,b){return a>>>=0,b||B(a,2,this.length),this[a]<<8|this[a+1]},b.prototype.readUInt32LE=function(a,b){return a>>>=0,b||B(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},b.prototype.readUInt32BE=function(a,b){return a>>>=0,b||B(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},b.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||B(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},b.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||B(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},b.prototype.readInt8=function(a,b){return a>>>=0,b||B(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},b.prototype.readInt16LE=function(a,b){a>>>=0,b||B(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},b.prototype.readInt16BE=function(a,b){a>>>=0,b||B(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},b.prototype.readInt32LE=function(a,b){return a>>>=0,b||B(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},b.prototype.readInt32BE=function(a,b){return a>>>=0,b||B(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},b.prototype.readFloatLE=function(a,b){return a>>>=0,b||B(a,4,this.length),N.read(this,a,!0,23,4)},b.prototype.readFloatBE=function(a,b){return a>>>=0,b||B(a,4,this.length),N.read(this,a,!1,23,4)},b.prototype.readDoubleLE=function(a,b){return a>>>=0,b||B(a,8,this.length),N.read(this,a,!0,52,8)},b.prototype.readDoubleBE=function(a,b){return a>>>=0,b||B(a,8,this.length),N.read(this,a,!1,52,8)},b.prototype.writeUIntLE=function(a,b,c,d){a=+a,b>>>=0,c>>>=0,d||C(this,a,b,c,Math.pow(2,8*c)-1,0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},b.prototype.writeUIntBE=function(a,b,c,d){a=+a,b>>>=0,c>>>=0,d||C(this,a,b,c,Math.pow(2,8*c)-1,0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},b.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||C(this,a,b,1,255,0),this[b]=255&a,b+1},b.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||C(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},b.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||C(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},b.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||C(this,a,b,4,4294967295,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},b.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||C(this,a,b,4,4294967295,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},b.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);C(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},b.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);C(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},b.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||C(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},b.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||C(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},b.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||C(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},b.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||C(this,a,b,4,2147483647,-2147483648),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},b.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||C(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},b.prototype.writeFloatLE=function(a,b,c){return E(this,a,b,!0,c)},b.prototype.writeFloatBE=function(a,b,c){return E(this,a,b,!1,c)},b.prototype.writeDoubleLE=function(a,b,c){return F(this,a,b,!0,c)},b.prototype.writeDoubleBE=function(a,b,c){return F(this,a,b,!1,c)},b.prototype.copy=function(a,c,d,e){if(!b.isBuffer(a))throw new TypeError("argument should be a Buffer");if(d||(d=0),e||0===e||(e=this.length),c>=a.length&&(c=a.length),c||(c=0),e>0&&e<d&&(e=d),e===d)return 0;if(0===a.length||0===this.length)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),a.length-c<e-d&&(e=a.length-c+d);var f=e-d;if(this===a&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(c,d,e);else if(this===a&&d<c&&c<e)for(var g=f-1;g>=0;--g)a[g+c]=this[g+d];else Uint8Array.prototype.set.call(a,this.subarray(d,e),c);return f},b.prototype.fill=function(a,c,d,e){if("string"==typeof a){if("string"==typeof c?(e=c,c=0,d=this.length):"string"==typeof d&&(e=d,d=this.length),void 0!==e&&"string"!=typeof e)throw new TypeError("encoding must be a string");if("string"==typeof e&&!b.isEncoding(e))throw new TypeError("Unknown encoding: "+e);if(1===a.length){var f=a.charCodeAt(0);("utf8"===e&&f<128||"latin1"===e)&&(a=f)}}else"number"==typeof a&&(a&=255);if(c<0||this.length<c||this.length<d)throw new RangeError("Out of range index");if(d<=c)return this;var g;if(c>>>=0,d=void 0===d?this.length:d>>>0,a||(a=0),"number"==typeof a)for(g=c;g<d;++g)this[g]=a;else{var h=b.isBuffer(a)?a:b.from(a,e),i=h.length;if(0===i)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(g=0;g<d-c;++g)this[g+c]=h[g%i]}return this};var O=/[^+/0-9A-Za-z-_]/g}).call(this,a("buffer").Buffer)},{"base64-js":30,buffer:32,ieee754:36}],33:[function(c,h,i){(function(c){var j;self,j=function(){return function(){function a(c){var e=d[c];if(void 0!==e)return e.exports;var f=d[c]={exports:{}};return b[c].call(f.exports,f,f.exports,a),f.exports}var b={"./node_modules/es6-promise/dist/es6-promise.js":function(a,b,d){a.exports=function(){function a(a){return"function"==typeof a}function b(){var a=setTimeout;return function(){return a(e,1)}}function e(){for(var a=0;a<x;a+=2)(0,G[a])(G[a+1]),G[a]=void 0,G[a+1]=void 0;x=0}function f(a,b){var c=this,d=new this.constructor(i);void 0===d[I]&&r(d);var e=c._state;if(e){var f=arguments[e-1];A(function(){return q(e,d,f,c._result)})}else o(c,d,a,b);return d}function h(a){if(a&&"object"==(void 0===a?"undefined":g(a))&&a.constructor===this)return a;var b=new this(i);return k(b,a),b}function i(){}function j(b,c,d){c.constructor===b.constructor&&d===f&&c.constructor.resolve===h?function(a,b){1===b._state?m(a,b._result):2===b._state?n(a,b._result):o(b,void 0,function(b){return k(a,b)},function(b){return n(a,b)})}(b,c):void 0===d?m(b,c):a(d)?function(a,b,c){A(function(a){var d=!1,e=function(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}(c,b,function(c){d||(d=!0,b!==c?k(a,c):m(a,c))},function(b){d||(d=!0,n(a,b))},a._label);!d&&e&&(d=!0,n(a,e))},a)}(b,c,d):m(b,c)}function k(a,b){if(a===b)n(a,new TypeError("You cannot resolve a promise with itself"));else if(e=g(d=b),null===d||"object"!==e&&"function"!==e)m(a,b);else{var c=void 0;try{c=b.then}catch(b){return void n(a,b)}j(a,b,c)}var d,e}function l(a){a._onerror&&a._onerror(a._result),p(a)}function m(a,b){void 0===a._state&&(a._result=b,a._state=1,0!==a._subscribers.length&&A(p,a))}function n(a,b){void 0===a._state&&(a._state=2,a._result=b,A(l,a))}function o(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+1]=c,e[f+2]=d,0===f&&a._state&&A(p,a)}function p(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d=void 0,e=void 0,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?q(c,d,e,f):e(f);a._subscribers.length=0}}function q(b,c,d,e){var f=a(d),g=void 0,h=void 0,i=!0;if(f){try{g=d(e)}catch(a){i=!1,h=a}if(c===g)return void n(c,new TypeError("A promises callback cannot return that same promise."))}else g=e;void 0!==c._state||(f&&i?k(c,g):!1===i?n(c,h):1===b?m(c,g):2===b&&n(c,g))}function r(a){a[I]=J++,a._state=void 0,a._result=void 0,a._subscribers=[]}var s,t,u,v,w=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},x=0,y=void 0,z=void 0,A=function(a,b){G[x]=a,G[x+1]=b,2===(x+=2)&&(z?z(e):H())},B="undefined"!=typeof window?window:void 0,C=B||{},D=C.MutationObserver||C.WebKitMutationObserver,E="undefined"==typeof self&&void 0!==c&&"[object process]"==={}.toString.call(c),F="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,G=new Array(1e3),H=void 0;E?H=function(){return c.nextTick(e)}:D?(t=0,u=new D(e),v=document.createTextNode(""),u.observe(v,{characterData:!0}),H=function(){v.data=t=++t%2}):F?((s=new MessageChannel).port1.onmessage=e,H=function(){return s.port2.postMessage(0)}):H=void 0===B?function(){try{var a=Function("return this")().require("vertx");return void 0!==(y=a.runOnLoop||a.runOnContext)?function(){y(e)}:b()}catch(a){return b()}}():b();var I=Math.random().toString(36).substring(2),J=0,K=function(){function a(a,b){this._instanceConstructor=a,this.promise=new a(i),this.promise[I]||r(this.promise),w(b)?(this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?m(this.promise,this._result):(this.length=this.length||0,this._enumerate(b),0===this._remaining&&m(this.promise,this._result))):n(this.promise,new Error("Array Methods must be provided an Array"))}return a.prototype._enumerate=function(a){for(var b=0;void 0===this._state&&b<a.length;b++)this._eachEntry(a[b],b)},a.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===h){var e=void 0,g=void 0,k=!1;try{e=a.then}catch(a){k=!0,g=a}if(e===f&&void 0!==a._state)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===L){var l=new c(i);k?n(l,g):j(l,a,e),this._willSettleAt(l,b)}else this._willSettleAt(new c(function(b){return b(a)}),b)}else this._willSettleAt(d(a),b)},a.prototype._settledAt=function(a,b,c){var d=this.promise;void 0===d._state&&(this._remaining--,2===a?n(d,c):this._result[b]=c),0===this._remaining&&m(d,this._result)},a.prototype._willSettleAt=function(a,b){var c=this;o(a,void 0,function(a){return c._settledAt(1,b,a)},function(a){return c._settledAt(2,b,a)})},a}(),L=function(){function b(a){this[I]=J++,this._result=this._state=void 0,this._subscribers=[],i!==a&&("function"!=typeof a&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof b?function(a,b){try{b(function(b){k(a,b)},function(b){n(a,b)})}catch(b){n(a,b)}}(this,a):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return b.prototype["catch"]=function(a){return this.then(null,a)},b.prototype["finally"]=function(b){var c=this.constructor;return a(b)?this.then(function(a){return c.resolve(b()).then(function(){return a})},function(a){return c.resolve(b()).then(function(){throw a})}):this.then(b,b)},b}();return L.prototype.then=f,L.all=function(a){return new K(this,a).promise},L.race=function(a){var b=this;return new b(w(a)?function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}:function(a,b){return b(new TypeError("You must pass an array to race."))})},L.resolve=h,L.reject=function(a){var b=new this(i);return n(b,a),b},L._setScheduler=function(a){z=a},L._setAsap=function(a){A=a},L._asap=A,L.polyfill=function(){var a=void 0;if(void 0!==d.g)a=d.g;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;if(b){var c=null;try{c=Object.prototype.toString.call(b.resolve())}catch(a){}if("[object Promise]"===c&&!b.cast)return}a.Promise=L},L.Promise=L,L}()},"./node_modules/events/events.js":function(a){function b(){b.init.call(this)}function c(a){if("function"!=typeof a)throw new TypeError('The "listener" argument must be of type Function. Received type '+(void 0===a?"undefined":g(a)))}function d(a){return void 0===a._maxListeners?b.defaultMaxListeners:a._maxListeners}function e(a,b,e,f){var g,h,i;if(c(e),void 0===(h=a._events)?(h=a._events=Object.create(null),a._eventsCount=0):(void 0!==h.newListener&&(a.emit("newListener",b,e.listener?e.listener:e),h=a._events),i=h[b]),void 0===i)i=h[b]=e,++a._eventsCount;else if("function"==typeof i?i=h[b]=f?[e,i]:[i,e]:f?i.unshift(e):i.push(e),(g=d(a))>0&&i.length>g&&!i.warned){i.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=a,j.type=b,j.count=i.length,console&&console.warn}return a}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(a,b,c){var d={fired:!1,wrapFn:void 0,target:a,type:b,listener:c},e=f.bind(d);return e.listener=c,d.wrapFn=e,e}function i(a,b,c){var d=a._events;if(void 0===d)return[];var e=d[b];return void 0===e?[]:"function"==typeof e?c?[e.listener||e]:[e]:c?function(a){for(var b=new Array(a.length),c=0;c<b.length;++c)b[c]=a[c].listener||a[c];return b}(e):k(e,e.length)}function j(a){var b=this._events;if(void 0!==b){var c=b[a];if("function"==typeof c)return 1;if(void 0!==c)return c.length}return 0}function k(a,b){for(var c=new Array(b),d=0;d<b;++d)c[d]=a[d];return c}function l(a,b,c,d){if("function"==typeof a.on)d.once?a.once(b,c):a.on(b,c);else{if("function"!=typeof a.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+(void 0===a?"undefined":g(a)));a.addEventListener(b,function e(f){d.once&&a.removeEventListener(b,e),c(f)})}}var m,n="object"==("undefined"==typeof Reflect?"undefined":g(Reflect))?Reflect:null,o=n&&"function"==typeof n.apply?n.apply:function(a,b,c){return Function.prototype.apply.call(a,b,c)};m=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:function(a){return Object.getOwnPropertyNames(a)};var p=Number.isNaN||function(a){return a!=a};a.exports=b,a.exports.once=function(a,b){return new Promise(function(c,d){function e(c){a.removeListener(b,f),d(c)}function f(){"function"==typeof a.removeListener&&a.removeListener("error",e),c([].slice.call(arguments))}l(a,b,f,{once:!0}),"error"!==b&&function(a,b,c){"function"==typeof a.on&&l(a,"error",b,c)}(a,e,{once:!0})})},b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var q=10;Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return q},set:function(a){if("number"!=typeof a||a<0||p(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");q=a}}),b.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(a){if("number"!=typeof a||a<0||p(a))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+a+".");return this._maxListeners=a,this},b.prototype.getMaxListeners=function(){return d(this)},b.prototype.emit=function(a){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);var d="error"===a,e=this._events;if(void 0!==e)d=d&&void 0===e.error;else if(!d)return!1;if(d){var f;if(b.length>0&&(f=b[0]),f instanceof Error)throw f;var g=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw g.context=f,g}var h=e[a];if(void 0===h)return!1;if("function"==typeof h)o(h,this,b);else{var i=h.length,j=k(h,i);for(c=0;c<i;++c)o(j[c],this,b)}return!0},b.prototype.addListener=function(a,b){return e(this,a,b,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(a,b){return e(this,a,b,!0)},b.prototype.once=function(a,b){return c(b),this.on(a,h(this,a,b)),this},b.prototype.prependOnceListener=function(a,b){return c(b),this.prependListener(a,h(this,a,b)),this},b.prototype.removeListener=function(a,b){var d,e,f,g,h;if(c(b),void 0===(e=this._events))return this;if(void 0===(d=e[a]))return this;if(d===b||d.listener===b)0==--this._eventsCount?this._events=Object.create(null):(delete e[a],e.removeListener&&this.emit("removeListener",a,d.listener||b));else if("function"!=typeof d){for(f=-1,g=d.length-1;g>=0;g--)if(d[g]===b||d[g].listener===b){h=d[g].listener,f=g;break}if(f<0)return this;0===f?d.shift():function(a,b){for(;b+1<a.length;b++)a[b]=a[b+1];a.pop()}(d,f),1===d.length&&(e[a]=d[0]),void 0!==e.removeListener&&this.emit("removeListener",a,h||b)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(a){var b,c,d;if(void 0===(c=this._events))return this;if(void 0===c.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==c[a]&&(0==--this._eventsCount?this._events=Object.create(null):delete c[a]),this;if(0===arguments.length){var e,f=Object.keys(c);for(d=0;d<f.length;++d)"removeListener"!==(e=f[d])&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(b=c[a]))this.removeListener(a,b);else if(void 0!==b)for(d=b.length-1;d>=0;d--)this.removeListener(a,b[d]);return this},b.prototype.listeners=function(a){return i(this,a,!0)},b.prototype.rawListeners=function(a){return i(this,a,!1)},b.listenerCount=function(a,b){return"function"==typeof a.listenerCount?a.listenerCount(b):j.call(a,b)},b.prototype.listenerCount=j,b.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},"./node_modules/webworkify-webpack/index.js":function(a,b,c){function d(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.r=function(a){Object.defineProperty(a,"__esModule",{value:!0})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/",b.oe=function(a){throw console.error(a),a};var d=b(b.s=ENTRY_MODULE);return d["default"]||d}function e(a){return(a+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function f(a,b,d){var f={};f[d]=[];var g=b.toString(),h=g.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!h)return f;for(var i,j=h[1],k=new RegExp("(\\\\n|\\W)"+e(j)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");i=k.exec(g);)"dll-reference"!==i[3]&&f[d].push(i[3]);for(k=new RegExp("\\("+e(j)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");i=k.exec(g);)a[i[2]]||(f[d].push(i[1]),a[i[2]]=c(i[1]).m),f[i[2]]=f[i[2]]||[],f[i[2]].push(i[4]);for(var l,m=Object.keys(f),n=0;n<m.length;n++)for(var o=0;o<f[m[n]].length;o++)l=f[m[n]][o],isNaN(1*l)||(f[m[n]][o]=1*f[m[n]][o]);return f}function g(a){return Object.keys(a).reduce(function(b,c){return b||a[c].length>0},!1)}a.exports=function(a,b){b=b||{};var e={main:c.m},h=b.all?{main:Object.keys(e.main)}:function(a,b){for(var c={main:[b]},d={main:[]},e={main:{}};g(c);)for(var h=Object.keys(c),i=0;i<h.length;i++){var j=h[i],k=c[j].pop();if(e[j]=e[j]||{},!e[j][k]&&a[j][k]){e[j][k]=!0,d[j]=d[j]||[],d[j].push(k);for(var l=f(a,a[j][k],j),m=Object.keys(l),n=0;n<m.length;n++)c[m[n]]=c[m[n]]||[],c[m[n]]=c[m[n]].concat(l[m[n]])}}return d}(e,a),i="";Object.keys(h).filter(function(a){return"main"!==a}).forEach(function(a){for(var b=0;h[a][b];)b++;h[a].push(b),e[a][b]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",i=i+"var "+a+" = ("+d.toString().replace("ENTRY_MODULE",JSON.stringify(b))+")({"+h[a].map(function(b){return JSON.stringify(b)+": "+e[a][b].toString()}).join(",")+"});\n"}),i=i+"new (("+d.toString().replace("ENTRY_MODULE",JSON.stringify(a))+")({"+h.main.map(function(a){return JSON.stringify(a)+": "+e.main[a].toString()}).join(",")+"}))(self);";var j=new window.Blob([i],{type:"text/javascript"});if(b.bare)return j;var k=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(j),l=new window.Worker(k);return l.objectURL=k,l}},"./src/config.js":function(a,b,c){function d(){return Object.assign({},e)}c.r(b),c.d(b,{defaultConfig:function(){return e},createDefaultConfig:function(){return d}});var e={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0}},"./src/core/features.js":function(a,b,c){c.r(b);var d=c("./src/io/io-controller.js"),e=c("./src/config.js"),f=function(){function a(){}return a.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},a.supportNetworkStreamIO=function(){var a=new d["default"]({},(0,e.createDefaultConfig)()),b=a.loaderType;return a.destroy(),"fetch-stream-loader"==b||"xhr-moz-chunked-loader"==b},a.getNetworkLoaderTypeName=function(){var a=new d["default"]({},(0,e.createDefaultConfig)()),b=a.loaderType;return a.destroy(),b},a.supportNativeMediaPlayback=function(b){null==a.videoElement&&(a.videoElement=window.document.createElement("video"));var c=a.videoElement.canPlayType(b);return"probably"===c||"maybe"==c},a.getFeatureList=function(){var b={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return b.mseFlvPlayback=a.supportMSEH264Playback(),b.networkStreamIO=a.supportNetworkStreamIO(),b.networkLoaderName=a.getNetworkLoaderTypeName(),b.mseLiveFlvPlayback=b.mseFlvPlayback&&b.networkStreamIO,b.nativeMP4H264Playback=a.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),b.nativeWebmVP8Playback=a.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),b.nativeWebmVP9Playback=a.supportNativeMediaPlayback('video/webm; codecs="vp9"'),b},a}();b["default"]=f},"./src/core/media-info.js":function(a,b,c){c.r(b);var d=function(){function a(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return a.prototype.isComplete=function(){var a=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,b=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&a&&b},a.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},a.prototype.getNearestKeyframe=function(a){if(null==this.keyframesIndex)return null;var b=this.keyframesIndex,c=this._search(b.times,a);return{index:c,milliseconds:b.times[c],fileposition:b.filepositions[c]}},a.prototype._search=function(a,b){var c=0,d=a.length-1,e=0,f=0,g=d;for(b<a[0]&&(c=0,f=g+1);f<=g;){if((e=f+Math.floor((g-f)/2))===d||b>=a[e]&&b<a[e+1]){c=e;break}a[e]<b?f=e+1:g=e-1}return c},a}();b["default"]=d},"./src/core/media-segment-info.js":function(a,b,c){c.r(b),c.d(b,{SampleInfo:function(){return d},MediaSegmentInfo:function(){return e},IDRSampleList:function(){return f},MediaSegmentInfoList:function(){return g}});var d=function(a,b,c,d,e){this.dts=a,this.pts=b,this.duration=c,this.originalDts=d,this.isSyncPoint=e,this.fileposition=null},e=function(){function a(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return a.prototype.appendSyncPoint=function(a){a.isSyncPoint=!0,this.syncPoints.push(a)},a}(),f=function(){function a(){this._list=[]}return a.prototype.clear=function(){this._list=[]},a.prototype.appendArray=function(a){var b=this._list;0!==a.length&&(b.length>0&&a[0].originalDts<b[b.length-1].originalDts&&this.clear(),Array.prototype.push.apply(b,a))},a.prototype.getLastSyncPointBeforeDts=function(a){if(0==this._list.length)return null;var b=this._list,c=0,d=b.length-1,e=0,f=0,g=d;for(a<b[0].dts&&(c=0,f=g+1);f<=g;){if((e=f+Math.floor((g-f)/2))===d||a>=b[e].dts&&a<b[e+1].dts){c=e;break}b[e].dts<a?f=e+1:g=e-1}return this._list[c]},a}(),g=function(){function a(a){this._type=a,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),a.prototype.isEmpty=function(){return 0===this._list.length},a.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},a.prototype._searchNearestSegmentBefore=function(a){var b=this._list;if(0===b.length)return-2;var c=b.length-1,d=0,e=0,f=c,g=0;if(a<b[0].originalBeginDts)return g=-1;for(;e<=f;){if((d=e+Math.floor((f-e)/2))===c||a>b[d].lastSample.originalDts&&a<b[d+1].originalBeginDts){g=d;break}b[d].originalBeginDts<a?e=d+1:f=d-1}return g},a.prototype._searchNearestSegmentAfter=function(a){return this._searchNearestSegmentBefore(a)+1},a.prototype.append=function(a){var b=this._list,c=a,d=this._lastAppendLocation,e=0;-1!==d&&d<b.length&&c.originalBeginDts>=b[d].lastSample.originalDts&&(d===b.length-1||d<b.length-1&&c.originalBeginDts<b[d+1].originalBeginDts)?e=d+1:b.length>0&&(e=this._searchNearestSegmentBefore(c.originalBeginDts)+1),this._lastAppendLocation=e,this._list.splice(e,0,c)},a.prototype.getLastSegmentBefore=function(a){var b=this._searchNearestSegmentBefore(a);return b>=0?this._list[b]:null},a.prototype.getLastSampleBefore=function(a){var b=this.getLastSegmentBefore(a);return null!=b?b.lastSample:null},a.prototype.getLastSyncPointBefore=function(a){for(var b=this._searchNearestSegmentBefore(a),c=this._list[b].syncPoints;0===c.length&&b>0;)b--,c=this._list[b].syncPoints;return c.length>0?c[c.length-1]:null},a}()},"./src/core/mse-controller.js":function(a,b,c){c.r(b);var d=c("./node_modules/events/events.js"),e=c.n(d),f=c("./src/utils/logger.js"),g=c("./src/utils/browser.js"),h=c("./src/core/mse-events.js"),i=c("./src/core/media-segment-info.js"),j=c("./src/utils/exception.js"),k=function(){function a(a){this.TAG="MSEController",this._config=a,this._emitter=new(e()),this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new i.IDRSampleList}return a.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},a.prototype.on=function(a,b){this._emitter.addListener(a,b)},a.prototype.off=function(a,b){this._emitter.removeListener(a,b)},a.prototype.attachMediaElement=function(a){
if(this._mediaSource)throw new j.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var b=this._mediaSource=new window.MediaSource;b.addEventListener("sourceopen",this.e.onSourceOpen),b.addEventListener("sourceended",this.e.onSourceEnded),b.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=a,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),a.src=this._mediaSourceObjectURL},a.prototype.detachMediaElement=function(){if(this._mediaSource){var a=this._mediaSource;for(var b in this._sourceBuffers){var c=this._pendingSegments[b];c.splice(0,c.length),this._pendingSegments[b]=null,this._pendingRemoveRanges[b]=null,this._lastInitSegments[b]=null;var d=this._sourceBuffers[b];if(d){if("closed"!==a.readyState){try{a.removeSourceBuffer(d)}catch(a){f["default"].e(this.TAG,a.message)}d.removeEventListener("error",this.e.onSourceBufferError),d.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[b]=null,this._sourceBuffers[b]=null}}if("open"===a.readyState)try{a.endOfStream()}catch(a){f["default"].e(this.TAG,a.message)}a.removeEventListener("sourceopen",this.e.onSourceOpen),a.removeEventListener("sourceended",this.e.onSourceEnded),a.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},a.prototype.appendInitSegment=function(a,b){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(a),void this._pendingSegments[a.type].push(a);var c=a,d=""+c.container;c.codec&&c.codec.length>0&&(d+=";codecs="+c.codec);var e=!1;if(f["default"].v(this.TAG,"Received Initialization Segment, mimeType: "+d),this._lastInitSegments[c.type]=c,d!==this._mimeTypes[c.type]){if(this._mimeTypes[c.type])f["default"].v(this.TAG,"Notice: "+c.type+" mimeType changed, origin: "+this._mimeTypes[c.type]+", target: "+d);else{e=!0;try{var i=this._sourceBuffers[c.type]=this._mediaSource.addSourceBuffer(d);i.addEventListener("error",this.e.onSourceBufferError),i.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(a){return f["default"].e(this.TAG,a.message),void this._emitter.emit(h["default"].ERROR,{code:a.code,msg:a.message})}}this._mimeTypes[c.type]=d}b||this._pendingSegments[c.type].push(c),e||this._sourceBuffers[c.type]&&!this._sourceBuffers[c.type].updating&&this._doAppendSegments(),g["default"].safari&&"audio/mpeg"===c.container&&c.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=c.mediaDuration/1e3,this._updateMediaSourceDuration())},a.prototype.appendMediaSegment=function(a){var b=a;this._pendingSegments[b.type].push(b),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var c=this._sourceBuffers[b.type];!c||c.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},a.prototype.seek=function(a){for(var b in this._sourceBuffers)if(this._sourceBuffers[b]){var c=this._sourceBuffers[b];if("open"===this._mediaSource.readyState)try{c.abort()}catch(a){f["default"].e(this.TAG,a.message)}this._idrList.clear();var d=this._pendingSegments[b];if(d.splice(0,d.length),"closed"!==this._mediaSource.readyState){for(var e=0;e<c.buffered.length;e++){var h=c.buffered.start(e),i=c.buffered.end(e);this._pendingRemoveRanges[b].push({start:h,end:i})}if(c.updating||this._doRemoveRanges(),g["default"].safari){var j=this._lastInitSegments[b];j&&(this._pendingSegments[b].push(j),c.updating||this._doAppendSegments())}}}},a.prototype.endOfStream=function(){var a=this._mediaSource,b=this._sourceBuffers;a&&"open"===a.readyState?b.video&&b.video.updating||b.audio&&b.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,a.endOfStream()):a&&"closed"===a.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},a.prototype.getNearestKeyframe=function(a){return this._idrList.getLastSyncPointBeforeDts(a)},a.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var a=this._mediaElement.currentTime;for(var b in this._sourceBuffers){var c=this._sourceBuffers[b];if(c){var d=c.buffered;if(d.length>=1&&a-d.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},a.prototype._doCleanupSourceBuffer=function(){var a=this._mediaElement.currentTime;for(var b in this._sourceBuffers){var c=this._sourceBuffers[b];if(c){for(var d=c.buffered,e=!1,f=0;f<d.length;f++){var g=d.start(f),h=d.end(f);if(g<=a&&a<h+3){if(a-g>=this._config.autoCleanupMaxBackwardDuration){e=!0;var i=a-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[b].push({start:g,end:i})}}else h<a&&(e=!0,this._pendingRemoveRanges[b].push({start:g,end:h}))}e&&!c.updating&&this._doRemoveRanges()}}},a.prototype._updateMediaSourceDuration=function(){var a=this._sourceBuffers;if(0!==this._mediaElement.readyState&&"open"===this._mediaSource.readyState&&!(a.video&&a.video.updating||a.audio&&a.audio.updating)){var b=this._mediaSource.duration,c=this._pendingMediaDuration;c>0&&(isNaN(b)||c>b)&&(f["default"].v(this.TAG,"Update MediaSource duration from "+b+" to "+c),this._mediaSource.duration=c),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},a.prototype._doRemoveRanges=function(){for(var a in this._pendingRemoveRanges)if(this._sourceBuffers[a]&&!this._sourceBuffers[a].updating)for(var b=this._sourceBuffers[a],c=this._pendingRemoveRanges[a];c.length&&!b.updating;){var d=c.shift();b.remove(d.start,d.end)}},a.prototype._doAppendSegments=function(){var a=this._pendingSegments;for(var b in a)if(this._sourceBuffers[b]&&!this._sourceBuffers[b].updating&&a[b].length>0){var c=a[b].shift();if(c.timestampOffset){var d=this._sourceBuffers[b].timestampOffset,e=c.timestampOffset/1e3;Math.abs(d-e)>.1&&(f["default"].v(this.TAG,"Update MPEG audio timestampOffset from "+d+" to "+e),this._sourceBuffers[b].timestampOffset=e),delete c.timestampOffset}if(!c.data||0===c.data.byteLength)continue;try{this._sourceBuffers[b].appendBuffer(c.data),this._isBufferFull=!1,"video"===b&&c.hasOwnProperty("info")&&this._idrList.appendArray(c.info.syncPoints)}catch(a){this._pendingSegments[b].unshift(c),22===a.code?(this._isBufferFull||this._emitter.emit(h["default"].BUFFER_FULL),this._isBufferFull=!0):(f["default"].e(this.TAG,a.message),this._emitter.emit(h["default"].ERROR,{code:a.code,msg:a.message}))}}},a.prototype._onSourceOpen=function(){if(f["default"].v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var a=this._pendingSourceBufferInit;a.length;){var b=a.shift();this.appendInitSegment(b,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(h["default"].SOURCE_OPEN)},a.prototype._onSourceEnded=function(){f["default"].v(this.TAG,"MediaSource onSourceEnded")},a.prototype._onSourceClose=function(){f["default"].v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},a.prototype._hasPendingSegments=function(){var a=this._pendingSegments;return a.video.length>0||a.audio.length>0},a.prototype._hasPendingRemoveRanges=function(){var a=this._pendingRemoveRanges;return a.video.length>0||a.audio.length>0},a.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(h["default"].UPDATE_END)},a.prototype._onSourceBufferError=function(a){f["default"].e(this.TAG,"SourceBuffer Error: "+a)},a}();b["default"]=k},"./src/core/mse-events.js":function(a,b,c){c.r(b),b["default"]={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"}},"./src/core/transmuxer.js":function(a,b,c){c.r(b);var d=c("./node_modules/events/events.js"),e=c.n(d),f=c("./node_modules/webworkify-webpack/index.js"),g=c.n(f),h=c("./src/utils/logger.js"),i=c("./src/utils/logging-control.js"),j=c("./src/core/transmuxing-controller.js"),k=c("./src/core/transmuxing-events.js"),l=c("./src/core/media-info.js"),m=function(){function a(a,b){if(this.TAG="Transmuxer",this._emitter=new(e()),b.enableWorker&&"undefined"!=typeof Worker)try{this._worker=g()("./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[a,b]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},i["default"].registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:i["default"].getConfig()})}catch(c){h["default"].e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new j["default"](a,b)}else this._controller=new j["default"](a,b);if(this._controller){var c=this._controller;c.on(k["default"].IO_ERROR,this._onIOError.bind(this)),c.on(k["default"].DEMUX_ERROR,this._onDemuxError.bind(this)),c.on(k["default"].INIT_SEGMENT,this._onInitSegment.bind(this)),c.on(k["default"].MEDIA_SEGMENT,this._onMediaSegment.bind(this)),c.on(k["default"].LOADING_COMPLETE,this._onLoadingComplete.bind(this)),c.on(k["default"].RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),c.on(k["default"].MEDIA_INFO,this._onMediaInfo.bind(this)),c.on(k["default"].METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),c.on(k["default"].SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),c.on(k["default"].STATISTICS_INFO,this._onStatisticsInfo.bind(this)),c.on(k["default"].RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return a.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),i["default"].removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},a.prototype.on=function(a,b){this._emitter.addListener(a,b)},a.prototype.off=function(a,b){this._emitter.removeListener(a,b)},a.prototype.hasWorker=function(){return null!=this._worker},a.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},a.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},a.prototype.seek=function(a){this._worker?this._worker.postMessage({cmd:"seek",param:a}):this._controller.seek(a)},a.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},a.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},a.prototype._onInitSegment=function(a,b){var c=this;Promise.resolve().then(function(){c._emitter.emit(k["default"].INIT_SEGMENT,a,b)})},a.prototype._onMediaSegment=function(a,b){var c=this;Promise.resolve().then(function(){c._emitter.emit(k["default"].MEDIA_SEGMENT,a,b)})},a.prototype._onLoadingComplete=function(){var a=this;Promise.resolve().then(function(){a._emitter.emit(k["default"].LOADING_COMPLETE)})},a.prototype._onRecoveredEarlyEof=function(){var a=this;Promise.resolve().then(function(){a._emitter.emit(k["default"].RECOVERED_EARLY_EOF)})},a.prototype._onMediaInfo=function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(k["default"].MEDIA_INFO,a)})},a.prototype._onMetaDataArrived=function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(k["default"].METADATA_ARRIVED,a)})},a.prototype._onScriptDataArrived=function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(k["default"].SCRIPTDATA_ARRIVED,a)})},a.prototype._onStatisticsInfo=function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(k["default"].STATISTICS_INFO,a)})},a.prototype._onIOError=function(a,b){var c=this;Promise.resolve().then(function(){c._emitter.emit(k["default"].IO_ERROR,a,b)})},a.prototype._onDemuxError=function(a,b){var c=this;Promise.resolve().then(function(){c._emitter.emit(k["default"].DEMUX_ERROR,a,b)})},a.prototype._onRecommendSeekpoint=function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(k["default"].RECOMMEND_SEEKPOINT,a)})},a.prototype._onLoggingConfigChanged=function(a){this._worker&&this._worker.postMessage({cmd:"logging_config",param:a})},a.prototype._onWorkerMessage=function(a){var b=a.data,c=b.data;if("destroyed"===b.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(b.msg){case k["default"].INIT_SEGMENT:case k["default"].MEDIA_SEGMENT:this._emitter.emit(b.msg,c.type,c.data);break;case k["default"].LOADING_COMPLETE:case k["default"].RECOVERED_EARLY_EOF:this._emitter.emit(b.msg);break;case k["default"].MEDIA_INFO:Object.setPrototypeOf(c,l["default"].prototype),this._emitter.emit(b.msg,c);break;case k["default"].METADATA_ARRIVED:case k["default"].SCRIPTDATA_ARRIVED:case k["default"].STATISTICS_INFO:this._emitter.emit(b.msg,c);break;case k["default"].IO_ERROR:case k["default"].DEMUX_ERROR:this._emitter.emit(b.msg,c.type,c.info);break;case k["default"].RECOMMEND_SEEKPOINT:this._emitter.emit(b.msg,c);break;case"logcat_callback":h["default"].emitter.emit("log",c.type,c.logcat)}},a}();b["default"]=m},"./src/core/transmuxing-controller.js":function(a,b,c){c.r(b);var d=c("./node_modules/events/events.js"),e=c.n(d),f=c("./src/utils/logger.js"),g=c("./src/utils/browser.js"),h=c("./src/core/media-info.js"),i=c("./src/demux/flv-demuxer.js"),j=c("./src/remux/mp4-remuxer.js"),k=c("./src/demux/demux-errors.js"),l=c("./src/io/io-controller.js"),m=c("./src/core/transmuxing-events.js"),n=function(){function a(a,b){this.TAG="TransmuxingController",this._emitter=new(e()),this._config=b,a.segments||(a.segments=[{duration:a.duration,filesize:a.filesize,url:a.url}]),"boolean"!=typeof a.cors&&(a.cors=!0),"boolean"!=typeof a.withCredentials&&(a.withCredentials=!1),this._mediaDataSource=a,this._currentSegmentIndex=0;var c=0;this._mediaDataSource.segments.forEach(function(d){d.timestampBase=c,c+=d.duration,d.cors=a.cors,d.withCredentials=a.withCredentials,b.referrerPolicy&&(d.referrerPolicy=b.referrerPolicy)}),isNaN(c)||this._mediaDataSource.duration===c||(this._mediaDataSource.duration=c),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return a.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},a.prototype.on=function(a,b){this._emitter.addListener(a,b)},a.prototype.off=function(a,b){this._emitter.removeListener(a,b)},a.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},a.prototype._loadSegment=function(a,b){this._currentSegmentIndex=a;var c=this._mediaDataSource.segments[a],d=this._ioctl=new l["default"](c,this._config,a);d.onError=this._onIOException.bind(this),d.onSeeked=this._onIOSeeked.bind(this),d.onComplete=this._onIOComplete.bind(this),d.onRedirect=this._onIORedirect.bind(this),d.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),b?this._demuxer.bindDataSource(this._ioctl):d.onDataArrival=this._onInitChunkArrival.bind(this),d.open(b)},a.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},a.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},a.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},a.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},a.prototype.seek=function(a){if(null!=this._mediaInfo&&this._mediaInfo.isSeekable()){var b=this._searchSegmentIndexContains(a);if(b===this._currentSegmentIndex){var c=this._mediaInfo.segments[b];if(null==c)this._pendingSeekTime=a;else{var d=c.getNearestKeyframe(a);this._remuxer.seek(d.milliseconds),this._ioctl.seek(d.fileposition),this._pendingResolveSeekPoint=d.milliseconds}}else{var e=this._mediaInfo.segments[b];null==e?(this._pendingSeekTime=a,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(b)):(d=e.getNearestKeyframe(a),this._internalAbort(),this._remuxer.seek(a),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[b].timestampBase,this._loadSegment(b,d.fileposition),this._pendingResolveSeekPoint=d.milliseconds,this._reportSegmentMediaInfo(b))}this._enableStatisticsReporter()}},a.prototype._searchSegmentIndexContains=function(a){for(var b=this._mediaDataSource.segments,c=b.length-1,d=0;d<b.length;d++)if(a<b[d].timestampBase){c=d-1;break}return c},a.prototype._onInitChunkArrival=function(a,b){var c=this,d=null,e=0;if(b>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,e=this._demuxer.parseChunks(a,b);else if((d=i["default"].probe(a)).match){this._demuxer=new i["default"](d,this._config),this._remuxer||(this._remuxer=new j["default"](this._config));var g=this._mediaDataSource;null==g.duration||isNaN(g.duration)||(this._demuxer.overridedDuration=g.duration),"boolean"==typeof g.hasAudio&&(this._demuxer.overridedHasAudio=g.hasAudio),"boolean"==typeof g.hasVideo&&(this._demuxer.overridedHasVideo=g.hasVideo),this._demuxer.timestampBase=g.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),e=this._demuxer.parseChunks(a,b)}else d=null,f["default"].e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){c._internalAbort()}),this._emitter.emit(m["default"].DEMUX_ERROR,k["default"].FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),e=0;return e},a.prototype._onMediaInfo=function(a){var b=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},a),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,h["default"].prototype));var c=Object.assign({},a);Object.setPrototypeOf(c,h["default"].prototype),this._mediaInfo.segments[this._currentSegmentIndex]=c,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then(function(){var a=b._pendingSeekTime;b._pendingSeekTime=null,b.seek(a)})},a.prototype._onMetaDataArrived=function(a){this._emitter.emit(m["default"].METADATA_ARRIVED,a)},a.prototype._onScriptDataArrived=function(a){this._emitter.emit(m["default"].SCRIPTDATA_ARRIVED,a)},a.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},a.prototype._onIOComplete=function(a){var b=a+1;b<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(b)):(this._remuxer.flushStashedSamples(),this._emitter.emit(m["default"].LOADING_COMPLETE),this._disableStatisticsReporter())},a.prototype._onIORedirect=function(a){var b=this._ioctl.extraData;this._mediaDataSource.segments[b].redirectedURL=a},a.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(m["default"].RECOVERED_EARLY_EOF)},a.prototype._onIOException=function(a,b){f["default"].e(this.TAG,"IOException: type = "+a+", code = "+b.code+", msg = "+b.msg),this._emitter.emit(m["default"].IO_ERROR,a,b),this._disableStatisticsReporter()},a.prototype._onDemuxException=function(a,b){f["default"].e(this.TAG,"DemuxException: type = "+a+", info = "+b),this._emitter.emit(m["default"].DEMUX_ERROR,a,b)},a.prototype._onRemuxerInitSegmentArrival=function(a,b){this._emitter.emit(m["default"].INIT_SEGMENT,a,b)},a.prototype._onRemuxerMediaSegmentArrival=function(a,b){if(null==this._pendingSeekTime&&(this._emitter.emit(m["default"].MEDIA_SEGMENT,a,b),null!=this._pendingResolveSeekPoint&&"video"===a)){var c=b.info.syncPoints,d=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,g["default"].safari&&c.length>0&&c[0].originalDts===d&&(d=c[0].pts),this._emitter.emit(m["default"].RECOMMEND_SEEKPOINT,d)}},a.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},a.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},a.prototype._reportSegmentMediaInfo=function(a){var b=this._mediaInfo.segments[a],c=Object.assign({},b);c.duration=this._mediaInfo.duration,c.segmentCount=this._mediaInfo.segmentCount,delete c.segments,delete c.keyframesIndex,this._emitter.emit(m["default"].MEDIA_INFO,c)},a.prototype._reportStatisticsInfo=function(){var a={};a.url=this._ioctl.currentURL,a.hasRedirect=this._ioctl.hasRedirect,a.hasRedirect&&(a.redirectedURL=this._ioctl.currentRedirectedURL),a.speed=this._ioctl.currentSpeed,a.loaderType=this._ioctl.loaderType,a.currentSegmentIndex=this._currentSegmentIndex,a.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(m["default"].STATISTICS_INFO,a)},a}();b["default"]=n},"./src/core/transmuxing-events.js":function(a,b,c){c.r(b),b["default"]={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},"./src/core/transmuxing-worker.js":function(a,b,c){c.r(b);var d=c("./src/utils/logging-control.js"),e=c("./src/utils/polyfill.js"),f=c("./src/core/transmuxing-controller.js"),g=c("./src/core/transmuxing-events.js");b["default"]=function(a){function b(b,c){var d={msg:g["default"].INIT_SEGMENT,data:{type:b,data:c}};a.postMessage(d,[c.data])}function c(b,c){var d={msg:g["default"].MEDIA_SEGMENT,data:{type:b,data:c}};a.postMessage(d,[c.data])}function h(){var b={msg:g["default"].LOADING_COMPLETE};a.postMessage(b)}function i(){var b={msg:g["default"].RECOVERED_EARLY_EOF};a.postMessage(b)}function j(b){var c={msg:g["default"].MEDIA_INFO,data:b};a.postMessage(c)}function k(b){var c={msg:g["default"].METADATA_ARRIVED,data:b};a.postMessage(c)}function l(b){var c={msg:g["default"].SCRIPTDATA_ARRIVED,data:b};a.postMessage(c)}function m(b){var c={msg:g["default"].STATISTICS_INFO,data:b};a.postMessage(c)}function n(b,c){a.postMessage({msg:g["default"].IO_ERROR,data:{type:b,info:c}})}function o(b,c){a.postMessage({msg:g["default"].DEMUX_ERROR,data:{type:b,info:c}})}function p(b){a.postMessage({msg:g["default"].RECOMMEND_SEEKPOINT,data:b})}var q=null,r=function(b,c){a.postMessage({msg:"logcat_callback",data:{type:b,logcat:c}})}.bind(this);e["default"].install(),a.addEventListener("message",function(e){switch(e.data.cmd){case"init":(q=new f["default"](e.data.param[0],e.data.param[1])).on(g["default"].IO_ERROR,n.bind(this)),q.on(g["default"].DEMUX_ERROR,o.bind(this)),q.on(g["default"].INIT_SEGMENT,b.bind(this)),q.on(g["default"].MEDIA_SEGMENT,c.bind(this)),q.on(g["default"].LOADING_COMPLETE,h.bind(this)),q.on(g["default"].RECOVERED_EARLY_EOF,i.bind(this)),q.on(g["default"].MEDIA_INFO,j.bind(this)),q.on(g["default"].METADATA_ARRIVED,k.bind(this)),q.on(g["default"].SCRIPTDATA_ARRIVED,l.bind(this)),q.on(g["default"].STATISTICS_INFO,m.bind(this)),q.on(g["default"].RECOMMEND_SEEKPOINT,p.bind(this));break;case"destroy":q&&(q.destroy(),q=null),a.postMessage({msg:"destroyed"});break;case"start":q.start();break;case"stop":q.stop();break;case"seek":q.seek(e.data.param);break;case"pause":q.pause();break;case"resume":q.resume();break;case"logging_config":var s=e.data.param;d["default"].applyConfig(s),!0===s.enableCallback?d["default"].addLogListener(r):d["default"].removeLogListener(r)}})}},"./src/demux/amf-parser.js":function(a,b,c){c.r(b);var d,e=c("./src/utils/logger.js"),f=c("./src/utils/utf8-conv.js"),g=c("./src/utils/exception.js"),h=(d=new ArrayBuffer(2),new DataView(d).setInt16(0,256,!0),256===new Int16Array(d)[0]),i=function(){function a(){}return a.parseScriptData=function(b,c,d){var f={};try{var g=a.parseValue(b,c,d),h=a.parseValue(b,c+g.size,d-g.size);f[g.data]=h.data}catch(a){e["default"].e("AMF",a.toString())}return f},a.parseObject=function(b,c,d){if(d<3)throw new g.IllegalStateException("Data not enough when parse ScriptDataObject");var e=a.parseString(b,c,d),f=a.parseValue(b,c+e.size,d-e.size),h=f.objectEnd;return{data:{name:e.data,value:f.data},size:e.size+f.size,objectEnd:h}},a.parseVariable=function(b,c,d){return a.parseObject(b,c,d)},a.parseString=function(a,b,c){if(c<2)throw new g.IllegalStateException("Data not enough when parse String");var d=new DataView(a,b,c).getUint16(0,!h);return{data:d>0?(0,f["default"])(new Uint8Array(a,b+2,d)):"",size:2+d}},a.parseLongString=function(a,b,c){if(c<4)throw new g.IllegalStateException("Data not enough when parse LongString");var d=new DataView(a,b,c).getUint32(0,!h);return{data:d>0?(0,f["default"])(new Uint8Array(a,b+4,d)):"",size:4+d}},a.parseDate=function(a,b,c){if(c<10)throw new g.IllegalStateException("Data size invalid when parse Date");var d=new DataView(a,b,c),e=d.getFloat64(0,!h),f=d.getInt16(8,!h);return{data:new Date(e+=60*f*1e3),size:10}},a.parseValue=function(b,c,d){if(d<1)throw new g.IllegalStateException("Data not enough when parse Value");var f,i=new DataView(b,c,d),j=1,k=i.getUint8(0),l=!1;try{switch(k){case 0:f=i.getFloat64(1,!h),j+=8;break;case 1:f=!!i.getUint8(1),j+=1;break;case 2:var m=a.parseString(b,c+1,d-1);f=m.data,j+=m.size;break;case 3:f={};var n=0;for(9==(16777215&i.getUint32(d-4,!h))&&(n=3);j<d-4;){var o=a.parseObject(b,c+j,d-j-n);if(o.objectEnd)break;f[o.data.name]=o.data.value,j+=o.size}j<=d-3&&9==(16777215&i.getUint32(j-1,!h))&&(j+=3);break;case 8:for(f={},j+=4,n=0,9==(16777215&i.getUint32(d-4,!h))&&(n=3);j<d-8;){var p=a.parseVariable(b,c+j,d-j-n);if(p.objectEnd)break;f[p.data.name]=p.data.value,j+=p.size}j<=d-3&&9==(16777215&i.getUint32(j-1,!h))&&(j+=3);break;case 9:f=void 0,j=1,l=!0;break;case 10:f=[];var q=i.getUint32(1,!h);j+=4;for(var r=0;r<q;r++){var s=a.parseValue(b,c+j,d-j);f.push(s.data),j+=s.size}break;case 11:var t=a.parseDate(b,c+1,d-1);f=t.data,j+=t.size;break;case 12:var u=a.parseString(b,c+1,d-1);f=u.data,j+=u.size;break;default:j=d,e["default"].w("AMF","Unsupported AMF value type "+k)}}catch(a){e["default"].e("AMF",a.toString())}return{data:f,size:j,objectEnd:l}},a}();b["default"]=i},"./src/demux/demux-errors.js":function(a,b,c){c.r(b),b["default"]={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},"./src/demux/exp-golomb.js":function(a,b,c){c.r(b);var d=c("./src/utils/exception.js"),e=function(){function a(a){this.TAG="ExpGolomb",this._buffer=a,this._buffer_index=0,this._total_bytes=a.byteLength,this._total_bits=8*a.byteLength,this._current_word=0,this._current_word_bits_left=0}return a.prototype.destroy=function(){this._buffer=null},a.prototype._fillCurrentWord=function(){var a=this._total_bytes-this._buffer_index;if(a<=0)throw new d.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var b=Math.min(4,a),c=new Uint8Array(4);c.set(this._buffer.subarray(this._buffer_index,this._buffer_index+b)),this._current_word=new DataView(c.buffer).getUint32(0,!1),this._buffer_index+=b,this._current_word_bits_left=8*b},a.prototype.readBits=function(a){if(a>32)throw new d.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(a<=this._current_word_bits_left){var b=this._current_word>>>32-a;return this._current_word<<=a,this._current_word_bits_left-=a,b}var c=this._current_word_bits_left?this._current_word:0;c>>>=32-this._current_word_bits_left;var e=a-this._current_word_bits_left;this._fillCurrentWord();var f=Math.min(e,this._current_word_bits_left),g=this._current_word>>>32-f;return this._current_word<<=f,this._current_word_bits_left-=f,c=c<<f|g},a.prototype.readBool=function(){return 1===this.readBits(1)},a.prototype.readByte=function(){return this.readBits(8)},a.prototype._skipLeadingZero=function(){var a;for(a=0;a<this._current_word_bits_left;a++)if(0!=(this._current_word&2147483648>>>a))return this._current_word<<=a,this._current_word_bits_left-=a,a;return this._fillCurrentWord(),a+this._skipLeadingZero()},a.prototype.readUEG=function(){var a=this._skipLeadingZero();return this.readBits(a+1)-1},a.prototype.readSEG=function(){var a=this.readUEG();return 1&a?a+1>>>1:-1*(a>>>1)},a}();b["default"]=e},"./src/demux/flv-demuxer.js":function(a,b,c){c.r(b);var d=c("./src/utils/logger.js"),e=c("./src/demux/amf-parser.js"),f=c("./src/demux/sps-parser.js"),h=c("./src/demux/demux-errors.js"),i=c("./src/core/media-info.js"),j=c("./src/utils/exception.js"),k=function(){function a(a,b){var c;this.TAG="FLVDemuxer",this._config=b,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=a.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=a.hasAudioTrack,this._hasVideo=a.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new i["default"],this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(c=new ArrayBuffer(2),new DataView(c).setInt16(0,256,!0),256===new Int16Array(c)[0])}return a.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,
this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},a.probe=function(a){var b=new Uint8Array(a),c={match:!1};if(70!==b[0]||76!==b[1]||86!==b[2]||1!==b[3])return c;var d,e,f=(4&b[4])>>>2!=0,g=0!=(1&b[4]),h=(d=b)[e=5]<<24|d[e+1]<<16|d[e+2]<<8|d[e+3];return h<9?c:{match:!0,consumed:h,dataOffset:h,hasAudioTrack:f,hasVideoTrack:g}},a.prototype.bindDataSource=function(a){return a.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(a.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(a){this._onTrackMetadata=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(a){this._onMediaInfo=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(a){this._onMetaDataArrived=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(a){this._onScriptDataArrived=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onError",{get:function(){return this._onError},set:function(a){this._onError=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(a){this._onDataAvailable=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(a){this._timestampBase=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"overridedDuration",{get:function(){return this._duration},set:function(a){this._durationOverrided=!0,this._duration=a,this._mediaInfo.duration=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"overridedHasAudio",{set:function(a){this._hasAudioFlagOverrided=!0,this._hasAudio=a,this._mediaInfo.hasAudio=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"overridedHasVideo",{set:function(a){this._hasVideoFlagOverrided=!0,this._hasVideo=a,this._mediaInfo.hasVideo=a},enumerable:!1,configurable:!0}),a.prototype.resetMediaInfo=function(){this._mediaInfo=new i["default"]},a.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},a.prototype.parseChunks=function(b,c){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new j.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var e=0,f=this._littleEndian;if(0===c){if(!(b.byteLength>13))return 0;e=a.probe(b).dataOffset}for(this._firstParse&&(this._firstParse=!1,c+e!==this._dataOffset&&d["default"].w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==(g=new DataView(b,e)).getUint32(0,!f)&&d["default"].w(this.TAG,"PrevTagSize0 !== 0 !!!"),e+=4);e<b.byteLength;){this._dispatch=!0;var g=new DataView(b,e);if(e+11+4>b.byteLength)break;var h=g.getUint8(0),i=16777215&g.getUint32(0,!f);if(e+11+i+4>b.byteLength)break;if(8===h||9===h||18===h){var k=g.getUint8(4),l=g.getUint8(5),m=g.getUint8(6)|l<<8|k<<16|g.getUint8(7)<<24;0!=(16777215&g.getUint32(7,!f))&&d["default"].w(this.TAG,"Meet tag which has StreamID != 0!");var n=e+11;switch(h){case 8:this._parseAudioData(b,n,i,m);break;case 9:this._parseVideoData(b,n,i,m,c+e);break;case 18:this._parseScriptData(b,n,i)}var o=g.getUint32(11+i,!f);o!==11+i&&d["default"].w(this.TAG,"Invalid PrevTagSize "+o),e+=11+i+4}else d["default"].w(this.TAG,"Unsupported tag type "+h+", skipped"),e+=11+i+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),e},a.prototype._parseScriptData=function(a,b,c){var f=e["default"].parseScriptData(a,b,c);if(f.hasOwnProperty("onMetaData")){if(null==f.onMetaData||"object"!=g(f.onMetaData))return void d["default"].w(this.TAG,"Invalid onMetaData structure!");this._metadata&&d["default"].w(this.TAG,"Found another onMetaData tag!"),this._metadata=f;var h=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},h)),"boolean"==typeof h.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=h.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof h.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=h.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof h.audiodatarate&&(this._mediaInfo.audioDataRate=h.audiodatarate),"number"==typeof h.videodatarate&&(this._mediaInfo.videoDataRate=h.videodatarate),"number"==typeof h.width&&(this._mediaInfo.width=h.width),"number"==typeof h.height&&(this._mediaInfo.height=h.height),"number"==typeof h.duration){if(!this._durationOverrided){var i=Math.floor(h.duration*this._timescale);this._duration=i,this._mediaInfo.duration=i}}else this._mediaInfo.duration=0;if("number"==typeof h.framerate){var j=Math.floor(1e3*h.framerate);if(j>0){var k=j/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=k,this._referenceFrameRate.fps_num=j,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=k}}if("object"==g(h.keyframes)){this._mediaInfo.hasKeyframesIndex=!0;var l=h.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(l),h.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=h,d["default"].v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(f).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},f))},a.prototype._parseKeyframesIndex=function(a){for(var b=[],c=[],d=1;d<a.times.length;d++){var e=this._timestampBase+Math.floor(1e3*a.times[d]);b.push(e),c.push(a.filepositions[d])}return{times:b,filepositions:c}},a.prototype._parseAudioData=function(a,b,c,e){if(c<=1)d["default"].w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var f=new DataView(a,b,c).getUint8(0),g=f>>>4;if(2===g||10===g){var i=0,j=(12&f)>>>2;if(j>=0&&j<=4){i=this._flvSoundRateTable[j];var k=1&f,l=this._audioMetadata,m=this._audioTrack;if(l||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(l=this._audioMetadata={}).type="audio",l.id=m.id,l.timescale=this._timescale,l.duration=this._duration,l.audioSampleRate=i,l.channelCount=0===k?1:2),10===g){var n=this._parseAACAudioData(a,b+1,c-1);if(null==n)return;if(0===n.packetType){l.config&&d["default"].w(this.TAG,"Found another AudioSpecificConfig!");var o=n.data;l.audioSampleRate=o.samplingRate,l.channelCount=o.channelCount,l.codec=o.codec,l.originalCodec=o.originalCodec,l.config=o.config,l.refSampleDuration=1024/l.audioSampleRate*l.timescale,d["default"].v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",l),(r=this._mediaInfo).audioCodec=l.originalCodec,r.audioSampleRate=l.audioSampleRate,r.audioChannelCount=l.channelCount,r.hasVideo?null!=r.videoCodec&&(r.mimeType='video/x-flv; codecs="'+r.videoCodec+","+r.audioCodec+'"'):r.mimeType='video/x-flv; codecs="'+r.audioCodec+'"',r.isComplete()&&this._onMediaInfo(r)}else if(1===n.packetType){var p=this._timestampBase+e,q={unit:n.data,length:n.data.byteLength,dts:p,pts:p};m.samples.push(q),m.length+=n.data.length}else d["default"].e(this.TAG,"Flv: Unsupported AAC data type "+n.packetType)}else if(2===g){if(!l.codec){var r;if(null==(o=this._parseMP3AudioData(a,b+1,c-1,!0)))return;l.audioSampleRate=o.samplingRate,l.channelCount=o.channelCount,l.codec=o.codec,l.originalCodec=o.originalCodec,l.refSampleDuration=1152/l.audioSampleRate*l.timescale,d["default"].v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",l),(r=this._mediaInfo).audioCodec=l.codec,r.audioSampleRate=l.audioSampleRate,r.audioChannelCount=l.channelCount,r.audioDataRate=o.bitRate,r.hasVideo?null!=r.videoCodec&&(r.mimeType='video/x-flv; codecs="'+r.videoCodec+","+r.audioCodec+'"'):r.mimeType='video/x-flv; codecs="'+r.audioCodec+'"',r.isComplete()&&this._onMediaInfo(r)}var s=this._parseMP3AudioData(a,b+1,c-1,!1);if(null==s)return;p=this._timestampBase+e;var t={unit:s,length:s.byteLength,dts:p,pts:p};m.samples.push(t),m.length+=s.length}}else this._onError(h["default"].FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+j)}else this._onError(h["default"].CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+g)}},a.prototype._parseAACAudioData=function(a,b,c){if(!(c<=1)){var e={},f=new Uint8Array(a,b,c);return e.packetType=f[0],0===f[0]?e.data=this._parseAACAudioSpecificConfig(a,b+1,c-1):e.data=f.subarray(1),e}d["default"].w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},a.prototype._parseAACAudioSpecificConfig=function(a,b,c){var d,e,f=new Uint8Array(a,b,c),g=null,i=0,j=null;if(i=d=f[0]>>>3,(e=(7&f[0])<<1|f[1]>>>7)<0||e>=this._mpegSamplingRates.length)this._onError(h["default"].FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var k=this._mpegSamplingRates[e],l=(120&f[1])>>>3;if(!(l<0||l>=8)){5===i&&(j=(7&f[1])<<1|f[2]>>>7,f[2]);var m=self.navigator.userAgent.toLowerCase();return-1!==m.indexOf("firefox")?e>=6?(i=5,g=new Array(4),j=e-3):(i=2,g=new Array(2),j=e):-1!==m.indexOf("android")?(i=2,g=new Array(2),j=e):(i=5,j=e,g=new Array(4),e>=6?j=e-3:1===l&&(i=2,g=new Array(2),j=e)),g[0]=i<<3,g[0]|=(15&e)>>>1,g[1]=(15&e)<<7,g[1]|=(15&l)<<3,5===i&&(g[1]|=(15&j)>>>1,g[2]=(1&j)<<7,g[2]|=8,g[3]=0),{config:g,samplingRate:k,channelCount:l,codec:"mp4a.40."+i,originalCodec:"mp4a.40."+d}}this._onError(h["default"].FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},a.prototype._parseMP3AudioData=function(a,b,c,e){if(!(c<4)){this._littleEndian;var f=new Uint8Array(a,b,c),g=null;if(e){if(255!==f[0])return;var h=f[1]>>>3&3,i=(6&f[1])>>1,j=(240&f[2])>>>4,k=(12&f[2])>>>2,l=3!=(f[3]>>>6&3)?2:1,m=0,n=0;switch(h){case 0:m=this._mpegAudioV25SampleRateTable[k];break;case 2:m=this._mpegAudioV20SampleRateTable[k];break;case 3:m=this._mpegAudioV10SampleRateTable[k]}switch(i){case 1:j<this._mpegAudioL3BitRateTable.length&&(n=this._mpegAudioL3BitRateTable[j]);break;case 2:j<this._mpegAudioL2BitRateTable.length&&(n=this._mpegAudioL2BitRateTable[j]);break;case 3:j<this._mpegAudioL1BitRateTable.length&&(n=this._mpegAudioL1BitRateTable[j])}g={bitRate:n,samplingRate:m,channelCount:l,codec:"mp3",originalCodec:"mp3"}}else g=f;return g}d["default"].w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},a.prototype._parseVideoData=function(a,b,c,e,f){if(c<=1)d["default"].w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else if(!0!==this._hasVideoFlagOverrided||!1!==this._hasVideo){var g=new Uint8Array(a,b,c)[0],i=(240&g)>>>4,j=15&g;7===j?this._parseAVCVideoPacket(a,b+1,c-1,e,f,i):this._onError(h["default"].CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+j)}},a.prototype._parseAVCVideoPacket=function(a,b,c,e,f,g){if(c<4)d["default"].w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var i=this._littleEndian,j=new DataView(a,b,c),k=j.getUint8(0),l=(16777215&j.getUint32(0,!i))<<8>>8;if(0===k)this._parseAVCDecoderConfigurationRecord(a,b+4,c-4);else if(1===k)this._parseAVCVideoData(a,b+4,c-4,e,f,g,l);else if(2!==k)return void this._onError(h["default"].FORMAT_ERROR,"Flv: Invalid video packet type "+k)}},a.prototype._parseAVCDecoderConfigurationRecord=function(a,b,c){if(c<7)d["default"].w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var e=this._videoMetadata,g=this._videoTrack,i=this._littleEndian,j=new DataView(a,b,c);e?void 0!==e.avcc&&d["default"].w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(e=this._videoMetadata={}).type="video",e.id=g.id,e.timescale=this._timescale,e.duration=this._duration);var k=j.getUint8(0),l=j.getUint8(1);if(j.getUint8(2),j.getUint8(3),1===k&&0!==l)if(this._naluLengthSize=1+(3&j.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var m=31&j.getUint8(5);if(0!==m){m>1&&d["default"].w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+m);for(var n=6,o=0;o<m;o++){var p=j.getUint16(n,!i);if(n+=2,0!==p){var q=new Uint8Array(a,b+n,p);n+=p;var r=f["default"].parseSPS(q);if(0===o){e.codecWidth=r.codec_size.width,e.codecHeight=r.codec_size.height,e.presentWidth=r.present_size.width,e.presentHeight=r.present_size.height,e.profile=r.profile_string,e.level=r.level_string,e.bitDepth=r.bit_depth,e.chromaFormat=r.chroma_format,e.sarRatio=r.sar_ratio,e.frameRate=r.frame_rate,!1!==r.frame_rate.fixed&&0!==r.frame_rate.fps_num&&0!==r.frame_rate.fps_den||(e.frameRate=this._referenceFrameRate);var s=e.frameRate.fps_den,t=e.frameRate.fps_num;e.refSampleDuration=e.timescale*(s/t);for(var u=q.subarray(1,4),v="avc1.",w=0;w<3;w++){var x=u[w].toString(16);x.length<2&&(x="0"+x),v+=x}e.codec=v;var y=this._mediaInfo;y.width=e.codecWidth,y.height=e.codecHeight,y.fps=e.frameRate.fps,y.profile=e.profile,y.level=e.level,y.refFrames=r.ref_frames,y.chromaFormat=r.chroma_format_string,y.sarNum=e.sarRatio.width,y.sarDen=e.sarRatio.height,y.videoCodec=v,y.hasAudio?null!=y.audioCodec&&(y.mimeType='video/x-flv; codecs="'+y.videoCodec+","+y.audioCodec+'"'):y.mimeType='video/x-flv; codecs="'+y.videoCodec+'"',y.isComplete()&&this._onMediaInfo(y)}}}var z=j.getUint8(n);if(0!==z){for(z>1&&d["default"].w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+z),n++,o=0;o<z;o++)p=j.getUint16(n,!i),n+=2,0!==p&&(n+=p);e.avcc=new Uint8Array(c),e.avcc.set(new Uint8Array(a,b,c),0),d["default"].v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",e)}else this._onError(h["default"].FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(h["default"].FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(h["default"].FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(h["default"].FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},a.prototype._parseAVCVideoData=function(a,b,c,e,f,g,h){for(var i=this._littleEndian,j=new DataView(a,b,c),k=[],l=0,m=0,n=this._naluLengthSize,o=this._timestampBase+e,p=1===g;m<c;){if(m+4>=c){d["default"].w(this.TAG,"Malformed Nalu near timestamp "+o+", offset = "+m+", dataSize = "+c);break}var q=j.getUint32(m,!i);if(3===n&&(q>>>=8),q>c-n)return void d["default"].w(this.TAG,"Malformed Nalus near timestamp "+o+", NaluSize > DataSize!");var r=31&j.getUint8(m+n);5===r&&(p=!0);var s=new Uint8Array(a,b+m,n+q),t={type:r,data:s};k.push(t),l+=s.byteLength,m+=n+q}if(k.length){var u=this._videoTrack,v={units:k,length:l,isKeyframe:p,dts:o,cts:h,pts:o+h};p&&(v.fileposition=f),u.samples.push(v),u.length+=l}},a}();b["default"]=k},"./src/demux/sps-parser.js":function(a,b,c){c.r(b);var d=c("./src/demux/exp-golomb.js"),e=function(){function a(){}return a._ebsp2rbsp=function(a){for(var b=a,c=b.byteLength,d=new Uint8Array(c),e=0,f=0;f<c;f++)f>=2&&3===b[f]&&0===b[f-1]&&0===b[f-2]||(d[e]=b[f],e++);return new Uint8Array(d.buffer,0,e)},a.parseSPS=function(b){var c=a._ebsp2rbsp(b),e=new d["default"](c);e.readByte();var f=e.readByte();e.readByte();var g=e.readByte();e.readUEG();var h=a.getProfileString(f),i=a.getLevelString(g),j=1,k=420,l=8;if((100===f||110===f||122===f||244===f||44===f||83===f||86===f||118===f||128===f||138===f||144===f)&&(3===(j=e.readUEG())&&e.readBits(1),j<=3&&(k=[0,420,422,444][j]),l=e.readUEG()+8,e.readUEG(),e.readBits(1),e.readBool()))for(var m=3!==j?8:12,n=0;n<m;n++)e.readBool()&&(n<6?a._skipScalingList(e,16):a._skipScalingList(e,64));e.readUEG();var o=e.readUEG();if(0===o)e.readUEG();else if(1===o){e.readBits(1),e.readSEG(),e.readSEG();var p=e.readUEG();for(n=0;n<p;n++)e.readSEG()}var q=e.readUEG();e.readBits(1);var r=e.readUEG(),s=e.readUEG(),t=e.readBits(1);0===t&&e.readBits(1),e.readBits(1);var u=0,v=0,w=0,x=0;e.readBool()&&(u=e.readUEG(),v=e.readUEG(),w=e.readUEG(),x=e.readUEG());var y=1,z=1,A=0,B=!0,C=0,D=0;if(e.readBool()){if(e.readBool()){var E=e.readByte();E>0&&E<16?(y=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][E-1],z=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][E-1]):255===E&&(y=e.readByte()<<8|e.readByte(),z=e.readByte()<<8|e.readByte())}if(e.readBool()&&e.readBool(),e.readBool()&&(e.readBits(4),e.readBool()&&e.readBits(24)),e.readBool()&&(e.readUEG(),e.readUEG()),e.readBool()){var F=e.readBits(32),G=e.readBits(32);B=e.readBool(),A=(C=G)/(D=2*F)}}var H=1;1===y&&1===z||(H=y/z);var I=0,J=0;0===j?(I=1,J=2-t):(I=3===j?1:2,J=(1===j?2:1)*(2-t));var K=16*(r+1),L=16*(s+1)*(2-t);K-=(u+v)*I,L-=(w+x)*J;var M=Math.ceil(K*H);return e.destroy(),e=null,{profile_string:h,level_string:i,bit_depth:l,ref_frames:q,chroma_format:k,chroma_format_string:a.getChromaFormatString(k),frame_rate:{fixed:B,fps:A,fps_den:D,fps_num:C},sar_ratio:{width:y,height:z},codec_size:{width:K,height:L},present_size:{width:M,height:L}}},a._skipScalingList=function(a,b){for(var c=8,d=8,e=0;e<b;e++)0!==d&&(d=(c+a.readSEG()+256)%256),c=0===d?c:d},a.getProfileString=function(a){switch(a){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},a.getLevelString=function(a){return(a/10).toFixed(1)},a.getChromaFormatString=function(a){switch(a){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},a}();b["default"]=e},"./src/flv.js":function(a,b,c){c.r(b);var d=c("./src/utils/polyfill.js"),e=c("./src/core/features.js"),f=c("./src/io/loader.js"),h=c("./src/player/flv-player.js"),i=c("./src/player/native-player.js"),j=c("./src/player/player-events.js"),k=c("./src/player/player-errors.js"),l=c("./src/utils/logging-control.js"),m=c("./src/utils/exception.js");d["default"].install();var n={createPlayer:function(a,b){var c=a;if(null==c||"object"!=(void 0===c?"undefined":g(c)))throw new m.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!c.hasOwnProperty("type"))throw new m.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(c.type){case"flv":return new h["default"](c,b);default:return new i["default"](c,b)}},isSupported:function(){return e["default"].supportMSEH264Playback()},getFeatureList:function(){return e["default"].getFeatureList()}};n.BaseLoader=f.BaseLoader,n.LoaderStatus=f.LoaderStatus,n.LoaderErrors=f.LoaderErrors,n.Events=j["default"],n.ErrorTypes=k.ErrorTypes,n.ErrorDetails=k.ErrorDetails,n.FlvPlayer=h["default"],n.NativePlayer=i["default"],n.LoggingControl=l["default"],Object.defineProperty(n,"version",{enumerable:!0,get:function(){return"1.6.2"}}),b["default"]=n},"./src/index.js":function(a,b,c){a.exports=c("./src/flv.js")["default"]},"./src/io/fetch-stream-loader.js":function(a,b,c){c.r(b);var d,e=c("./src/utils/browser.js"),f=c("./src/io/loader.js"),h=c("./src/utils/exception.js"),i=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),j=function(a){function b(b,c){var d=a.call(this,"fetch-stream-loader")||this;return d.TAG="FetchStreamLoader",d._seekHandler=b,d._config=c,d._needStash=!0,d._requestAbort=!1,d._contentLength=null,d._receivedLength=0,d}return i(b,a),b.isSupported=function(){try{var a=e["default"].msedge&&e["default"].version.minor>=15048,b=!e["default"].msedge||a;return self.fetch&&self.ReadableStream&&b}catch(a){return!1}},b.prototype.destroy=function(){this.isWorking()&&this.abort(),a.prototype.destroy.call(this)},b.prototype.open=function(a,b){var c=this;this._dataSource=a,this._range=b;var d=a.url;this._config.reuseRedirectedURL&&null!=a.redirectedURL&&(d=a.redirectedURL);var e=this._seekHandler.getConfig(d,b),i=new self.Headers;if("object"==g(e.headers)){var j=e.headers;for(var k in j)j.hasOwnProperty(k)&&i.append(k,j[k])}var l={method:"GET",headers:i,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"==g(this._config.headers))for(var k in this._config.headers)i.append(k,this._config.headers[k]);!1===a.cors&&(l.mode="same-origin"),a.withCredentials&&(l.credentials="include"),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,l.signal=this._abortController.signal),this._status=f.LoaderStatus.kConnecting,self.fetch(e.url,l).then(function(a){if(c._requestAbort)return c._status=f.LoaderStatus.kIdle,void a.body.cancel();if(a.ok&&a.status>=200&&a.status<=299){if(a.url!==e.url&&c._onURLRedirect){var b=c._seekHandler.removeURLParameters(a.url);c._onURLRedirect(b)}var d=a.headers.get("Content-Length");return null!=d&&(c._contentLength=parseInt(d),0!==c._contentLength&&c._onContentLengthKnown&&c._onContentLengthKnown(c._contentLength)),c._pump.call(c,a.body.getReader())}if(c._status=f.LoaderStatus.kError,!c._onError)throw new h.RuntimeException("FetchStreamLoader: Http code invalid, "+a.status+" "+a.statusText);c._onError(f.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:a.status,msg:a.statusText})})["catch"](function(a){if(!c._abortController||!c._abortController.signal.aborted){if(c._status=f.LoaderStatus.kError,!c._onError)throw a;c._onError(f.LoaderErrors.EXCEPTION,{code:-1,msg:a.message})}})},b.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==f.LoaderStatus.kBuffering||!e["default"].chrome)&&this._abortController)try{this._abortController.abort()}catch(a){}},b.prototype._pump=function(a){var b=this;return a.read().then(function(c){if(c.done)if(null!==b._contentLength&&b._receivedLength<b._contentLength){b._status=f.LoaderStatus.kError;var d=f.LoaderErrors.EARLY_EOF,e={code:-1,msg:"Fetch stream meet Early-EOF"};if(!b._onError)throw new h.RuntimeException(e.msg);b._onError(d,e)}else b._status=f.LoaderStatus.kComplete,b._onComplete&&b._onComplete(b._range.from,b._range.from+b._receivedLength-1);else{if(b._abortController&&b._abortController.signal.aborted)return void(b._status=f.LoaderStatus.kComplete);if(!0===b._requestAbort)return b._status=f.LoaderStatus.kComplete,a.cancel();b._status=f.LoaderStatus.kBuffering;var g=c.value.buffer,i=b._range.from+b._receivedLength;b._receivedLength+=g.byteLength,b._onDataArrival&&b._onDataArrival(g,i,b._receivedLength),b._pump(a)}})["catch"](function(a){if(b._abortController&&b._abortController.signal.aborted)b._status=f.LoaderStatus.kComplete;else if(11!==a.code||!e["default"].msedge){b._status=f.LoaderStatus.kError;var c=0,d=null;if(19!==a.code&&"network error"!==a.message||!(null===b._contentLength||null!==b._contentLength&&b._receivedLength<b._contentLength)?(c=f.LoaderErrors.EXCEPTION,d={code:a.code,msg:a.message}):(c=f.LoaderErrors.EARLY_EOF,d={code:a.code,msg:"Fetch stream meet Early-EOF"}),!b._onError)throw new h.RuntimeException(d.msg);b._onError(c,d)}})},b}(f.BaseLoader);b["default"]=j},"./src/io/io-controller.js":function(a,b,c){c.r(b);var d=c("./src/utils/logger.js"),e=c("./src/io/speed-sampler.js"),f=c("./src/io/loader.js"),g=c("./src/io/fetch-stream-loader.js"),h=c("./src/io/xhr-moz-chunked-loader.js"),i=c("./src/io/xhr-range-loader.js"),j=c("./src/io/websocket-loader.js"),k=c("./src/io/range-seek-handler.js"),l=c("./src/io/param-seek-handler.js"),m=c("./src/utils/exception.js"),n=function(){function a(a,b,c){this.TAG="IOController",this._config=b,this._extraData=c,this._stashInitialSize=393216,null!=b.stashInitialSize&&b.stashInitialSize>0&&(this._stashInitialSize=b.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,!1===b.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=a,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(a.url),this._refTotalLength=a.filesize?a.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new e["default"],this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return a.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},a.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},a.prototype.isPaused=function(){return this._paused},Object.defineProperty(a.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"extraData",{get:function(){return this._extraData},set:function(a){this._extraData=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(a){this._onDataArrival=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(a){this._onSeeked=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onError",{get:function(){return this._onError},set:function(a){this._onError=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onComplete",{get:function(){return this._onComplete},set:function(a){this._onComplete=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(a){this._onRedirect=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(a){this._onRecoveredEarlyEof=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentSpeed",{get:function(){return this._loaderClass===i["default"]?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),a.prototype._selectSeekHandler=function(){var a=this._config;if("range"===a.seekType)this._seekHandler=new k["default"](this._config.rangeLoadZeroStart);else if("param"===a.seekType){var b=a.seekParamStart||"bstart",c=a.seekParamEnd||"bend";this._seekHandler=new l["default"](b,c)}else{if("custom"!==a.seekType)throw new m.InvalidArgumentException("Invalid seekType in config: "+a.seekType);if("function"!=typeof a.customSeekHandler)throw new m.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new a.customSeekHandler}},a.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=j["default"];else if(g["default"].isSupported())this._loaderClass=g["default"];else if(h["default"].isSupported())this._loaderClass=h["default"];else{if(!i["default"].isSupported())throw new m.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=i["default"]}},a.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},a.prototype.open=function(a){this._currentRange={from:0,to:-1},a&&(this._currentRange.from=a),this._speedSampler.reset(),a||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},a.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},a.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},a.prototype.resume=function(){if(this._paused){this._paused=!1;var a=this._resumeFrom;this._resumeFrom=0,this._internalSeek(a,!0)}},a.prototype.seek=function(a){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(a,!0)},a.prototype._internalSeek=function(a,b){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(b),this._loader.destroy(),this._loader=null;var c={from:a,to:-1};this._currentRange={from:c.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,c),this._onSeeked&&this._onSeeked()},a.prototype.updateUrl=function(a){if(!a||"string"!=typeof a||0===a.length)throw new m.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=a},a.prototype._expandBuffer=function(a){for(var b=this._stashSize;b+1048576<a;)b*=2;if((b+=1048576)!==this._bufferSize){var c=new ArrayBuffer(b);if(this._stashUsed>0){var d=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(c,0,b).set(d,0)}this._stashBuffer=c,this._bufferSize=b}},a.prototype._normalizeSpeed=function(a){var b=this._speedNormalizeList,c=b.length-1,d=0,e=0,f=c;if(a<b[0])return b[0];for(;e<=f;){if((d=e+Math.floor((f-e)/2))===c||a>=b[d]&&a<b[d+1])return b[d];b[d]<a?e=d+1:f=d-1}},a.prototype._adjustStashSize=function(a){var b=0;(b=this._config.isLive||a<512?a:a>=512&&a<=1024?Math.floor(1.5*a):2*a)>8192&&(b=8192);var c=1024*b+1048576;this._bufferSize<c&&this._expandBuffer(c),this._stashSize=1024*b},a.prototype._dispatchChunks=function(a,b){
return this._currentRange.to=b+a.byteLength-1,this._onDataArrival(a,b)},a.prototype._onURLRedirect=function(a){this._redirectedURL=a,this._onRedirect&&this._onRedirect(a)},a.prototype._onContentLengthKnown=function(a){a&&this._fullRequestFlag&&(this._totalLength=a,this._fullRequestFlag=!1)},a.prototype._onLoaderChunkArrival=function(a,b,c){if(!this._onDataArrival)throw new m.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(a.byteLength);var d=this._speedSampler.lastSecondKBps;if(0!==d){var e=this._normalizeSpeed(d);this._speedNormalized!==e&&(this._speedNormalized=e,this._adjustStashSize(e))}if(this._enableStash)if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=b),this._stashUsed+a.byteLength<=this._stashSize)(h=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(a),this._stashUsed),this._stashUsed+=a.byteLength;else if(h=new Uint8Array(this._stashBuffer,0,this._bufferSize),this._stashUsed>0){var f=this._stashBuffer.slice(0,this._stashUsed);(i=this._dispatchChunks(f,this._stashByteStart))<f.byteLength?i>0&&(j=new Uint8Array(f,i),h.set(j,0),this._stashUsed=j.byteLength,this._stashByteStart+=i):(this._stashUsed=0,this._stashByteStart+=i),this._stashUsed+a.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+a.byteLength),h=new Uint8Array(this._stashBuffer,0,this._bufferSize)),h.set(new Uint8Array(a),this._stashUsed),this._stashUsed+=a.byteLength}else(i=this._dispatchChunks(a,b))<a.byteLength&&((g=a.byteLength-i)>this._bufferSize&&(this._expandBuffer(g),h=new Uint8Array(this._stashBuffer,0,this._bufferSize)),h.set(new Uint8Array(a,i),0),this._stashUsed+=g,this._stashByteStart=b+i);else if(0===this._stashUsed){var g;(i=this._dispatchChunks(a,b))<a.byteLength&&((g=a.byteLength-i)>this._bufferSize&&this._expandBuffer(g),(h=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(a,i),0),this._stashUsed+=g,this._stashByteStart=b+i)}else{var h,i;if(this._stashUsed+a.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+a.byteLength),(h=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(a),this._stashUsed),this._stashUsed+=a.byteLength,(i=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&i>0){var j=new Uint8Array(this._stashBuffer,i);h.set(j,0)}this._stashUsed-=i,this._stashByteStart+=i}}},a.prototype._flushStashBuffer=function(a){if(this._stashUsed>0){var b=this._stashBuffer.slice(0,this._stashUsed),c=this._dispatchChunks(b,this._stashByteStart),e=b.byteLength-c;if(c<b.byteLength){if(!a){if(c>0){var f=new Uint8Array(this._stashBuffer,0,this._bufferSize),g=new Uint8Array(b,c);f.set(g,0),this._stashUsed=g.byteLength,this._stashByteStart+=c}return 0}d["default"].w(this.TAG,e+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,e}return 0},a.prototype._onLoaderComplete=function(a,b){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},a.prototype._onLoaderError=function(a,b){switch(d["default"].e(this.TAG,"Loader error, code = "+b.code+", msg = "+b.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,a=f.LoaderErrors.UNRECOVERABLE_EARLY_EOF),a){case f.LoaderErrors.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var c=this._currentRange.to+1;return void(c<this._totalLength&&(d["default"].w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(c,!1)))}a=f.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break;case f.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case f.LoaderErrors.CONNECTING_TIMEOUT:case f.LoaderErrors.HTTP_STATUS_CODE_INVALID:case f.LoaderErrors.EXCEPTION:}if(!this._onError)throw new m.RuntimeException("IOException: "+b.msg);this._onError(a,b)},a}();b["default"]=n},"./src/io/loader.js":function(a,b,c){c.r(b),c.d(b,{LoaderStatus:function(){return e},LoaderErrors:function(){return f},BaseLoader:function(){return g}});var d=c("./src/utils/exception.js"),e={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},f={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},g=function(){function a(a){this._type=a||"undefined",this._status=e.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return a.prototype.destroy=function(){this._status=e.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},a.prototype.isWorking=function(){return this._status===e.kConnecting||this._status===e.kBuffering},Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(a){this._onContentLengthKnown=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(a){this._onURLRedirect=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(a){this._onDataArrival=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onError",{get:function(){return this._onError},set:function(a){this._onError=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onComplete",{get:function(){return this._onComplete},set:function(a){this._onComplete=a},enumerable:!1,configurable:!0}),a.prototype.open=function(a,b){throw new d.NotImplementedException("Unimplemented abstract function!")},a.prototype.abort=function(){throw new d.NotImplementedException("Unimplemented abstract function!")},a}()},"./src/io/param-seek-handler.js":function(a,b,c){c.r(b);var d=function(){function a(a,b){this._startName=a,this._endName=b}return a.prototype.getConfig=function(a,b){var c=a;if(0!==b.from||-1!==b.to){var d=!0;-1===c.indexOf("?")&&(c+="?",d=!1),d&&(c+="&"),c+=this._startName+"="+b.from.toString(),-1!==b.to&&(c+="&"+this._endName+"="+b.to.toString())}return{url:c,headers:{}}},a.prototype.removeURLParameters=function(a){var b=a.split("?")[0],c=void 0,d=a.indexOf("?");-1!==d&&(c=a.substring(d+1));var e="";if(null!=c&&c.length>0)for(var f=c.split("&"),g=0;g<f.length;g++){var h=f[g].split("="),i=g>0;h[0]!==this._startName&&h[0]!==this._endName&&(i&&(e+="&"),e+=f[g])}return 0===e.length?b:b+"?"+e},a}();b["default"]=d},"./src/io/range-seek-handler.js":function(a,b,c){c.r(b);var d=function(){function a(a){this._zeroStart=a||!1}return a.prototype.getConfig=function(a,b){var c={};if(0!==b.from||-1!==b.to){var d=void 0;d=-1!==b.to?"bytes="+b.from.toString()+"-"+b.to.toString():"bytes="+b.from.toString()+"-",c.Range=d}else this._zeroStart&&(c.Range="bytes=0-");return{url:a,headers:c}},a.prototype.removeURLParameters=function(a){return a},a}();b["default"]=d},"./src/io/speed-sampler.js":function(a,b,c){c.r(b);var d=function(){function a(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return a.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},a.prototype.addBytes=function(a){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=a,this._totalBytes+=a):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=a,this._totalBytes+=a):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=a,this._totalBytes+=a,this._lastCheckpoint=this._now())},Object.defineProperty(a.prototype,"currentKBps",{get:function(){this.addBytes(0);var a=(this._now()-this._lastCheckpoint)/1e3;return 0==a&&(a=1),this._intervalBytes/a/1024},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"averageKBps",{get:function(){var a=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/a/1024},enumerable:!1,configurable:!0}),a}();b["default"]=d},"./src/io/websocket-loader.js":function(a,b,c){c.r(b);var d,e=c("./src/io/loader.js"),f=c("./src/utils/exception.js"),g=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),h=function(a){function b(){var b=a.call(this,"websocket-loader")||this;return b.TAG="WebSocketLoader",b._needStash=!0,b._ws=null,b._requestAbort=!1,b._receivedLength=0,b}return g(b,a),b.isSupported=function(){try{return void 0!==self.WebSocket}catch(a){return!1}},b.prototype.destroy=function(){this._ws&&this.abort(),a.prototype.destroy.call(this)},b.prototype.open=function(a){try{var b=this._ws=new self.WebSocket(a.url);b.binaryType="arraybuffer",b.onopen=this._onWebSocketOpen.bind(this),b.onclose=this._onWebSocketClose.bind(this),b.onmessage=this._onWebSocketMessage.bind(this),b.onerror=this._onWebSocketError.bind(this),this._status=e.LoaderStatus.kConnecting}catch(a){this._status=e.LoaderStatus.kError;var c={code:a.code,msg:a.message};if(!this._onError)throw new f.RuntimeException(c.msg);this._onError(e.LoaderErrors.EXCEPTION,c)}},b.prototype.abort=function(){var a=this._ws;!a||0!==a.readyState&&1!==a.readyState||(this._requestAbort=!0,a.close()),this._ws=null,this._status=e.LoaderStatus.kComplete},b.prototype._onWebSocketOpen=function(a){this._status=e.LoaderStatus.kBuffering},b.prototype._onWebSocketClose=function(a){!0!==this._requestAbort?(this._status=e.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},b.prototype._onWebSocketMessage=function(a){var b=this;if(a.data instanceof ArrayBuffer)this._dispatchArrayBuffer(a.data);else if(a.data instanceof Blob){var c=new FileReader;c.onload=function(){b._dispatchArrayBuffer(c.result)},c.readAsArrayBuffer(a.data)}else{this._status=e.LoaderStatus.kError;var d={code:-1,msg:"Unsupported WebSocket message type: "+a.data.constructor.name};if(!this._onError)throw new f.RuntimeException(d.msg);this._onError(e.LoaderErrors.EXCEPTION,d)}},b.prototype._dispatchArrayBuffer=function(a){var b=a,c=this._receivedLength;this._receivedLength+=b.byteLength,this._onDataArrival&&this._onDataArrival(b,c,this._receivedLength)},b.prototype._onWebSocketError=function(a){this._status=e.LoaderStatus.kError;var b={code:a.code,msg:a.message};if(!this._onError)throw new f.RuntimeException(b.msg);this._onError(e.LoaderErrors.EXCEPTION,b)},b}(e.BaseLoader);b["default"]=h},"./src/io/xhr-moz-chunked-loader.js":function(a,b,c){c.r(b);var d,e=c("./src/utils/logger.js"),f=c("./src/io/loader.js"),h=c("./src/utils/exception.js"),i=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),j=function(a){function b(b,c){var d=a.call(this,"xhr-moz-chunked-loader")||this;return d.TAG="MozChunkedLoader",d._seekHandler=b,d._config=c,d._needStash=!0,d._xhr=null,d._requestAbort=!1,d._contentLength=null,d._receivedLength=0,d}return i(b,a),b.isSupported=function(){try{var a=new XMLHttpRequest;return a.open("GET","https://example.com",!0),a.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===a.responseType}catch(a){return e["default"].w("MozChunkedLoader",a.message),!1}},b.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),a.prototype.destroy.call(this)},b.prototype.open=function(a,b){this._dataSource=a,this._range=b;var c=a.url;this._config.reuseRedirectedURL&&null!=a.redirectedURL&&(c=a.redirectedURL);var d=this._seekHandler.getConfig(c,b);this._requestURL=d.url;var e=this._xhr=new XMLHttpRequest;if(e.open("GET",d.url,!0),e.responseType="moz-chunked-arraybuffer",e.onreadystatechange=this._onReadyStateChange.bind(this),e.onprogress=this._onProgress.bind(this),e.onloadend=this._onLoadEnd.bind(this),e.onerror=this._onXhrError.bind(this),a.withCredentials&&(e.withCredentials=!0),"object"==g(d.headers)){var h=d.headers;for(var i in h)h.hasOwnProperty(i)&&e.setRequestHeader(i,h[i])}if("object"==g(this._config.headers))for(var i in h=this._config.headers)h.hasOwnProperty(i)&&e.setRequestHeader(i,h[i]);this._status=f.LoaderStatus.kConnecting,e.send()},b.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=f.LoaderStatus.kComplete},b.prototype._onReadyStateChange=function(a){var b=a.target;if(2===b.readyState){if(null!=b.responseURL&&b.responseURL!==this._requestURL&&this._onURLRedirect){var c=this._seekHandler.removeURLParameters(b.responseURL);this._onURLRedirect(c)}if(0!==b.status&&(b.status<200||b.status>299)){if(this._status=f.LoaderStatus.kError,!this._onError)throw new h.RuntimeException("MozChunkedLoader: Http code invalid, "+b.status+" "+b.statusText);this._onError(f.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:b.status,msg:b.statusText})}else this._status=f.LoaderStatus.kBuffering}},b.prototype._onProgress=function(a){if(this._status!==f.LoaderStatus.kError){null===this._contentLength&&null!==a.total&&0!==a.total&&(this._contentLength=a.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var b=a.target.response,c=this._range.from+this._receivedLength;this._receivedLength+=b.byteLength,this._onDataArrival&&this._onDataArrival(b,c,this._receivedLength)}},b.prototype._onLoadEnd=function(a){!0!==this._requestAbort?this._status!==f.LoaderStatus.kError&&(this._status=f.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1},b.prototype._onXhrError=function(a){this._status=f.LoaderStatus.kError;var b=0,c=null;if(this._contentLength&&a.loaded<this._contentLength?(b=f.LoaderErrors.EARLY_EOF,c={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(b=f.LoaderErrors.EXCEPTION,c={code:-1,msg:a.constructor.name+" "+a.type}),!this._onError)throw new h.RuntimeException(c.msg);this._onError(b,c)},b}(f.BaseLoader);b["default"]=j},"./src/io/xhr-range-loader.js":function(a,b,c){c.r(b);var d,e=c("./src/utils/logger.js"),f=c("./src/io/speed-sampler.js"),h=c("./src/io/loader.js"),i=c("./src/utils/exception.js"),j=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),k=function(a){function b(b,c){var d=a.call(this,"xhr-range-loader")||this;return d.TAG="RangeLoader",d._seekHandler=b,d._config=c,d._needStash=!1,d._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],d._currentChunkSizeKB=384,d._currentSpeedNormalized=0,d._zeroSpeedChunkCount=0,d._xhr=null,d._speedSampler=new f["default"],d._requestAbort=!1,d._waitForTotalLength=!1,d._totalLengthReceived=!1,d._currentRequestURL=null,d._currentRedirectedURL=null,d._currentRequestRange=null,d._totalLength=null,d._contentLength=null,d._receivedLength=0,d._lastTimeLoaded=0,d}return j(b,a),b.isSupported=function(){try{var a=new XMLHttpRequest;return a.open("GET","https://example.com",!0),a.responseType="arraybuffer","arraybuffer"===a.responseType}catch(a){return e["default"].w("RangeLoader",a.message),!1}},b.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),a.prototype.destroy.call(this)},Object.defineProperty(b.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),b.prototype.open=function(a,b){this._dataSource=a,this._range=b,this._status=h.LoaderStatus.kConnecting;var c=!1;null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(c=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||c?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},b.prototype._openSubRange=function(){var a=1024*this._currentChunkSizeKB,b=this._range.from+this._receivedLength,c=b+a;null!=this._contentLength&&c-this._range.from>=this._contentLength&&(c=this._range.from+this._contentLength-1),this._currentRequestRange={from:b,to:c},this._internalOpen(this._dataSource,this._currentRequestRange)},b.prototype._internalOpen=function(a,b){this._lastTimeLoaded=0;var c=a.url;this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?c=this._currentRedirectedURL:null!=a.redirectedURL&&(c=a.redirectedURL));var d=this._seekHandler.getConfig(c,b);this._currentRequestURL=d.url;var e=this._xhr=new XMLHttpRequest;if(e.open("GET",d.url,!0),e.responseType="arraybuffer",e.onreadystatechange=this._onReadyStateChange.bind(this),e.onprogress=this._onProgress.bind(this),e.onload=this._onLoad.bind(this),e.onerror=this._onXhrError.bind(this),a.withCredentials&&(e.withCredentials=!0),"object"==g(d.headers)){var f=d.headers;for(var h in f)f.hasOwnProperty(h)&&e.setRequestHeader(h,f[h])}if("object"==g(this._config.headers))for(var h in f=this._config.headers)f.hasOwnProperty(h)&&e.setRequestHeader(h,f[h]);e.send()},b.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=h.LoaderStatus.kComplete},b.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},b.prototype._onReadyStateChange=function(a){var b=a.target;if(2===b.readyState){if(null!=b.responseURL){var c=this._seekHandler.removeURLParameters(b.responseURL);b.responseURL!==this._currentRequestURL&&c!==this._currentRedirectedURL&&(this._currentRedirectedURL=c,this._onURLRedirect&&this._onURLRedirect(c))}if(b.status>=200&&b.status<=299){if(this._waitForTotalLength)return;this._status=h.LoaderStatus.kBuffering}else{if(this._status=h.LoaderStatus.kError,!this._onError)throw new i.RuntimeException("RangeLoader: Http code invalid, "+b.status+" "+b.statusText);this._onError(h.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:b.status,msg:b.statusText})}}},b.prototype._onProgress=function(a){if(this._status!==h.LoaderStatus.kError){if(null===this._contentLength){var b=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,b=!0;var c=a.total;this._internalAbort(),null!=c&0!==c&&(this._totalLength=c)}if(-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,b)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var d=a.loaded-this._lastTimeLoaded;this._lastTimeLoaded=a.loaded,this._speedSampler.addBytes(d)}},b.prototype._normalizeSpeed=function(a){var b=this._chunkSizeKBList,c=b.length-1,d=0,e=0,f=c;if(a<b[0])return b[0];for(;e<=f;){if((d=e+Math.floor((f-e)/2))===c||a>=b[d]&&a<b[d+1])return b[d];b[d]<a?e=d+1:f=d-1}},b.prototype._onLoad=function(a){if(this._status!==h.LoaderStatus.kError)if(this._waitForTotalLength)this._waitForTotalLength=!1;else{this._lastTimeLoaded=0;var b=this._speedSampler.lastSecondKBps;if(0===b&&++this._zeroSpeedChunkCount>=3&&(b=this._speedSampler.currentKBps),0!==b){var c=this._normalizeSpeed(b);this._currentSpeedNormalized!==c&&(this._currentSpeedNormalized=c,this._currentChunkSizeKB=c)}var d=a.target.response,e=this._range.from+this._receivedLength;this._receivedLength+=d.byteLength;var f=!1;null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():f=!0,this._onDataArrival&&this._onDataArrival(d,e,this._receivedLength),f&&(this._status=h.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},b.prototype._onXhrError=function(a){this._status=h.LoaderStatus.kError;var b=0,c=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(b=h.LoaderErrors.EARLY_EOF,c={code:-1,msg:"RangeLoader meet Early-Eof"}):(b=h.LoaderErrors.EXCEPTION,c={code:-1,msg:a.constructor.name+" "+a.type}),!this._onError)throw new i.RuntimeException(c.msg);this._onError(b,c)},b}(h.BaseLoader);b["default"]=k},"./src/player/flv-player.js":function(a,b,c){c.r(b);var d=c("./node_modules/events/events.js"),e=c.n(d),f=c("./src/utils/logger.js"),h=c("./src/utils/browser.js"),i=c("./src/player/player-events.js"),j=c("./src/core/transmuxer.js"),k=c("./src/core/transmuxing-events.js"),l=c("./src/core/mse-controller.js"),m=c("./src/core/mse-events.js"),n=c("./src/player/player-errors.js"),o=c("./src/config.js"),p=c("./src/utils/exception.js"),q=function(){function a(a,b){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(e()),this._config=(0,o.createDefaultConfig)(),"object"==(void 0===b?"undefined":g(b))&&Object.assign(this._config,b),"flv"!==a.type.toLowerCase())throw new p.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");!0===a.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=a,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var c=h["default"].chrome&&(h["default"].version.major<50||50===h["default"].version.major&&h["default"].version.build<2661);this._alwaysSeekKeyframe=!!(c||h["default"].msedge||h["default"].msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return a.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},a.prototype.on=function(a,b){var c=this;a===i["default"].MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then(function(){c._emitter.emit(i["default"].MEDIA_INFO,c.mediaInfo)}):a===i["default"].STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then(function(){c._emitter.emit(i["default"].STATISTICS_INFO,c.statisticsInfo)}),this._emitter.addListener(a,b)},a.prototype.off=function(a,b){this._emitter.removeListener(a,b)},a.prototype.attachMediaElement=function(a){var b=this;if(this._mediaElement=a,a.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),a.addEventListener("seeking",this.e.onvSeeking),a.addEventListener("canplay",this.e.onvCanPlay),a.addEventListener("stalled",this.e.onvStalled),a.addEventListener("progress",this.e.onvProgress),this._msectl=new l["default"](this._config),this._msectl.on(m["default"].UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(m["default"].BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(m["default"].SOURCE_OPEN,function(){b._mseSourceOpened=!0,b._hasPendingLoad&&(b._hasPendingLoad=!1,b.load())}),this._msectl.on(m["default"].ERROR,function(a){b._emitter.emit(i["default"].ERROR,n.ErrorTypes.MEDIA_ERROR,n.ErrorDetails.MEDIA_MSE_ERROR,a)}),this._msectl.attachMediaElement(a),null!=this._pendingSeekTime)try{a.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(a){}},a.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},a.prototype.load=function(){var a=this;if(!this._mediaElement)throw new p.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new p.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new j["default"](this._mediaDataSource,this._config),this._transmuxer.on(k["default"].INIT_SEGMENT,function(b,c){a._msectl.appendInitSegment(c)}),this._transmuxer.on(k["default"].MEDIA_SEGMENT,function(b,c){if(a._msectl.appendMediaSegment(c),a._config.lazyLoad&&!a._config.isLive){var d=a._mediaElement.currentTime;c.info.endDts>=1e3*(d+a._config.lazyLoadMaxDuration)&&null==a._progressChecker&&(f["default"].v(a.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),a._suspendTransmuxer())}}),this._transmuxer.on(k["default"].LOADING_COMPLETE,function(){a._msectl.endOfStream(),a._emitter.emit(i["default"].LOADING_COMPLETE)}),this._transmuxer.on(k["default"].RECOVERED_EARLY_EOF,function(){a._emitter.emit(i["default"].RECOVERED_EARLY_EOF)}),this._transmuxer.on(k["default"].IO_ERROR,function(b,c){a._emitter.emit(i["default"].ERROR,n.ErrorTypes.NETWORK_ERROR,b,c)}),this._transmuxer.on(k["default"].DEMUX_ERROR,function(b,c){a._emitter.emit(i["default"].ERROR,n.ErrorTypes.MEDIA_ERROR,b,{code:-1,msg:c})}),this._transmuxer.on(k["default"].MEDIA_INFO,function(b){a._mediaInfo=b,a._emitter.emit(i["default"].MEDIA_INFO,Object.assign({},b))}),this._transmuxer.on(k["default"].METADATA_ARRIVED,function(b){a._emitter.emit(i["default"].METADATA_ARRIVED,b)}),this._transmuxer.on(k["default"].SCRIPTDATA_ARRIVED,function(b){a._emitter.emit(i["default"].SCRIPTDATA_ARRIVED,b)}),this._transmuxer.on(k["default"].STATISTICS_INFO,function(b){a._statisticsInfo=a._fillStatisticsInfo(b),a._emitter.emit(i["default"].STATISTICS_INFO,Object.assign({},a._statisticsInfo))}),this._transmuxer.on(k["default"].RECOMMEND_SEEKPOINT,function(b){a._mediaElement&&!a._config.accurateSeek&&(a._requestSetTime=!0,a._mediaElement.currentTime=b/1e3)}),this._transmuxer.open()))},a.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},a.prototype.play=function(){return this._mediaElement.play()},a.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(a){this._mediaElement.volume=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(a){this._mediaElement.muted=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(a){this._mediaElement?this._internalSeek(a):this._pendingSeekTime=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),a.prototype._fillStatisticsInfo=function(a){if(a.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return a;var b=!0,c=0,d=0;if(this._mediaElement.getVideoPlaybackQuality){var e=this._mediaElement.getVideoPlaybackQuality();c=e.totalVideoFrames,d=e.droppedVideoFrames}else null!=this._mediaElement.webkitDecodedFrameCount?(c=this._mediaElement.webkitDecodedFrameCount,d=this._mediaElement.webkitDroppedFrameCount):b=!1;return b&&(a.decodedFrames=c,a.droppedFrames=d),a},a.prototype._onmseUpdateEnd=function(){if(this._config.lazyLoad&&!this._config.isLive){for(var a=this._mediaElement.buffered,b=this._mediaElement.currentTime,c=0,d=0;d<a.length;d++){var e=a.start(d),g=a.end(d);if(e<=b&&b<g){c=g;break}}c>=b+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(f["default"].v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},a.prototype._onmseBufferFull=function(){f["default"].v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()},a.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},a.prototype._checkProgressAndResume=function(){for(var a=this._mediaElement.currentTime,b=this._mediaElement.buffered,c=!1,d=0;d<b.length;d++){var e=b.start(d),g=b.end(d);if(a>=e&&a<g){a>=g-this._config.lazyLoadRecoverDuration&&(c=!0);break}}c&&(window.clearInterval(this._progressChecker),this._progressChecker=null,c&&(f["default"].v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},a.prototype._isTimepointBuffered=function(a){for(var b=this._mediaElement.buffered,c=0;c<b.length;c++){var d=b.start(c),e=b.end(c);if(a>=d&&a<e)return!0}return!1},a.prototype._internalSeek=function(a){var b=this._isTimepointBuffered(a),c=!1,d=0;if(a<1&&this._mediaElement.buffered.length>0){var e=this._mediaElement.buffered.start(0);(e<1&&a<e||h["default"].safari)&&(c=!0,d=h["default"].safari?.1:e)}if(c)this._requestSetTime=!0,
this._mediaElement.currentTime=d;else if(b){if(this._alwaysSeekKeyframe){var f=this._msectl.getNearestKeyframe(Math.floor(1e3*a));this._requestSetTime=!0,this._mediaElement.currentTime=null!=f?f.dts/1e3:a}else this._requestSetTime=!0,this._mediaElement.currentTime=a;null!=this._progressChecker&&this._checkProgressAndResume()}else null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(a),this._transmuxer.seek(Math.floor(1e3*a)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=a)},a.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var a=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(a)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(a),this._transmuxer.seek(Math.floor(1e3*a)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=a))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},a.prototype._checkAndResumeStuckPlayback=function(a){var b=this._mediaElement;if(a||!this._receivedCanPlay||b.readyState<2){var c=b.buffered;c.length>0&&b.currentTime<c.start(0)&&(f["default"].w(this.TAG,"Playback seems stuck at "+b.currentTime+", seek to "+c.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=c.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},a.prototype._onvLoadedMetadata=function(a){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},a.prototype._onvSeeking=function(a){var b=this._mediaElement.currentTime,c=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(b<1&&c.length>0){var d=c.start(0);if(d<1&&b<d||h["default"].safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=h["default"].safari?.1:d)}if(this._isTimepointBuffered(b)){if(this._alwaysSeekKeyframe){var e=this._msectl.getNearestKeyframe(Math.floor(1e3*b));null!=e&&(this._requestSetTime=!0,this._mediaElement.currentTime=e.dts/1e3)}null!=this._progressChecker&&this._checkProgressAndResume()}else this._seekpointRecord={seekPoint:b,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}},a.prototype._onvCanPlay=function(a){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},a.prototype._onvStalled=function(a){this._checkAndResumeStuckPlayback(!0)},a.prototype._onvProgress=function(a){this._checkAndResumeStuckPlayback()},a}();b["default"]=q},"./src/player/native-player.js":function(a,b,c){c.r(b);var d=c("./node_modules/events/events.js"),e=c.n(d),f=c("./src/player/player-events.js"),h=c("./src/config.js"),i=c("./src/utils/exception.js"),j=function(){function a(a,b){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(e()),this._config=(0,h.createDefaultConfig)(),"object"==(void 0===b?"undefined":g(b))&&Object.assign(this._config,b),"flv"===a.type.toLowerCase())throw new i.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(a.hasOwnProperty("segments"))throw new i.InvalidArgumentException("NativePlayer("+a.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=a,this._mediaElement=null}return a.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},a.prototype.on=function(a,b){var c=this;a===f["default"].MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){c._emitter.emit(f["default"].MEDIA_INFO,c.mediaInfo)}):a===f["default"].STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){c._emitter.emit(f["default"].STATISTICS_INFO,c.statisticsInfo)}),this._emitter.addListener(a,b)},a.prototype.off=function(a,b){this._emitter.removeListener(a,b)},a.prototype.attachMediaElement=function(a){if(this._mediaElement=a,a.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{a.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(a){}},a.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},a.prototype.load=function(){if(!this._mediaElement)throw new i.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},a.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},a.prototype.play=function(){return this._mediaElement.play()},a.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(a){this._mediaElement.volume=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(a){this._mediaElement.muted=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(a){this._mediaElement?this._mediaElement.currentTime=a:this._pendingSeekTime=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"mediaInfo",{get:function(){var a={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(a.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(a.width=this._mediaElement.videoWidth,a.height=this._mediaElement.videoHeight)),a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"statisticsInfo",{get:function(){var a={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return a;var b=!0,c=0,d=0;if(this._mediaElement.getVideoPlaybackQuality){var e=this._mediaElement.getVideoPlaybackQuality();c=e.totalVideoFrames,d=e.droppedVideoFrames}else null!=this._mediaElement.webkitDecodedFrameCount?(c=this._mediaElement.webkitDecodedFrameCount,d=this._mediaElement.webkitDroppedFrameCount):b=!1;return b&&(a.decodedFrames=c,a.droppedFrames=d),a},enumerable:!1,configurable:!0}),a.prototype._onvLoadedMetadata=function(a){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(f["default"].MEDIA_INFO,this.mediaInfo)},a.prototype._reportStatisticsInfo=function(){this._emitter.emit(f["default"].STATISTICS_INFO,this.statisticsInfo)},a}();b["default"]=j},"./src/player/player-errors.js":function(a,b,c){c.r(b),c.d(b,{ErrorTypes:function(){return f},ErrorDetails:function(){return g}});var d=c("./src/io/loader.js"),e=c("./src/demux/demux-errors.js"),f={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},g={NETWORK_EXCEPTION:d.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:d.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:d.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:d.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:e["default"].FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:e["default"].FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:e["default"].CODEC_UNSUPPORTED}},"./src/player/player-events.js":function(a,b,c){c.r(b),b["default"]={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"}},"./src/remux/aac-silent.js":function(a,b,c){c.r(b);var d=function(){function a(){}return a.getSilentFrame=function(a,b){if("mp4a.40.2"===a){if(1===b)return new Uint8Array([0,200,0,128,35,128]);if(2===b)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===b)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===b)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===b)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},a}();b["default"]=d},"./src/remux/mp4-generator.js":function(a,b,c){c.r(b);var d=function(){function a(){}return a.init=function(){for(var b in a.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]},a.types)a.types.hasOwnProperty(b)&&(a.types[b]=[b.charCodeAt(0),b.charCodeAt(1),b.charCodeAt(2),b.charCodeAt(3)]);var c=a.constants={};c.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),c.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),c.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),c.STSC=c.STCO=c.STTS,c.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),c.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),c.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),c.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),c.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),c.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},a.box=function(a){for(var b=8,c=null,d=Array.prototype.slice.call(arguments,1),e=d.length,f=0;f<e;f++)b+=d[f].byteLength;(c=new Uint8Array(b))[0]=b>>>24&255,c[1]=b>>>16&255,c[2]=b>>>8&255,c[3]=255&b,c.set(a,4);var g=8;for(f=0;f<e;f++)c.set(d[f],g),g+=d[f].byteLength;return c},a.generateInitSegment=function(b){var c=a.box(a.types.ftyp,a.constants.FTYP),d=a.moov(b),e=new Uint8Array(c.byteLength+d.byteLength);return e.set(c,0),e.set(d,c.byteLength),e},a.moov=function(b){var c=a.mvhd(b.timescale,b.duration),d=a.trak(b),e=a.mvex(b);return a.box(a.types.moov,c,d,e)},a.mvhd=function(b,c){return a.box(a.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>>24&255,b>>>16&255,b>>>8&255,255&b,c>>>24&255,c>>>16&255,c>>>8&255,255&c,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},a.trak=function(b){return a.box(a.types.trak,a.tkhd(b),a.mdia(b))},a.tkhd=function(b){var c=b.id,d=b.duration,e=b.presentWidth,f=b.presentHeight;return a.box(a.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c,0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,255&d,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,e>>>8&255,255&e,0,0,f>>>8&255,255&f,0,0]))},a.mdia=function(b){return a.box(a.types.mdia,a.mdhd(b),a.hdlr(b),a.minf(b))},a.mdhd=function(b){var c=b.timescale,d=b.duration;return a.box(a.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c,d>>>24&255,d>>>16&255,d>>>8&255,255&d,85,196,0,0]))},a.hdlr=function(b){var c=null;return c="audio"===b.type?a.constants.HDLR_AUDIO:a.constants.HDLR_VIDEO,a.box(a.types.hdlr,c)},a.minf=function(b){var c=null;return c="audio"===b.type?a.box(a.types.smhd,a.constants.SMHD):a.box(a.types.vmhd,a.constants.VMHD),a.box(a.types.minf,c,a.dinf(),a.stbl(b))},a.dinf=function(){return a.box(a.types.dinf,a.box(a.types.dref,a.constants.DREF))},a.stbl=function(b){return a.box(a.types.stbl,a.stsd(b),a.box(a.types.stts,a.constants.STTS),a.box(a.types.stsc,a.constants.STSC),a.box(a.types.stsz,a.constants.STSZ),a.box(a.types.stco,a.constants.STCO))},a.stsd=function(b){return"audio"===b.type?"mp3"===b.codec?a.box(a.types.stsd,a.constants.STSD_PREFIX,a.mp3(b)):a.box(a.types.stsd,a.constants.STSD_PREFIX,a.mp4a(b)):a.box(a.types.stsd,a.constants.STSD_PREFIX,a.avc1(b))},a.mp3=function(b){var c=b.channelCount,d=b.audioSampleRate,e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,c,0,16,0,0,0,0,d>>>8&255,255&d,0,0]);return a.box(a.types[".mp3"],e)},a.mp4a=function(b){var c=b.channelCount,d=b.audioSampleRate,e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,c,0,16,0,0,0,0,d>>>8&255,255&d,0,0]);return a.box(a.types.mp4a,e,a.esds(b))},a.esds=function(b){var c=b.config||[],d=c.length,e=new Uint8Array([0,0,0,0,3,23+d,0,1,0,4,15+d,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([d]).concat(c).concat([6,1,2]));return a.box(a.types.esds,e)},a.avc1=function(b){var c=b.avcc,d=b.codecWidth,e=b.codecHeight,f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>>8&255,255&d,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return a.box(a.types.avc1,f,a.box(a.types.avcC,c))},a.mvex=function(b){return a.box(a.types.mvex,a.trex(b))},a.trex=function(b){var c=b.id,d=new Uint8Array([0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return a.box(a.types.trex,d)},a.moof=function(b,c){return a.box(a.types.moof,a.mfhd(b.sequenceNumber),a.traf(b,c))},a.mfhd=function(b){var c=new Uint8Array([0,0,0,0,b>>>24&255,b>>>16&255,b>>>8&255,255&b]);return a.box(a.types.mfhd,c)},a.traf=function(b,c){var d=b.id,e=a.box(a.types.tfhd,new Uint8Array([0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,255&d])),f=a.box(a.types.tfdt,new Uint8Array([0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c])),g=a.sdtp(b),h=a.trun(b,g.byteLength+16+16+8+16+8+8);return a.box(a.types.traf,e,f,h,g)},a.sdtp=function(b){for(var c=b.samples||[],d=c.length,e=new Uint8Array(4+d),f=0;f<d;f++){var g=c[f].flags;e[f+4]=g.isLeading<<6|g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy}return a.box(a.types.sdtp,e)},a.trun=function(b,c){var d=b.samples||[],e=d.length,f=12+16*e,g=new Uint8Array(f);c+=8+f,g.set([0,0,15,1,e>>>24&255,e>>>16&255,e>>>8&255,255&e,c>>>24&255,c>>>16&255,c>>>8&255,255&c],0);for(var h=0;h<e;h++){var i=d[h].duration,j=d[h].size,k=d[h].flags,l=d[h].cts;g.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,j>>>24&255,j>>>16&255,j>>>8&255,255&j,k.isLeading<<2|k.dependsOn,k.isDependedOn<<6|k.hasRedundancy<<4|k.isNonSync,0,0,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*h)}return a.box(a.types.trun,g)},a.mdat=function(b){return a.box(a.types.mdat,b)},a}();d.init(),b["default"]=d},"./src/remux/mp4-remuxer.js":function(a,b,c){c.r(b);var d=c("./src/utils/logger.js"),e=c("./src/remux/mp4-generator.js"),f=c("./src/remux/aac-silent.js"),g=c("./src/utils/browser.js"),h=c("./src/core/media-segment-info.js"),i=c("./src/utils/exception.js"),j=function(){function a(a){this.TAG="MP4Remuxer",this._config=a,this._isLive=!0===a.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new h.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new h.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!g["default"].chrome||!(g["default"].version.major<50||50===g["default"].version.major&&g["default"].version.build<2661)),this._fillSilentAfterSeek=g["default"].msedge||g["default"].msie,this._mp3UseMpegAudio=!g["default"].firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return a.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},a.prototype.bindDataSource=function(a){return a.onDataAvailable=this.remux.bind(this),a.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(a.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(a){this._onInitSegment=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(a){this._onMediaSegment=a},enumerable:!1,configurable:!0}),a.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},a.prototype.seek=function(a){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},a.prototype.remux=function(a,b){if(!this._onMediaSegment)throw new i.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(a,b),this._remuxVideo(b),this._remuxAudio(a)},a.prototype._onTrackMetadataReceived=function(a,b){var c=null,d="mp4",f=b.codec;if("audio"===a)this._audioMeta=b,"mp3"===b.codec&&this._mp3UseMpegAudio?(d="mpeg",f="",c=new Uint8Array):c=e["default"].generateInitSegment(b);else{if("video"!==a)return;this._videoMeta=b,c=e["default"].generateInitSegment(b)}if(!this._onInitSegment)throw new i.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(a,{type:a,data:c.buffer,codec:f,container:a+"/"+d,mediaDuration:b.duration})},a.prototype._calculateDtsBase=function(a,b){this._dtsBaseInited||(a.samples&&a.samples.length&&(this._audioDtsBase=a.samples[0].dts),b.samples&&b.samples.length&&(this._videoDtsBase=b.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},a.prototype.flushStashedSamples=function(){var a=this._videoStashedLastSample,b=this._audioStashedLastSample,c={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=a&&(c.samples.push(a),c.length=a.length);var d={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=b&&(d.samples.push(b),d.length=b.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(c,!0),this._remuxAudio(d,!0)},a.prototype._remuxAudio=function(a,b){if(null!=this._audioMeta){var c,i=a,j=i.samples,k=void 0,l=-1,m=this._audioMeta.refSampleDuration,n="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,o=this._dtsBaseInited&&void 0===this._audioNextDts,p=!1;if(j&&0!==j.length&&(1!==j.length||b)){var q=0,r=null,s=0;n?(q=0,s=i.length):(q=8,s=8+i.length);var t=null;if(j.length>1&&(s-=(t=j.pop()).length),null!=this._audioStashedLastSample){var u=this._audioStashedLastSample;this._audioStashedLastSample=null,j.unshift(u),s+=u.length}null!=t&&(this._audioStashedLastSample=t);var v=j[0].dts-this._dtsBase;if(this._audioNextDts)k=v-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())k=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(p=!0);else{var w=this._audioSegmentInfoList.getLastSampleBefore(v);if(null!=w){var x=v-(w.originalDts+w.duration);x<=3&&(x=0),k=v-(w.dts+w.duration+x)}else k=0}if(p){var y=v-k,z=this._videoSegmentInfoList.getLastSegmentBefore(v);if(null!=z&&z.beginDts<y){if(K=f["default"].getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount)){var A=z.beginDts,B=y-z.beginDts;d["default"].v(this.TAG,"InsertPrefixSilentAudio: dts: "+A+", duration: "+B),j.unshift({unit:K,dts:A,pts:A}),s+=K.byteLength}}else p=!1}for(var C=[],D=0;D<j.length;D++){var E=(u=j[D]).unit,F=u.dts-this._dtsBase,G=(A=F,!1),H=null,I=0;if(!(F<-.001)){if("mp3"!==this._audioMeta.codec){var J=F;if(this._audioNextDts&&(J=this._audioNextDts),(k=F-J)<=-3*m){d["default"].w(this.TAG,"Dropping 1 audio frame (originalDts: "+F+" ms ,curRefDts: "+J+" ms)  due to dtsCorrection: "+k+" ms overlap.");continue}if(k>=3*m&&this._fillAudioTimestampGap&&!g["default"].safari){G=!0;var K,L=Math.floor(k/m);d["default"].w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\noriginalDts: "+F+" ms, curRefDts: "+J+" ms, dtsCorrection: "+Math.round(k)+" ms, generate: "+L+" frames"),A=Math.floor(J),I=Math.floor(J+m)-A,null==(K=f["default"].getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(d["default"].w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),K=E),H=[];for(var M=0;M<L;M++){J+=m;var N=Math.floor(J),O=Math.floor(J+m)-N,P={dts:N,pts:N,cts:0,unit:K,size:K.byteLength,duration:O,originalDts:F,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};H.push(P),s+=P.size}this._audioNextDts=J+m}else A=Math.floor(J),I=Math.floor(J+m)-A,this._audioNextDts=J+m}else A=F-k,I=D!==j.length-1?j[D+1].dts-this._dtsBase-k-A:null!=t?t.dts-this._dtsBase-k-A:C.length>=1?C[C.length-1].duration:Math.floor(m),this._audioNextDts=A+I;-1===l&&(l=A),C.push({dts:A,pts:A,cts:0,unit:u.unit,size:u.unit.byteLength,duration:I,originalDts:F,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),G&&C.push.apply(C,H)}}if(0===C.length)return i.samples=[],void(i.length=0);for(n?r=new Uint8Array(s):((r=new Uint8Array(s))[0]=s>>>24&255,r[1]=s>>>16&255,r[2]=s>>>8&255,r[3]=255&s,r.set(e["default"].types.mdat,4)),D=0;D<C.length;D++)E=C[D].unit,r.set(E,q),q+=E.byteLength;var Q=C[C.length-1];c=Q.dts+Q.duration;var R=new h.MediaSegmentInfo;R.beginDts=l,R.endDts=c,R.beginPts=l,R.endPts=c,R.originalBeginDts=C[0].originalDts,R.originalEndDts=Q.originalDts+Q.duration,R.firstSample=new h.SampleInfo(C[0].dts,C[0].pts,C[0].duration,C[0].originalDts,!1),R.lastSample=new h.SampleInfo(Q.dts,Q.pts,Q.duration,Q.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(R),i.samples=C,i.sequenceNumber++;var S=null;S=n?new Uint8Array:e["default"].moof(i,l),i.samples=[],i.length=0;var T={type:"audio",data:this._mergeBoxes(S,r).buffer,sampleCount:C.length,info:R};n&&o&&(T.timestampOffset=l),this._onMediaSegment("audio",T)}}},a.prototype._remuxVideo=function(a,b){if(null!=this._videoMeta){var c,d,f=a,g=f.samples,i=void 0,j=-1,k=-1;if(g&&0!==g.length&&(1!==g.length||b)){var l=8,m=null,n=8+a.length,o=null;if(g.length>1&&(n-=(o=g.pop()).length),null!=this._videoStashedLastSample){var p=this._videoStashedLastSample;this._videoStashedLastSample=null,g.unshift(p),n+=p.length}null!=o&&(this._videoStashedLastSample=o);var q=g[0].dts-this._dtsBase;if(this._videoNextDts)i=q-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())i=0;else{var r=this._videoSegmentInfoList.getLastSampleBefore(q);if(null!=r){var s=q-(r.originalDts+r.duration);s<=3&&(s=0),i=q-(r.dts+r.duration+s)}else i=0}for(var t=new h.MediaSegmentInfo,u=[],v=0;v<g.length;v++){var w=(p=g[v]).dts-this._dtsBase,x=p.isKeyframe,y=w-i,z=p.cts,A=y+z;-1===j&&(j=y,k=A);var B=0;if(B=v!==g.length-1?g[v+1].dts-this._dtsBase-i-y:null!=o?o.dts-this._dtsBase-i-y:u.length>=1?u[u.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),x){var C=new h.SampleInfo(y,A,B,p.dts,!0);C.fileposition=p.fileposition,t.appendSyncPoint(C)}u.push({dts:y,pts:A,cts:z,units:p.units,size:p.length,isKeyframe:x,duration:B,originalDts:w,flags:{isLeading:0,dependsOn:x?2:1,isDependedOn:x?1:0,hasRedundancy:0,isNonSync:x?0:1}})}for((m=new Uint8Array(n))[0]=n>>>24&255,m[1]=n>>>16&255,m[2]=n>>>8&255,m[3]=255&n,m.set(e["default"].types.mdat,4),v=0;v<u.length;v++)for(var D=u[v].units;D.length;){var E=D.shift().data;m.set(E,l),l+=E.byteLength}var F=u[u.length-1];if(c=F.dts+F.duration,d=F.pts+F.duration,this._videoNextDts=c,t.beginDts=j,t.endDts=c,t.beginPts=k,t.endPts=d,t.originalBeginDts=u[0].originalDts,t.originalEndDts=F.originalDts+F.duration,t.firstSample=new h.SampleInfo(u[0].dts,u[0].pts,u[0].duration,u[0].originalDts,u[0].isKeyframe),t.lastSample=new h.SampleInfo(F.dts,F.pts,F.duration,F.originalDts,F.isKeyframe),this._isLive||this._videoSegmentInfoList.append(t),f.samples=u,f.sequenceNumber++,this._forceFirstIDR){var G=u[0].flags;G.dependsOn=2,G.isNonSync=0}var H=e["default"].moof(f,j);f.samples=[],f.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(H,m).buffer,sampleCount:u.length,info:t})}}},a.prototype._mergeBoxes=function(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);return c.set(a,0),c.set(b,a.byteLength),c},a}();b["default"]=j},"./src/utils/browser.js":function(a,b,c){c.r(b);var d={};!function(){var a=self.navigator.userAgent.toLowerCase(),b=/(edge)\/([\w.]+)/.exec(a)||/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(iemobile)[\/]([\w.]+)/.exec(a)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(a)||[],c=/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(android)/.exec(a)||/(windows)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||[],e={browser:b[5]||b[3]||b[1]||"",version:b[2]||b[4]||"0",majorVersion:b[4]||b[2]||"0",platform:c[0]||""},f={};if(e.browser){f[e.browser]=!0;var g=e.majorVersion.split(".");f.version={major:parseInt(e.majorVersion,10),string:e.version},g.length>1&&(f.version.minor=parseInt(g[1],10)),g.length>2&&(f.version.build=parseInt(g[2],10))}for(var h in e.platform&&(f[e.platform]=!0),(f.chrome||f.opr||f.safari)&&(f.webkit=!0),(f.rv||f.iemobile)&&(f.rv&&delete f.rv,e.browser="msie",f.msie=!0),f.edge&&(delete f.edge,e.browser="msedge",f.msedge=!0),f.opr&&(e.browser="opera",f.opera=!0),f.safari&&f.android&&(e.browser="android",f.android=!0),f.name=e.browser,f.platform=e.platform,d)d.hasOwnProperty(h)&&delete d[h];Object.assign(d,f)}(),b["default"]=d},"./src/utils/exception.js":function(a,b,c){c.r(b),c.d(b,{RuntimeException:function(){return f},IllegalStateException:function(){return g},InvalidArgumentException:function(){return h},NotImplementedException:function(){return i}});var d,e=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),f=function(){function a(a){this._message=a}return Object.defineProperty(a.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),a.prototype.toString=function(){return this.name+": "+this.message},a}(),g=function(a){function b(b){return a.call(this,b)||this}return e(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),b}(f),h=function(a){function b(b){return a.call(this,b)||this}return e(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),b}(f),i=function(a){function b(b){return a.call(this,b)||this}return e(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),b}(f)},"./src/utils/logger.js":function(a,b,c){c.r(b);var d=c("./node_modules/events/events.js"),e=c.n(d),f=function(){function a(){}return a.e=function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","error",d),a.ENABLE_ERROR&&(console.error?console.error(d):console.warn)},a.i=function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","info",d),a.ENABLE_INFO&&console.info&&console.info(d)},a.w=function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","warn",d),a.ENABLE_WARN&&console.warn},a.d=function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","debug",d),a.ENABLE_DEBUG&&console.debug&&console.debug(d)},a.v=function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","verbose",d),a.ENABLE_VERBOSE},a}();f.GLOBAL_TAG="flv.js",f.FORCE_GLOBAL_TAG=!1,f.ENABLE_ERROR=!0,f.ENABLE_INFO=!0,f.ENABLE_WARN=!0,f.ENABLE_DEBUG=!0,f.ENABLE_VERBOSE=!0,f.ENABLE_CALLBACK=!1,f.emitter=new(e()),b["default"]=f},"./src/utils/logging-control.js":function(a,b,c){c.r(b);var d=c("./node_modules/events/events.js"),e=c.n(d),f=c("./src/utils/logger.js"),g=function(){function a(){}return Object.defineProperty(a,"forceGlobalTag",{get:function(){return f["default"].FORCE_GLOBAL_TAG},set:function(b){f["default"].FORCE_GLOBAL_TAG=b,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"globalTag",{get:function(){return f["default"].GLOBAL_TAG},set:function(b){f["default"].GLOBAL_TAG=b,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableAll",{get:function(){return f["default"].ENABLE_VERBOSE&&f["default"].ENABLE_DEBUG&&f["default"].ENABLE_INFO&&f["default"].ENABLE_WARN&&f["default"].ENABLE_ERROR},set:function(b){f["default"].ENABLE_VERBOSE=b,f["default"].ENABLE_DEBUG=b,f["default"].ENABLE_INFO=b,f["default"].ENABLE_WARN=b,f["default"].ENABLE_ERROR=b,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableDebug",{get:function(){return f["default"].ENABLE_DEBUG},set:function(b){f["default"].ENABLE_DEBUG=b,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableVerbose",{get:function(){return f["default"].ENABLE_VERBOSE},set:function(b){f["default"].ENABLE_VERBOSE=b,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableInfo",{get:function(){return f["default"].ENABLE_INFO},set:function(b){
f["default"].ENABLE_INFO=b,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableWarn",{get:function(){return f["default"].ENABLE_WARN},set:function(b){f["default"].ENABLE_WARN=b,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableError",{get:function(){return f["default"].ENABLE_ERROR},set:function(b){f["default"].ENABLE_ERROR=b,a._notifyChange()},enumerable:!1,configurable:!0}),a.getConfig=function(){return{globalTag:f["default"].GLOBAL_TAG,forceGlobalTag:f["default"].FORCE_GLOBAL_TAG,enableVerbose:f["default"].ENABLE_VERBOSE,enableDebug:f["default"].ENABLE_DEBUG,enableInfo:f["default"].ENABLE_INFO,enableWarn:f["default"].ENABLE_WARN,enableError:f["default"].ENABLE_ERROR,enableCallback:f["default"].ENABLE_CALLBACK}},a.applyConfig=function(a){f["default"].GLOBAL_TAG=a.globalTag,f["default"].FORCE_GLOBAL_TAG=a.forceGlobalTag,f["default"].ENABLE_VERBOSE=a.enableVerbose,f["default"].ENABLE_DEBUG=a.enableDebug,f["default"].ENABLE_INFO=a.enableInfo,f["default"].ENABLE_WARN=a.enableWarn,f["default"].ENABLE_ERROR=a.enableError,f["default"].ENABLE_CALLBACK=a.enableCallback},a._notifyChange=function(){var b=a.emitter;if(b.listenerCount("change")>0){var c=a.getConfig();b.emit("change",c)}},a.registerListener=function(b){a.emitter.addListener("change",b)},a.removeListener=function(b){a.emitter.removeListener("change",b)},a.addLogListener=function(b){f["default"].emitter.addListener("log",b),f["default"].emitter.listenerCount("log")>0&&(f["default"].ENABLE_CALLBACK=!0,a._notifyChange())},a.removeLogListener=function(b){f["default"].emitter.removeListener("log",b),0===f["default"].emitter.listenerCount("log")&&(f["default"].ENABLE_CALLBACK=!1,a._notifyChange())},a}();g.emitter=new(e()),b["default"]=g},"./src/utils/polyfill.js":function(a,b,c){c.r(b);var d=function(){function a(){}return a.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},Object.assign=Object.assign||function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(null!=d)for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}return b},"function"!=typeof self.Promise&&c("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},a}();d.install(),b["default"]=d},"./src/utils/utf8-conv.js":function(a,b,c){function d(a,b,c){var d=a;if(b+c<d.length){for(;c--;)if(128!=(192&d[++b]))return!1;return!0}return!1}c.r(b),b["default"]=function(a){for(var b=[],c=a,e=0,f=a.length;e<f;)if(c[e]<128)b.push(String.fromCharCode(c[e])),++e;else{if(c[e]<192);else if(c[e]<224){if(d(c,e,1)&&(g=(31&c[e])<<6|63&c[e+1])>=128){b.push(String.fromCharCode(65535&g)),e+=2;continue}}else if(c[e]<240){if(d(c,e,2)&&(g=(15&c[e])<<12|(63&c[e+1])<<6|63&c[e+2])>=2048&&55296!=(63488&g)){b.push(String.fromCharCode(65535&g)),e+=3;continue}}else if(c[e]<248){var g;if(d(c,e,3)&&(g=(7&c[e])<<18|(63&c[e+1])<<12|(63&c[e+2])<<6|63&c[e+3])>65536&&g<1114112){g-=65536,b.push(String.fromCharCode(g>>>10|55296)),b.push(String.fromCharCode(1023&g|56320)),e+=4;continue}}b.push(String.fromCharCode(65533)),++e}return b.join("")}}},d={};return a.m=b,a.n=function(b){var c=b&&b.__esModule?function(){return b["default"]}:function(){return b};return a.d(c,{a:c}),c},a.d=function(b,c){for(var d in c)a.o(c,d)&&!a.o(b,d)&&Object.defineProperty(b,d,{enumerable:!0,get:c[d]})},a.g=function(){if("object"==("undefined"==typeof globalThis?"undefined":g(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(a){if("object"==("undefined"==typeof window?"undefined":g(window)))return window}}(),a.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},a.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},a("./src/index.js")}()},"object"==(void 0===i?"undefined":g(i))&&"object"==(void 0===h?"undefined":g(h))?h.exports=j():(e=[],d=j,void 0!==(f="function"==typeof d?d.apply(b,e):d)&&(a.exports=f))}).call(this,c("_process"))},{_process:44}],34:[function(a,b,d){(function(c){var d,e=void 0!==c?c:"undefined"!=typeof window?window:{},f=a("min-document");"undefined"!=typeof document?d=document:(d=e["__GLOBAL_DOCUMENT_CACHE@4"])||(d=e["__GLOBAL_DOCUMENT_CACHE@4"]=f),b.exports=d}).call(this,void 0!==c?c:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":31}],35:[function(a,b,d){(function(a){var c;c="undefined"!=typeof window?window:void 0!==a?a:"undefined"!=typeof self?self:{},b.exports=c}).call(this,void 0!==c?c:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],36:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),(b+=g+l>=1?m/i:m*Math.pow(2,1-l))*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],37:[function(a,b,c){b.exports=function(a){if(!a)return!1;var b=d.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)};var d=Object.prototype.toString},{}],38:[function(a,b,c){function d(a){if(a&&"object"==(void 0===a?"undefined":g(a))){var b=a.which||a.keyCode||a.charCode;b&&(a=b)}if("number"==typeof a)return i[a];var c,d=String(a);return(c=e[d.toLowerCase()])?c:(c=f[d.toLowerCase()])||(1===d.length?d.charCodeAt(0):void 0)}d.isEventKey=function(a,b){if(a&&"object"==(void 0===a?"undefined":g(a))){var c=a.which||a.keyCode||a.charCode;if(null==c)return!1;if("string"==typeof b){var d;if(d=e[b.toLowerCase()])return d===c;if(d=f[b.toLowerCase()])return d===c}else if("number"==typeof b)return b===c;return!1}};var e=(c=b.exports=d).code=c.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},f=c.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(h=97;h<123;h++)e[String.fromCharCode(h)]=h-32;for(var h=48;h<58;h++)e[h-48]=h;for(h=1;h<13;h++)e["f"+h]=h+111;for(h=0;h<10;h++)e["numpad "+h]=h+96;var i=c.names=c.title={};for(h in e)i[e[h]]=h;for(var j in f)e[j]=f[j]},{}],39:[function(a,b,c){function d(a){return a&&"object"==(void 0===a?"undefined":g(a))&&"default"in a?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("@babel/runtime/helpers/inheritsLoose"),f=a("@videojs/vhs-utils/cjs/stream.js"),h=a("@babel/runtime/helpers/extends"),i=a("@babel/runtime/helpers/assertThisInitialized"),j=a("@videojs/vhs-utils/cjs/decode-b64-to-uint8-array.js"),k=d(e),l=d(f),m=d(h),n=d(i),o=d(j),p=function(a){function b(){var b;return(b=a.call(this)||this).buffer="",b}return k["default"](b,a),b.prototype.push=function(a){var b;for(this.buffer+=a,b=this.buffer.indexOf("\n");b>-1;b=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,b)),this.buffer=this.buffer.substring(b+1)},b}(l["default"]),q=String.fromCharCode(9),r=function(a){var b=/([0-9.]*)?@?([0-9.]*)?/.exec(a||""),c={};return b[1]&&(c.length=parseInt(b[1],10)),b[2]&&(c.offset=parseInt(b[2],10)),c},s=function(a){for(var b,c=a.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),d={},e=c.length;e--;)""!==c[e]&&((b=/([^=]*)=(.*)/.exec(c[e]).slice(1))[0]=b[0].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^['"](.*)['"]$/g,"$1"),d[b[0]]=b[1]);return d},t=function(a){function b(){var b;return(b=a.call(this)||this).customParsers=[],b.tagMappers=[],b}k["default"](b,a);var c=b.prototype;return c.push=function(a){var b,c,d=this;0!==(a=a.trim()).length&&("#"===a[0]?this.tagMappers.reduce(function(b,c){var d=c(a);return d===a?b:b.concat([d])},[a]).forEach(function(a){for(var e=0;e<d.customParsers.length;e++)if(d.customParsers[e].call(d,a))return;if(0===a.indexOf("#EXT"))if(a=a.replace("\r",""),b=/^#EXTM3U/.exec(a))d.trigger("data",{type:"tag",tagType:"m3u"});else{if(b=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(a))return c={type:"tag",tagType:"inf"},b[1]&&(c.duration=parseFloat(b[1])),b[2]&&(c.title=b[2]),void d.trigger("data",c);if(b=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"targetduration"},b[1]&&(c.duration=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"version"},b[1]&&(c.version=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))return c={type:"tag",tagType:"media-sequence"},b[1]&&(c.number=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))return c={type:"tag",tagType:"discontinuity-sequence"},b[1]&&(c.number=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(a))return c={type:"tag",tagType:"playlist-type"},b[1]&&(c.playlistType=b[1]),void d.trigger("data",c);if(b=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(a))return c=m["default"](r(b[1]),{type:"tag",tagType:"byterange"}),void d.trigger("data",c);if(b=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(a))return c={type:"tag",tagType:"allow-cache"},b[1]&&(c.allowed=!/NO/.test(b[1])),void d.trigger("data",c);if(b=/^#EXT-X-MAP:?(.*)$/.exec(a)){if(c={type:"tag",tagType:"map"},b[1]){var f=s(b[1]);f.URI&&(c.uri=f.URI),f.BYTERANGE&&(c.byterange=r(f.BYTERANGE))}d.trigger("data",c)}else if(b=/^#EXT-X-STREAM-INF:?(.*)$/.exec(a)){if(c={type:"tag",tagType:"stream-inf"},b[1]){if(c.attributes=s(b[1]),c.attributes.RESOLUTION){var g=c.attributes.RESOLUTION.split("x"),h={};g[0]&&(h.width=parseInt(g[0],10)),g[1]&&(h.height=parseInt(g[1],10)),c.attributes.RESOLUTION=h}c.attributes.BANDWIDTH&&(c.attributes.BANDWIDTH=parseInt(c.attributes.BANDWIDTH,10)),c.attributes["PROGRAM-ID"]&&(c.attributes["PROGRAM-ID"]=parseInt(c.attributes["PROGRAM-ID"],10))}d.trigger("data",c)}else{if(b=/^#EXT-X-MEDIA:?(.*)$/.exec(a))return c={type:"tag",tagType:"media"},b[1]&&(c.attributes=s(b[1])),void d.trigger("data",c);if(b=/^#EXT-X-ENDLIST/.exec(a))d.trigger("data",{type:"tag",tagType:"endlist"});else if(b=/^#EXT-X-DISCONTINUITY/.exec(a))d.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(b=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(a))return c={type:"tag",tagType:"program-date-time"},b[1]&&(c.dateTimeString=b[1],c.dateTimeObject=new Date(b[1])),void d.trigger("data",c);if(b=/^#EXT-X-KEY:?(.*)$/.exec(a))return c={type:"tag",tagType:"key"},b[1]&&(c.attributes=s(b[1]),c.attributes.IV&&("0x"===c.attributes.IV.substring(0,2).toLowerCase()&&(c.attributes.IV=c.attributes.IV.substring(2)),c.attributes.IV=c.attributes.IV.match(/.{8}/g),c.attributes.IV[0]=parseInt(c.attributes.IV[0],16),c.attributes.IV[1]=parseInt(c.attributes.IV[1],16),c.attributes.IV[2]=parseInt(c.attributes.IV[2],16),c.attributes.IV[3]=parseInt(c.attributes.IV[3],16),c.attributes.IV=new Uint32Array(c.attributes.IV))),void d.trigger("data",c);if(b=/^#EXT-X-START:?(.*)$/.exec(a))return c={type:"tag",tagType:"start"},b[1]&&(c.attributes=s(b[1]),c.attributes["TIME-OFFSET"]=parseFloat(c.attributes["TIME-OFFSET"]),c.attributes.PRECISE=/YES/.test(c.attributes.PRECISE)),void d.trigger("data",c);if(b=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(a))return c={type:"tag",tagType:"cue-out-cont"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c);if(b=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(a))return c={type:"tag",tagType:"cue-out"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c);if(b=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a))return c={type:"tag",tagType:"cue-in"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c);if((b=/^#EXT-X-SKIP:(.*)$/.exec(a))&&b[1])return(c={type:"tag",tagType:"skip"}).attributes=s(b[1]),c.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(c.attributes["SKIPPED-SEGMENTS"]=parseInt(c.attributes["SKIPPED-SEGMENTS"],10)),c.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(c.attributes["RECENTLY-REMOVED-DATERANGES"]=c.attributes["RECENTLY-REMOVED-DATERANGES"].split(q)),void d.trigger("data",c);if((b=/^#EXT-X-PART:(.*)$/.exec(a))&&b[1])return(c={type:"tag",tagType:"part"}).attributes=s(b[1]),["DURATION"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=/YES/.test(c.attributes[a]))}),c.attributes.hasOwnProperty("BYTERANGE")&&(c.attributes.byterange=r(c.attributes.BYTERANGE)),void d.trigger("data",c);if((b=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(a))&&b[1])return(c={type:"tag",tagType:"server-control"}).attributes=s(b[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=/YES/.test(c.attributes[a]))}),void d.trigger("data",c);if((b=/^#EXT-X-PART-INF:(.*)$/.exec(a))&&b[1])return(c={type:"tag",tagType:"part-inf"}).attributes=s(b[1]),["PART-TARGET"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),void d.trigger("data",c);if((b=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(a))&&b[1])return(c={type:"tag",tagType:"preload-hint"}).attributes=s(b[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(c.attributes.hasOwnProperty(a)){c.attributes[a]=parseInt(c.attributes[a],10);var b="BYTERANGE-LENGTH"===a?"length":"offset";c.attributes.byterange=c.attributes.byterange||{},c.attributes.byterange[b]=c.attributes[a],delete c.attributes[a]}}),void d.trigger("data",c);if((b=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(a))&&b[1])return(c={type:"tag",tagType:"rendition-report"}).attributes=s(b[1]),["LAST-MSN","LAST-PART"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseInt(c.attributes[a],10))}),void d.trigger("data",c);d.trigger("data",{type:"tag",data:a.slice(4)})}}}else d.trigger("data",{type:"comment",text:a.slice(1)})}):this.trigger("data",{type:"uri",uri:a}))},c.addParser=function(a){var b=this,c=a.expression,d=a.customType,e=a.dataParser,f=a.segment;"function"!=typeof e&&(e=function(a){return a}),this.customParsers.push(function(a){if(c.exec(a))return b.trigger("data",{type:"custom",data:e(a),customType:d,segment:f}),!0})},c.addTagMapper=function(a){var b=a.expression,c=a.map;this.tagMappers.push(function(a){return b.test(a)?c(a):a})},b}(l["default"]),u=function(a){var b={};return Object.keys(a).forEach(function(c){var d;b[(d=c,d.toLowerCase().replace(/-(\w)/g,function(a){return a[1].toUpperCase()}))]=a[c]}),b},v=function(a){var b=a.serverControl,c=a.targetDuration,d=a.partTargetDuration;if(b){var e="#EXT-X-SERVER-CONTROL",f="holdBack",g="partHoldBack",h=c&&3*c,i=d&&2*d;c&&!b.hasOwnProperty(f)&&(b[f]=h,this.trigger("info",{message:e+" defaulting HOLD-BACK to targetDuration * 3 ("+h+")."})),h&&b[f]<h&&(this.trigger("warn",{message:e+" clamping HOLD-BACK ("+b[f]+") to targetDuration * 3 ("+h+")"}),b[f]=h),d&&!b.hasOwnProperty(g)&&(b[g]=3*d,this.trigger("info",{message:e+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+b[g]+")."})),d&&b[g]<i&&(this.trigger("warn",{message:e+" clamping PART-HOLD-BACK ("+b[g]+") to partTargetDuration * 2 ("+i+")."}),b[g]=i)}},w=function(a){function b(){var b;(b=a.call(this)||this).lineStream=new p,b.parseStream=new t,b.lineStream.pipe(b.parseStream);var c,d,e=n["default"](b),f=[],g={},h=!1,i=function(){},j={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},k=0;b.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var l=0,q=0;return b.on("end",function(){g.uri||!g.parts&&!g.preloadHints||(!g.map&&c&&(g.map=c),!g.key&&d&&(g.key=d),g.timeline||"number"!=typeof k||(g.timeline=k),b.manifest.preloadSegment=g)}),b.parseStream.on("data",function(a){var b,n;({tag:function(){(({version:function(){a.version&&(this.manifest.version=a.version)},"allow-cache":function(){this.manifest.allowCache=a.allowed,"allowed"in a||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var b={};"length"in a&&(g.byterange=b,b.length=a.length,"offset"in a||(a.offset=l)),"offset"in a&&(g.byterange=b,b.offset=a.offset),l=b.offset+b.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),a.duration>0&&(g.duration=a.duration),0===a.duration&&(g.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=f},key:function(){if(a.attributes)if("NONE"!==a.attributes.METHOD)if(a.attributes.URI){if("com.apple.streamingkeydelivery"===a.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:a.attributes});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===a.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(a.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===a.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==a.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):a.attributes.KEYID&&"0x"===a.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:a.attributes.KEYFORMAT,keyId:a.attributes.KEYID.substring(2)},pssh:o["default"](a.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));a.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),d={method:a.attributes.METHOD||"AES-128",uri:a.attributes.URI},void 0!==a.attributes.IV&&(d.iv=a.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else d=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(a.number)?this.manifest.mediaSequence=a.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+a.number})},"discontinuity-sequence":function(){isFinite(a.number)?(this.manifest.discontinuitySequence=a.number,k=a.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+a.number})},"playlist-type":function(){/VOD|EVENT/.test(a.playlistType)?this.manifest.playlistType=a.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+a.playlist})},map:function(){c={},a.uri&&(c.uri=a.uri),a.byterange&&(c.byterange=a.byterange),d&&(c.key=d)},"stream-inf":function(){this.manifest.playlists=f,this.manifest.mediaGroups=this.manifest.mediaGroups||j,a.attributes?(g.attributes||(g.attributes={}),m["default"](g.attributes,a.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||j,a.attributes&&a.attributes.TYPE&&a.attributes["GROUP-ID"]&&a.attributes.NAME){var c=this.manifest.mediaGroups[a.attributes.TYPE];c[a.attributes["GROUP-ID"]]=c[a.attributes["GROUP-ID"]]||{},b=c[a.attributes["GROUP-ID"]],(n={"default":/yes/i.test(a.attributes.DEFAULT)})["default"]?n.autoselect=!0:n.autoselect=/yes/i.test(a.attributes.AUTOSELECT),a.attributes.LANGUAGE&&(n.language=a.attributes.LANGUAGE),a.attributes.URI&&(n.uri=a.attributes.URI),a.attributes["INSTREAM-ID"]&&(n.instreamId=a.attributes["INSTREAM-ID"]),a.attributes.CHARACTERISTICS&&(n.characteristics=a.attributes.CHARACTERISTICS),a.attributes.FORCED&&(n.forced=/yes/i.test(a.attributes.FORCED)),b[a.attributes.NAME]=n}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){k+=1,g.discontinuity=!0,this.manifest.discontinuityStarts.push(f.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=a.dateTimeString,this.manifest.dateTimeObject=a.dateTimeObject),g.dateTimeString=a.dateTimeString,g.dateTimeObject=a.dateTimeObject},targetduration:function(){!isFinite(a.duration)||a.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+a.duration}):(this.manifest.targetDuration=a.duration,v.call(this,this.manifest))},start:function(){a.attributes&&!isNaN(a.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:a.attributes["TIME-OFFSET"],precise:a.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){g.cueOut=a.data},"cue-out-cont":function(){g.cueOutCont=a.data},"cue-in":function(){g.cueIn=a.data},skip:function(){this.manifest.skip=u(a.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",a.attributes,["SKIPPED-SEGMENTS"])},part:function(){var b=this;h=!0;var c=this.manifest.segments.length,d=u(a.attributes);g.parts=g.parts||[],g.parts.push(d),d.byterange&&(d.byterange.hasOwnProperty("offset")||(d.byterange.offset=q),q=d.byterange.offset+d.byterange.length);var e=g.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+e+" for segment #"+c,a.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(a,c){a.hasOwnProperty("lastPart")||b.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+c+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var b=this.manifest.serverControl=u(a.attributes);b.hasOwnProperty("canBlockReload")||(b.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),v.call(this,this.manifest),b.canSkipDateranges&&!b.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var b=this.manifest.segments.length,c=u(a.attributes),d=c.type&&"PART"===c.type;g.preloadHints=g.preloadHints||[],g.preloadHints.push(c),c.byterange&&(c.byterange.hasOwnProperty("offset")||(c.byterange.offset=d?q:0,d&&(q=c.byterange.offset+c.byterange.length)));var e=g.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+e+" for segment #"+b,a.attributes,["TYPE","URI"]),c.type)for(var f=0;f<g.preloadHints.length-1;f++){var h=g.preloadHints[f];h.type&&h.type===c.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+e+" for segment #"+b+" has the same TYPE "+c.type+" as preload hint #"+f})}},"rendition-report":function(){var b=u(a.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(b);var c=this.manifest.renditionReports.length-1,d=["LAST-MSN","URI"];h&&d.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+c,a.attributes,d)},"part-inf":function(){this.manifest.partInf=u(a.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",a.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),v.call(this,this.manifest)}})[a.tagType]||i).call(e)},uri:function(){g.uri=a.uri,f.push(g),this.manifest.targetDuration&&!("duration"in g)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),g.duration=this.manifest.targetDuration),d&&(g.key=d),g.timeline=k,c&&(g.map=c),q=0,g={}},comment:function(){},custom:function(){a.segment?(g.custom=g.custom||{},g.custom[a.customType]=a.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[a.customType]=a.data)}})[a.type].call(e)}),b}k["default"](b,a);var c=b.prototype;return c.warnOnMissingAttributes_=function(a,b,c){var d=[];c.forEach(function(a){b.hasOwnProperty(a)||d.push(a)}),d.length&&this.trigger("warn",{message:a+" lacks required attribute(s): "+d.join(", ")})},c.push=function(a){this.lineStream.push(a)},c.end=function(){this.lineStream.push("\n"),this.trigger("end")},c.addParser=function(a){this.parseStream.addParser(a)},c.addTagMapper=function(a){this.parseStream.addTagMapper(a)},b}(l["default"]);c.LineStream=p,c.ParseStream=t,c.Parser=w},{"@babel/runtime/helpers/assertThisInitialized":1,"@babel/runtime/helpers/extends":3,"@babel/runtime/helpers/inheritsLoose":5,"@videojs/vhs-utils/cjs/decode-b64-to-uint8-array.js":13,"@videojs/vhs-utils/cjs/stream.js":21}],40:[function(a,b,c){var d,e,f=(d=new Date,e=4,{setLogLevel:function(a){e=a==this.debug?1:a==this.info?2:a==this.warn?3:(this.error,4)},debug:function(a,b){void 0===console.debug&&(console.debug=console.log),1>=e&&console.debug("["+f.getDurationString(new Date-d,1e3)+"]","["+a+"]",b)},log:function(a,b){this.debug(a.msg)},info:function(a,b){2>=e&&console.info("["+f.getDurationString(new Date-d,1e3)+"]","["+a+"]",b)},warn:function(a,b){3>=e&&f.getDurationString(new Date-d,1e3)},error:function(a,b){4>=e&&console.error("["+f.getDurationString(new Date-d,1e3)+"]","["+a+"]",b)}});f.getDurationString=function(a,b){function c(a,b){for(var c=(""+a).split(".");c[0].length<b;)c[0]="0"+c[0];return c.join(".")}var d;a<0?(d=!0,a=-a):d=!1;var e=a/(b||1),f=Math.floor(e/3600);e-=3600*f;var g=Math.floor(e/60),h=1e3*(e-=60*g);return h-=1e3*(e=Math.floor(e)),h=Math.floor(h),(d?"-":"")+f+":"+c(g,2)+":"+c(e,2)+"."+c(h,3)},f.printRanges=function(a){var b=a.length;if(b>0){for(var c="",d=0;d<b;d++)d>0&&(c+=","),c+="["+f.getDurationString(a.start(d))+","+f.getDurationString(a.end(d))+"]";return c}return"(empty)"},void 0!==c&&(c.Log=f);var h=function(a){if(!(a instanceof ArrayBuffer))throw"Needs an array buffer";this.buffer=a,this.dataview=new DataView(a),this.position=0};h.prototype.getPosition=function(){return this.position},h.prototype.getEndPosition=function(){return this.buffer.byteLength},h.prototype.getLength=function(){return this.buffer.byteLength},h.prototype.seek=function(a){var b=Math.max(0,Math.min(this.buffer.byteLength,a));return this.position=isNaN(b)||!isFinite(b)?0:b,!0},h.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},h.prototype.readAnyInt=function(a,b){var c=0;if(this.position+a<=this.buffer.byteLength){switch(a){case 1:c=b?this.dataview.getInt8(this.position):this.dataview.getUint8(this.position);break;case 2:c=b?this.dataview.getInt16(this.position):this.dataview.getUint16(this.position);break;case 3:if(b)throw"No method for reading signed 24 bits values";c=this.dataview.getUint8(this.position)<<16,c|=this.dataview.getUint8(this.position)<<8,c|=this.dataview.getUint8(this.position);break;case 4:c=b?this.dataview.getInt32(this.position):this.dataview.getUint32(this.position);break;case 8:if(b)throw"No method for reading signed 64 bits values";c=this.dataview.getUint32(this.position)<<32,c|=this.dataview.getUint32(this.position);break;default:throw"readInt method not implemented for size: "+a}return this.position+=a,c}throw"Not enough bytes in buffer"},h.prototype.readUint8=function(){return this.readAnyInt(1,!1)},h.prototype.readUint16=function(){return this.readAnyInt(2,!1)},h.prototype.readUint24=function(){return this.readAnyInt(3,!1)},h.prototype.readUint32=function(){return this.readAnyInt(4,!1)},h.prototype.readUint64=function(){return this.readAnyInt(8,!1)},h.prototype.readString=function(a){if(this.position+a<=this.buffer.byteLength){for(var b="",c=0;c<a;c++)b+=String.fromCharCode(this.readUint8());return b}throw"Not enough bytes in buffer"},h.prototype.readCString=function(){for(var a=[];;){var b=this.readUint8();if(0===b)break;a.push(b)}return String.fromCharCode.apply(null,a)},h.prototype.readInt8=function(){return this.readAnyInt(1,!0)},h.prototype.readInt16=function(){return this.readAnyInt(2,!0)},h.prototype.readInt32=function(){return this.readAnyInt(4,!0)},h.prototype.readInt64=function(){return this.readAnyInt(8,!1)},h.prototype.readUint8Array=function(a){for(var b=new Uint8Array(a),c=0;c<a;c++)b[c]=this.readUint8();return b},h.prototype.readInt16Array=function(a){for(var b=new Int16Array(a),c=0;c<a;c++)b[c]=this.readInt16();return b},h.prototype.readUint16Array=function(a){for(var b=new Int16Array(a),c=0;c<a;c++)b[c]=this.readUint16();return b},h.prototype.readUint32Array=function(a){for(var b=new Uint32Array(a),c=0;c<a;c++)b[c]=this.readUint32();return b},h.prototype.readInt32Array=function(a){for(var b=new Int32Array(a),c=0;c<a;c++)b[c]=this.readInt32();return b},void 0!==c&&(c.MP4BoxStream=h);var i=function s(a,b,c){this._byteOffset=b||0,a instanceof ArrayBuffer?this.buffer=a:"object"==(void 0===a?"undefined":g(a))?(this.dataView=a,b&&(this._byteOffset+=b)):this.buffer=new ArrayBuffer(a||0),this.position=0,this.endianness=null==c?s.LITTLE_ENDIAN:c};i.prototype={},i.prototype.getPosition=function(){return this.position},i.prototype._realloc=function(a){if(this._dynamicSize){var b=this._byteOffset+this.position+a,c=this._buffer.byteLength;if(b<=c)b>this._byteLength&&(this._byteLength=b);else{for(c<1&&(c=1);b>c;)c*=2;var d=new ArrayBuffer(c),e=new Uint8Array(this._buffer);new Uint8Array(d,0,e.length).set(e),this.buffer=d,this._byteLength=b}}},i.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var a=new ArrayBuffer(this._byteLength),b=new Uint8Array(a),c=new Uint8Array(this._buffer,0,b.length);b.set(c),this.buffer=a}},i.BIG_ENDIAN=!1,i.LITTLE_ENDIAN=!0,i.prototype._byteLength=0,Object.defineProperty(i.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(a){this._buffer=a,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(i.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(a){this._byteOffset=a,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(i.prototype,"dataView",{get:function(){return this._dataView},set:function(a){this._byteOffset=a.byteOffset,this._buffer=a.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+a.byteLength}}),i.prototype.seek=function(a){var b=Math.max(0,Math.min(this.byteLength,a));this.position=isNaN(b)||!isFinite(b)?0:b},i.prototype.isEof=function(){return this.position>=this._byteLength},i.prototype.mapUint8Array=function(a){this._realloc(1*a);var b=new Uint8Array(this._buffer,this.byteOffset+this.position,a);return this.position+=1*a,b},i.prototype.readInt32Array=function(a,b){a=null==a?this.byteLength-this.position/4:a;var c=new Int32Array(a)
;return i.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,a*c.BYTES_PER_ELEMENT),i.arrayToNative(c,null==b?this.endianness:b),this.position+=c.byteLength,c},i.prototype.readInt16Array=function(a,b){a=null==a?this.byteLength-this.position/2:a;var c=new Int16Array(a);return i.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,a*c.BYTES_PER_ELEMENT),i.arrayToNative(c,null==b?this.endianness:b),this.position+=c.byteLength,c},i.prototype.readInt8Array=function(a){a=null==a?this.byteLength-this.position:a;var b=new Int8Array(a);return i.memcpy(b.buffer,0,this.buffer,this.byteOffset+this.position,a*b.BYTES_PER_ELEMENT),this.position+=b.byteLength,b},i.prototype.readUint32Array=function(a,b){a=null==a?this.byteLength-this.position/4:a;var c=new Uint32Array(a);return i.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,a*c.BYTES_PER_ELEMENT),i.arrayToNative(c,null==b?this.endianness:b),this.position+=c.byteLength,c},i.prototype.readUint16Array=function(a,b){a=null==a?this.byteLength-this.position/2:a;var c=new Uint16Array(a);return i.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,a*c.BYTES_PER_ELEMENT),i.arrayToNative(c,null==b?this.endianness:b),this.position+=c.byteLength,c},i.prototype.readUint8Array=function(a){a=null==a?this.byteLength-this.position:a;var b=new Uint8Array(a);return i.memcpy(b.buffer,0,this.buffer,this.byteOffset+this.position,a*b.BYTES_PER_ELEMENT),this.position+=b.byteLength,b},i.prototype.readFloat64Array=function(a,b){a=null==a?this.byteLength-this.position/8:a;var c=new Float64Array(a);return i.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,a*c.BYTES_PER_ELEMENT),i.arrayToNative(c,null==b?this.endianness:b),this.position+=c.byteLength,c},i.prototype.readFloat32Array=function(a,b){a=null==a?this.byteLength-this.position/4:a;var c=new Float32Array(a);return i.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,a*c.BYTES_PER_ELEMENT),i.arrayToNative(c,null==b?this.endianness:b),this.position+=c.byteLength,c},i.prototype.readInt32=function(a){var b=this._dataView.getInt32(this.position,null==a?this.endianness:a);return this.position+=4,b},i.prototype.readInt16=function(a){var b=this._dataView.getInt16(this.position,null==a?this.endianness:a);return this.position+=2,b},i.prototype.readInt8=function(){var a=this._dataView.getInt8(this.position);return this.position+=1,a},i.prototype.readUint32=function(a){var b=this._dataView.getUint32(this.position,null==a?this.endianness:a);return this.position+=4,b},i.prototype.readUint16=function(a){var b=this._dataView.getUint16(this.position,null==a?this.endianness:a);return this.position+=2,b},i.prototype.readUint8=function(){var a=this._dataView.getUint8(this.position);return this.position+=1,a},i.prototype.readFloat32=function(a){var b=this._dataView.getFloat32(this.position,null==a?this.endianness:a);return this.position+=4,b},i.prototype.readFloat64=function(a){var b=this._dataView.getFloat64(this.position,null==a?this.endianness:a);return this.position+=8,b},i.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,i.memcpy=function(a,b,c,d,e){var f=new Uint8Array(a,b,e),g=new Uint8Array(c,d,e);f.set(g)},i.arrayToNative=function(a,b){return b==this.endianness?a:this.flipArrayEndianness(a)},i.nativeToEndian=function(a,b){return this.endianness==b?a:this.flipArrayEndianness(a)},i.flipArrayEndianness=function(a){for(var b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),c=0;c<a.byteLength;c+=a.BYTES_PER_ELEMENT)for(var d=c+a.BYTES_PER_ELEMENT-1,e=c;d>e;d--,e++){var f=b[e];b[e]=b[d],b[d]=f}return a},i.prototype.failurePosition=0,String.fromCharCodeUint8=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return String.fromCharCode.apply(null,b)},i.prototype.readString=function(a,b){return null==b||"ASCII"==b?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(null==a?this.byteLength-this.position:a)]):new TextDecoder(b).decode(this.mapUint8Array(a))},i.prototype.readCString=function(a){var b=this.byteLength-this.position,c=new Uint8Array(this._buffer,this._byteOffset+this.position),d=b;null!=a&&(d=Math.min(a,b));for(var e=0;e<d&&0!==c[e];e++);var f=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(e)]);return null!=a?this.position+=d-e:e!=b&&(this.position+=1),f};var j=Math.pow(2,32);i.prototype.readInt64=function(){return this.readInt32()*j+this.readUint32()},i.prototype.readUint64=function(){return this.readUint32()*j+this.readUint32()},i.prototype.readInt64=function(){return this.readUint32()*j+this.readUint32()},i.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},void 0!==c&&(c.DataStream=i),i.prototype.save=function(a){var b=new Blob([this.buffer]);if(!window.URL||!URL.createObjectURL)throw"DataStream.save: Can't create object URL.";var c=window.URL.createObjectURL(b),d=document.createElement("a");document.body.appendChild(d),d.setAttribute("href",c),d.setAttribute("download",a),d.setAttribute("target","_self"),d.click(),window.URL.revokeObjectURL(c)},i.prototype._dynamicSize=!0,Object.defineProperty(i.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(a){a||this._trimAlloc(),this._dynamicSize=a}}),i.prototype.shift=function(a){var b=new ArrayBuffer(this._byteLength-a),c=new Uint8Array(b),d=new Uint8Array(this._buffer,a,c.length);c.set(d),this.buffer=b,this.position-=a},i.prototype.writeInt32Array=function(a,b){if(this._realloc(4*a.length),a instanceof Int32Array&&this.byteOffset+this.position%a.BYTES_PER_ELEMENT===0)i.memcpy(this._buffer,this.byteOffset+this.position,a.buffer,0,a.byteLength),this.mapInt32Array(a.length,b);else for(var c=0;c<a.length;c++)this.writeInt32(a[c],b)},i.prototype.writeInt16Array=function(a,b){if(this._realloc(2*a.length),a instanceof Int16Array&&this.byteOffset+this.position%a.BYTES_PER_ELEMENT===0)i.memcpy(this._buffer,this.byteOffset+this.position,a.buffer,0,a.byteLength),this.mapInt16Array(a.length,b);else for(var c=0;c<a.length;c++)this.writeInt16(a[c],b)},i.prototype.writeInt8Array=function(a){if(this._realloc(1*a.length),a instanceof Int8Array&&this.byteOffset+this.position%a.BYTES_PER_ELEMENT===0)i.memcpy(this._buffer,this.byteOffset+this.position,a.buffer,0,a.byteLength),this.mapInt8Array(a.length);else for(var b=0;b<a.length;b++)this.writeInt8(a[b])},i.prototype.writeUint32Array=function(a,b){if(this._realloc(4*a.length),a instanceof Uint32Array&&this.byteOffset+this.position%a.BYTES_PER_ELEMENT===0)i.memcpy(this._buffer,this.byteOffset+this.position,a.buffer,0,a.byteLength),this.mapUint32Array(a.length,b);else for(var c=0;c<a.length;c++)this.writeUint32(a[c],b)},i.prototype.writeUint16Array=function(a,b){if(this._realloc(2*a.length),a instanceof Uint16Array&&this.byteOffset+this.position%a.BYTES_PER_ELEMENT===0)i.memcpy(this._buffer,this.byteOffset+this.position,a.buffer,0,a.byteLength),this.mapUint16Array(a.length,b);else for(var c=0;c<a.length;c++)this.writeUint16(a[c],b)},i.prototype.writeUint8Array=function(a){if(this._realloc(1*a.length),a instanceof Uint8Array&&this.byteOffset+this.position%a.BYTES_PER_ELEMENT===0)i.memcpy(this._buffer,this.byteOffset+this.position,a.buffer,0,a.byteLength),this.mapUint8Array(a.length);else for(var b=0;b<a.length;b++)this.writeUint8(a[b])},i.prototype.writeFloat64Array=function(a,b){if(this._realloc(8*a.length),a instanceof Float64Array&&this.byteOffset+this.position%a.BYTES_PER_ELEMENT===0)i.memcpy(this._buffer,this.byteOffset+this.position,a.buffer,0,a.byteLength),this.mapFloat64Array(a.length,b);else for(var c=0;c<a.length;c++)this.writeFloat64(a[c],b)},i.prototype.writeFloat32Array=function(a,b){if(this._realloc(4*a.length),a instanceof Float32Array&&this.byteOffset+this.position%a.BYTES_PER_ELEMENT===0)i.memcpy(this._buffer,this.byteOffset+this.position,a.buffer,0,a.byteLength),this.mapFloat32Array(a.length,b);else for(var c=0;c<a.length;c++)this.writeFloat32(a[c],b)},i.prototype.writeInt32=function(a,b){this._realloc(4),this._dataView.setInt32(this.position,a,null==b?this.endianness:b),this.position+=4},i.prototype.writeInt16=function(a,b){this._realloc(2),this._dataView.setInt16(this.position,a,null==b?this.endianness:b),this.position+=2},i.prototype.writeInt8=function(a){this._realloc(1),this._dataView.setInt8(this.position,a),this.position+=1},i.prototype.writeUint32=function(a,b){this._realloc(4),this._dataView.setUint32(this.position,a,null==b?this.endianness:b),this.position+=4},i.prototype.writeUint16=function(a,b){this._realloc(2),this._dataView.setUint16(this.position,a,null==b?this.endianness:b),this.position+=2},i.prototype.writeUint8=function(a){this._realloc(1),this._dataView.setUint8(this.position,a),this.position+=1},i.prototype.writeFloat32=function(a,b){this._realloc(4),this._dataView.setFloat32(this.position,a,null==b?this.endianness:b),this.position+=4},i.prototype.writeFloat64=function(a,b){this._realloc(8),this._dataView.setFloat64(this.position,a,null==b?this.endianness:b),this.position+=8},i.prototype.writeUCS2String=function(a,b,c){null==c&&(c=a.length);for(var d=0;d<a.length&&d<c;d++)this.writeUint16(a.charCodeAt(d),b);for(;d<c;d++)this.writeUint16(0)},i.prototype.writeString=function(a,b,c){var d=0;if(null==b||"ASCII"==b)if(null!=c){var e=Math.min(a.length,c);for(d=0;d<e;d++)this.writeUint8(a.charCodeAt(d));for(;d<c;d++)this.writeUint8(0)}else for(d=0;d<a.length;d++)this.writeUint8(a.charCodeAt(d));else this.writeUint8Array(new TextEncoder(b).encode(a.substring(0,c)))},i.prototype.writeCString=function(a,b){var c=0;if(null!=b){var d=Math.min(a.length,b);for(c=0;c<d;c++)this.writeUint8(a.charCodeAt(c));for(;c<b;c++)this.writeUint8(0)}else{for(c=0;c<a.length;c++)this.writeUint8(a.charCodeAt(c));this.writeUint8(0)}},i.prototype.writeStruct=function(a,b){for(var c=0;c<a.length;c+=2){var d=a[c+1];this.writeType(d,b[a[c]],b)}},i.prototype.writeType=function(a,b,c){var d;if("function"==typeof a)return a(this,b);if("object"==(void 0===a?"undefined":g(a))&&!(a instanceof Array))return a.set(this,b,c);var e=null,f="ASCII",h=this.position;switch("string"==typeof a&&/:/.test(a)&&(d=a.split(":"),a=d[0],e=parseInt(d[1])),"string"==typeof a&&/,/.test(a)&&(d=a.split(","),a=d[0],f=parseInt(d[1])),a){case"uint8":this.writeUint8(b);break;case"int8":this.writeInt8(b);break;case"uint16":this.writeUint16(b,this.endianness);break;case"int16":this.writeInt16(b,this.endianness);break;case"uint32":this.writeUint32(b,this.endianness);break;case"int32":this.writeInt32(b,this.endianness);break;case"float32":this.writeFloat32(b,this.endianness);break;case"float64":this.writeFloat64(b,this.endianness);break;case"uint16be":this.writeUint16(b,i.BIG_ENDIAN);break;case"int16be":this.writeInt16(b,i.BIG_ENDIAN);break;case"uint32be":this.writeUint32(b,i.BIG_ENDIAN);break;case"int32be":this.writeInt32(b,i.BIG_ENDIAN);break;case"float32be":this.writeFloat32(b,i.BIG_ENDIAN);break;case"float64be":this.writeFloat64(b,i.BIG_ENDIAN);break;case"uint16le":this.writeUint16(b,i.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(b,i.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(b,i.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(b,i.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(b,i.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(b,i.LITTLE_ENDIAN);break;case"cstring":this.writeCString(b,e);break;case"string":this.writeString(b,f,e);break;case"u16string":this.writeUCS2String(b,this.endianness,e);break;case"u16stringle":this.writeUCS2String(b,i.LITTLE_ENDIAN,e);break;case"u16stringbe":this.writeUCS2String(b,i.BIG_ENDIAN,e);break;default:if(3==a.length){for(var j=a[1],k=0;k<b.length;k++)this.writeType(j,b[k]);break}this.writeStruct(a,b)}null!=e&&(this.position=h,this._realloc(e),this.position=h+e)},i.prototype.writeUint64=function(a){var b=Math.floor(a/j);this.writeUint32(b),this.writeUint32(4294967295&a)},i.prototype.writeUint24=function(a){this.writeUint8((16711680&a)>>16),this.writeUint8((65280&a)>>8),this.writeUint8(255&a)},i.prototype.adjustUint32=function(a,b){var c=this.position;this.seek(a),this.writeUint32(b),this.seek(c)},i.prototype.mapInt32Array=function(a,b){this._realloc(4*a);var c=new Int32Array(this._buffer,this.byteOffset+this.position,a);return i.arrayToNative(c,null==b?this.endianness:b),this.position+=4*a,c},i.prototype.mapInt16Array=function(a,b){this._realloc(2*a);var c=new Int16Array(this._buffer,this.byteOffset+this.position,a);return i.arrayToNative(c,null==b?this.endianness:b),this.position+=2*a,c},i.prototype.mapInt8Array=function(a){this._realloc(1*a);var b=new Int8Array(this._buffer,this.byteOffset+this.position,a);return this.position+=1*a,b},i.prototype.mapUint32Array=function(a,b){this._realloc(4*a);var c=new Uint32Array(this._buffer,this.byteOffset+this.position,a);return i.arrayToNative(c,null==b?this.endianness:b),this.position+=4*a,c},i.prototype.mapUint16Array=function(a,b){this._realloc(2*a);var c=new Uint16Array(this._buffer,this.byteOffset+this.position,a);return i.arrayToNative(c,null==b?this.endianness:b),this.position+=2*a,c},i.prototype.mapFloat64Array=function(a,b){this._realloc(8*a);var c=new Float64Array(this._buffer,this.byteOffset+this.position,a);return i.arrayToNative(c,null==b?this.endianness:b),this.position+=8*a,c},i.prototype.mapFloat32Array=function(a,b){this._realloc(4*a);var c=new Float32Array(this._buffer,this.byteOffset+this.position,a);return i.arrayToNative(c,null==b?this.endianness:b),this.position+=4*a,c};var k=function(a){this.buffers=[],this.bufferIndex=-1,a&&(this.insertBuffer(a),this.bufferIndex=0)};(k.prototype=new i(new ArrayBuffer,0,i.BIG_ENDIAN)).initialized=function(){var a;return this.bufferIndex>-1||(this.buffers.length>0?0===(a=this.buffers[0]).fileStart?(this.buffer=a,this.bufferIndex=0,f.debug("MultiBufferStream","Stream ready for parsing"),!0):(f.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1):(f.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1))},ArrayBuffer.concat=function(a,b){f.debug("ArrayBuffer","Trying to create a new buffer of size: "+(a.byteLength+b.byteLength));var c=new Uint8Array(a.byteLength+b.byteLength);return c.set(new Uint8Array(a),0),c.set(new Uint8Array(b),a.byteLength),c.buffer},k.prototype.reduceBuffer=function(a,b,c){var d;return(d=new Uint8Array(c)).set(new Uint8Array(a,b,c)),d.buffer.fileStart=a.fileStart+b,d.buffer.usedBytes=0,d.buffer},k.prototype.insertBuffer=function(a){for(var b=!0,c=0;c<this.buffers.length;c++){var d=this.buffers[c];if(a.fileStart<=d.fileStart){if(a.fileStart===d.fileStart){if(a.byteLength>d.byteLength){this.buffers.splice(c,1),c--;continue}f.warn("MultiBufferStream","Buffer (fileStart: "+a.fileStart+" - Length: "+a.byteLength+") already appended, ignoring")}else a.fileStart+a.byteLength<=d.fileStart||(a=this.reduceBuffer(a,0,d.fileStart-a.fileStart)),f.debug("MultiBufferStream","Appending new buffer (fileStart: "+a.fileStart+" - Length: "+a.byteLength+")"),this.buffers.splice(c,0,a),0===c&&(this.buffer=a);b=!1;break}if(a.fileStart<d.fileStart+d.byteLength){var e=d.fileStart+d.byteLength-a.fileStart,g=a.byteLength-e;if(!(g>0)){b=!1;break}a=this.reduceBuffer(a,e,g)}}b&&(f.debug("MultiBufferStream","Appending new buffer (fileStart: "+a.fileStart+" - Length: "+a.byteLength+")"),this.buffers.push(a),0===c&&(this.buffer=a))},k.prototype.logBufferLevel=function(a){var b,c,d,e,g,h=[],i="";for(d=0,e=0,b=0;b<this.buffers.length;b++)c=this.buffers[b],0===b?(g={},h.push(g),g.start=c.fileStart,g.end=c.fileStart+c.byteLength,i+="["+g.start+"-"):g.end===c.fileStart?g.end=c.fileStart+c.byteLength:((g={}).start=c.fileStart,i+=h[h.length-1].end-1+"], ["+g.start+"-",g.end=c.fileStart+c.byteLength,h.push(g)),d+=c.usedBytes,e+=c.byteLength;h.length>0&&(i+=g.end-1+"]");var j=a?f.info:f.debug;0===this.buffers.length?j("MultiBufferStream","No more buffer in memory"):j("MultiBufferStream",this.buffers.length+" stored buffer(s) ("+d+"/"+e+" bytes): "+i)},k.prototype.cleanBuffers=function(){var a,b;for(a=0;a<this.buffers.length;a++)(b=this.buffers[a]).usedBytes===b.byteLength&&(f.debug("MultiBufferStream","Removing buffer #"+a),this.buffers.splice(a,1),a--)},k.prototype.mergeNextBuffer=function(){var a;if(this.bufferIndex+1<this.buffers.length){if((a=this.buffers[this.bufferIndex+1]).fileStart===this.buffer.fileStart+this.buffer.byteLength){var b=this.buffer.byteLength,c=this.buffer.usedBytes,d=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,a),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=c,this.buffer.fileStart=d,f.debug("ISOFile","Concatenating buffer for box parsing (length: "+b+"->"+this.buffer.byteLength+")"),!0}return!1}return!1},k.prototype.findPosition=function(a,b,c){var d,e=null,g=-1;for(d=!0===a?0:this.bufferIndex;d<this.buffers.length&&(e=this.buffers[d]).fileStart<=b;)g=d,c&&(e.fileStart+e.byteLength<=b?e.usedBytes=e.byteLength:e.usedBytes=b-e.fileStart,this.logBufferLevel()),d++;return-1!==g&&(e=this.buffers[g]).fileStart+e.byteLength>=b?(f.debug("MultiBufferStream","Found position in existing buffer #"+g),g):-1},k.prototype.findEndContiguousBuf=function(a){var b,c,d,e=void 0!==a?a:this.bufferIndex;if(c=this.buffers[e],this.buffers.length>e+1)for(b=e+1;b<this.buffers.length&&(d=this.buffers[b]).fileStart===c.fileStart+c.byteLength;b++)c=d;return c.fileStart+c.byteLength},k.prototype.getEndFilePositionAfter=function(a){var b=this.findPosition(!0,a,!1);return-1!==b?this.findEndContiguousBuf(b):a},k.prototype.addUsedBytes=function(a){this.buffer.usedBytes+=a,this.logBufferLevel()},k.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},k.prototype.seek=function(a,b,c){var d;return-1!==(d=this.findPosition(b,a,c))?(this.buffer=this.buffers[d],this.bufferIndex=d,this.position=a-this.buffer.fileStart,f.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(f.debug("MultiBufferStream","Position "+a+" not found in buffered data"),!1)},k.prototype.getPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},k.prototype.getLength=function(){return this.byteLength},k.prototype.getEndPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},void 0!==c&&(c.MultiBufferStream=k);var l=function(){var a=[];a[3]="ES_Descriptor",a[4]="DecoderConfigDescriptor",a[5]="DecoderSpecificInfo",a[6]="SLConfigDescriptor",this.getDescriptorName=function(b){return a[b]};var b=this,c={};return this.parseOneDescriptor=function(b){var d,e,g,h=0;for(d=b.readUint8(),g=b.readUint8();128&g;)h=(127&g)<<7,g=b.readUint8();return h+=127&g,f.debug("MPEG4DescriptorParser","Found "+(a[d]||"Descriptor "+d)+", size "+h+" at position "+b.getPosition()),(e=a[d]?new c[a[d]](h):new c.Descriptor(h)).parse(b),e},c.Descriptor=function(a,b){this.tag=a,this.size=b,this.descs=[]},c.Descriptor.prototype.parse=function(a){this.data=a.readUint8Array(this.size)},c.Descriptor.prototype.findDescriptor=function(a){for(var b=0;b<this.descs.length;b++)if(this.descs[b].tag==a)return this.descs[b];return null},c.Descriptor.prototype.parseRemainingDescriptors=function(a){for(var c=a.position;a.position<c+this.size;){var d=b.parseOneDescriptor(a);this.descs.push(d)}},c.ES_Descriptor=function(a){c.Descriptor.call(this,3,a)},c.ES_Descriptor.prototype=new c.Descriptor,c.ES_Descriptor.prototype.parse=function(a){if(this.ES_ID=a.readUint16(),this.flags=a.readUint8(),this.size-=3,128&this.flags?(this.dependsOn_ES_ID=a.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,64&this.flags){var b=a.readUint8();this.URL=a.readString(b),this.size-=b+1}else this.URL="";32&this.flags?(this.OCR_ES_ID=a.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(a)},c.ES_Descriptor.prototype.getOTI=function(a){var b=this.findDescriptor(4);return b?b.oti:0},c.ES_Descriptor.prototype.getAudioConfig=function(a){var b=this.findDescriptor(4);if(!b)return null;var c=b.findDescriptor(5);if(c&&c.data){var d=(248&c.data[0])>>3;return 31===d&&c.data.length>=2&&(d=32+((7&c.data[0])<<3)+((224&c.data[1])>>5)),d}return null},c.DecoderConfigDescriptor=function(a){c.Descriptor.call(this,4,a)},c.DecoderConfigDescriptor.prototype=new c.Descriptor,c.DecoderConfigDescriptor.prototype.parse=function(a){this.oti=a.readUint8(),this.streamType=a.readUint8(),this.bufferSize=a.readUint24(),this.maxBitrate=a.readUint32(),this.avgBitrate=a.readUint32(),this.size-=13,this.parseRemainingDescriptors(a)},c.DecoderSpecificInfo=function(a){c.Descriptor.call(this,5,a)},c.DecoderSpecificInfo.prototype=new c.Descriptor,c.SLConfigDescriptor=function(a){c.Descriptor.call(this,6,a)},c.SLConfigDescriptor.prototype=new c.Descriptor,this};void 0!==c&&(c.MPEG4DescriptorParser=l);var m={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){m.FullBox.prototype=new m.Box,m.ContainerBox.prototype=new m.Box,m.SampleEntry.prototype=new m.Box,m.TrackGroupTypeBox.prototype=new m.FullBox,m.BASIC_BOXES.forEach(function(a){m.createBoxCtor(a)}),m.FULL_BOXES.forEach(function(a){m.createFullBoxCtor(a)}),m.CONTAINER_BOXES.forEach(function(a){m.createContainerBoxCtor(a[0],null,a[1])})},Box:function(a,b,c){this.type=a,this.size=b,this.uuid=c},FullBox:function(a,b,c){m.Box.call(this,a,b,c),this.flags=0,this.version=0},ContainerBox:function(a,b,c){m.Box.call(this,a,b,c),this.boxes=[]},SampleEntry:function(a,b,c,d){m.ContainerBox.call(this,a,b),this.hdr_size=c,this.start=d},SampleGroupEntry:function(a){this.grouping_type=a},TrackGroupTypeBox:function(a,b){m.FullBox.call(this,a,b)},createBoxCtor:function(a,b){m.boxCodes.push(a),m[a+"Box"]=function(b){m.Box.call(this,a,b)},m[a+"Box"].prototype=new m.Box,b&&(m[a+"Box"].prototype.parse=b)},createFullBoxCtor:function(a,b){m[a+"Box"]=function(b){m.FullBox.call(this,a,b)},m[a+"Box"].prototype=new m.FullBox,m[a+"Box"].prototype.parse=function(a){this.parseFullHeader(a),b&&b.call(this,a)}},addSubBoxArrays:function(a){if(a){this.subBoxNames=a;for(var b=a.length,c=0;c<b;c++)this[a[c]+"s"]=[]}},createContainerBoxCtor:function(a,b,c){m[a+"Box"]=function(b){m.ContainerBox.call(this,a,b),m.addSubBoxArrays.call(this,c)},m[a+"Box"].prototype=new m.ContainerBox,b&&(m[a+"Box"].prototype.parse=b)},createMediaSampleEntryCtor:function(a,b,c){m.sampleEntryCodes[a]=[],m[a+"SampleEntry"]=function(a,b){m.SampleEntry.call(this,a,b),m.addSubBoxArrays.call(this,c)},m[a+"SampleEntry"].prototype=new m.SampleEntry,b&&(m[a+"SampleEntry"].prototype.parse=b)},createSampleEntryCtor:function(a,b,c,d){m.sampleEntryCodes[a].push(b),m[b+"SampleEntry"]=function(c){m[a+"SampleEntry"].call(this,b,c),m.addSubBoxArrays.call(this,d)},m[b+"SampleEntry"].prototype=new m[a+"SampleEntry"],c&&(m[b+"SampleEntry"].prototype.parse=c)},createEncryptedSampleEntryCtor:function(a,b,c){m.createSampleEntryCtor.call(this,a,b,c,["sinf"])},createSampleGroupCtor:function(a,b){m[a+"SampleGroupEntry"]=function(b){m.SampleGroupEntry.call(this,a,b)},m[a+"SampleGroupEntry"].prototype=new m.SampleGroupEntry,b&&(m[a+"SampleGroupEntry"].prototype.parse=b)},createTrackGroupCtor:function(a,b){m[a+"TrackGroupTypeBox"]=function(b){m.TrackGroupTypeBox.call(this,a,b)},m[a+"TrackGroupTypeBox"].prototype=new m.TrackGroupTypeBox,b&&(m[a+"TrackGroupTypeBox"].prototype.parse=b)},createUUIDBox:function(a,b,c,d){m.UUIDs.push(a),m.UUIDBoxes[a]=function(d){b?m.FullBox.call(this,"uuid",d,a):c?m.ContainerBox.call(this,"uuid",d,a):m.Box.call(this,"uuid",d,a)},m.UUIDBoxes[a].prototype=b?new m.FullBox:c?new m.ContainerBox:new m.Box,d&&(m.UUIDBoxes[a].prototype.parse=b?function(a){this.parseFullHeader(a),d&&d.call(this,a)}:d)}};m.initialize(),m.TKHD_FLAG_ENABLED=1,m.TKHD_FLAG_IN_MOVIE=2,m.TKHD_FLAG_IN_PREVIEW=4,m.TFHD_FLAG_BASE_DATA_OFFSET=1,m.TFHD_FLAG_SAMPLE_DESC=2,m.TFHD_FLAG_SAMPLE_DUR=8,m.TFHD_FLAG_SAMPLE_SIZE=16,m.TFHD_FLAG_SAMPLE_FLAGS=32,m.TFHD_FLAG_DUR_EMPTY=65536,m.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,m.TRUN_FLAGS_DATA_OFFSET=1,m.TRUN_FLAGS_FIRST_FLAG=4,m.TRUN_FLAGS_DURATION=256,m.TRUN_FLAGS_SIZE=512,m.TRUN_FLAGS_FLAGS=1024,m.TRUN_FLAGS_CTS_OFFSET=2048,m.Box.prototype.add=function(a){return this.addBox(new m[a+"Box"])},m.Box.prototype.addBox=function(a){return this.boxes.push(a),this[a.type+"s"]?this[a.type+"s"].push(a):this[a.type]=a,a},m.Box.prototype.set=function(a,b){return this[a]=b,this},m.Box.prototype.addEntry=function(a,b){var c=b||"entries";return this[c]||(this[c]=[]),this[c].push(a),this},void 0!==c&&(c.BoxParser=m),m.parseUUID=function(a){return m.parseHex16(a)},m.parseHex16=function(a){for(var b="",c=0;c<16;c++){var d=a.readUint8().toString(16);b+=1===d.length?"0"+d:d}return b},m.parseOneBox=function(a,b,c){var d,e,g,h=a.getPosition(),i=0;if(a.getEndPosition()-h<8)return f.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:m.ERR_NOT_ENOUGH_DATA};if(c&&c<8)return f.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:m.ERR_NOT_ENOUGH_DATA};var j=a.readUint32(),k=a.readString(4),l=k;if(f.debug("BoxParser","Found box of type '"+k+"' and size "+j+" at position "+h),i=8,"uuid"==k){if(a.getEndPosition()-a.getPosition()<16||c-i<16)return a.seek(h),f.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:m.ERR_NOT_ENOUGH_DATA};i+=16,l=g=m.parseUUID(a)}if(1==j){if(a.getEndPosition()-a.getPosition()<8||c&&c-i<8)return a.seek(h),f.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+k+'" box'),{code:m.ERR_NOT_ENOUGH_DATA};j=a.readUint64(),i+=8}else if(0===j)if(c)j=c;else if("mdat"!==k)return f.error("BoxParser","Unlimited box size not supported for type: '"+k+"'"),d=new m.Box(k,j),{code:m.OK,box:d,size:d.size};return j<i?(f.error("BoxParser","Box of type "+k+" has an invalid size "+j+" (too small to be a box)"),{code:m.ERR_NOT_ENOUGH_DATA,type:k,size:j,hdr_size:i,start:h}):c&&j>c?(f.error("BoxParser","Box of type '"+k+"' has a size "+j+" greater than its container size "+c),{code:m.ERR_NOT_ENOUGH_DATA,type:k,size:j,hdr_size:i,start:h}):h+j>a.getEndPosition()?(a.seek(h),f.info("BoxParser","Not enough data in stream to parse the entire '"+k+"' box"),{code:m.ERR_NOT_ENOUGH_DATA,type:k,size:j,hdr_size:i,start:h}):b?{code:m.OK,type:k,size:j,hdr_size:i,start:h}:(m[k+"Box"]?d=new m[k+"Box"](j):"uuid"!==k?(f.warn("BoxParser","Unknown box type: '"+k+"'"),(d=new m.Box(k,j)).has_unparsed_data=!0):m.UUIDBoxes[g]?d=new m.UUIDBoxes[g](j):(f.warn("BoxParser","Unknown uuid type: '"+g+"'"),(d=new m.Box(k,j)).uuid=g,d.has_unparsed_data=!0),d.hdr_size=i,d.start=h,d.write===m.Box.prototype.write&&"mdat"!==d.type&&(f.info("BoxParser","'"+l+"' box writing not yet implemented, keeping unparsed data in memory for later write"),d.parseDataAndRewind(a)),d.parse(a),(e=a.getPosition()-(d.start+d.size))<0?(f.warn("BoxParser","Parsing of box '"+l+"' did not read the entire indicated box data size (missing "+-e+" bytes), seeking forward"),a.seek(d.start+d.size)):e>0&&(f.error("BoxParser","Parsing of box '"+l+"' read "+e+" more bytes than the indicated box data size, seeking backwards"),a.seek(d.start+d.size)),{code:m.OK,box:d,size:d.size})},m.Box.prototype.parse=function(a){"mdat"!=this.type?this.data=a.readUint8Array(this.size-this.hdr_size):0===this.size?a.seek(a.getEndPosition()):a.seek(this.start+this.size)},m.Box.prototype.parseDataAndRewind=function(a){this.data=a.readUint8Array(this.size-this.hdr_size),a.position-=this.size-this.hdr_size},m.FullBox.prototype.parseDataAndRewind=function(a){this.parseFullHeader(a),this.data=a.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,a.position-=this.size-this.hdr_size},m.FullBox.prototype.parseFullHeader=function(a){this.version=a.readUint8(),this.flags=a.readUint24(),this.hdr_size+=4},m.FullBox.prototype.parse=function(a){this.parseFullHeader(a),this.data=a.readUint8Array(this.size-this.hdr_size)},m.ContainerBox.prototype.parse=function(a){for(var b,c;a.getPosition()<this.start+this.size;){if((b=m.parseOneBox(a,!1,this.size-(a.getPosition()-this.start))).code!==m.OK)return;if(c=b.box,this.boxes.push(c),this.subBoxNames&&-1!=this.subBoxNames.indexOf(c.type))this[this.subBoxNames[this.subBoxNames.indexOf(c.type)]+"s"].push(c);else{var d="uuid"!==c.type?c.type:c.uuid;this[d]?f.warn("Box of type "+d+" already stored in field of this type"):this[d]=c}}},m.Box.prototype.parseLanguage=function(a){this.language=a.readUint16();var b=[];b[0]=this.language>>10&31,b[1]=this.language>>5&31,b[2]=31&this.language,this.languageString=String.fromCharCode(b[0]+96,b[1]+96,b[2]+96)},m.SAMPLE_ENTRY_TYPE_VISUAL="Visual",m.SAMPLE_ENTRY_TYPE_AUDIO="Audio",m.SAMPLE_ENTRY_TYPE_HINT="Hint",m.SAMPLE_ENTRY_TYPE_METADATA="Metadata",m.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",m.SAMPLE_ENTRY_TYPE_SYSTEM="System",m.SAMPLE_ENTRY_TYPE_TEXT="Text",m.SampleEntry.prototype.parseHeader=function(a){a.readUint8Array(6),this.data_reference_index=a.readUint16(),this.hdr_size+=8},m.SampleEntry.prototype.parse=function(a){this.parseHeader(a),this.data=a.readUint8Array(this.size-this.hdr_size)},m.SampleEntry.prototype.parseDataAndRewind=function(a){this.parseHeader(a),this.data=a.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,a.position-=this.size-this.hdr_size},m.SampleEntry.prototype.parseFooter=function(a){m.ContainerBox.prototype.parse.call(this,a)},m.createMediaSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_HINT),m.createMediaSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_METADATA),m.createMediaSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_SUBTITLE),m.createMediaSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_SYSTEM),m.createMediaSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_TEXT),m.createMediaSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_VISUAL,function(a){var b;this.parseHeader(a),a.readUint16(),a.readUint16(),a.readUint32Array(3),this.width=a.readUint16(),this.height=a.readUint16(),this.horizresolution=a.readUint32(),this.vertresolution=a.readUint32(),a.readUint32(),this.frame_count=a.readUint16(),b=Math.min(31,a.readUint8()),this.compressorname=a.readString(b),b<31&&a.readString(31-b),this.depth=a.readUint16(),a.readUint16(),this.parseFooter(a)}),m.createMediaSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_AUDIO,function(a){this.parseHeader(a),a.readUint32Array(2),this.channel_count=a.readUint16(),this.samplesize=a.readUint16(),a.readUint16(),a.readUint16(),this.samplerate=a.readUint32()/65536,this.parseFooter(a)}),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),m.createEncryptedSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),m.createEncryptedSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),m.createEncryptedSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),
m.createEncryptedSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),m.createEncryptedSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_TEXT,"enct"),m.createEncryptedSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_METADATA,"encm"),m.createBoxCtor("av1C",function(a){var b=a.readUint8();if(b>>7&!1)f.error("av1C marker problem");else if(this.version=127&b,1===this.version)if(b=a.readUint8(),this.seq_profile=b>>5&7,this.seq_level_idx_0=31&b,b=a.readUint8(),this.seq_tier_0=b>>7&1,this.high_bitdepth=b>>6&1,this.twelve_bit=b>>5&1,this.monochrome=b>>4&1,this.chroma_subsampling_x=b>>3&1,this.chroma_subsampling_y=b>>2&1,this.chroma_sample_position=3&b,b=a.readUint8(),this.reserved_1=b>>5&7,0===this.reserved_1){if(this.initial_presentation_delay_present=b>>4&1,1===this.initial_presentation_delay_present)this.initial_presentation_delay_minus_one=15&b;else if(this.reserved_2=15&b,0!==this.reserved_2)return void f.error("av1C reserved_2 parsing problem");var c=this.size-this.hdr_size-4;this.configOBUs=a.readUint8Array(c)}else f.error("av1C reserved_1 parsing problem");else f.error("av1C version "+this.version+" not supported")}),m.createBoxCtor("avcC",function(a){var b,c;for(this.configurationVersion=a.readUint8(),this.AVCProfileIndication=a.readUint8(),this.profile_compatibility=a.readUint8(),this.AVCLevelIndication=a.readUint8(),this.lengthSizeMinusOne=3&a.readUint8(),this.nb_SPS_nalus=31&a.readUint8(),c=this.size-this.hdr_size-6,this.SPS=[],b=0;b<this.nb_SPS_nalus;b++)this.SPS[b]={},this.SPS[b].length=a.readUint16(),this.SPS[b].nalu=a.readUint8Array(this.SPS[b].length),c-=2+this.SPS[b].length;for(this.nb_PPS_nalus=a.readUint8(),c--,this.PPS=[],b=0;b<this.nb_PPS_nalus;b++)this.PPS[b]={},this.PPS[b].length=a.readUint16(),this.PPS[b].nalu=a.readUint8Array(this.PPS[b].length),c-=2+this.PPS[b].length;c>0&&(this.ext=a.readUint8Array(c))}),m.createBoxCtor("btrt",function(a){this.bufferSizeDB=a.readUint32(),this.maxBitrate=a.readUint32(),this.avgBitrate=a.readUint32()}),m.createBoxCtor("clap",function(a){this.cleanApertureWidthN=a.readUint32(),this.cleanApertureWidthD=a.readUint32(),this.cleanApertureHeightN=a.readUint32(),this.cleanApertureHeightD=a.readUint32(),this.horizOffN=a.readUint32(),this.horizOffD=a.readUint32(),this.vertOffN=a.readUint32(),this.vertOffD=a.readUint32()}),m.createBoxCtor("clli",function(a){this.max_content_light_level=a.readUint16(),this.max_pic_average_light_level=a.readUint16()}),m.createFullBoxCtor("co64",function(a){var b,c;if(b=a.readUint32(),this.chunk_offsets=[],0===this.version)for(c=0;c<b;c++)this.chunk_offsets.push(a.readUint64())}),m.createFullBoxCtor("CoLL",function(a){this.maxCLL=a.readUint16(),this.maxFALL=a.readUint16()}),m.createBoxCtor("colr",function(a){if(this.colour_type=a.readString(4),"nclx"===this.colour_type){this.colour_primaries=a.readUint16(),this.transfer_characteristics=a.readUint16(),this.matrix_coefficients=a.readUint16();var b=a.readUint8();this.full_range_flag=b>>7}else("rICC"===this.colour_type||"prof"===this.colour_type)&&(this.ICC_profile=a.readUint8Array(this.size-4))}),m.createFullBoxCtor("cprt",function(a){this.parseLanguage(a),this.notice=a.readCString()}),m.createFullBoxCtor("cslg",function(a){0===this.version&&(this.compositionToDTSShift=a.readInt32(),this.leastDecodeToDisplayDelta=a.readInt32(),this.greatestDecodeToDisplayDelta=a.readInt32(),this.compositionStartTime=a.readInt32(),this.compositionEndTime=a.readInt32())}),m.createFullBoxCtor("ctts",function(a){var b,c;if(b=a.readUint32(),this.sample_counts=[],this.sample_offsets=[],0===this.version)for(c=0;c<b;c++){this.sample_counts.push(a.readUint32());var d=a.readInt32();d<0&&f.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(d)}else if(1==this.version)for(c=0;c<b;c++)this.sample_counts.push(a.readUint32()),this.sample_offsets.push(a.readInt32())}),m.createBoxCtor("dac3",function(a){var b=a.readUint8(),c=a.readUint8(),d=a.readUint8();this.fscod=b>>6,this.bsid=b>>1&31,this.bsmod=(1&b)<<2|c>>6&3,this.acmod=c>>3&7,this.lfeon=c>>2&1,this.bit_rate_code=3&c|d>>5&7}),m.createBoxCtor("dec3",function(a){var b=a.readUint16();this.data_rate=b>>3,this.num_ind_sub=7&b,this.ind_subs=[];for(var c=0;c<this.num_ind_sub+1;c++){var d={};this.ind_subs.push(d);var e=a.readUint8(),f=a.readUint8(),g=a.readUint8();d.fscod=e>>6,d.bsid=e>>1&31,d.bsmod=(1&e)<<4|f>>4&15,d.acmod=f>>1&7,d.lfeon=1&f,d.num_dep_sub=g>>1&15,d.num_dep_sub>0&&(d.chan_loc=(1&g)<<8|a.readUint8())}}),m.createFullBoxCtor("dfLa",function(a){var b=[],c=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];for(this.parseFullHeader(a);;){var d=a.readUint8(),e=Math.min(127&d,c.length-1);if(e?a.readUint8Array(a.readUint24()):(a.readUint8Array(13),this.samplerate=a.readUint32()>>12,a.readUint8Array(20)),b.push(c[e]),128&d)break}this.numMetadataBlocks=b.length+" ("+b.join(", ")+")"}),m.createBoxCtor("dimm",function(a){this.bytessent=a.readUint64()}),m.createBoxCtor("dmax",function(a){this.time=a.readUint32()}),m.createBoxCtor("dmed",function(a){this.bytessent=a.readUint64()}),m.createFullBoxCtor("dref",function(a){var b,c;this.entries=[];for(var d=a.readUint32(),e=0;e<d;e++){if((b=m.parseOneBox(a,!1,this.size-(a.getPosition()-this.start))).code!==m.OK)return;c=b.box,this.entries.push(c)}}),m.createBoxCtor("drep",function(a){this.bytessent=a.readUint64()}),m.createFullBoxCtor("elng",function(a){this.extended_language=a.readString(this.size-this.hdr_size)}),m.createFullBoxCtor("elst",function(a){this.entries=[];for(var b=a.readUint32(),c=0;c<b;c++){var d={};this.entries.push(d),1===this.version?(d.segment_duration=a.readUint64(),d.media_time=a.readInt64()):(d.segment_duration=a.readUint32(),d.media_time=a.readInt32()),d.media_rate_integer=a.readInt16(),d.media_rate_fraction=a.readInt16()}}),m.createFullBoxCtor("emsg",function(a){1==this.version?(this.timescale=a.readUint32(),this.presentation_time=a.readUint64(),this.event_duration=a.readUint32(),this.id=a.readUint32(),this.scheme_id_uri=a.readCString(),this.value=a.readCString()):(this.scheme_id_uri=a.readCString(),this.value=a.readCString(),this.timescale=a.readUint32(),this.presentation_time_delta=a.readUint32(),this.event_duration=a.readUint32(),this.id=a.readUint32());var b=this.size-this.hdr_size-(16+(this.scheme_id_uri.length+1)+(this.value.length+1));1==this.version&&(b-=4),this.message_data=a.readUint8Array(b)}),m.createFullBoxCtor("esds",function(a){var b=a.readUint8Array(this.size-this.hdr_size);if(void 0!==l){var c=new l;this.esd=c.parseOneDescriptor(new i(b.buffer,0,i.BIG_ENDIAN))}}),m.createBoxCtor("fiel",function(a){this.fieldCount=a.readUint8(),this.fieldOrdering=a.readUint8()}),m.createBoxCtor("frma",function(a){this.data_format=a.readString(4)}),m.createBoxCtor("ftyp",function(a){var b=this.size-this.hdr_size;this.major_brand=a.readString(4),this.minor_version=a.readUint32(),b-=8,this.compatible_brands=[];for(var c=0;b>=4;)this.compatible_brands[c]=a.readString(4),b-=4,c++}),m.createFullBoxCtor("hdlr",function(a){0===this.version&&(a.readUint32(),this.handler=a.readString(4),a.readUint32Array(3),this.name=a.readString(this.size-this.hdr_size-20),"\0"===this.name[this.name.length-1]&&(this.name=this.name.slice(0,-1)))}),m.createBoxCtor("hvcC",function(a){var b,c,d,e;this.configurationVersion=a.readUint8(),e=a.readUint8(),this.general_profile_space=e>>6,this.general_tier_flag=(32&e)>>5,this.general_profile_idc=31&e,this.general_profile_compatibility=a.readUint32(),this.general_constraint_indicator=a.readUint8Array(6),this.general_level_idc=a.readUint8(),this.min_spatial_segmentation_idc=4095&a.readUint16(),this.parallelismType=3&a.readUint8(),this.chroma_format_idc=3&a.readUint8(),this.bit_depth_luma_minus8=7&a.readUint8(),this.bit_depth_chroma_minus8=7&a.readUint8(),this.avgFrameRate=a.readUint16(),e=a.readUint8(),this.constantFrameRate=e>>6,this.numTemporalLayers=(13&e)>>3,this.temporalIdNested=(4&e)>>2,this.lengthSizeMinusOne=3&e,this.nalu_arrays=[];var f=a.readUint8();for(b=0;b<f;b++){var g=[];this.nalu_arrays.push(g),e=a.readUint8(),g.completeness=(128&e)>>7,g.nalu_type=63&e;var h=a.readUint16();for(c=0;c<h;c++){var i={};g.push(i),d=a.readUint16(),i.data=a.readUint8Array(d)}}}),m.createFullBoxCtor("iinf",function(a){var b;0===this.version?this.entry_count=a.readUint16():this.entry_count=a.readUint32(),this.item_infos=[];for(var c=0;c<this.entry_count;c++){if((b=m.parseOneBox(a,!1,this.size-(a.getPosition()-this.start))).code!==m.OK)return;"infe"!==b.box.type&&f.error("BoxParser","Expected 'infe' box, got "+b.box.type),this.item_infos[c]=b.box}}),m.createFullBoxCtor("iloc",function(a){var b;b=a.readUint8(),this.offset_size=b>>4&15,this.length_size=15&b,b=a.readUint8(),this.base_offset_size=b>>4&15,1===this.version||2===this.version?this.index_size=15&b:this.index_size=0,this.items=[];var c=0;if(this.version<2)c=a.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";c=a.readUint32()}for(var d=0;d<c;d++){var e={};if(this.items.push(e),this.version<2)e.item_ID=a.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";e.item_ID=a.readUint16()}switch(1===this.version||2===this.version?e.construction_method=15&a.readUint16():e.construction_method=0,e.data_reference_index=a.readUint16(),this.base_offset_size){case 0:e.base_offset=0;break;case 4:e.base_offset=a.readUint32();break;case 8:e.base_offset=a.readUint64();break;default:throw"Error reading base offset size"}var f=a.readUint16();e.extents=[];for(var g=0;g<f;g++){var h={};if(e.extents.push(h),1===this.version||2===this.version)switch(this.index_size){case 0:h.extent_index=0;break;case 4:h.extent_index=a.readUint32();break;case 8:h.extent_index=a.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:h.extent_offset=0;break;case 4:h.extent_offset=a.readUint32();break;case 8:h.extent_offset=a.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:h.extent_length=0;break;case 4:h.extent_length=a.readUint32();break;case 8:h.extent_length=a.readUint64();break;default:throw"Error reading extent index"}}}}),m.createFullBoxCtor("infe",function(a){return 0!==this.version&&1!==this.version||(this.item_ID=a.readUint16(),this.item_protection_index=a.readUint16(),this.item_name=a.readCString(),this.content_type=a.readCString(),this.content_encoding=a.readCString()),1===this.version?(this.extension_type=a.readString(4),f.warn("BoxParser","Cannot parse extension type"),void a.seek(this.start+this.size)):void(this.version>=2&&(2===this.version?this.item_ID=a.readUint16():3===this.version&&(this.item_ID=a.readUint32()),this.item_protection_index=a.readUint16(),this.item_type=a.readString(4),this.item_name=a.readCString(),"mime"===this.item_type?(this.content_type=a.readCString(),this.content_encoding=a.readCString()):"uri "===this.item_type&&(this.item_uri_type=a.readCString())))}),m.createFullBoxCtor("ipma",function(a){var b,c;for(entry_count=a.readUint32(),this.associations=[],b=0;b<entry_count;b++){var d={};this.associations.push(d),this.version<1?d.id=a.readUint16():d.id=a.readUint32();var e=a.readUint8();for(d.props=[],c=0;c<e;c++){var f=a.readUint8(),g={};d.props.push(g),g.essential=(128&f)>>7==1,1&this.flags?g.property_index=(127&f)<<8|a.readUint8():g.property_index=127&f}}}),m.createFullBoxCtor("iref",function(a){var b,c;for(this.references=[];a.getPosition()<this.start+this.size;){if((b=m.parseOneBox(a,!0,this.size-(a.getPosition()-this.start))).code!==m.OK)return;(c=0===this.version?new m.SingleItemTypeReferenceBox(b.type,b.size,b.hdr_size,b.start):new m.SingleItemTypeReferenceBoxLarge(b.type,b.size,b.hdr_size,b.start)).write===m.Box.prototype.write&&"mdat"!==c.type&&(f.warn("BoxParser",c.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),c.parseDataAndRewind(a)),c.parse(a),this.references.push(c)}}),m.createBoxCtor("irot",function(a){this.angle=3&a.readUint8()}),m.createFullBoxCtor("ispe",function(a){this.image_width=a.readUint32(),this.image_height=a.readUint32()}),m.createFullBoxCtor("kind",function(a){this.schemeURI=a.readCString(),this.value=a.readCString()}),m.createFullBoxCtor("leva",function(a){var b=a.readUint8();this.levels=[];for(var c=0;c<b;c++){var d={};this.levels[c]=d,d.track_ID=a.readUint32();var e=a.readUint8();switch(d.padding_flag=e>>7,d.assignment_type=127&e,d.assignment_type){case 0:d.grouping_type=a.readString(4);break;case 1:d.grouping_type=a.readString(4),d.grouping_type_parameter=a.readUint32();break;case 2:case 3:break;case 4:d.sub_track_id=a.readUint32();break;default:f.warn("BoxParser","Unknown leva assignement type")}}}),m.createBoxCtor("maxr",function(a){this.period=a.readUint32(),this.bytes=a.readUint32()}),m.createBoxCtor("mdcv",function(a){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=a.readUint16(),this.display_primaries[0].y=a.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=a.readUint16(),this.display_primaries[1].y=a.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=a.readUint16(),this.display_primaries[2].y=a.readUint16(),this.white_point={},this.white_point.x=a.readUint16(),this.white_point.y=a.readUint16(),this.max_display_mastering_luminance=a.readUint32(),this.min_display_mastering_luminance=a.readUint32()}),m.createFullBoxCtor("mdhd",function(a){1==this.version?(this.creation_time=a.readUint64(),this.modification_time=a.readUint64(),this.timescale=a.readUint32(),this.duration=a.readUint64()):(this.creation_time=a.readUint32(),this.modification_time=a.readUint32(),this.timescale=a.readUint32(),this.duration=a.readUint32()),this.parseLanguage(a),a.readUint16()}),m.createFullBoxCtor("mehd",function(a){1&this.flags&&(f.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),1==this.version?this.fragment_duration=a.readUint64():this.fragment_duration=a.readUint32()}),m.createFullBoxCtor("meta",function(a){this.boxes=[],m.ContainerBox.prototype.parse.call(this,a)}),m.createFullBoxCtor("mfhd",function(a){this.sequence_number=a.readUint32()}),m.createFullBoxCtor("mfro",function(a){this._size=a.readUint32()}),m.createFullBoxCtor("mvhd",function(a){1==this.version?(this.creation_time=a.readUint64(),this.modification_time=a.readUint64(),this.timescale=a.readUint32(),this.duration=a.readUint64()):(this.creation_time=a.readUint32(),this.modification_time=a.readUint32(),this.timescale=a.readUint32(),this.duration=a.readUint32()),this.rate=a.readUint32(),this.volume=a.readUint16()>>8,a.readUint16(),a.readUint32Array(2),this.matrix=a.readUint32Array(9),a.readUint32Array(6),this.next_track_id=a.readUint32()}),m.createBoxCtor("npck",function(a){this.packetssent=a.readUint32()}),m.createBoxCtor("nump",function(a){this.packetssent=a.readUint64()}),m.createFullBoxCtor("padb",function(a){var b=a.readUint32();this.padbits=[];for(var c=0;c<Math.floor((b+1)/2);c++)this.padbits=a.readUint8()}),m.createBoxCtor("pasp",function(a){this.hSpacing=a.readUint32(),this.vSpacing=a.readUint32()}),m.createBoxCtor("payl",function(a){this.text=a.readString(this.size-this.hdr_size)}),m.createBoxCtor("payt",function(a){this.payloadID=a.readUint32();var b=a.readUint8();this.rtpmap_string=a.readString(b)}),m.createFullBoxCtor("pdin",function(a){var b=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var c=0;c<b;c++)this.rate[c]=a.readUint32(),this.initial_delay[c]=a.readUint32()}),m.createFullBoxCtor("pitm",function(a){0===this.version?this.item_id=a.readUint16():this.item_id=a.readUint32()}),m.createFullBoxCtor("pixi",function(a){var b;for(this.num_channels=a.readUint8(),this.bits_per_channels=[],b=0;b<this.num_channels;b++)this.bits_per_channels[b]=a.readUint8()}),m.createBoxCtor("pmax",function(a){this.bytes=a.readUint32()}),m.createFullBoxCtor("prft",function(a){this.ref_track_id=a.readUint32(),this.ntp_timestamp=a.readUint64(),0===this.version?this.media_time=a.readUint32():this.media_time=a.readUint64()}),m.createFullBoxCtor("pssh",function(a){if(this.system_id=m.parseHex16(a),this.version>0){var b=a.readUint32();this.kid=[];for(var c=0;c<b;c++)this.kid[c]=m.parseHex16(a)}var d=a.readUint32();d>0&&(this.data=a.readUint8Array(d))}),m.createFullBoxCtor("clef",function(a){this.width=a.readUint32(),this.height=a.readUint32()}),m.createFullBoxCtor("enof",function(a){this.width=a.readUint32(),this.height=a.readUint32()}),m.createFullBoxCtor("prof",function(a){this.width=a.readUint32(),this.height=a.readUint32()}),m.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),m.createBoxCtor("rtp ",function(a){this.descriptionformat=a.readString(4),this.sdptext=a.readString(this.size-this.hdr_size-4)}),m.createFullBoxCtor("saio",function(a){1&this.flags&&(this.aux_info_type=a.readUint32(),this.aux_info_type_parameter=a.readUint32());var b=a.readUint32();this.offset=[];for(var c=0;c<b;c++)0===this.version?this.offset[c]=a.readUint32():this.offset[c]=a.readUint64()}),m.createFullBoxCtor("saiz",function(a){1&this.flags&&(this.aux_info_type=a.readUint32(),this.aux_info_type_parameter=a.readUint32()),this.default_sample_info_size=a.readUint8();var b=a.readUint32();if(this.sample_info_size=[],0===this.default_sample_info_size)for(var c=0;c<b;c++)this.sample_info_size[c]=a.readUint8()}),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(a){this.parseHeader(a),this.content_encoding=a.readCString(),this.mime_format=a.readCString(),this.parseFooter(a)}),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(a){this.parseHeader(a),this.content_encoding=a.readCString(),this.namespace=a.readCString(),this.schema_location=a.readCString(),this.parseFooter(a)}),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(a){this.parseHeader(a),this.content_encoding=a.readCString(),this.mime_format=a.readCString(),this.parseFooter(a)}),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(a){this.parseHeader(a),this.namespace=a.readCString(),this.schema_location=a.readCString(),this.auxiliary_mime_types=a.readCString(),this.parseFooter(a)}),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(a){this.parseHeader(a),this.content_encoding=a.readCString(),this.mime_format=a.readCString(),this.parseFooter(a)}),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(a){this.parseHeader(a),this.displayFlags=a.readUint32(),this.horizontal_justification=a.readInt8(),this.vertical_justification=a.readInt8(),this.bg_color_rgba=a.readUint8Array(4),this.box_record=a.readInt16Array(4),this.style_record=a.readUint8Array(12),this.parseFooter(a)}),m.createSampleEntryCtor(m.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(a){this.parseHeader(a),this.parseFooter(a)}),m.createSampleGroupCtor("alst",function(a){var b,c=a.readUint16();for(this.first_output_sample=a.readUint16(),this.sample_offset=[],b=0;b<c;b++)this.sample_offset[b]=a.readUint32();var d=this.description_length-4-4*c;for(this.num_output_samples=[],this.num_total_samples=[],b=0;b<d/4;b++)this.num_output_samples[b]=a.readUint16(),this.num_total_samples[b]=a.readUint16()}),m.createSampleGroupCtor("avll",function(a){this.layerNumber=a.readUint8(),this.accurateStatisticsFlag=a.readUint8(),this.avgBitRate=a.readUint16(),this.avgFrameRate=a.readUint16()}),m.createSampleGroupCtor("avss",function(a){this.subSequenceIdentifier=a.readUint16(),this.layerNumber=a.readUint8();var b=a.readUint8();this.durationFlag=b>>7,this.avgRateFlag=b>>6&1,this.durationFlag&&(this.duration=a.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=a.readUint8(),this.avgBitRate=a.readUint16(),this.avgFrameRate=a.readUint16()),this.dependency=[];for(var c=a.readUint8(),d=0;d<c;d++){var e={};this.dependency.push(e),e.subSeqDirectionFlag=a.readUint8(),e.layerNumber=a.readUint8(),e.subSequenceIdentifier=a.readUint16()}}),m.createSampleGroupCtor("dtrt",function(a){f.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),m.createSampleGroupCtor("mvif",function(a){f.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),m.createSampleGroupCtor("prol",function(a){this.roll_distance=a.readInt16()}),m.createSampleGroupCtor("rap ",function(a){var b=a.readUint8();this.num_leading_samples_known=b>>7,this.num_leading_samples=127&b}),m.createSampleGroupCtor("rash",function(a){if(this.operation_point_count=a.readUint16(),this.description_length!==2+(1===this.operation_point_count?2:6*this.operation_point_count)+9)f.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=a.readUint8Array(this.description_length-2);else{if(1===this.operation_point_count)this.target_rate_share=a.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var b=0;b<this.operation_point_count;b++)this.available_bitrate[b]=a.readUint32(),this.target_rate_share[b]=a.readUint16()}this.maximum_bitrate=a.readUint32(),this.minimum_bitrate=a.readUint32(),this.discard_priority=a.readUint8()}}),m.createSampleGroupCtor("roll",function(a){this.roll_distance=a.readInt16()}),m.SampleGroupEntry.prototype.parse=function(a){f.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=a.readUint8Array(this.description_length)},m.createSampleGroupCtor("scif",function(a){f.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),m.createSampleGroupCtor("scnm",function(a){f.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),m.createSampleGroupCtor("seig",function(a){this.reserved=a.readUint8();var b=a.readUint8();this.crypt_byte_block=b>>4,this.skip_byte_block=15&b,this.isProtected=a.readUint8(),this.Per_Sample_IV_Size=a.readUint8(),this.KID=m.parseHex16(a),this.constant_IV_size=0,this.constant_IV=0,1===this.isProtected&&0===this.Per_Sample_IV_Size&&(this.constant_IV_size=a.readUint8(),this.constant_IV=a.readUint8Array(this.constant_IV_size))}),m.createSampleGroupCtor("stsa",function(a){f.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),m.createSampleGroupCtor("sync",function(a){var b=a.readUint8();this.NAL_unit_type=63&b}),m.createSampleGroupCtor("tele",function(a){var b=a.readUint8();this.level_independently_decodable=b>>7}),m.createSampleGroupCtor("tsas",function(a){f.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),m.createSampleGroupCtor("tscl",function(a){f.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),m.createSampleGroupCtor("vipr",function(a){f.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),m.createFullBoxCtor("sbgp",function(a){this.grouping_type=a.readString(4),1===this.version?this.grouping_type_parameter=a.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var b=a.readUint32(),c=0;c<b;c++){var d={};this.entries.push(d),d.sample_count=a.readInt32(),d.group_description_index=a.readInt32()}}),m.createFullBoxCtor("schm",function(a){this.scheme_type=a.readString(4),this.scheme_version=a.readUint32(),1&this.flags&&(this.scheme_uri=a.readString(this.size-this.hdr_size-8))}),m.createBoxCtor("sdp ",function(a){this.sdptext=a.readString(this.size-this.hdr_size)}),m.createFullBoxCtor("sdtp",function(a){var b,c=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var d=0;d<c;d++)b=a.readUint8(),this.is_leading[d]=b>>6,this.sample_depends_on[d]=b>>4&3,this.sample_is_depended_on[d]=b>>2&3,this.sample_has_redundancy[d]=3&b}),m.createFullBoxCtor("senc"),m.createFullBoxCtor("sgpd",function(a){this.grouping_type=a.readString(4),f.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),1===this.version?this.default_length=a.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=a.readUint32()),this.entries=[];for(var b=a.readUint32(),c=0;c<b;c++){var d;d=m[this.grouping_type+"SampleGroupEntry"]?new m[this.grouping_type+"SampleGroupEntry"](this.grouping_type):new m.SampleGroupEntry(this.grouping_type),this.entries.push(d),1===this.version&&0===this.default_length?d.description_length=a.readUint32():d.description_length=this.default_length,d.write===m.SampleGroupEntry.prototype.write&&(f.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),d.data=a.readUint8Array(d.description_length),a.position-=d.description_length),d.parse(a)}}),m.createFullBoxCtor("sidx",function(a){this.reference_ID=a.readUint32(),this.timescale=a.readUint32(),0===this.version?(this.earliest_presentation_time=a.readUint32(),this.first_offset=a.readUint32()):(this.earliest_presentation_time=a.readUint64(),this.first_offset=a.readUint64()),a.readUint16(),this.references=[];for(var b=a.readUint16(),c=0;c<b;c++){var d={};this.references.push(d);var e=a.readUint32();d.reference_type=e>>31&1,d.referenced_size=2147483647&e,d.subsegment_duration=a.readUint32(),e=a.readUint32(),d.starts_with_SAP=e>>31&1,d.SAP_type=e>>28&7,d.SAP_delta_time=268435455&e}}),m.SingleItemTypeReferenceBox=function(a,b,c,d){m.Box.call(this,a,b),this.hdr_size=c,this.start=d},m.SingleItemTypeReferenceBox.prototype=new m.Box,m.SingleItemTypeReferenceBox.prototype.parse=function(a){this.from_item_ID=a.readUint16();var b=a.readUint16();this.references=[];for(var c=0;c<b;c++)this.references[c]=a.readUint16()},m.SingleItemTypeReferenceBoxLarge=function(a,b,c,d){m.Box.call(this,a,b),this.hdr_size=c,this.start=d},m.SingleItemTypeReferenceBoxLarge.prototype=new m.Box,m.SingleItemTypeReferenceBoxLarge.prototype.parse=function(a){this.from_item_ID=a.readUint32();var b=a.readUint16();this.references=[];for(var c=0;c<b;c++)this.references[c]=a.readUint32()},m.createFullBoxCtor("SmDm",function(a){this.primaryRChromaticity_x=a.readUint16(),this.primaryRChromaticity_y=a.readUint16(),this.primaryGChromaticity_x=a.readUint16(),this.primaryGChromaticity_y=a.readUint16(),this.primaryBChromaticity_x=a.readUint16(),this.primaryBChromaticity_y=a.readUint16(),this.whitePointChromaticity_x=a.readUint16(),this.whitePointChromaticity_y=a.readUint16(),this.luminanceMax=a.readUint32(),this.luminanceMin=a.readUint32()}),m.createFullBoxCtor("smhd",function(a){this.balance=a.readUint16(),a.readUint16()}),m.createFullBoxCtor("ssix",function(a){this.subsegments=[];for(var b=a.readUint32(),c=0;c<b;c++){var d={};this.subsegments.push(d),d.ranges=[];for(var e=a.readUint32(),f=0;f<e;f++){var g={};d.ranges.push(g),g.level=a.readUint8(),g.range_size=a.readUint24()}}}),m.createFullBoxCtor("stco",function(a){var b;if(b=a.readUint32(),this.chunk_offsets=[],0===this.version)for(var c=0;c<b;c++)this.chunk_offsets.push(a.readUint32())}),m.createFullBoxCtor("stdp",function(a){var b=(this.size-this.hdr_size)/2;this.priority=[];for(var c=0;c<b;c++)this.priority[c]=a.readUint16()}),m.createFullBoxCtor("sthd"),m.createFullBoxCtor("stri",function(a){this.switch_group=a.readUint16(),this.alternate_group=a.readUint16(),this.sub_track_id=a.readUint32();var b=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var c=0;c<b;c++)this.attribute_list[c]=a.readUint32()}),m.createFullBoxCtor("stsc",function(a){var b,c;if(b=a.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],0===this.version)for(c=0;c<b;c++)this.first_chunk.push(a.readUint32()),this.samples_per_chunk.push(a.readUint32()),this.sample_description_index.push(a.readUint32())}),m.createFullBoxCtor("stsd",function(a){var b,c,d,e;for(this.entries=[],d=a.readUint32(),b=1;b<=d;b++){if((c=m.parseOneBox(a,!0,this.size-(a.getPosition()-this.start))).code!==m.OK)return;m[c.type+"SampleEntry"]?((e=new m[c.type+"SampleEntry"](c.size)).hdr_size=c.hdr_size,e.start=c.start):(f.warn("BoxParser","Unknown sample entry type: "+c.type),e=new m.SampleEntry(c.type,c.size,c.hdr_size,c.start)),e.write===m.SampleEntry.prototype.write&&(f.info("BoxParser","SampleEntry "+e.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),e.parseDataAndRewind(a)),e.parse(a),this.entries.push(e)}}),m.createFullBoxCtor("stsg",function(a){this.grouping_type=a.readUint32();var b=a.readUint16();this.group_description_index=[];for(var c=0;c<b;c++)this.group_description_index[c]=a.readUint32()}),m.createFullBoxCtor("stsh",function(a){var b,c;if(b=a.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],0===this.version)for(c=0;c<b;c++)this.shadowed_sample_numbers.push(a.readUint32()),this.sync_sample_numbers.push(a.readUint32())}),m.createFullBoxCtor("stss",function(a){var b,c;if(c=a.readUint32(),0===this.version)for(this.sample_numbers=[],b=0;b<c;b++)this.sample_numbers.push(a.readUint32())}),m.createFullBoxCtor("stsz",function(a){var b;if(this.sample_sizes=[],0===this.version)for(this.sample_size=a.readUint32(),this.sample_count=a.readUint32(),b=0;b<this.sample_count;b++)0===this.sample_size?this.sample_sizes.push(a.readUint32()):this.sample_sizes[b]=this.sample_size}),m.createFullBoxCtor("stts",function(a){var b,c,d;if(b=a.readUint32(),this.sample_counts=[],this.sample_deltas=[],0===this.version)for(c=0;c<b;c++)this.sample_counts.push(a.readUint32()),(d=a.readInt32())<0&&(f.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),d=1),this.sample_deltas.push(d)}),m.createFullBoxCtor("stvi",function(a){var b=a.readUint32();this.single_view_allowed=3&b,this.stereo_scheme=a.readUint32();var c,d,e=a.readUint32();for(this.stereo_indication_type=a.readString(e),this.boxes=[];a.getPosition()<this.start+this.size;){if((c=m.parseOneBox(a,!1,this.size-(a.getPosition()-this.start))).code!==m.OK)return;d=c.box,this.boxes.push(d),this[d.type]=d}}),m.createBoxCtor("styp",function(a){m.ftypBox.prototype.parse.call(this,a)}),m.createFullBoxCtor("stz2",function(a){var b,c;if(this.sample_sizes=[],0===this.version)if(this.reserved=a.readUint24(),this.field_size=a.readUint8(),c=a.readUint32(),4===this.field_size)for(b=0;b<c;b+=2){var d=a.readUint8();this.sample_sizes[b]=d>>4&15,this.sample_sizes[b+1]=15&d}else if(8===this.field_size)for(b=0;b<c;b++)this.sample_sizes[b]=a.readUint8();else if(16===this.field_size)for(b=0;b<c;b++)this.sample_sizes[b]=a.readUint16();else f.error("BoxParser","Error in length field in stz2 box")}),m.createFullBoxCtor("subs",function(a){var b,c,d,e;for(d=a.readUint32(),this.entries=[],b=0;b<d;b++){var f={};if(this.entries[b]=f,f.sample_delta=a.readUint32(),f.subsamples=[],(e=a.readUint16())>0)for(c=0;c<e;c++){var g={};f.subsamples.push(g),1==this.version?g.size=a.readUint32():g.size=a.readUint16(),g.priority=a.readUint8(),g.discardable=a.readUint8(),g.codec_specific_parameters=a.readUint32()}}}),m.createFullBoxCtor("tenc",function(a){if(a.readUint8(),0===this.version)a.readUint8();else{var b=a.readUint8();this.default_crypt_byte_block=b>>4&15,this.default_skip_byte_block=15&b}this.default_isProtected=a.readUint8(),this.default_Per_Sample_IV_Size=a.readUint8(),this.default_KID=m.parseHex16(a),1===this.default_isProtected&&0===this.default_Per_Sample_IV_Size&&(this.default_constant_IV_size=a.readUint8(),this.default_constant_IV=a.readUint8Array(this.default_constant_IV_size))}),m.createFullBoxCtor("tfdt",function(a){1==this.version?this.baseMediaDecodeTime=a.readUint64():this.baseMediaDecodeTime=a.readUint32()}),m.createFullBoxCtor("tfhd",function(a){var b=0;this.track_id=a.readUint32(),this.size-this.hdr_size>b&&this.flags&m.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=a.readUint64(),b+=8):this.base_data_offset=0,this.size-this.hdr_size>b&&this.flags&m.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=a.readUint32(),b+=4):this.default_sample_description_index=0,this.size-this.hdr_size>b&&this.flags&m.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=a.readUint32(),b+=4):this.default_sample_duration=0,
this.size-this.hdr_size>b&&this.flags&m.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=a.readUint32(),b+=4):this.default_sample_size=0,this.size-this.hdr_size>b&&this.flags&m.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=a.readUint32(),b+=4):this.default_sample_flags=0}),m.createFullBoxCtor("tfra",function(a){this.track_ID=a.readUint32(),a.readUint24();var b=a.readUint8();this.length_size_of_traf_num=b>>4&3,this.length_size_of_trun_num=b>>2&3,this.length_size_of_sample_num=3&b,this.entries=[];for(var c=a.readUint32(),d=0;d<c;d++)1===this.version?(this.time=a.readUint64(),this.moof_offset=a.readUint64()):(this.time=a.readUint32(),this.moof_offset=a.readUint32()),this.traf_number=a["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=a["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=a["readUint"+8*(this.length_size_of_sample_num+1)]()}),m.createFullBoxCtor("tkhd",function(a){1==this.version?(this.creation_time=a.readUint64(),this.modification_time=a.readUint64(),this.track_id=a.readUint32(),a.readUint32(),this.duration=a.readUint64()):(this.creation_time=a.readUint32(),this.modification_time=a.readUint32(),this.track_id=a.readUint32(),a.readUint32(),this.duration=a.readUint32()),a.readUint32Array(2),this.layer=a.readInt16(),this.alternate_group=a.readInt16(),this.volume=a.readInt16()>>8,a.readUint16(),this.matrix=a.readInt32Array(9),this.width=a.readUint32(),this.height=a.readUint32()}),m.createBoxCtor("tmax",function(a){this.time=a.readUint32()}),m.createBoxCtor("tmin",function(a){this.time=a.readUint32()}),m.createBoxCtor("totl",function(a){this.bytessent=a.readUint32()}),m.createBoxCtor("tpay",function(a){this.bytessent=a.readUint32()}),m.createBoxCtor("tpyl",function(a){this.bytessent=a.readUint64()}),m.TrackGroupTypeBox.prototype.parse=function(a){this.parseFullHeader(a),this.track_group_id=a.readUint32()},m.createTrackGroupCtor("msrc"),m.TrackReferenceTypeBox=function(a,b,c,d){m.Box.call(this,a,b),this.hdr_size=c,this.start=d},m.TrackReferenceTypeBox.prototype=new m.Box,m.TrackReferenceTypeBox.prototype.parse=function(a){this.track_ids=a.readUint32Array((this.size-this.hdr_size)/4)},m.trefBox.prototype.parse=function(a){for(var b,c;a.getPosition()<this.start+this.size;){if((b=m.parseOneBox(a,!0,this.size-(a.getPosition()-this.start))).code!==m.OK)return;(c=new m.TrackReferenceTypeBox(b.type,b.size,b.hdr_size,b.start)).write===m.Box.prototype.write&&"mdat"!==c.type&&(f.info("BoxParser","TrackReference "+c.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),c.parseDataAndRewind(a)),c.parse(a),this.boxes.push(c)}},m.createFullBoxCtor("trep",function(a){for(this.track_ID=a.readUint32(),this.boxes=[];a.getPosition()<this.start+this.size;){if(ret=m.parseOneBox(a,!1,this.size-(a.getPosition()-this.start)),ret.code!==m.OK)return;box=ret.box,this.boxes.push(box)}}),m.createFullBoxCtor("trex",function(a){this.track_id=a.readUint32(),this.default_sample_description_index=a.readUint32(),this.default_sample_duration=a.readUint32(),this.default_sample_size=a.readUint32(),this.default_sample_flags=a.readUint32()}),m.createBoxCtor("trpy",function(a){this.bytessent=a.readUint64()}),m.createFullBoxCtor("trun",function(a){var b=0;if(this.sample_count=a.readUint32(),b+=4,this.size-this.hdr_size>b&&this.flags&m.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=a.readInt32(),b+=4):this.data_offset=0,this.size-this.hdr_size>b&&this.flags&m.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=a.readUint32(),b+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>b)for(var c=0;c<this.sample_count;c++)this.flags&m.TRUN_FLAGS_DURATION&&(this.sample_duration[c]=a.readUint32()),this.flags&m.TRUN_FLAGS_SIZE&&(this.sample_size[c]=a.readUint32()),this.flags&m.TRUN_FLAGS_FLAGS&&(this.sample_flags[c]=a.readUint32()),this.flags&m.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?this.sample_composition_time_offset[c]=a.readUint32():this.sample_composition_time_offset[c]=a.readInt32())}),m.createFullBoxCtor("tsel",function(a){this.switch_group=a.readUint32();var b=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var c=0;c<b;c++)this.attribute_list[c]=a.readUint32()}),m.createFullBoxCtor("txtC",function(a){this.config=a.readCString()}),m.createFullBoxCtor("url ",function(a){1!==this.flags&&(this.location=a.readCString())}),m.createFullBoxCtor("urn ",function(a){this.name=a.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=a.readCString())}),m.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,function(a){this.LiveServerManifest=a.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),m.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,function(a){this.system_id=m.parseHex16(a);var b=a.readUint32();b>0&&(this.data=a.readUint8Array(b))}),m.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),m.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,function(a){this.default_AlgorithmID=a.readUint24(),this.default_IV_size=a.readUint8(),this.default_KID=m.parseHex16(a)}),m.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,function(a){this.fragment_count=a.readUint8(),this.entries=[];for(var b=0;b<this.fragment_count;b++){var c={},d=0,e=0;1===this.version?(d=a.readUint64(),e=a.readUint64()):(d=a.readUint32(),e=a.readUint32()),c.absolute_time=d,c.absolute_duration=e,this.entries.push(c)}}),m.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,function(a){1===this.version?(this.absolute_time=a.readUint64(),this.duration=a.readUint64()):(this.absolute_time=a.readUint32(),this.duration=a.readUint32())}),m.createFullBoxCtor("vmhd",function(a){this.graphicsmode=a.readUint16(),this.opcolor=a.readUint16Array(3)}),m.createFullBoxCtor("vpcC",function(a){var b;1===this.version?(this.profile=a.readUint8(),this.level=a.readUint8(),b=a.readUint8(),this.bitDepth=b>>4,this.chromaSubsampling=b>>1&7,this.videoFullRangeFlag=1&b,this.colourPrimaries=a.readUint8(),this.transferCharacteristics=a.readUint8(),this.matrixCoefficients=a.readUint8(),this.codecIntializationDataSize=a.readUint16(),this.codecIntializationData=a.readUint8Array(this.codecIntializationDataSize)):(this.profile=a.readUint8(),this.level=a.readUint8(),b=a.readUint8(),this.bitDepth=b>>4&15,this.colorSpace=15&b,b=a.readUint8(),this.chromaSubsampling=b>>4&15,this.transferFunction=b>>1&7,this.videoFullRangeFlag=1&b,this.codecIntializationDataSize=a.readUint16(),this.codecIntializationData=a.readUint8Array(this.codecIntializationDataSize))}),m.createBoxCtor("vttC",function(a){this.text=a.readString(this.size-this.hdr_size)}),m.SampleEntry.prototype.isVideo=function(){return!1},m.SampleEntry.prototype.isAudio=function(){return!1},m.SampleEntry.prototype.isSubtitle=function(){return!1},m.SampleEntry.prototype.isMetadata=function(){return!1},m.SampleEntry.prototype.isHint=function(){return!1},m.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},m.SampleEntry.prototype.getWidth=function(){return""},m.SampleEntry.prototype.getHeight=function(){return""},m.SampleEntry.prototype.getChannelCount=function(){return""},m.SampleEntry.prototype.getSampleRate=function(){return""},m.SampleEntry.prototype.getSampleSize=function(){return""},m.VisualSampleEntry.prototype.isVideo=function(){return!0},m.VisualSampleEntry.prototype.getWidth=function(){return this.width},m.VisualSampleEntry.prototype.getHeight=function(){return this.height},m.AudioSampleEntry.prototype.isAudio=function(){return!0},m.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},m.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},m.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},m.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},m.MetadataSampleEntry.prototype.isMetadata=function(){return!0},m.decimalToHex=function(a,b){var c=Number(a).toString(16);for(b=null==b?b=2:b;c.length<b;)c="0"+c;return c},m.avc1SampleEntry.prototype.getCodec=m.avc2SampleEntry.prototype.getCodec=m.avc3SampleEntry.prototype.getCodec=m.avc4SampleEntry.prototype.getCodec=function(){var a=m.SampleEntry.prototype.getCodec.call(this);return this.avcC?a+"."+m.decimalToHex(this.avcC.AVCProfileIndication)+m.decimalToHex(this.avcC.profile_compatibility)+m.decimalToHex(this.avcC.AVCLevelIndication):a},m.hev1SampleEntry.prototype.getCodec=m.hvc1SampleEntry.prototype.getCodec=function(){var a,b=m.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(b+=".",this.hvcC.general_profile_space){case 0:b+="";break;case 1:b+="A";break;case 2:b+="B";break;case 3:b+="C"}b+=this.hvcC.general_profile_idc,b+=".";var c=this.hvcC.general_profile_compatibility,d=0;for(a=0;a<32&&(d|=1&c,31!=a);a++)d<<=1,c>>=1;b+=m.decimalToHex(d,0),b+=".",b+=0===this.hvcC.general_tier_flag?"L":"H",b+=this.hvcC.general_level_idc;var e=!1,f="";for(a=5;a>=0;a--)(this.hvcC.general_constraint_indicator[a]||e)&&(f="."+m.decimalToHex(this.hvcC.general_constraint_indicator[a],0)+f,e=!0);b+=f}return b},m.mp4aSampleEntry.prototype.getCodec=function(){var a=m.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var b=this.esds.esd.getOTI(),c=this.esds.esd.getAudioConfig();return a+"."+m.decimalToHex(b)+(c?"."+c:"")}return a},m.stxtSampleEntry.prototype.getCodec=function(){var a=m.SampleEntry.prototype.getCodec.call(this);return this.mime_format?a+"."+this.mime_format:a},m.av01SampleEntry.prototype.getCodec=function(){var a,b=m.SampleEntry.prototype.getCodec.call(this);return 2===this.av1C.seq_profile&&1===this.av1C.high_bitdepth?a=1===this.av1C.twelve_bit?"12":"10":this.av1C.seq_profile<=2&&(a=1===this.av1C.high_bitdepth?"10":"08"),b+"."+this.av1C.seq_profile+"."+this.av1C.seq_level_idx_0+(this.av1C.seq_tier_0?"H":"M")+"."+a},m.Box.prototype.writeHeader=function(a,b){this.size+=8,this.size>j&&(this.size+=8),"uuid"===this.type&&(this.size+=16),f.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+a.getPosition()+(b||"")),this.size>j?a.writeUint32(1):(this.sizePosition=a.getPosition(),a.writeUint32(this.size)),a.writeString(this.type,null,4),"uuid"===this.type&&a.writeUint8Array(this.uuid),this.size>j&&a.writeUint64(this.size)},m.FullBox.prototype.writeHeader=function(a){this.size+=4,m.Box.prototype.writeHeader.call(this,a," v="+this.version+" f="+this.flags),a.writeUint8(this.version),a.writeUint24(this.flags)},m.Box.prototype.write=function(a){"mdat"===this.type?this.data&&(this.size=this.data.length,this.writeHeader(a),a.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(a),this.data&&a.writeUint8Array(this.data))},m.ContainerBox.prototype.write=function(a){this.size=0,this.writeHeader(a);for(var b=0;b<this.boxes.length;b++)this.boxes[b]&&(this.boxes[b].write(a),this.size+=this.boxes[b].size);f.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),a.adjustUint32(this.sizePosition,this.size)},m.TrackReferenceTypeBox.prototype.write=function(a){this.size=4*this.track_ids.length,this.writeHeader(a),a.writeUint32Array(this.track_ids)},m.avcCBox.prototype.write=function(a){var b;for(this.size=7,b=0;b<this.SPS.length;b++)this.size+=2+this.SPS[b].length;for(b=0;b<this.PPS.length;b++)this.size+=2+this.PPS[b].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(a),a.writeUint8(this.configurationVersion),a.writeUint8(this.AVCProfileIndication),a.writeUint8(this.profile_compatibility),a.writeUint8(this.AVCLevelIndication),a.writeUint8(this.lengthSizeMinusOne+252),a.writeUint8(this.SPS.length+224),b=0;b<this.SPS.length;b++)a.writeUint16(this.SPS[b].length),a.writeUint8Array(this.SPS[b].nalu);for(a.writeUint8(this.PPS.length),b=0;b<this.PPS.length;b++)a.writeUint16(this.PPS[b].length),a.writeUint8Array(this.PPS[b].nalu);this.ext&&a.writeUint8Array(this.ext)},m.co64Box.prototype.write=function(a){var b;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(a),a.writeUint32(this.chunk_offsets.length),b=0;b<this.chunk_offsets.length;b++)a.writeUint64(this.chunk_offsets[b])},m.cslgBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=20,this.writeHeader(a),a.writeInt32(this.compositionToDTSShift),a.writeInt32(this.leastDecodeToDisplayDelta),a.writeInt32(this.greatestDecodeToDisplayDelta),a.writeInt32(this.compositionStartTime),a.writeInt32(this.compositionEndTime)},m.cttsBox.prototype.write=function(a){var b;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(a),a.writeUint32(this.sample_counts.length),b=0;b<this.sample_counts.length;b++)a.writeUint32(this.sample_counts[b]),1===this.version?a.writeInt32(this.sample_offsets[b]):a.writeUint32(this.sample_offsets[b])},m.drefBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=4,this.writeHeader(a),a.writeUint32(this.entries.length);for(var b=0;b<this.entries.length;b++)this.entries[b].write(a),this.size+=this.entries[b].size;f.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),a.adjustUint32(this.sizePosition,this.size)},m.elngBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(a),a.writeString(this.extended_language)},m.elstBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(a),a.writeUint32(this.entries.length);for(var b=0;b<this.entries.length;b++){var c=this.entries[b];a.writeUint32(c.segment_duration),a.writeInt32(c.media_time),a.writeInt16(c.media_rate_integer),a.writeInt16(c.media_rate_fraction)}},m.emsgBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=16+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(a),a.writeCString(this.scheme_id_uri),a.writeCString(this.value),a.writeUint32(this.timescale),a.writeUint32(this.presentation_time_delta),a.writeUint32(this.event_duration),a.writeUint32(this.id),a.writeUint8Array(this.message_data)},m.ftypBox.prototype.write=function(a){this.size=8+4*this.compatible_brands.length,this.writeHeader(a),a.writeString(this.major_brand,null,4),a.writeUint32(this.minor_version);for(var b=0;b<this.compatible_brands.length;b++)a.writeString(this.compatible_brands[b],null,4)},m.hdlrBox.prototype.write=function(a){this.size=20+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(a),a.writeUint32(0),a.writeString(this.handler,null,4),a.writeUint32(0),a.writeUint32(0),a.writeUint32(0),a.writeCString(this.name)},m.kindBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(a),a.writeCString(this.schemeURI),a.writeCString(this.value)},m.mdhdBox.prototype.write=function(a){this.size=20,this.flags=0,this.version=0,this.writeHeader(a),a.writeUint32(this.creation_time),a.writeUint32(this.modification_time),a.writeUint32(this.timescale),a.writeUint32(this.duration),a.writeUint16(this.language),a.writeUint16(0)},m.mehdBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=4,this.writeHeader(a),a.writeUint32(this.fragment_duration)},m.mfhdBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=4,this.writeHeader(a),a.writeUint32(this.sequence_number)},m.mvhdBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=96,this.writeHeader(a),a.writeUint32(this.creation_time),a.writeUint32(this.modification_time),a.writeUint32(this.timescale),a.writeUint32(this.duration),a.writeUint32(this.rate),a.writeUint16(this.volume<<8),a.writeUint16(0),a.writeUint32(0),a.writeUint32(0),a.writeUint32Array(this.matrix),a.writeUint32(0),a.writeUint32(0),a.writeUint32(0),a.writeUint32(0),a.writeUint32(0),a.writeUint32(0),a.writeUint32(this.next_track_id)},m.SampleEntry.prototype.writeHeader=function(a){this.size=8,m.Box.prototype.writeHeader.call(this,a),a.writeUint8(0),a.writeUint8(0),a.writeUint8(0),a.writeUint8(0),a.writeUint8(0),a.writeUint8(0),a.writeUint16(this.data_reference_index)},m.SampleEntry.prototype.writeFooter=function(a){for(var b=0;b<this.boxes.length;b++)this.boxes[b].write(a),this.size+=this.boxes[b].size;f.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),a.adjustUint32(this.sizePosition,this.size)},m.SampleEntry.prototype.write=function(a){this.writeHeader(a),a.writeUint8Array(this.data),this.size+=this.data.length,f.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),a.adjustUint32(this.sizePosition,this.size)},m.VisualSampleEntry.prototype.write=function(a){this.writeHeader(a),this.size+=70,a.writeUint16(0),a.writeUint16(0),a.writeUint32(0),a.writeUint32(0),a.writeUint32(0),a.writeUint16(this.width),a.writeUint16(this.height),a.writeUint32(this.horizresolution),a.writeUint32(this.vertresolution),a.writeUint32(0),a.writeUint16(this.frame_count),a.writeUint8(Math.min(31,this.compressorname.length)),a.writeString(this.compressorname,null,31),a.writeUint16(this.depth),a.writeInt16(-1),this.writeFooter(a)},m.AudioSampleEntry.prototype.write=function(a){this.writeHeader(a),this.size+=20,a.writeUint32(0),a.writeUint32(0),a.writeUint16(this.channel_count),a.writeUint16(this.samplesize),a.writeUint16(0),a.writeUint16(0),a.writeUint32(this.samplerate<<16),this.writeFooter(a)},m.stppSampleEntry.prototype.write=function(a){this.writeHeader(a),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,a.writeCString(this.namespace),a.writeCString(this.schema_location),a.writeCString(this.auxiliary_mime_types),this.writeFooter(a)},m.SampleGroupEntry.prototype.write=function(a){a.writeUint8Array(this.data)},m.sbgpBox.prototype.write=function(a){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(a),a.writeString(this.grouping_type,null,4),a.writeUint32(this.grouping_type_parameter),a.writeUint32(this.entries.length);for(var b=0;b<this.entries.length;b++){var c=this.entries[b];a.writeInt32(c.sample_count),a.writeInt32(c.group_description_index)}},m.sgpdBox.prototype.write=function(a){var b,c;for(this.flags=0,this.size=12,b=0;b<this.entries.length;b++)c=this.entries[b],1===this.version&&(0===this.default_length&&(this.size+=4),this.size+=c.data.length);for(this.writeHeader(a),a.writeString(this.grouping_type,null,4),1===this.version&&a.writeUint32(this.default_length),this.version>=2&&a.writeUint32(this.default_sample_description_index),a.writeUint32(this.entries.length),b=0;b<this.entries.length;b++)c=this.entries[b],1===this.version&&0===this.default_length&&a.writeUint32(c.description_length),c.write(a)},m.sidxBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=20+12*this.references.length,this.writeHeader(a),a.writeUint32(this.reference_ID),a.writeUint32(this.timescale),a.writeUint32(this.earliest_presentation_time),a.writeUint32(this.first_offset),a.writeUint16(0),a.writeUint16(this.references.length);for(var b=0;b<this.references.length;b++){var c=this.references[b];a.writeUint32(c.reference_type<<31|c.referenced_size),a.writeUint32(c.subsegment_duration),a.writeUint32(c.starts_with_SAP<<31|c.SAP_type<<28|c.SAP_delta_time)}},m.stcoBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(a),a.writeUint32(this.chunk_offsets.length),a.writeUint32Array(this.chunk_offsets)},m.stscBox.prototype.write=function(a){var b;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(a),a.writeUint32(this.first_chunk.length),b=0;b<this.first_chunk.length;b++)a.writeUint32(this.first_chunk[b]),a.writeUint32(this.samples_per_chunk[b]),a.writeUint32(this.sample_description_index[b])},m.stsdBox.prototype.write=function(a){var b;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(a),a.writeUint32(this.entries.length),this.size+=4,b=0;b<this.entries.length;b++)this.entries[b].write(a),this.size+=this.entries[b].size;f.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),a.adjustUint32(this.sizePosition,this.size)},m.stshBox.prototype.write=function(a){var b;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(a),a.writeUint32(this.shadowed_sample_numbers.length),b=0;b<this.shadowed_sample_numbers.length;b++)a.writeUint32(this.shadowed_sample_numbers[b]),a.writeUint32(this.sync_sample_numbers[b])},m.stssBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(a),a.writeUint32(this.sample_numbers.length),a.writeUint32Array(this.sample_numbers)},m.stszBox.prototype.write=function(a){var b,c=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(b=0;b+1<this.sample_sizes.length;){if(this.sample_sizes[b+1]!==this.sample_sizes[0]){c=!1;break}b++}else c=!1;this.size=8,c||(this.size+=4*this.sample_sizes.length),this.writeHeader(a),c?a.writeUint32(this.sample_sizes[0]):a.writeUint32(0),a.writeUint32(this.sample_sizes.length),c||a.writeUint32Array(this.sample_sizes)},m.sttsBox.prototype.write=function(a){var b;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(a),a.writeUint32(this.sample_counts.length),b=0;b<this.sample_counts.length;b++)a.writeUint32(this.sample_counts[b]),a.writeUint32(this.sample_deltas[b])},m.tfdtBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=4,1===this.version&&(this.size+=4),this.writeHeader(a),1===this.version?a.writeUint64(this.baseMediaDecodeTime):a.writeUint32(this.baseMediaDecodeTime)},m.tfhdBox.prototype.write=function(a){this.version=0,this.size=4,this.flags&m.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&m.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&m.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&m.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&m.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(a),a.writeUint32(this.track_id),this.flags&m.TFHD_FLAG_BASE_DATA_OFFSET&&a.writeUint64(this.base_data_offset),this.flags&m.TFHD_FLAG_SAMPLE_DESC&&a.writeUint32(this.default_sample_description_index),this.flags&m.TFHD_FLAG_SAMPLE_DUR&&a.writeUint32(this.default_sample_duration),this.flags&m.TFHD_FLAG_SAMPLE_SIZE&&a.writeUint32(this.default_sample_size),this.flags&m.TFHD_FLAG_SAMPLE_FLAGS&&a.writeUint32(this.default_sample_flags)},m.tkhdBox.prototype.write=function(a){this.version=0,this.size=80,this.writeHeader(a),a.writeUint32(this.creation_time),a.writeUint32(this.modification_time),a.writeUint32(this.track_id),a.writeUint32(0),a.writeUint32(this.duration),a.writeUint32(0),a.writeUint32(0),a.writeInt16(this.layer),a.writeInt16(this.alternate_group),a.writeInt16(this.volume<<8),a.writeUint16(0),a.writeInt32Array(this.matrix),a.writeUint32(this.width),a.writeUint32(this.height)},m.trexBox.prototype.write=function(a){this.version=0,this.flags=0,this.size=20,this.writeHeader(a),a.writeUint32(this.track_id),a.writeUint32(this.default_sample_description_index),a.writeUint32(this.default_sample_duration),a.writeUint32(this.default_sample_size),a.writeUint32(this.default_sample_flags)},m.trunBox.prototype.write=function(a){this.version=0,this.size=4,this.flags&m.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&m.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&m.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&m.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&m.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&m.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(a),a.writeUint32(this.sample_count),this.flags&m.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=a.getPosition(),a.writeInt32(this.data_offset)),this.flags&m.TRUN_FLAGS_FIRST_FLAG&&a.writeUint32(this.first_sample_flags);for(var b=0;b<this.sample_count;b++)this.flags&m.TRUN_FLAGS_DURATION&&a.writeUint32(this.sample_duration[b]),this.flags&m.TRUN_FLAGS_SIZE&&a.writeUint32(this.sample_size[b]),this.flags&m.TRUN_FLAGS_FLAGS&&a.writeUint32(this.sample_flags[b]),this.flags&m.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?a.writeUint32(this.sample_composition_time_offset[b]):a.writeInt32(this.sample_composition_time_offset[b]))},m["url Box"].prototype.write=function(a){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(a),this.location&&a.writeCString(this.location)},m["urn Box"].prototype.write=function(a){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(a),a.writeCString(this.name),this.location&&a.writeCString(this.location)},m.vmhdBox.prototype.write=function(a){this.version=0,this.flags=1,this.size=8,this.writeHeader(a),a.writeUint16(this.graphicsmode),a.writeUint16Array(this.opcolor)},m.cttsBox.prototype.unpack=function(a){var b,c,d;for(d=0,b=0;b<this.sample_counts.length;b++)for(c=0;c<this.sample_counts[b];c++)a[d].pts=a[d].dts+this.sample_offsets[b],d++},m.sttsBox.prototype.unpack=function(a){var b,c,d;for(d=0,b=0;b<this.sample_counts.length;b++)for(c=0;c<this.sample_counts[b];c++)a[d].dts=0===d?0:a[d-1].dts+this.sample_deltas[b],d++},m.stcoBox.prototype.unpack=function(a){var b;for(b=0;b<this.chunk_offsets.length;b++)a[b].offset=this.chunk_offsets[b]},m.stscBox.prototype.unpack=function(a){var b,c,d,e,f;for(e=0,f=0,b=0;b<this.first_chunk.length;b++)for(c=0;c<(b+1<this.first_chunk.length?this.first_chunk[b+1]:1/0);c++)for(f++,d=0;d<this.samples_per_chunk[b];d++){if(!a[e])return;a[e].description_index=this.sample_description_index[b],a[e].chunk_index=f,e++}},m.stszBox.prototype.unpack=function(a){var b;for(b=0;b<this.sample_sizes.length;b++)a[b].size=this.sample_sizes[b]},m.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],m.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],m.boxEqualFields=function(a,b){if(a&&!b)return!1;var c;for(c in a)if(!(m.DIFF_BOXES_PROP_NAMES.indexOf(c)>-1||a[c]instanceof m.Box||b[c]instanceof m.Box||void 0===a[c]||void 0===b[c]||"function"==typeof a[c]||"function"==typeof b[c]||a.subBoxNames&&a.subBoxNames.indexOf(c.slice(0,4))>-1||b.subBoxNames&&b.subBoxNames.indexOf(c.slice(0,4))>-1||"data"===c||"start"===c||"size"===c||"creation_time"===c||"modification_time"===c||m.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(c)>-1||a[c]===b[c]))return!1;return!0},m.boxEqual=function(a,b){if(!m.boxEqualFields(a,b))return!1;for(var c=0;c<m.DIFF_BOXES_PROP_NAMES.length;c++){var d=m.DIFF_BOXES_PROP_NAMES[c];if(a[d]&&b[d]&&!m.boxEqual(a[d],b[d]))return!1}return!0};var n=function(){};n.prototype.parseSample=function(a){var b,c,d=new h(a.buffer);for(b=[];!d.isEos();)(c=m.parseOneBox(d,!1)).code===m.OK&&"vttc"===c.box.type&&b.push(c.box);return b},n.prototype.getText=function(a,b,c){function d(a,b,c){return c=c||"0",(a+="").length>=b?a:new Array(b-a.length+1).join(c)+a}function e(a){var b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),e=Math.floor(a-3600*b-60*c),f=Math.floor(1e3*(a-3600*b-60*c-e));return d(b,2)+":"+d(c,2)+":"+d(e,2)+"."+d(f,3)}for(var f=this.parseSample(c),g="",h=0;h<f.length;h++){var i=f[h];g+=e(a)+" --\x3e "+e(b)+"\r\n",g+=i.payl.text}return g};var o=function(){};o.prototype.parseSample=function(a){var b,c={};c.resources=[];var d=new h(a.data.buffer);if(a.subsamples&&0!==a.subsamples.length){if(c.documentString=d.readString(a.subsamples[0].size),a.subsamples.length>1)for(b=1;b<a.subsamples.length;b++)c.resources[b]=d.readUint8Array(a.subsamples[b].size)}else c.documentString=d.readString(a.data.length);return"undefined"!=typeof DOMParser&&(c.document=(new DOMParser).parseFromString(c.documentString,"application/xml")),c};var p=function(){};p.prototype.parseSample=function(a){return new h(a.data.buffer).readString(a.data.length)},p.prototype.parseConfig=function(a){var b=new h(a.buffer);return b.readUint32(),b.readCString()},void 0!==c&&(c.XMLSubtitlein4Parser=o,c.Textin4Parser=p);var q=function(a){this.stream=a||new k,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1};q.prototype.setSegmentOptions=function(a,b,c){var d=this.getTrackById(a);if(d){var e={};this.fragmentedTracks.push(e),e.id=a,e.user=b,e.trak=d,d.nextSample=0,e.segmentStream=null,e.nb_samples=1e3,e.rapAlignement=!0,c&&(c.nbSamples&&(e.nb_samples=c.nbSamples),c.rapAlignement&&(e.rapAlignement=c.rapAlignement))}},q.prototype.unsetSegmentOptions=function(a){for(var b=-1,c=0;c<this.fragmentedTracks.length;c++)this.fragmentedTracks[c].id==a&&(b=c);b>-1&&this.fragmentedTracks.splice(b,1)},q.prototype.setExtractionOptions=function(a,b,c){var d=this.getTrackById(a);if(d){var e={};this.extractedTracks.push(e),e.id=a,e.user=b,e.trak=d,d.nextSample=0,e.nb_samples=1e3,e.samples=[],c&&c.nbSamples&&(e.nb_samples=c.nbSamples)}},q.prototype.unsetExtractionOptions=function(a){for(var b=-1,c=0;c<this.extractedTracks.length;c++)this.extractedTracks[c].id==a&&(b=c);b>-1&&this.extractedTracks.splice(b,1)},q.prototype.parse=function(){var a,b;if(!this.restoreParsePosition||this.restoreParsePosition())for(;;){if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}if(this.saveParsePosition&&this.saveParsePosition(),(a=m.parseOneBox(this.stream,!1)).code===m.ERR_NOT_ENOUGH_DATA){if(this.processIncompleteBox){if(this.processIncompleteBox(a))continue;return}return}var c;switch(c="uuid"!==(b=a.box).type?b.type:b.uuid,this.boxes.push(b),c){case"mdat":this.mdats.push(b);break;case"moof":this.moofs.push(b);break;case"moov":this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0);default:void 0!==this[c]&&f.warn("ISOFile","Duplicate Box of type: "+c+", overriding previous occurrence"),this[c]=b}this.updateUsedBytes&&this.updateUsedBytes(b,a)}},q.prototype.checkBuffer=function(a){if(null==a)throw"Buffer must be defined and non empty";if(void 0===a.fileStart)throw"Buffer must have a fileStart property";return 0===a.byteLength?(f.warn("ISOFile","Ignoring empty buffer (fileStart: "+a.fileStart+")"),this.stream.logBufferLevel(),!1):(f.info("ISOFile","Processing buffer (fileStart: "+a.fileStart+")"),a.usedBytes=0,this.stream.insertBuffer(a),this.stream.logBufferLevel(),!!this.stream.initialized()||(f.warn("ISOFile","Not ready to start parsing"),!1))},q.prototype.appendBuffer=function(a,b){var c;if(this.checkBuffer(a))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(b),this.nextSeekPosition?(c=this.nextSeekPosition,this.nextSeekPosition=void 0):c=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(c=this.stream.getEndFilePositionAfter(c))):c=this.nextParsePosition?this.nextParsePosition:0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),
this.stream.cleanBuffers&&(f.info("ISOFile","Done processing buffer (fileStart: "+a.fileStart+") - next buffer to fetch should have a fileStart position of "+c),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),f.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),c},q.prototype.getInfo=function(){var a,b,c,d,e,f={},g=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(f.hasMoov=!0,f.duration=this.moov.mvhd.duration,f.timescale=this.moov.mvhd.timescale,f.isFragmented=null!=this.moov.mvex,f.isFragmented&&this.moov.mvex.mehd&&(f.fragment_duration=this.moov.mvex.mehd.fragment_duration),f.isProgressive=this.isProgressive,f.hasIOD=null!=this.moov.iods,f.brands=[],f.brands.push(this.ftyp.major_brand),f.brands=f.brands.concat(this.ftyp.compatible_brands),f.created=new Date(g+1e3*this.moov.mvhd.creation_time),f.modified=new Date(g+1e3*this.moov.mvhd.modification_time),f.tracks=[],f.audioTracks=[],f.videoTracks=[],f.subtitleTracks=[],f.metadataTracks=[],f.hintTracks=[],f.otherTracks=[],a=0;a<this.moov.traks.length;a++){if(e=(c=this.moov.traks[a]).mdia.minf.stbl.stsd.entries[0],d={},f.tracks.push(d),d.id=c.tkhd.track_id,d.name=c.mdia.hdlr.name,d.references=[],c.tref)for(b=0;b<c.tref.boxes.length;b++)ref={},d.references.push(ref),ref.type=c.tref.boxes[b].type,ref.track_ids=c.tref.boxes[b].track_ids;c.edts&&(d.edits=c.edts.elst.entries),d.created=new Date(g+1e3*c.tkhd.creation_time),d.modified=new Date(g+1e3*c.tkhd.modification_time),d.movie_duration=c.tkhd.duration,d.movie_timescale=f.timescale,d.layer=c.tkhd.layer,d.alternate_group=c.tkhd.alternate_group,d.volume=c.tkhd.volume,d.matrix=c.tkhd.matrix,d.track_width=c.tkhd.width/65536,d.track_height=c.tkhd.height/65536,d.timescale=c.mdia.mdhd.timescale,d.cts_shift=c.mdia.minf.stbl.cslg,d.duration=c.mdia.mdhd.duration,d.samples_duration=c.samples_duration,d.codec=e.getCodec(),d.kind=c.udta&&c.udta.kinds.length?c.udta.kinds[0]:{schemeURI:"",value:""},d.language=c.mdia.elng?c.mdia.elng.extended_language:c.mdia.mdhd.languageString,d.nb_samples=c.samples.length,d.size=c.samples_size,d.bitrate=8*d.size*d.timescale/d.samples_duration,e.isAudio()?(d.type="audio",f.audioTracks.push(d),d.audio={},d.audio.sample_rate=e.getSampleRate(),d.audio.channel_count=e.getChannelCount(),d.audio.sample_size=e.getSampleSize()):e.isVideo()?(d.type="video",f.videoTracks.push(d),d.video={},d.video.width=e.getWidth(),d.video.height=e.getHeight()):e.isSubtitle()?(d.type="subtitles",f.subtitleTracks.push(d)):e.isHint()?(d.type="metadata",f.hintTracks.push(d)):e.isMetadata()?(d.type="metadata",f.metadataTracks.push(d)):(d.type="metadata",f.otherTracks.push(d))}else f.hasMoov=!1;if(f.mime="",f.hasMoov&&f.tracks){for(f.videoTracks&&f.videoTracks.length>0?f.mime+='video/mp4; codecs="':f.audioTracks&&f.audioTracks.length>0?f.mime+='audio/mp4; codecs="':f.mime+='application/mp4; codecs="',a=0;a<f.tracks.length;a++)0!==a&&(f.mime+=","),f.mime+=f.tracks[a].codec;f.mime+='"; profiles="',f.mime+=this.ftyp.compatible_brands.join(),f.mime+='"'}return f},q.prototype.processSamples=function(a){var b,c;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&null!==this.onSegment)for(b=0;b<this.fragmentedTracks.length;b++){var d=this.fragmentedTracks[b];for(c=d.trak;c.nextSample<c.samples.length&&this.sampleProcessingStarted;){f.debug("ISOFile","Creating media fragment on track #"+d.id+" for sample "+c.nextSample);var e=this.createFragment(d.id,c.nextSample,d.segmentStream);if(!e)break;if(d.segmentStream=e,(++c.nextSample%d.nb_samples==0||a||c.nextSample>=c.samples.length)&&(f.info("ISOFile","Sending fragmented data on track #"+d.id+" for samples ["+Math.max(0,c.nextSample-d.nb_samples)+","+(c.nextSample-1)+"]"),f.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(d.id,d.user,d.segmentStream.buffer,c.nextSample,a||c.nextSample>=c.samples.length),d.segmentStream=null,d!==this.fragmentedTracks[b]))break}}if(null!==this.onSamples)for(b=0;b<this.extractedTracks.length;b++){var g=this.extractedTracks[b];for(c=g.trak;c.nextSample<c.samples.length&&this.sampleProcessingStarted;){f.debug("ISOFile","Exporting on track #"+g.id+" sample #"+c.nextSample);var h=this.getSample(c,c.nextSample);if(!h)break;if(c.nextSample++,g.samples.push(h),(c.nextSample%g.nb_samples==0||c.nextSample>=c.samples.length)&&(f.debug("ISOFile","Sending samples on track #"+g.id+" for sample "+c.nextSample),this.onSamples&&this.onSamples(g.id,g.user,g.samples),g.samples=[],g!==this.extractedTracks[b]))break}}}},q.prototype.getBox=function(a){var b=this.getBoxes(a,!0);return b.length?b[0]:null},q.prototype.getBoxes=function(a,b){var c=[];return q._sweep.call(this,a,c,b),c},q._sweep=function(a,b,c){for(var d in this.type&&this.type==a&&b.push(this),this.boxes){if(b.length&&c)return;q._sweep.call(this.boxes[d],a,b,c)}},q.prototype.getTrackSamplesInfo=function(a){var b=this.getTrackById(a);return b?b.samples:void 0},q.prototype.getTrackSample=function(a,b){var c=this.getTrackById(a);return this.getSample(c,b)},q.prototype.releaseUsedSamples=function(a,b){var c=0,d=this.getTrackById(a);d.lastValidSample||(d.lastValidSample=0);for(var e=d.lastValidSample;e<b;e++)c+=this.releaseSample(d,e);f.info("ISOFile","Track #"+a+" released samples up to "+b+" (released size: "+c+", remaining: "+this.samplesDataSize+")"),d.lastValidSample=b},q.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},q.prototype.stop=function(){this.sampleProcessingStarted=!1},q.prototype.flush=function(){f.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},q.prototype.seekTrack=function(a,b,c){var d,e,g,h,i=0,j=0;if(0===c.samples.length)return f.info("ISOFile","No sample in track, cannot seek! Using time "+f.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(d=0;d<c.samples.length;d++){if(e=c.samples[d],0===d)j=0,h=e.timescale;else if(e.cts>a*e.timescale){j=d-1;break}b&&e.is_sync&&(i=d)}for(b&&(j=i),a=c.samples[j].cts,c.nextSample=j;c.samples[j].alreadyRead===c.samples[j].size&&c.samples[j+1];)j++;return g=c.samples[j].offset+c.samples[j].alreadyRead,f.info("ISOFile","Seeking to "+(b?"RAP":"")+" sample #"+c.nextSample+" on track "+c.tkhd.track_id+", time "+f.getDurationString(a,h)+" and offset: "+g),{offset:g,time:a/h}},q.prototype.seek=function(a,b){var c,d,e,g=this.moov,h={offset:1/0,time:1/0};if(this.moov){for(e=0;e<g.traks.length;e++)c=g.traks[e],(d=this.seekTrack(a,b,c)).offset<h.offset&&(h.offset=d.offset),d.time<h.time&&(h.time=d.time);return f.info("ISOFile","Seeking at time "+f.getDurationString(h.time,1)+" needs a buffer with a fileStart position of "+h.offset),h.offset===1/0?h={offset:this.nextParsePosition,time:0}:h.offset=this.stream.getEndFilePositionAfter(h.offset),f.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+h.offset),h}throw"Cannot seek: moov not received!"},q.prototype.equal=function(a){for(var b=0;b<this.boxes.length&&b<a.boxes.length;){var c=this.boxes[b],d=a.boxes[b];if(!m.boxEqual(c,d))return!1;b++}return!0},void 0!==c&&(c.ISOFile=q),q.prototype.lastBoxStartPosition=0,q.prototype.parsingMdat=null,q.prototype.nextParsePosition=0,q.prototype.discardMdatData=!1,q.prototype.processIncompleteBox=function(a){var b;return"mdat"===a.type?(b=new m[a.type+"Box"](a.size),this.parsingMdat=b,this.boxes.push(b),this.mdats.push(b),b.start=a.start,b.hdr_size=a.hdr_size,this.stream.addUsedBytes(b.hdr_size),this.lastBoxStartPosition=b.start+b.size,this.stream.seek(b.start+b.size,!1,this.discardMdatData)?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=b.start+b.size,!1)):("moov"===a.type&&(this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0)),this.stream.mergeNextBuffer&&this.stream.mergeNextBuffer()?(this.nextParsePosition=this.stream.getEndPosition(),!0):(a.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+a.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},q.prototype.hasIncompleteMdat=function(){return null!==this.parsingMdat},q.prototype.processIncompleteMdat=function(){var a;return a=this.parsingMdat,this.stream.seek(a.start+a.size,!1,this.discardMdatData)?(f.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},q.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},q.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},q.prototype.updateUsedBytes=function(a,b){this.stream.addUsedBytes&&("mdat"===a.type?(this.stream.addUsedBytes(a.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(a.size-a.hdr_size)):this.stream.addUsedBytes(a.size))},q.prototype.add=m.Box.prototype.add,q.prototype.addBox=m.Box.prototype.addBox,q.prototype.init=function(a){var b=a||{},c=(this.add("ftyp").set("major_brand",b.brands&&b.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",b.brands||["iso4"]),this.add("moov"));return c.add("mvhd").set("timescale",b.timescale||600).set("rate",b.rate||1).set("creation_time",0).set("modification_time",0).set("duration",b.duration||0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("next_track_id",1),c.add("mvex"),this},q.prototype.addTrack=function(a){this.moov||this.init(a);var b=a||{};b.width=b.width||320,b.height=b.height||320,b.id=b.id||this.moov.mvhd.next_track_id,b.type=b.type||"avc1";var c=this.moov.add("trak");this.moov.mvhd.next_track_id=b.id+1,c.add("tkhd").set("flags",m.TKHD_FLAG_ENABLED|m.TKHD_FLAG_IN_MOVIE|m.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",b.id).set("duration",b.duration||0).set("layer",b.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",b.width).set("height",b.height);var d=c.add("mdia");d.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",b.timescale||1).set("duration",b.media_duration||0).set("language",b.language||0),d.add("hdlr").set("handler",b.hdlr||"vide").set("name",b.name||"Track created with MP4Box.js"),d.add("elng").set("extended_language",b.language||"fr-FR");var e=d.add("minf");if(void 0!==m[b.type+"SampleEntry"]){var f=new m[b.type+"SampleEntry"];f.data_reference_index=1;var g="";for(var h in m.sampleEntryCodes)for(var i=m.sampleEntryCodes[h],j=0;j<i.length;j++)if(i.indexOf(b.type)>-1){g=h;break}switch(g){case"Visual":e.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),f.set("width",b.width).set("height",b.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",b.type+" Compressor").set("depth",24);break;case"Audio":e.add("smhd").set("balance",b.balance||0),f.set("channel_count",b.channel_count||2).set("samplesize",b.samplesize||16).set("samplerate",b.samplerate||65536);break;case"Hint":e.add("hmhd");break;case"Subtitle":switch(e.add("sthd"),b.type){case"stpp":f.set("namespace",b.namespace||"nonamespace").set("schema_location",b.schema_location||"").set("auxiliary_mime_types",b.auxiliary_mime_types||"")}break;case"Metadata":case"System":default:e.add("nmhd")}b.description&&f.addBox(b.description),b.description_boxes&&b.description_boxes.forEach(function(a){f.addBox(a)}),e.add("dinf").add("dref").addEntry((new m["url Box"]).set("flags",1));var k=e.add("stbl");return k.add("stsd").addEntry(f),k.add("stts").set("sample_counts",[]).set("sample_deltas",[]),k.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),k.add("stco").set("chunk_offsets",[]),k.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",b.id).set("default_sample_description_index",b.default_sample_description_index||1).set("default_sample_duration",b.default_sample_duration||0).set("default_sample_size",b.default_sample_size||0).set("default_sample_flags",b.default_sample_flags||0),this.buildTrakSampleLists(c),b.id}},m.Box.prototype.computeSize=function(a){var b=a||new i;b.endianness=i.BIG_ENDIAN,this.write(b)},q.prototype.addSample=function(a,b,c){var d=c||{},e={},f=this.getTrackById(a);if(null!==f){e.number=f.samples.length,e.track_id=f.tkhd.track_id,e.timescale=f.mdia.mdhd.timescale,e.description_index=d.sample_description_index?d.sample_description_index-1:0,e.description=f.mdia.minf.stbl.stsd.entries[e.description_index],e.data=b,e.size=b.length,e.alreadyRead=e.size,e.duration=d.duration||1,e.cts=d.cts||0,e.dts=d.dts||0,e.is_sync=d.is_sync||!1,e.is_leading=d.is_leading||0,e.depends_on=d.depends_on||0,e.is_depended_on=d.is_depended_on||0,e.has_redundancy=d.has_redundancy||0,e.degradation_priority=d.degradation_priority||0,e.offset=0,e.subsamples=d.subsamples,f.samples.push(e),f.samples_size+=e.size,f.samples_duration+=e.duration,this.processSamples();var g=q.createSingleSampleMoof(e);return this.addBox(g),g.computeSize(),g.trafs[0].truns[0].data_offset=g.size+8,this.add("mdat").data=b,e}},q.createSingleSampleMoof=function(a){var b=new m.moofBox;b.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var c=b.add("traf");return c.add("tfhd").set("track_id",a.track_id).set("flags",m.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),c.add("tfdt").set("baseMediaDecodeTime",a.dts),c.add("trun").set("flags",m.TRUN_FLAGS_DATA_OFFSET|m.TRUN_FLAGS_DURATION|m.TRUN_FLAGS_SIZE|m.TRUN_FLAGS_FLAGS|m.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[a.duration]).set("sample_size",[a.size]).set("sample_flags",[0]).set("sample_composition_time_offset",[a.cts-a.dts]),b},q.prototype.lastMoofIndex=0,q.prototype.samplesDataSize=0,q.prototype.resetTables=function(){var a,b,c,d,e,f;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,a=0;a<this.moov.traks.length;a++){(b=this.moov.traks[a]).tkhd.duration=0,b.mdia.mdhd.duration=0,(b.mdia.minf.stbl.stco||b.mdia.minf.stbl.co64).chunk_offsets=[],(c=b.mdia.minf.stbl.stsc).first_chunk=[],c.samples_per_chunk=[],c.sample_description_index=[],(b.mdia.minf.stbl.stsz||b.mdia.minf.stbl.stz2).sample_sizes=[],(d=b.mdia.minf.stbl.stts).sample_counts=[],d.sample_deltas=[],(e=b.mdia.minf.stbl.ctts)&&(e.sample_counts=[],e.sample_offsets=[]),f=b.mdia.minf.stbl.stss;var g=b.mdia.minf.stbl.boxes.indexOf(f);-1!=g&&(b.mdia.minf.stbl.boxes[g]=null)}},q.initSampleGroups=function(a,b,c,d,e){function f(a,b,c){this.grouping_type=a,this.grouping_type_parameter=b,this.sbgp=c,this.last_sample_in_run=-1,this.entry_index=-1}var g,h,i,j;for(b&&(b.sample_groups_info=[]),a.sample_groups_info||(a.sample_groups_info=[]),h=0;h<c.length;h++){for(j=c[h].grouping_type+"/"+c[h].grouping_type_parameter,i=new f(c[h].grouping_type,c[h].grouping_type_parameter,c[h]),b&&(b.sample_groups_info[j]=i),a.sample_groups_info[j]||(a.sample_groups_info[j]=i),g=0;g<d.length;g++)d[g].grouping_type===c[h].grouping_type&&(i.description=d[g],i.description.used=!0);if(e)for(g=0;g<e.length;g++)e[g].grouping_type===c[h].grouping_type&&(i.fragment_description=e[g],i.fragment_description.used=!0,i.is_fragment=!0)}if(b){if(e)for(h=0;h<e.length;h++)!e[h].used&&e[h].version>=2&&(j=e[h].grouping_type+"/0",(i=new f(e[h].grouping_type,0)).is_fragment=!0,b.sample_groups_info[j]||(b.sample_groups_info[j]=i))}else for(h=0;h<d.length;h++)!d[h].used&&d[h].version>=2&&(j=d[h].grouping_type+"/0",i=new f(d[h].grouping_type,0),a.sample_groups_info[j]||(a.sample_groups_info[j]=i))},q.setSampleGroupProperties=function(a,b,c,d){var e,f;for(e in b.sample_groups=[],d){var g;b.sample_groups[e]={},b.sample_groups[e].grouping_type=d[e].grouping_type,b.sample_groups[e].grouping_type_parameter=d[e].grouping_type_parameter,c>=d[e].last_sample_in_run&&(d[e].last_sample_in_run<0&&(d[e].last_sample_in_run=0),++d[e].entry_index<=d[e].sbgp.entries.length-1&&(d[e].last_sample_in_run+=d[e].sbgp.entries[d[e].entry_index].sample_count)),d[e].entry_index<=d[e].sbgp.entries.length-1?b.sample_groups[e].group_description_index=d[e].sbgp.entries[d[e].entry_index].group_description_index:b.sample_groups[e].group_description_index=-1,0!==b.sample_groups[e].group_description_index&&(g=d[e].fragment_description?d[e].fragment_description:d[e].description,b.sample_groups[e].group_description_index>0?(f=b.sample_groups[e].group_description_index>65535?(b.sample_groups[e].group_description_index>>16)-1:b.sample_groups[e].group_description_index-1,g&&f>=0&&(b.sample_groups[e].description=g.entries[f])):g&&g.version>=2&&g.default_group_description_index>0&&(b.sample_groups[e].description=g.entries[g.default_group_description_index-1]))}},q.process_sdtp=function(a,b,c){b&&(a?(b.is_leading=a.is_leading[c],b.depends_on=a.sample_depends_on[c],b.is_depended_on=a.sample_is_depended_on[c],b.has_redundancy=a.sample_has_redundancy[c]):(b.is_leading=0,b.depends_on=0,b.is_depended_on=0,b.has_redundancy=0))},q.prototype.buildSampleLists=function(){var a,b;for(a=0;a<this.moov.traks.length;a++)b=this.moov.traks[a],this.buildTrakSampleLists(b)},q.prototype.buildTrakSampleLists=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,r,s,t,u,v,w,x,y,z;if(a.samples=[],a.samples_duration=0,a.samples_size=0,c=a.mdia.minf.stbl.stco||a.mdia.minf.stbl.co64,d=a.mdia.minf.stbl.stsc,e=a.mdia.minf.stbl.stsz||a.mdia.minf.stbl.stz2,f=a.mdia.minf.stbl.stts,g=a.mdia.minf.stbl.ctts,h=a.mdia.minf.stbl.stss,i=a.mdia.minf.stbl.stsd,j=a.mdia.minf.stbl.subs,m=a.mdia.minf.stbl.stdp,k=a.mdia.minf.stbl.sbgps,l=a.mdia.minf.stbl.sgpds,t=-1,u=-1,v=-1,w=-1,x=0,y=0,z=0,q.initSampleGroups(a,null,k,l),void 0!==e){for(b=0;b<e.sample_sizes.length;b++){var A={};A.number=b,A.track_id=a.tkhd.track_id,A.timescale=a.mdia.mdhd.timescale,A.alreadyRead=0,a.samples[b]=A,A.size=e.sample_sizes[b],a.samples_size+=A.size,0===b?(o=1,n=0,A.chunk_index=o,A.chunk_run_index=n,s=d.samples_per_chunk[n],r=0,p=n+1<d.first_chunk.length?d.first_chunk[n+1]-1:1/0):b<s?(A.chunk_index=o,A.chunk_run_index=n):(o++,A.chunk_index=o,r=0,o<=p||(p=++n+1<d.first_chunk.length?d.first_chunk[n+1]-1:1/0),A.chunk_run_index=n,s+=d.samples_per_chunk[n]),A.description_index=d.sample_description_index[A.chunk_run_index]-1,A.description=i.entries[A.description_index],A.offset=c.chunk_offsets[A.chunk_index-1]+r,r+=A.size,b>t&&(u++,t<0&&(t=0),t+=f.sample_counts[u]),b>0?(a.samples[b-1].duration=f.sample_deltas[u],a.samples_duration+=a.samples[b-1].duration,A.dts=a.samples[b-1].dts+a.samples[b-1].duration):A.dts=0,g?(b>=v&&(w++,v<0&&(v=0),v+=g.sample_counts[w]),A.cts=a.samples[b].dts+g.sample_offsets[w]):A.cts=A.dts,h?(b==h.sample_numbers[x]-1?(A.is_sync=!0,x++):(A.is_sync=!1,A.degradation_priority=0),j&&j.entries[y].sample_delta+z==b+1&&(A.subsamples=j.entries[y].subsamples,z+=j.entries[y].sample_delta,y++)):A.is_sync=!0,q.process_sdtp(a.mdia.minf.stbl.sdtp,A,A.number),A.degradation_priority=m?m.priority[b]:0,j&&j.entries[y].sample_delta+z==b&&(A.subsamples=j.entries[y].subsamples,z+=j.entries[y].sample_delta),(k.length>0||l.length>0)&&q.setSampleGroupProperties(a,A,b,a.sample_groups_info)}b>0&&(a.samples[b-1].duration=Math.max(a.mdia.mdhd.duration-a.samples[b-1].dts,0),a.samples_duration+=a.samples[b-1].duration)}},q.prototype.updateSampleLists=function(){var a,b,c,d,e,f,g,h,i,j,k,l,n,o,p;if(void 0!==this.moov)for(;this.lastMoofIndex<this.moofs.length;)if(i=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,"moof"==i.type)for(j=i,a=0;a<j.trafs.length;a++){for(k=j.trafs[a],l=this.getTrackById(k.tfhd.track_id),n=this.getTrexById(k.tfhd.track_id),d=k.tfhd.flags&m.TFHD_FLAG_SAMPLE_DESC?k.tfhd.default_sample_description_index:n?n.default_sample_description_index:1,e=k.tfhd.flags&m.TFHD_FLAG_SAMPLE_DUR?k.tfhd.default_sample_duration:n?n.default_sample_duration:0,f=k.tfhd.flags&m.TFHD_FLAG_SAMPLE_SIZE?k.tfhd.default_sample_size:n?n.default_sample_size:0,g=k.tfhd.flags&m.TFHD_FLAG_SAMPLE_FLAGS?k.tfhd.default_sample_flags:n?n.default_sample_flags:0,k.sample_number=0,k.sbgps.length>0&&q.initSampleGroups(l,k,k.sbgps,l.mdia.minf.stbl.sgpds,k.sgpds),b=0;b<k.truns.length;b++){var r=k.truns[b];for(c=0;c<r.sample_count;c++){(o={}).moof_number=this.lastMoofIndex,o.number_in_traf=k.sample_number,k.sample_number++,o.number=l.samples.length,k.first_sample_index=l.samples.length,l.samples.push(o),o.track_id=l.tkhd.track_id,o.timescale=l.mdia.mdhd.timescale,o.description_index=d-1,o.description=l.mdia.minf.stbl.stsd.entries[o.description_index],o.size=f,r.flags&m.TRUN_FLAGS_SIZE&&(o.size=r.sample_size[c]),l.samples_size+=o.size,o.duration=e,r.flags&m.TRUN_FLAGS_DURATION&&(o.duration=r.sample_duration[c]),l.samples_duration+=o.duration,l.first_traf_merged||c>0?o.dts=l.samples[l.samples.length-2].dts+l.samples[l.samples.length-2].duration:(k.tfdt?o.dts=k.tfdt.baseMediaDecodeTime:o.dts=0,l.first_traf_merged=!0),o.cts=o.dts,r.flags&m.TRUN_FLAGS_CTS_OFFSET&&(o.cts=o.dts+r.sample_composition_time_offset[c]),p=g,r.flags&m.TRUN_FLAGS_FLAGS?p=r.sample_flags[c]:0===c&&r.flags&m.TRUN_FLAGS_FIRST_FLAG&&(p=r.first_sample_flags),o.is_sync=!(p>>16&1),o.is_leading=p>>26&3,o.depends_on=p>>24&3,o.is_depended_on=p>>22&3,o.has_redundancy=p>>20&3,o.degradation_priority=65535&p;var s=!!(k.tfhd.flags&m.TFHD_FLAG_BASE_DATA_OFFSET),t=!!(k.tfhd.flags&m.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),u=!!(r.flags&m.TRUN_FLAGS_DATA_OFFSET),v=0;v=s?k.tfhd.base_data_offset:t||0===b?j.start:h,o.offset=0===b&&0===c?u?v+r.data_offset:v:h,h=o.offset+o.size,(k.sbgps.length>0||k.sgpds.length>0||l.mdia.minf.stbl.sbgps.length>0||l.mdia.minf.stbl.sgpds.length>0)&&q.setSampleGroupProperties(l,o,o.number_in_traf,k.sample_groups_info)}}if(k.subs){l.has_fragment_subsamples=!0;var w=k.first_sample_index;for(b=0;b<k.subs.entries.length;b++)w+=k.subs.entries[b].sample_delta,(o=l.samples[w-1]).subsamples=k.subs.entries[b].subsamples}}},q.prototype.getSample=function(a,b){var c,d=a.samples[b];if(!this.moov)return null;if(d.data){if(d.alreadyRead==d.size)return d}else d.data=new Uint8Array(d.size),d.alreadyRead=0,this.samplesDataSize+=d.size,f.debug("ISOFile","Allocating sample #"+b+" on track #"+a.tkhd.track_id+" of size "+d.size+" (total: "+this.samplesDataSize+")");for(;;){var e=this.stream.findPosition(!0,d.offset+d.alreadyRead,!1);if(!(e>-1))return null;var g=(c=this.stream.buffers[e]).byteLength-(d.offset+d.alreadyRead-c.fileStart);if(d.size-d.alreadyRead<=g)return f.debug("ISOFile","Getting sample #"+b+" data (alreadyRead: "+d.alreadyRead+" offset: "+(d.offset+d.alreadyRead-c.fileStart)+" read size: "+(d.size-d.alreadyRead)+" full size: "+d.size+")"),i.memcpy(d.data.buffer,d.alreadyRead,c,d.offset+d.alreadyRead-c.fileStart,d.size-d.alreadyRead),c.usedBytes+=d.size-d.alreadyRead,this.stream.logBufferLevel(),d.alreadyRead=d.size,d;if(0===g)return null;f.debug("ISOFile","Getting sample #"+b+" partial data (alreadyRead: "+d.alreadyRead+" offset: "+(d.offset+d.alreadyRead-c.fileStart)+" read size: "+g+" full size: "+d.size+")"),i.memcpy(d.data.buffer,d.alreadyRead,c,d.offset+d.alreadyRead-c.fileStart,g),d.alreadyRead+=g,c.usedBytes+=g,this.stream.logBufferLevel()}},q.prototype.releaseSample=function(a,b){var c=a.samples[b];return c.data?(this.samplesDataSize-=c.size,c.data=null,c.alreadyRead=0,c.size):0},q.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},q.prototype.getCodecs=function(){var a,b="";for(a=0;a<this.moov.traks.length;a++)a>0&&(b+=","),b+=this.moov.traks[a].mdia.minf.stbl.stsd.entries[0].getCodec();return b},q.prototype.getTrexById=function(a){var b;if(!this.moov||!this.moov.mvex)return null;for(b=0;b<this.moov.mvex.trexs.length;b++){var c=this.moov.mvex.trexs[b];if(c.track_id==a)return c}return null},q.prototype.getTrackById=function(a){if(void 0===this.moov)return null;for(var b=0;b<this.moov.traks.length;b++){var c=this.moov.traks[b];if(c.tkhd.track_id==a)return c}return null},q.prototype.items=[],q.prototype.itemsDataSize=0,q.prototype.flattenItemInfo=function(){var a,b,c,d=this.items,e=this.meta;if(null!=e&&void 0!==e.hdlr&&void 0!==e.iinf){for(a=0;a<e.iinf.item_infos.length;a++)(c={}).id=e.iinf.item_infos[a].item_ID,d[c.id]=c,c.ref_to=[],c.name=e.iinf.item_infos[a].item_name,e.iinf.item_infos[a].protection_index>0&&(c.protection=e.ipro.protections[e.iinf.item_infos[a].protection_index-1]),e.iinf.item_infos[a].item_type?c.type=e.iinf.item_infos[a].item_type:c.type="mime",c.content_type=e.iinf.item_infos[a].content_type,c.content_encoding=e.iinf.item_infos[a].content_encoding;if(e.iloc)for(a=0;a<e.iloc.items.length;a++){var g=e.iloc.items[a];switch(c=d[g.item_ID],0!==g.data_reference_index&&(f.warn("Item storage with reference to other files: not supported"),c.source=e.dinf.boxes[g.data_reference_index-1]),g.construction_method){case 0:break;case 1:case 2:f.warn("Item storage with construction_method : not supported")}for(c.extents=[],c.size=0,b=0;b<g.extents.length;b++)c.extents[b]={},c.extents[b].offset=g.extents[b].extent_offset+g.base_offset,c.extents[b].length=g.extents[b].extent_length,c.extents[b].alreadyRead=0,c.size+=c.extents[b].length}if(e.pitm&&(d[e.pitm.item_id].primary=!0),e.iref)for(a=0;a<e.iref.references.length;a++){var h=e.iref.references[a];for(b=0;b<h.references.length;b++)d[h.from_item_ID].ref_to.push({type:h.type,id:h.references[b]})}if(e.iprp)for(var i=0;i<e.iprp.ipmas.length;i++){var j=e.iprp.ipmas[i];for(a=0;a<j.associations.length;a++){var k=j.associations[a];for(void 0===(c=d[k.id]).properties&&(c.properties={},c.properties.boxes=[]),b=0;b<k.props.length;b++){var l=k.props[b];if(l.property_index>0){var m=e.iprp.ipco.boxes[l.property_index-1];c.properties[m.type]=m,c.properties.boxes.push(m)}}}}}},q.prototype.getItem=function(a){var b,c;if(!this.meta)return null;if(!(c=this.items[a]).data&&c.size)c.data=new Uint8Array(c.size),c.alreadyRead=0,this.itemsDataSize+=c.size,f.debug("ISOFile","Allocating item #"+a+" of size "+c.size+" (total: "+this.itemsDataSize+")");else if(c.alreadyRead===c.size)return c;for(var d=0;d<c.extents.length;d++){var e=c.extents[d];if(e.alreadyRead!==e.length){var g=this.stream.findPosition(!0,e.offset+e.alreadyRead,!1);if(!(g>-1))return null;var h=(b=this.stream.buffers[g]).byteLength-(e.offset+e.alreadyRead-b.fileStart);if(!(e.length-e.alreadyRead<=h))return f.debug("ISOFile","Getting item #"+a+" extent #"+d+" partial data (alreadyRead: "+e.alreadyRead+" offset: "+(e.offset+e.alreadyRead-b.fileStart)+" read size: "+h+" full extent size: "+e.length+" full item size: "+c.size+")"),i.memcpy(c.data.buffer,c.alreadyRead,b,e.offset+e.alreadyRead-b.fileStart,h),e.alreadyRead+=h,c.alreadyRead+=h,b.usedBytes+=h,this.stream.logBufferLevel(),null;f.debug("ISOFile","Getting item #"+a+" extent #"+d+" data (alreadyRead: "+e.alreadyRead+" offset: "+(e.offset+e.alreadyRead-b.fileStart)+" read size: "+(e.length-e.alreadyRead)+" full extent size: "+e.length+" full item size: "+c.size+")"),i.memcpy(c.data.buffer,c.alreadyRead,b,e.offset+e.alreadyRead-b.fileStart,e.length-e.alreadyRead),b.usedBytes+=e.length-e.alreadyRead,this.stream.logBufferLevel(),c.alreadyRead+=e.length-e.alreadyRead,e.alreadyRead=e.length}}return c.alreadyRead===c.size?c:null},q.prototype.releaseItem=function(a){var b=this.items[a];if(b.data){this.itemsDataSize-=b.size,b.data=null,b.alreadyRead=0;for(var c=0;c<b.extents.length;c++)b.extents[c].alreadyRead=0;return b.size}return 0},q.prototype.processItems=function(a){for(var b in this.items){var c=this.items[b];this.getItem(c.id),a&&!c.sent&&(a(c),c.sent=!0,c.data=null)}},q.prototype.hasItem=function(a){for(var b in this.items){var c=this.items[b];if(c.name===a)return c.id}return-1},q.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},q.prototype.getPrimaryItem=function(){return this.meta&&this.meta.pitm?this.getItem(this.meta.pitm.item_id):null},q.prototype.itemToFragmentedTrackFile=function(a){var b=a||{},c=null;if(null==(c=b.itemId?this.getItem(b.itemId):this.getPrimaryItem()))return null;var d=new q;d.discardMdatData=!1;var e={type:c.type,description_boxes:c.properties.boxes};c.properties.ispe&&(e.width=c.properties.ispe.image_width,e.height=c.properties.ispe.image_height);var f=d.addTrack(e);return f?(d.addSample(f,c.data),d):null},q.prototype.write=function(a){for(var b=0;b<this.boxes.length;b++)this.boxes[b].write(a)},q.prototype.createFragment=function(a,b,c){var d=this.getTrackById(a),e=this.getSample(d,b);if(null==e)return e=d.samples[b],this.nextSeekPosition?this.nextSeekPosition=Math.min(e.offset+e.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=d.samples[b].offset+e.alreadyRead,null;var g=c||new i;g.endianness=i.BIG_ENDIAN;var h=q.createSingleSampleMoof(e);h.write(g),h.trafs[0].truns[0].data_offset=h.size+8,f.debug("MP4Box","Adjusting data_offset with new value "+h.trafs[0].truns[0].data_offset),g.adjustUint32(h.trafs[0].truns[0].data_offset_position,h.trafs[0].truns[0].data_offset);var j=new m.mdatBox;return j.data=e.data,j.write(g),g},q.writeInitializationSegment=function(a,b,c,d){var e;f.debug("ISOFile","Generating initialization segment");var g=new i;g.endianness=i.BIG_ENDIAN,a.write(g);var h=b.add("mvex");for(c&&h.add("mehd").set("fragment_duration",c),e=0;e<b.traks.length;e++)h.add("trex").set("track_id",b.traks[e].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",d).set("default_sample_size",0).set("default_sample_flags",65536);return b.write(g),g.buffer},q.prototype.save=function(a){var b=new i;b.endianness=i.BIG_ENDIAN,this.write(b),b.save(a)},q.prototype.getBuffer=function(){var a=new i;return a.endianness=i.BIG_ENDIAN,this.write(a),a.buffer},q.prototype.initializeSegmentation=function(){var a,b,c,d;for(null===this.onSegment&&f.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),b=[],a=0;a<this.fragmentedTracks.length;a++){var e=new m.moovBox;e.mvhd=this.moov.mvhd,e.boxes.push(e.mvhd),c=this.getTrackById(this.fragmentedTracks[a].id),e.boxes.push(c),e.traks.push(c),(d={}).id=c.tkhd.track_id,d.user=this.fragmentedTracks[a].user,d.buffer=q.writeInitializationSegment(this.ftyp,e,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[a].samples.length>0?this.moov.traks[a].samples[0].duration:0),b.push(d)}return b},m.Box.prototype.printHeader=function(a){this.size+=8,this.size>j&&(this.size+=8),"uuid"===this.type&&(this.size+=16),a.log(a.indent+"size:"+this.size),a.log(a.indent+"type:"+this.type)},m.FullBox.prototype.printHeader=function(a){this.size+=4,m.Box.prototype.printHeader.call(this,a),a.log(a.indent+"version:"+this.version),a.log(a.indent+"flags:"+this.flags)},m.Box.prototype.print=function(a){this.printHeader(a)},m.ContainerBox.prototype.print=function(a){this.printHeader(a);for(var b=0;b<this.boxes.length;b++)if(this.boxes[b]){var c=a.indent;a.indent+=" ",this.boxes[b].print(a),a.indent=c}},q.prototype.print=function(a){a.indent="";for(var b=0;b<this.boxes.length;b++)this.boxes[b]&&this.boxes[b].print(a)},m.mvhdBox.prototype.print=function(a){m.FullBox.prototype.printHeader.call(this,a),a.log(a.indent+"creation_time: "+this.creation_time),a.log(a.indent+"modification_time: "+this.modification_time),a.log(a.indent+"timescale: "+this.timescale),a.log(a.indent+"duration: "+this.duration),a.log(a.indent+"rate: "+this.rate),a.log(a.indent+"volume: "+(this.volume>>8)),a.log(a.indent+"matrix: "+this.matrix.join(", ")),a.log(a.indent+"next_track_id: "+this.next_track_id)},m.tkhdBox.prototype.print=function(a){m.FullBox.prototype.printHeader.call(this,a),a.log(a.indent+"creation_time: "+this.creation_time),a.log(a.indent+"modification_time: "+this.modification_time),a.log(a.indent+"track_id: "+this.track_id),a.log(a.indent+"duration: "+this.duration),a.log(a.indent+"volume: "+(this.volume>>8)),
a.log(a.indent+"matrix: "+this.matrix.join(", ")),a.log(a.indent+"layer: "+this.layer),a.log(a.indent+"alternate_group: "+this.alternate_group),a.log(a.indent+"width: "+this.width),a.log(a.indent+"height: "+this.height)};var r={createFile:function(a,b){var c=void 0===a||a,d=new q(b);return d.discardMdatData=!c,d}};void 0!==c&&(c.createFile=r.createFile)},{}],41:[function(a,b,c){function d(a){return a&&"object"==(void 0===a?"undefined":g(a))&&"default"in a?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("@videojs/vhs-utils/cjs/resolve-url"),f=a("global/window"),h=a("@videojs/vhs-utils/cjs/decode-b64-to-uint8-array"),i=a("@xmldom/xmldom"),j=d(e),k=d(f),l=d(h),m=function(a){return!!a&&"object"==(void 0===a?"undefined":g(a))},n=function Z(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b){return"object"!=(void 0===b?"undefined":g(b))||Object.keys(b).forEach(function(c){Array.isArray(a[c])&&Array.isArray(b[c])?a[c]=a[c].concat(b[c]):m(a[c])&&m(b[c])?a[c]=Z(a[c],b[c]):a[c]=b[c]}),a},{})},o=function(a){return a.reduce(function(a,b){return a.concat(b)},[])},p=function(a){if(!a.length)return[];for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},q=function(a){var b=a.baseUrl,c=void 0===b?"":b,d=a.source,e=void 0===d?"":d,f=a.range,g=void 0===f?"":f,h=a.indexRange,i=void 0===h?"":h,k={uri:e,resolvedUri:j["default"](c||"",e)};if(g||i){var l=(g||i).split("-"),m=parseInt(l[0],10),n=parseInt(l[1],10);k.byterange={length:n-m+1,offset:m}}return k},r=function(a){return a&&"number"!=typeof a&&(a=parseInt(a,10)),isNaN(a)?null:a},s={"static":function(a){var b=a.duration,c=a.timescale,d=void 0===c?1:c,e=a.sourceDuration,f=a.periodDuration,g=r(a.endNumber),h=b/d;return"number"==typeof g?{start:0,end:g}:"number"==typeof f?{start:0,end:f/h}:{start:0,end:e/h}},dynamic:function(a){var b=a.NOW,c=a.clientOffset,d=a.availabilityStartTime,e=a.timescale,f=void 0===e?1:e,g=a.duration,h=a.start,i=void 0===h?0:h,j=a.minimumUpdatePeriod,k=void 0===j?0:j,l=a.timeShiftBufferDepth,m=void 0===l?1/0:l,n=r(a.endNumber),o=(b+c)/1e3,p=d+i,q=o+k-p,s=Math.ceil(q*f/g),t=Math.floor((o-p-m)*f/g),u=Math.floor((o-p)*f/g);return{start:Math.max(0,t),end:"number"==typeof n?n:Math.min(s,u)}}},t=function(a){var b=a.type,c=a.duration,d=a.timescale,e=void 0===d?1:d,f=a.periodDuration,g=a.sourceDuration,h=s[b](a),i=function(a,b){for(var c=[],d=a;d<b;d++)c.push(d);return c}(h.start,h.end).map(function(a){return function(b,c){var d=a.duration,e=a.timescale,f=void 0===e?1:e,g=a.periodIndex,h=a.startNumber;return{number:(void 0===h?1:h)+b,duration:d/f,timeline:g,time:c*d}}}(a));if("static"===b){var j=i.length-1,k="number"==typeof f?f:g;i[j].duration=k-c/e*j}return i},u=function(a){var b=a.baseUrl,c=a.initialization,d=void 0===c?{}:c,e=a.sourceDuration,f=a.indexRange,g=void 0===f?"":f,h=a.duration;if(!b)throw new Error("NO_BASE_URL");var i=q({baseUrl:b,source:d.sourceURL,range:d.range}),j=q({baseUrl:b,source:b,indexRange:g});if(j.map=i,h){var k=t(a);k.length&&(j.duration=k[0].duration,j.timeline=k[0].timeline)}else e&&(j.duration=e,j.timeline=0);return j.number=0,[j]},v=function(a,b,c){for(var d=a.sidx.map?a.sidx.map:null,e=a.sidx.duration,f=a.timeline||0,g=a.sidx.byterange,h=g.offset+g.length,i=b.timescale,j=b.references.filter(function(a){return 1!==a.referenceType}),k=[],l=a.endList?"static":"dynamic",m=h+b.firstOffset,n=0;n<j.length;n++){var o=b.references[n],p=o.referencedSize,q=o.subsegmentDuration,r=u({baseUrl:c,timescale:i,timeline:f,periodIndex:f,duration:q,sourceDuration:e,indexRange:m+"-"+(m+p-1),type:l})[0];d&&(r.map=d),k.push(r),m+=p}return a.segments=k,a},w=function(a){return a&&a.uri+"-"+(b=a.byterange,c=b.offset+b.length-1,b.offset+"-"+c);var b,c},x=function(a){var b;return(b=a.reduce(function(a,b){var c,d=b.attributes.id+(b.attributes.lang||"");return a[d]?(b.segments[0]&&(b.segments[0].discontinuity=!0),(c=a[d].segments).push.apply(c,b.segments),b.attributes.contentProtection&&(a[d].attributes.contentProtection=b.attributes.contentProtection)):a[d]=b,a},{}),Object.keys(b).map(function(a){return b[a]})).map(function(a){var b,c;return a.discontinuityStarts=(b=a.segments,c="discontinuity",b.reduce(function(a,b,d){return b[c]&&a.push(d),a},[])),a})},y=function(a,b){var c=w(a.sidx),d=c&&b[c]&&b[c].sidx;return d&&v(a,d,a.sidx.resolvedUri),a},z=function(a,b){if(void 0===b&&(b={}),!Object.keys(b).length)return a;for(var c in a)a[c]=y(a[c],b);return a},A=function(a){var b,c=a.attributes,d=a.segments,e=a.sidx,f={attributes:(b={NAME:c.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:c.width,height:c.height},CODECS:c.codecs,BANDWIDTH:c.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===c.type,timeline:c.periodIndex,resolvedUri:"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1};return c.contentProtection&&(f.contentProtection=c.contentProtection),e&&(f.sidx=e),f},B=function(a){var b=a.attributes;return"video/mp4"===b.mimeType||"video/webm"===b.mimeType||"video"===b.contentType},C=function(a){var b=a.attributes;return"audio/mp4"===b.mimeType||"audio/webm"===b.mimeType||"audio"===b.contentType},D=function(a){var b=a.attributes;return"text/vtt"===b.mimeType||"text"===b.contentType},E=function(a,b,c){var d;if(void 0===c&&(c={}),!a.length)return{};var e=a[0].attributes,f=e.sourceDuration,g=e.type,h=e.suggestedPresentationDelay,i=e.minimumUpdatePeriod,j=x(a.filter(B)).map(A),k=x(a.filter(C)),l=a.filter(D),m=a.map(function(a){return a.attributes.captionServices}).filter(Boolean),n={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(d={AUDIO:{},VIDEO:{}},d["CLOSED-CAPTIONS"]={},d.SUBTITLES={},d),uri:"",duration:f,playlists:z(j,c)};i>=0&&(n.minimumUpdatePeriod=1e3*i),b&&(n.locations=b),"dynamic"===g&&(n.suggestedPresentationDelay=h);var o=0===n.playlists.length;return k.length&&(n.mediaGroups.AUDIO.audio=function(a,b,c){var d;void 0===b&&(b={}),void 0===c&&(c=!1);var e=a.reduce(function(a,e){var f=e.attributes.role&&e.attributes.role.value||"",g=e.attributes.lang||"",h=e.attributes.label||"main";if(g&&!e.attributes.label){var i=f?" ("+f+")":"";h=""+e.attributes.lang+i}a[h]||(a[h]={language:g,autoselect:!0,"default":"main"===f,playlists:[],uri:""});var j=y(function(a,b){var c,d=a.attributes,e=a.segments,f=a.sidx,g={attributes:(c={NAME:d.id,BANDWIDTH:d.bandwidth,CODECS:d.codecs},c["PROGRAM-ID"]=1,c),uri:"",endList:"static"===d.type,timeline:d.periodIndex,resolvedUri:"",targetDuration:d.duration,segments:e,mediaSequence:e.length?e[0].number:1};return d.contentProtection&&(g.contentProtection=d.contentProtection),f&&(g.sidx=f),b&&(g.attributes.AUDIO="audio",g.attributes.SUBTITLES="subs"),g}(e,c),b);return a[h].playlists.push(j),void 0===d&&"main"===f&&((d=e)["default"]=!0),a},{});return d||(e[Object.keys(e)[0]]["default"]=!0),e}(k,c,o)),l.length&&(n.mediaGroups.SUBTITLES.subs=function(a,b){return void 0===b&&(b={}),a.reduce(function(a,c){var d=c.attributes.lang||"text";return a[d]||(a[d]={language:d,"default":!1,autoselect:!1,playlists:[],uri:""}),a[d].playlists.push(y(function(a){var b,c=a.attributes,d=a.segments;void 0===d&&(d=[{uri:c.baseUrl,timeline:c.periodIndex,resolvedUri:c.baseUrl||"",duration:c.sourceDuration,number:0}],c.duration=c.sourceDuration);var e=((b={NAME:c.id,BANDWIDTH:c.bandwidth})["PROGRAM-ID"]=1,b);return c.codecs&&(e.CODECS=c.codecs),{attributes:e,uri:"",endList:"static"===c.type,timeline:c.periodIndex,resolvedUri:c.baseUrl||"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1}}(c),b)),a},{})}(l,c)),m.length&&(n.mediaGroups["CLOSED-CAPTIONS"].cc=m.reduce(function(a,b){return b?(b.forEach(function(b){var c=b.channel,d=b.language;a[d]={autoselect:!1,"default":!1,instreamId:c,language:d},b.hasOwnProperty("aspectRatio")&&(a[d].aspectRatio=b.aspectRatio),b.hasOwnProperty("easyReader")&&(a[d].easyReader=b.easyReader),b.hasOwnProperty("3D")&&(a[d]["3D"]=b["3D"])}),a):a},{})),n},F=function(a,b,c){var d=a.NOW,e=a.clientOffset,f=a.availabilityStartTime,g=a.timescale,h=void 0===g?1:g,i=a.start,j=void 0===i?0:i,k=a.minimumUpdatePeriod,l=(d+e)/1e3+(void 0===k?0:k)-(f+j);return Math.ceil((l*h-b)/c)},G=function(a,b){for(var c=a.type,d=a.minimumUpdatePeriod,e=void 0===d?0:d,f=a.media,g=void 0===f?"":f,h=a.sourceDuration,i=a.timescale,j=void 0===i?1:i,k=a.startNumber,l=void 0===k?1:k,m=a.periodIndex,n=[],o=-1,p=0;p<b.length;p++){var q=b[p],r=q.d,s=q.r||0,t=q.t||0;o<0&&(o=t),t&&t>o&&(o=t);var u=void 0;if(s<0){var v=p+1;u=v===b.length?"dynamic"===c&&e>0&&g.indexOf("$Number$")>0?F(a,o,r):(h*j-o)/r:(b[v].t-o)/r}else u=s+1;for(var w=l+n.length+u,x=l+n.length;x<w;)n.push({number:x,duration:r/j,time:o,timeline:m}),o+=r,x++}return n},H=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,I=function(a,b){return a.replace(H,function(a){return function(b,c,d,e){if("$$"===b)return"$";if(void 0===a[c])return b;var f=""+a[c];return"RepresentationID"===c?f:(e=d?parseInt(e,10):1,f.length>=e?f:""+new Array(e-f.length+1).join("0")+f)}}(b))},J=function(a,b){var c={RepresentationID:a.id,Bandwidth:a.bandwidth||0},d=a.initialization,e=void 0===d?{sourceURL:"",range:""}:d,f=q({baseUrl:a.baseUrl,source:I(e.sourceURL,c),range:e.range});return function(a,b){return a.duration||b?a.duration?t(a):G(a,b):[{number:a.startNumber||1,duration:a.sourceDuration,time:0,timeline:a.periodIndex}]}(a,b).map(function(b){c.Number=b.number,c.Time=b.time;var d=I(a.media||"",c),e=a.timescale||1,g=a.presentationTimeOffset||0,h=a.periodStart+(b.time-g)/e;return{uri:d,timeline:b.timeline,duration:b.duration,resolvedUri:j["default"](a.baseUrl||"",d),map:f,number:b.number,presentationTime:h}})},K=function(a,b){var c=a.duration,d=a.segmentUrls,e=void 0===d?[]:d,f=a.periodStart;if(!c&&!b||c&&b)throw new Error("SEGMENT_TIME_UNSPECIFIED");var g,h=e.map(function(b){return function(a,b){var c=a.baseUrl,d=a.initialization,e=void 0===d?{}:d,f=q({baseUrl:c,source:e.sourceURL,range:e.range}),g=q({baseUrl:c,source:b.media,range:b.mediaRange});return g.map=f,g}(a,b)});return c&&(g=t(a)),b&&(g=G(a,b)),g.map(function(b,c){if(h[c]){var d=h[c],e=a.timescale||1,g=a.presentationTimeOffset||0;return d.timeline=b.timeline,d.duration=b.duration,d.number=b.number,d.presentationTime=f+(b.time-g)/e,d}}).filter(function(a){return a})},L=function(a){var b,c,d=a.attributes,e=a.segmentInfo;e.template?(c=J,b=n(d,e.template)):e.base?(c=u,b=n(d,e.base)):e.list&&(c=K,b=n(d,e.list));var f={attributes:d};if(!c)return f;var g=c(b,e.segmentTimeline);if(b.duration){var h=b,i=h.duration,j=h.timescale,k=void 0===j?1:j;b.duration=i/k}else g.length?b.duration=g.reduce(function(a,b){return Math.max(a,Math.ceil(b.duration))},0):b.duration=0;return f.attributes=b,f.segments=g,e.base&&b.indexRange&&(f.sidx=g[0],f.segments=[]),f},M=function(a){return a.map(L)},N=function(a,b){return p(a.childNodes).filter(function(a){return a.tagName===b})},O=function(a){return a.textContent.trim()},P=function(a){var b=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(a);if(!b)return 0;var c=b.slice(1),d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5];return 31536e3*parseFloat(d||0)+2592e3*parseFloat(e||0)+86400*parseFloat(f||0)+3600*parseFloat(g||0)+60*parseFloat(h||0)+parseFloat(i||0)},Q={mediaPresentationDuration:function(a){return P(a)},availabilityStartTime:function(a){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(b=a)&&(b+="Z"),Date.parse(b)/1e3;var b},minimumUpdatePeriod:function(a){return P(a)},suggestedPresentationDelay:function(a){return P(a)},type:function(a){return a},timeShiftBufferDepth:function(a){return P(a)},start:function(a){return P(a)},width:function(a){return parseInt(a,10)},height:function(a){return parseInt(a,10)},bandwidth:function(a){return parseInt(a,10)},startNumber:function(a){return parseInt(a,10)},timescale:function(a){return parseInt(a,10)},presentationTimeOffset:function(a){return parseInt(a,10)},duration:function(a){var b=parseInt(a,10);return isNaN(b)?P(a):b},d:function(a){return parseInt(a,10)},t:function(a){return parseInt(a,10)},r:function(a){return parseInt(a,10)},DEFAULT:function(a){return a}},R=function(a){return a&&a.attributes?p(a.attributes).reduce(function(a,b){var c=Q[b.name]||Q.DEFAULT;return a[b.name]=c(b.value),a},{}):{}},S={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},T=function(a,b){return b.length?o(a.map(function(a){return b.map(function(b){return j["default"](a,O(b))})})):a},U=function(a){var b=N(a,"SegmentTemplate")[0],c=N(a,"SegmentList")[0],d=c&&N(c,"SegmentURL").map(function(a){return n({tag:"SegmentURL"},R(a))}),e=N(a,"SegmentBase")[0],f=c||b,g=f&&N(f,"SegmentTimeline")[0],h=c||e||b,i=h&&N(h,"Initialization")[0],j=b&&R(b);j&&i?j.initialization=i&&R(i):j&&j.initialization&&(j.initialization={sourceURL:j.initialization});var k={template:j,segmentTimeline:g&&N(g,"S").map(function(a){return R(a)}),list:c&&n(R(c),{segmentUrls:d,initialization:R(i)}),base:e&&n(R(e),{initialization:R(i)})};return Object.keys(k).forEach(function(a){k[a]||delete k[a]}),k},V=function(a,b,c){return function(d){var e,f=R(d),g=T(b,N(d,"BaseURL")),h=N(d,"Role")[0],i={role:R(h)},j=n(a,f,i),k=N(d,"Accessibility")[0],m="urn:scte:dash:cc:cea-608:2015"===(e=R(k)).schemeIdUri?e.value.split(";").map(function(a){var b,c;if(c=a,/^CC\d=/.test(a)){var d=a.split("=");b=d[0],c=d[1]}else/^CC\d$/.test(a)&&(b=a);return{channel:b,language:c}}):"urn:scte:dash:cc:cea-708:2015"===e.schemeIdUri?e.value.split(";").map(function(a){var b={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(a)){var c=a.split("="),d=c[0],e=c[1],f=void 0===e?"":e;b.channel=d,b.language=a,f.split(",").forEach(function(a){var c=a.split(":"),d=c[0],e=c[1];"lang"===d?b.language=e:"er"===d?b.easyReader=Number(e):"war"===d?b.aspectRatio=Number(e):"3D"===d&&(b["3D"]=Number(e))})}else b.language=a;return b.channel&&(b.channel="SERVICE"+b.channel),b}):void 0;m&&(j=n(j,{captionServices:m}));var p=N(d,"Label")[0];if(p&&p.childNodes.length){var q=p.childNodes[0].nodeValue.trim();j=n(j,{label:q})}var r=N(d,"ContentProtection").reduce(function(a,b){var c=R(b),d=S[c.schemeIdUri];if(d){a[d]={attributes:c};var e=N(b,"cenc:pssh")[0];if(e){var f=O(e),g=f&&l["default"](f);a[d].pssh=g}}return a},{});Object.keys(r).length&&(j=n(j,{contentProtection:r}));var s=U(d),t=N(d,"Representation"),u=n(c,s);return o(t.map(function(a,b,c){return function(d){var e=N(d,"BaseURL"),f=T(b,e),g=n(a,R(d)),h=U(d);return f.map(function(a){return{segmentInfo:n(c,h),attributes:n(g,{baseUrl:a})}})}}(j,g,u)))}},W=function(a,b){return function(c,d){var e=T(b,N(c.node,"BaseURL")),f=parseInt(c.attributes.id,10),g=k["default"].isNaN(f)?d:f,h=n(a,{periodIndex:g,periodStart:c.attributes.start});"number"==typeof c.attributes.duration&&(h.periodDuration=c.attributes.duration);var i=N(c.node,"AdaptationSet"),j=U(c.node);return o(i.map(V(h,e,j)))}},X=function(a,b){void 0===b&&(b={});var c=b,d=c.manifestUri,e=void 0===d?"":d,f=c.NOW,g=void 0===f?Date.now():f,h=c.clientOffset,i=void 0===h?0:h,j=N(a,"Period");if(!j.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var k=N(a,"Location"),l=R(a),m=T([e],N(a,"BaseURL"));l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=g,l.clientOffset=i,k.length&&(l.locations=k.map(O));var n=[];return j.forEach(function(a,b){var c=R(a),d=n[b-1];c.start=function(a){var b=a.attributes,c=a.priorPeriodAttributes,d=a.mpdType;return"number"==typeof b.start?b.start:c&&"number"==typeof c.start&&"number"==typeof c.duration?c.start+c.duration:c||"static"!==d?null:0}({attributes:c,priorPeriodAttributes:d?d.attributes:null,mpdType:l.type}),n.push({node:a,attributes:c})}),{locations:l.locations,representationInfo:o(n.map(W(l,m)))}},Y=function(a){if(""===a)throw new Error("DASH_EMPTY_MANIFEST");var b,c,d=new i.DOMParser;try{c=(b=d.parseFromString(a,"application/xml"))&&"MPD"===b.documentElement.tagName?b.documentElement:null}catch(a){}if(!c||c&&c.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return c};c.VERSION="0.19.0",c.addSidxSegmentsToPlaylist=v,c.generateSidxKey=w,c.inheritAttributes=X,c.parse=function(a,b){void 0===b&&(b={});var c=X(Y(a),b),d=M(c.representationInfo);return E(d,c.locations,b.sidxMapping)},c.parseUTCTiming=function(a){return function(a){var b=N(a,"UTCTiming")[0];if(!b)return null;var c=R(b);switch(c.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":c.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":c.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":c.method="DIRECT",c.value=Date.parse(c.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return c}(Y(a))},c.stringToMpdXml=Y,c.toM3u8=E,c.toPlaylists=M},{"@videojs/vhs-utils/cjs/decode-b64-to-uint8-array":13,"@videojs/vhs-utils/cjs/resolve-url":20,"@xmldom/xmldom":28,"global/window":35}],42:[function(a,b,c){var d=Math.pow(2,32);b.exports=function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8)},e=12;0===c.version?(c.earliestPresentationTime=b.getUint32(e),c.firstOffset=b.getUint32(e+4),e+=8):(c.earliestPresentationTime=b.getUint32(e)*d+b.getUint32(e+4),c.firstOffset=b.getUint32(e+8)*d+b.getUint32(e+12),e+=16),e+=2;var f=b.getUint16(e);for(e+=2;f>0;e+=12,f--)c.references.push({referenceType:(128&a[e])>>>7,referencedSize:2147483647&b.getUint32(e),subsegmentDuration:b.getUint32(e+4),startsWithSap:!!(128&a[e+8]),sapType:(112&a[e+8])>>>4,sapDeltaTime:268435455&b.getUint32(e+8)});return c}},{}],43:[function(a,b,c){var d,e,f,g,h,i,j;d=function(a){return 9e4*a},e=function(a,b){return a*b},f=function(a){return a/9e4},g=function(a,b){return a/b},h=function(a,b){return d(g(a,b))},i=function(a,b){return e(f(a),b)},j=function(a,b,c){return f(c?a:a-b)},b.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:d,secondsToAudioTs:e,videoTsToSeconds:f,audioTsToSeconds:g,audioTsToVideoTs:h,videoTsToAudioTs:i,metadataTsToSeconds:j}},{}],44:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(k===setTimeout)return setTimeout(a,0);if((k===d||!k)&&setTimeout)return k=setTimeout,setTimeout(a,0);try{return k(a,0)}catch(b){try{return k.call(null,a,0)}catch(b){return k.call(this,a,0)}}}function g(){p&&n&&(p=!1,n.length?o=n.concat(o):q=-1,o.length&&h())}function h(){if(!p){var a=f(g);p=!0;for(var b=o.length;b;){for(n=o,o=[];++q<b;)n&&n[q].run();q=-1,b=o.length}n=null,p=!1,function(a){if(l===clearTimeout)return clearTimeout(a);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{l(a)}catch(b){try{return l.call(null,a)}catch(b){return l.call(this,a)}}}(a)}}function i(a,b){this.fun=a,this.array=b}function j(){}var k,l,m=b.exports={};!function(){try{k="function"==typeof setTimeout?setTimeout:d}catch(a){k=d}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(a){l=e}}();var n,o=[],p=!1,q=-1;m.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new i(a,b)),1!==o.length||p||f(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=j,m.addListener=j,m.once=j,m.off=j,m.removeListener=j,m.removeAllListeners=j,m.emit=j,m.prependListener=j,m.prependOnceListener=j,m.listeners=function(a){return[]},m.binding=function(a){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(a){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},{}],45:[function(a,b,c){b.exports=function(a,b){var c,d=null;try{c=JSON.parse(a,b)}catch(a){d=a}return[d,c]}},{}],46:[function(c,d,h){var i,j,k,l,m;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,j=/^([^\/?#]*)([^]*)$/,k=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,m={buildAbsoluteURL:function(a,b,c){if(c=c||{},a=a.trim(),!(b=b.trim())){if(!c.alwaysNormalize)return a;var d=m.parseURL(a);if(!d)throw new Error("Error trying to parse base URL.");return d.path=m.normalizePath(d.path),m.buildURLFromParts(d)}var e=m.parseURL(b);if(!e)throw new Error("Error trying to parse relative URL.");if(e.scheme)return c.alwaysNormalize?(e.path=m.normalizePath(e.path),m.buildURLFromParts(e)):b;var f=m.parseURL(a);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&"/"!==f.path[0]){var g=j.exec(f.path);f.netLoc=g[1],f.path=g[2]}f.netLoc&&!f.path&&(f.path="/");var h={scheme:f.scheme,netLoc:e.netLoc,path:null,params:e.params,query:e.query,fragment:e.fragment};if(!e.netLoc&&(h.netLoc=f.netLoc,"/"!==e.path[0]))if(e.path){var i=f.path,k=i.substring(0,i.lastIndexOf("/")+1)+e.path;h.path=m.normalizePath(k)}else h.path=f.path,e.params||(h.params=f.params,e.query||(h.query=f.query));return null===h.path&&(h.path=c.alwaysNormalize?m.normalizePath(e.path):e.path),m.buildURLFromParts(h)},parseURL:function(a){var b=i.exec(a);return b?{scheme:b[1]||"",netLoc:b[2]||"",path:b[3]||"",params:b[4]||"",query:b[5]||"",fragment:b[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(k,"");a.length!==(a=a.replace(l,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}},"object"==(void 0===h?"undefined":g(h))&&"object"==(void 0===d?"undefined":g(d))?d.exports=m:(e=[],void 0!==(f=function(){return m}.apply(b,e))&&(a.exports=f))},{}],47:[function(a,b,c){function d(a){return a&&"object"==(void 0===a?"undefined":g(a))&&"default"in a?a:{"default":a}}function e(a,b){lb(a).forEach(function(c){return b(a[c],c)})}function f(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return Object.assign?Oa["default"].apply(void 0,[a].concat(c)):(c.forEach(function(b){b&&e(b,function(b,c){a[c]=b})}),a)}function h(a){return!!a&&"object"==(void 0===a?"undefined":g(a))}function i(a){return h(a)&&"[object Object]"===kb.call(a)&&a.constructor===Object}function j(a,b){if(!a||!b)return"";if("function"==typeof Ma["default"].getComputedStyle){var c;try{c=Ma["default"].getComputedStyle(a)}catch(a){return""}return c?c.getPropertyValue(b)||c[b]:""}return""}function k(a){return"string"==typeof a&&Boolean(a.trim())}function l(a){if(a.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function m(){return Na["default"]===Ma["default"].document}function n(a){return h(a)&&1===a.nodeType}function o(){try{return Ma["default"].parent!==Ma["default"].self}catch(a){return!0}}function p(a){return function(b,c){if(!k(b))return Na["default"][a](null);k(c)&&(c=Na["default"].querySelector(c));var d=n(c)?c:Na["default"];return d[a]&&d[a](b)}}function q(a,b,c,d){void 0===a&&(a="div"),void 0===b&&(b={}),void 0===c&&(c={});var e=Na["default"].createElement(a);return Object.getOwnPropertyNames(b).forEach(function(a){var c=b[a];-1!==a.indexOf("aria-")||"role"===a||"type"===a?(ib.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+a+" to "+c+"."),e.setAttribute(a,c)):"textContent"===a?r(e,c):e[a]===c&&"tabIndex"!==a||(e[a]=c)}),Object.getOwnPropertyNames(c).forEach(function(a){e.setAttribute(a,c[a])}),d&&K(e,d),e}function r(a,b){return void 0===a.textContent?a.innerText=b:a.textContent=b,a}function s(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}function t(a,b){return l(b),a.classList?a.classList.contains(b):(c=b,new RegExp("(^|\\s)"+c+"($|\\s)")).test(a.className);var c}function u(a,b){return a.classList?a.classList.add(b):t(a,b)||(a.className=(a.className+" "+b).trim()),a}function v(a,b){return a?(a.classList?a.classList.remove(b):(l(b),a.className=a.className.split(/\s+/).filter(function(a){return a!==b}).join(" ")),a):(ib.warn("removeClass was called with an element that doesn't exist"),null)}function w(a,b,c){var d=t(a,b);if("function"==typeof c&&(c=c(a,b)),"boolean"!=typeof c&&(c=!d),c!==d)return c?u(a,b):v(a,b),a}function x(a,b){Object.getOwnPropertyNames(b).forEach(function(c){var d=b[c];null==d||!1===d?a.removeAttribute(c):a.setAttribute(c,!0===d?"":d)})}function y(a){var b={};if(a&&a.attributes&&a.attributes.length>0)for(var c=a.attributes,d=c.length-1;d>=0;d--){var e=c[d].name,f=c[d].value;"boolean"!=typeof a[e]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+e+",")||(f=null!==f),b[e]=f}return b}function z(a,b){return a.getAttribute(b)}function A(a,b,c){a.setAttribute(b,c)}function B(a,b){a.removeAttribute(b)}function C(){Na["default"].body.focus(),Na["default"].onselectstart=function(){return!1}}function D(){Na["default"].onselectstart=function(){return!0}}function E(a){if(a&&a.getBoundingClientRect&&a.parentNode){var b=a.getBoundingClientRect(),c={};return["bottom","height","left","right","top","width"].forEach(function(a){void 0!==b[a]&&(c[a]=b[a])}),c.height||(c.height=parseFloat(j(a,"height"))),c.width||(c.width=parseFloat(j(a,"width"))),c}}function F(a){if(!a||a&&!a.offsetParent)return{left:0,top:0,width:0,height:0};for(var b=a.offsetWidth,c=a.offsetHeight,d=0,e=0;a.offsetParent&&a!==Na["default"][ab.fullscreenElement];)d+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent;return{left:d,top:e,width:b,height:c}}function G(a,b){var c={x:0,y:0};if(Eb)for(var d=a;d&&"html"!==d.nodeName.toLowerCase();){var e=j(d,"transform");if(/^matrix/.test(e)){var f=e.slice(7,-1).split(/,\s/).map(Number);c.x+=f[4],c.y+=f[5]}else if(/^matrix3d/.test(e)){var g=e.slice(9,-1).split(/,\s/).map(Number);c.x+=g[12],c.y+=g[13]}d=d.parentNode}var h={},i=F(b.target),k=F(a),l=k.width,m=k.height,n=b.offsetY-(k.top-i.top),o=b.offsetX-(k.left-i.left);return b.changedTouches&&(o=b.changedTouches[0].pageX-k.left,n=b.changedTouches[0].pageY+k.top,Eb&&(o-=c.x,n-=c.y)),h.y=1-Math.max(0,Math.min(1,n/m)),h.x=Math.max(0,Math.min(1,o/l)),h}function H(a){return h(a)&&3===a.nodeType}function I(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function J(a){return"function"==typeof a&&(a=a()),(Array.isArray(a)?a:[a]).map(function(a){return"function"==typeof a&&(a=a()),n(a)||H(a)?a:"string"==typeof a&&/\S/.test(a)?Na["default"].createTextNode(a):void 0}).filter(function(a){return a})}function K(a,b){return J(b).forEach(function(b){return a.appendChild(b)}),a}function L(a,b){return K(I(a),b)}function M(a){return void 0===a.button&&void 0===a.buttons||0===a.button&&void 0===a.buttons||"mouseup"===a.type&&0===a.button&&0===a.buttons||0===a.button&&1===a.buttons}function N(a,b){m()&&(b&&(gb=b),Ma["default"].setTimeout(Lb,a))}function O(){Kb=!0,Ma["default"].removeEventListener("load",O)}function P(){return Pb++}function Q(a,b){if(Sb.has(a)){var c=Sb.get(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher)),Object.getOwnPropertyNames(c.handlers).length<=0&&(delete c.handlers,delete c.dispatcher,delete c.disabled),0===Object.getOwnPropertyNames(c).length&&Sb["delete"](a)}}function R(a,b,c,d){c.forEach(function(c){a(b,c,d)})}function S(a){function b(){return!0}function c(){return!1}if(a.fixed_)return a;if(!a||!a.isPropagationStopped||!a.isImmediatePropagationStopped){var d=a||Ma["default"].event;for(var e in a={},d)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&"webkitMovementX"!==e&&"webkitMovementY"!==e&&("returnValue"===e&&d.preventDefault||(a[e]=d[e]));if(a.target||(a.target=a.srcElement||Na["default"]),a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement),a.preventDefault=function(){d.preventDefault&&d.preventDefault(),a.returnValue=!1,d.returnValue=!1,a.defaultPrevented=!0},a.defaultPrevented=!1,a.stopPropagation=function(){d.stopPropagation&&d.stopPropagation(),a.cancelBubble=!0,d.cancelBubble=!0,a.isPropagationStopped=b},a.isPropagationStopped=c,a.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation(),a.isImmediatePropagationStopped=b,a.stopPropagation()},a.isImmediatePropagationStopped=c,null!==a.clientX&&void 0!==a.clientX){var f=Na["default"].documentElement,g=Na["default"].body;a.pageX=a.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=a.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}a.which=a.charCode||a.keyCode,null!==a.button&&void 0!==a.button&&(a.button=1&a.button?0:4&a.button?1:2&a.button?2:0)}return a.fixed_=!0,a}function T(a,b,c){if(Array.isArray(b))return R(T,a,b,c);Sb.has(a)||Sb.set(a,{});var d=Sb.get(a);if(d.handlers||(d.handlers={}),d.handlers[b]||(d.handlers[b]=[]),c.guid||(c.guid=P()),d.handlers[b].push(c),d.dispatcher||(d.disabled=!1,d.dispatcher=function(b,c){if(!d.disabled){b=S(b);var e=d.handlers[b.type];if(e)for(var f=e.slice(0),g=0,h=f.length;g<h&&!b.isImmediatePropagationStopped();g++)try{f[g].call(a,b,c)}catch(a){ib.error(a)}}}),1===d.handlers[b].length)if(a.addEventListener){var e=!1;(function(){if("boolean"!=typeof Qb){Qb=!1;try{var a=Object.defineProperty({},"passive",{get:function(){Qb=!0}});Ma["default"].addEventListener("test",null,a),Ma["default"].removeEventListener("test",null,a)}catch(a){}}return Qb})()&&Tb.indexOf(b)>-1&&(e={passive:!0}),a.addEventListener(b,d.dispatcher,e)}else a.attachEvent&&a.attachEvent("on"+b,d.dispatcher)}function U(a,b,c){if(Sb.has(a)){var d=Sb.get(a);if(d.handlers){if(Array.isArray(b))return R(U,a,b,c);var e=function(a,b){d.handlers[b]=[],Q(a,b)};if(void 0!==b){var f=d.handlers[b];if(f)if(c){if(c.guid)for(var g=0;g<f.length;g++)f[g].guid===c.guid&&f.splice(g--,1);Q(a,b)}else e(a,b)}else for(var h in d.handlers)Object.prototype.hasOwnProperty.call(d.handlers||{},h)&&e(a,h)}}}function V(a,b,c){var d=Sb.has(a)?Sb.get(a):{},e=a.parentNode||a.ownerDocument;if("string"==typeof b?b={type:b,target:a}:b.target||(b.target=a),b=S(b),d.dispatcher&&d.dispatcher.call(a,b,c),e&&!b.isPropagationStopped()&&!0===b.bubbles)V.call(null,e,b,c);else if(!e&&!b.defaultPrevented&&b.target&&b.target[b.type]){Sb.has(b.target)||Sb.set(b.target,{});var f=Sb.get(b.target);b.target[b.type]&&(f.disabled=!0,"function"==typeof b.target[b.type]&&b.target[b.type](),f.disabled=!1)}return!b.defaultPrevented}function W(a,b,c){if(Array.isArray(b))return R(W,a,b,c);var d=function e(){U(a,b,e),c.apply(this,arguments)};d.guid=c.guid=c.guid||P(),T(a,b,d)}function X(a,b,c){var d=function e(){U(a,b,e),c.apply(this,arguments)};d.guid=c.guid=c.guid||P(),T(a,b,d)}function Y(a,b){void 0===b&&(b={});var c=b.eventBusKey;if(c){if(!a[c].nodeName)throw new Error('The eventBusKey "'+c+'" does not refer to an element.');a.eventBusEl_=a[c]}else a.eventBusEl_=q("span",{className:"vjs-event-bus"});return f(a,ec),a.eventedCallbacks&&a.eventedCallbacks.forEach(function(a){a()}),a.on("dispose",function(){a.off(),[a,a.el_,a.eventBusEl_].forEach(function(a){a&&Sb.has(a)&&Sb["delete"](a)}),Ma["default"].setTimeout(function(){a.eventBusEl_=null},0)}),a}function Z(a,b){return f(a,fc),a.state=f({},a.state,b),"function"==typeof a.handleStateChanged&&Zb(a)&&a.on("statechanged",a.handleStateChanged),a}function $(){for(var a={},b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return c.forEach(function(b){b&&e(b,function(b,c){i(b)?(i(a[c])||(a[c]={}),a[c]=$(a[c],b)):a[c]=b})}),a}function _(a,b,c,d){return function(a,b,c){
if("number"!=typeof b||b<0||b>c)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+b+") is non-numeric or out of bounds (0-"+c+").")}(a,d,c.length-1),c[d][b]}function aa(a){var b;return b=void 0===a||0===a.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:a.length,start:_.bind(null,"start",0,a),end:_.bind(null,"end",1,a)},Ma["default"].Symbol&&Ma["default"].Symbol.iterator&&(b[Ma["default"].Symbol.iterator]=function(){return(a||[]).values()}),b}function ba(a,b){return Array.isArray(a)?aa(a):void 0===a||void 0===b?aa():aa([[a,b]])}function ca(a,b){var c,d,e=0;if(!b)return 0;a&&a.length||(a=ba(0,0));for(var f=0;f<a.length;f++)c=a.start(f),(d=a.end(f))>b&&(d=b),e+=d-c;return e/b}function da(a){return a instanceof da?a:("number"==typeof a?this.code=a:"string"==typeof a?this.message=a:h(a)&&("number"==typeof a.code&&(this.code=a.code),f(this,a)),void(this.message||(this.message=da.defaultMessages[this.code]||"")))}function ea(a){return null!=a&&"function"==typeof a.then}function fa(a){ea(a)&&a.then(null,function(a){})}function ga(a,b,c){a.setTimeout(function(){return function d(a,b,c,e,g,h){void 0===a&&(a={}),void 0===b&&(b=[]),void 0===g&&(g=[]),void 0===h&&(h=!1);var i=b,j=i[0],k=i.slice(1);if("string"==typeof j)d(a,Vc[j],c,e,g,h);else if(j){var l=function(a,b){var c=Wc[a.id()],d=null;if(null==c)return d=b(a),Wc[a.id()]=[[b,d]],d;for(var e=0;e<c.length;e++){var f=c[e],g=f[0],h=f[1];g===b&&(d=h)}return null===d&&(d=b(a),c.push([b,d])),d}(e,j);if(!l.setSource)return g.push(l),d(a,k,c,e,g,h);l.setSource(f({},a),function(b,f){return b?d(a,k,c,e,g,h):(g.push(l),void d(f,a.type===f.type?k:Vc[f.type],c,e,g,h))})}else k.length?d(a,k,c,e,g,h):h?c(a,g):d(a,Vc["*"],c,e,g,!0)}(b,Vc[b.type],c,a)},1)}function ha(a,b,c,d){void 0===d&&(d=null);var e="call"+hc(c),f=a.reduce(ia(e),d),g=f===Xc,h=g?null:b[c](f);return function(a,b,c,d){for(var e=a.length-1;e>=0;e--){var f=a[e];f[b]&&f[b](d,c)}}(a,c,h,g),h}function ia(a){return function(b,c){return b===Xc?Xc:c[a]?c[a](b):b}}function ja(a){if(!a.type){var b=ad(a.src);b&&(a.type=b)}return a}function ka(a,b){var c;if(4===a.length)c=a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else{if(7!==a.length)throw new Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");c=a.slice(1)}return"rgba("+parseInt(c.slice(0,2),16)+","+parseInt(c.slice(2,4),16)+","+parseInt(c.slice(4,6),16)+","+b+")"}function la(a,b,c){try{a.style[b]=c}catch(a){return}}function ma(a,b){return void 0===b&&(b=a),md(a,b)}function na(a,b){if(b&&(a=b(a)),a&&"none"!==a)return a}function oa(a,b,c){var d=oa.getPlayer(a);if(d)return b&&ib.warn('Player "'+a+'" is already initialised. Options will not be applied.'),c&&d.ready(c),d;var e="string"==typeof a?Hb("#"+Ve(a)):a;if(!n(e))throw new TypeError("The element or ID supplied is not valid. (videojs)");e.ownerDocument.defaultView&&e.ownerDocument.body.contains(e)||ib.warn("The element supplied is not included in the DOM"),b=b||{},$a("beforesetup").forEach(function(a){var c=a(e,$(b));h(c)&&!Array.isArray(c)?b=$(b,c):ib.error("please return an object in beforesetup hooks")});var f=mc.getComponent("Player");return d=new f(e,b,c),$a("setup").forEach(function(a){return a(d)}),d}function pa(){}for(var qa,ra=a("global/window"),sa=a("global/document"),ta=a("@babel/runtime/helpers/extends"),ua=a("@babel/runtime/helpers/assertThisInitialized"),va=a("@babel/runtime/helpers/inheritsLoose"),wa=a("safe-json-parse/tuple"),xa=a("keycode"),ya=a("@videojs/xhr"),za=a("videojs-vtt.js"),Aa=a("@babel/runtime/helpers/construct"),Ba=a("@babel/runtime/helpers/inherits"),Ca=a("@videojs/vhs-utils/cjs/resolve-url.js"),Da=a("m3u8-parser"),Ea=a("@videojs/vhs-utils/cjs/codecs.js"),Fa=a("@videojs/vhs-utils/cjs/media-types.js"),Ga=a("mpd-parser"),Ha=a("mux.js/lib/tools/parse-sidx"),Ia=a("@videojs/vhs-utils/cjs/id3-helpers"),Ja=a("@videojs/vhs-utils/cjs/containers"),Ka=a("@videojs/vhs-utils/cjs/byte-helpers"),La=a("mux.js/lib/utils/clock"),Ma=d(ra),Na=d(sa),Oa=d(ta),Pa=d(ua),Qa=d(va),Ra=d(wa),Sa=d(xa),Ta=d(ya),Ua=d(za),Va=d(Aa),Wa=d(Ba),Xa=d(Ca),Ya=d(Ha),Za={},$a=function(a,b){return Za[a]=Za[a]||[],b&&(Za[a]=Za[a].concat(b)),Za[a]},_a=function(a,b){var c=$a(a).indexOf(b);return!(c<=-1||(Za[a]=Za[a].slice(),Za[a].splice(c,1),0))},ab={prefixed:!0},bb=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],cb=bb[0],db=0;db<bb.length;db++)if(bb[db][1]in Na["default"]){qa=bb[db];break}if(qa){for(var eb=0;eb<qa.length;eb++)ab[cb[eb]]=qa[eb];ab.prefixed=qa[0]!==cb[0]}var fb,gb,hb=[],ib=function Xh(a){var b,c="info",d=function(){for(var a=arguments.length,d=new Array(a),e=0;e<a;e++)d[e]=arguments[e];b("log",c,d)};return b=function(a,b){return function(c,d,e){var f=b.levels[d],g=new RegExp("^("+f+")$");if("log"!==c&&e.unshift(c.toUpperCase()+":"),e.unshift(a+":"),hb){hb.push([].concat(e));var h=hb.length-1e3;hb.splice(0,h>0?h:0)}if(Ma["default"].console){var i=Ma["default"].console[c];i||"debug"!==c||(i=Ma["default"].console.info||Ma["default"].console.log),i&&f&&g.test(c)&&i[Array.isArray(e)?"apply":"call"](Ma["default"].console,e)}}}(a,d),d.createLogger=function(b){return Xh(a+": "+b)},d.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:c},d.level=function(a){if("string"==typeof a){if(!d.levels.hasOwnProperty(a))throw new Error('"'+a+'" in not a valid log level');c=a}return c},(d.history=function(){return hb?[].concat(hb):[]}).filter=function(a){return(hb||[]).filter(function(b){return new RegExp(".*"+a+".*").test(b[0])})},d.history.clear=function(){hb&&(hb.length=0)},d.history.disable=function(){null!==hb&&(hb.length=0,hb=null)},d.history.enable=function(){null===hb&&(hb=[])},d.error=function(){for(var a=arguments.length,d=new Array(a),e=0;e<a;e++)d[e]=arguments[e];return b("error",c,d)},d.warn=function(){for(var a=arguments.length,d=new Array(a),e=0;e<a;e++)d[e]=arguments[e];return b("warn",c,d)},d.debug=function(){for(var a=arguments.length,d=new Array(a),e=0;e<a;e++)d[e]=arguments[e];return b("debug",c,d)},d}("VIDEOJS"),jb=ib.createLogger,kb=Object.prototype.toString,lb=function(a){return h(a)?Object.keys(a):[]},mb=Ma["default"].navigator&&Ma["default"].navigator.userAgent||"",nb=/AppleWebKit\/([\d.]+)/i.exec(mb),ob=nb?parseFloat(nb.pop()):null,pb=/iPod/i.test(mb),qb=(fb=mb.match(/OS (\d+)_/i))&&fb[1]?fb[1]:null,rb=/Android/i.test(mb),sb=function(){var a=mb.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]);return b&&c?parseFloat(a[1]+"."+a[2]):b||null}(),tb=rb&&sb<5&&ob<537,ub=/Firefox/i.test(mb),vb=/Edg/i.test(mb),wb=!vb&&(/Chrome/i.test(mb)||/CriOS/i.test(mb)),xb=function(){var a=mb.match(/(Chrome|CriOS)\/(\d+)/);return a&&a[2]?parseFloat(a[2]):null}(),yb=function(){var a=/MSIE\s(\d+)\.\d/.exec(mb),b=a&&parseFloat(a[1]);return!b&&/Trident\/7.0/i.test(mb)&&/rv:11.0/.test(mb)&&(b=11),b}(),zb=/Safari/i.test(mb)&&!wb&&!rb&&!vb,Ab=/Windows/i.test(mb),Bb=Boolean(m()&&("ontouchstart"in Ma["default"]||Ma["default"].navigator.maxTouchPoints||Ma["default"].DocumentTouch&&Ma["default"].document instanceof Ma["default"].DocumentTouch)),Cb=/iPad/i.test(mb)||zb&&Bb&&!/iPhone/i.test(mb),Db=/iPhone/i.test(mb)&&!Cb,Eb=Db||Cb||pb,Fb=(zb||Eb)&&!wb,Gb=Object.freeze({__proto__:null,IS_IPOD:pb,IOS_VERSION:qb,IS_ANDROID:rb,ANDROID_VERSION:sb,IS_NATIVE_ANDROID:tb,IS_FIREFOX:ub,IS_EDGE:vb,IS_CHROME:wb,CHROME_VERSION:xb,IE_VERSION:yb,IS_SAFARI:zb,IS_WINDOWS:Ab,TOUCH_ENABLED:Bb,IS_IPAD:Cb,IS_IPHONE:Db,IS_IOS:Eb,IS_ANY_SAFARI:Fb}),Hb=p("querySelector"),Ib=p("querySelectorAll"),Jb=Object.freeze({__proto__:null,isReal:m,isEl:n,isInFrame:o,createEl:q,textContent:r,prependTo:s,hasClass:t,addClass:u,removeClass:v,toggleClass:w,setAttributes:x,getAttributes:y,getAttribute:z,setAttribute:A,removeAttribute:B,blockTextSelection:C,unblockTextSelection:D,getBoundingClientRect:E,findPosition:F,getPointerPosition:G,isTextNode:H,emptyEl:I,normalizeContent:J,appendContent:K,insertContent:L,isSingleLeftClick:M,$:Hb,$$:Ib}),Kb=!1,Lb=function(){if(!1!==gb.options.autoSetup){var a=Array.prototype.slice.call(Na["default"].getElementsByTagName("video")),b=Array.prototype.slice.call(Na["default"].getElementsByTagName("audio")),c=Array.prototype.slice.call(Na["default"].getElementsByTagName("video-js")),d=a.concat(b,c);if(d&&d.length>0)for(var e=0,f=d.length;e<f;e++){var g=d[e];if(!g||!g.getAttribute){N(1);break}void 0===g.player&&null!==g.getAttribute("data-setup")&&gb(g)}else Kb||N(1)}};m()&&("complete"===Na["default"].readyState?O():Ma["default"].addEventListener("load",O));var Mb,Nb=function(a){var b=Na["default"].createElement("style");return b.className=a,b},Ob=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b},Pb=3;Ma["default"].WeakMap||(Mb=function(){function a(){this.vdata="vdata"+Math.floor(Ma["default"].performance&&Ma["default"].performance.now()||Date.now()),this.data={}}var b=a.prototype;return b.set=function(a,b){var c=a[this.vdata]||P();return a[this.vdata]||(a[this.vdata]=c),this.data[c]=b,this},b.get=function(a){var b=a[this.vdata];return b?this.data[b]:void ib("We have no data for this element",a)},b.has=function(a){return a[this.vdata]in this.data},b["delete"]=function(a){var b=a[this.vdata];b&&(delete this.data[b],delete a[this.vdata])},a}());var Qb,Rb,Sb=Ma["default"].WeakMap?new WeakMap:new Mb,Tb=["touchstart","touchmove"],Ub=Object.freeze({__proto__:null,fixEvent:S,on:T,off:U,trigger:V,one:W,any:X}),Vb=function(a,b,c){b.guid||(b.guid=P());var d=b.bind(a);return d.guid=c?c+"_"+b.guid:b.guid,d},Wb=function(a,b){var c=Ma["default"].performance.now();return function(){var d=Ma["default"].performance.now();d-c>=b&&(a.apply(void 0,arguments),c=d)}},Xb=function(){};Xb.prototype.allowedEvents_={},Xb.prototype.on=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},T(this,a,b),this.addEventListener=c},Xb.prototype.addEventListener=Xb.prototype.on,Xb.prototype.off=function(a,b){U(this,a,b)},Xb.prototype.removeEventListener=Xb.prototype.off,Xb.prototype.one=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},W(this,a,b),this.addEventListener=c},Xb.prototype.any=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},X(this,a,b),this.addEventListener=c},Xb.prototype.trigger=function(a){var b=a.type||a;"string"==typeof a&&(a={type:b}),a=S(a),this.allowedEvents_[b]&&this["on"+b]&&this["on"+b](a),V(this,a)},Xb.prototype.dispatchEvent=Xb.prototype.trigger,Xb.prototype.queueTrigger=function(a){var b=this;Rb||(Rb=new Map);var c=a.type||a,d=Rb.get(this);d||(d=new Map,Rb.set(this,d));var e=d.get(c);d["delete"](c),Ma["default"].clearTimeout(e);var f=Ma["default"].setTimeout(function(){0===d.size&&(d=null,Rb["delete"](b)),b.trigger(a)},0);d.set(c,f)};var Yb=function(a){return"function"==typeof a.name?a.name():"string"==typeof a.name?a.name:a.name_?a.name_:a.constructor&&a.constructor.name?a.constructor.name:void 0===a?"undefined":g(a)},Zb=function(a){return a instanceof Xb||!!a.eventBusEl_&&["on","one","off","trigger"].every(function(b){return"function"==typeof a[b]})},$b=function(a){return"string"==typeof a&&/\S/.test(a)||Array.isArray(a)&&!!a.length},_b=function(a,b,c){if(!a||!a.nodeName&&!Zb(a))throw new Error("Invalid target for "+Yb(b)+"#"+c+"; must be a DOM node or evented object.")},ac=function(a,b,c){if(!$b(a))throw new Error("Invalid event type for "+Yb(b)+"#"+c+"; must be a non-empty string or array.")},bc=function(a,b,c){if("function"!=typeof a)throw new Error("Invalid listener for "+Yb(b)+"#"+c+"; must be a function.")},cc=function(a,b,c){var d,e,f,g=b.length<3||b[0]===a||b[0]===a.eventBusEl_;return g?(d=a.eventBusEl_,b.length>=3&&b.shift(),e=b[0],f=b[1]):(d=b[0],e=b[1],f=b[2]),_b(d,a,c),ac(e,a,c),bc(f,a,c),{isTargetingSelf:g,target:d,type:e,listener:f=Vb(a,f)}},dc=function(a,b,c,d){_b(a,a,b),a.nodeName?Ub[b](a,c,d):a[b](c,d)},ec={on:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=cc(this,c,"on"),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(dc(g,"on",h,i),!f){var j=function(){return a.off(g,h,i)};j.guid=i.guid;var k=function(){return a.off("dispose",j)};k.guid=i.guid,dc(this,"on","dispose",j),dc(g,"on","dispose",k)}},one:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=cc(this,c,"one"),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(f)dc(g,"one",h,i);else{var j=function k(){a.off(g,h,k);for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];i.apply(null,c)};j.guid=i.guid,dc(g,"one",h,j)}},any:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=cc(this,c,"any"),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(f)dc(g,"any",h,i);else{var j=function k(){a.off(g,h,k);for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];i.apply(null,c)};j.guid=i.guid,dc(g,"any",h,j)}},off:function(a,b,c){if(!a||$b(a))U(this.eventBusEl_,a,b);else{var d=a,e=b;_b(d,this,"off"),ac(e,this,"off"),bc(c,this,"off"),c=Vb(this,c),this.off("dispose",c),d.nodeName?(U(d,e,c),U(d,"dispose",c)):Zb(d)&&(d.off(e,c),d.off("dispose",c))}},trigger:function(a,b){_b(this.eventBusEl_,this,"trigger");var c=a&&"string"!=typeof a?a.type:a;if(!$b(c)){var d="Invalid event type for "+Yb(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!a)throw new Error(d);(this.log||ib).error(d)}return V(this.eventBusEl_,a,b)}},fc={state:{},setState:function(a){var b,c=this;return"function"==typeof a&&(a=a()),e(a,function(a,d){c.state[d]!==a&&((b=b||{})[d]={from:c.state[d],to:a}),c.state[d]=a}),b&&Zb(this)&&this.trigger({changes:b,type:"statechanged"}),b}},gc=function(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toLowerCase()})},hc=function(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toUpperCase()})},ic=function(){function a(){this.map_={}}var b=a.prototype;return b.has=function(a){return a in this.map_},b["delete"]=function(a){var b=this.has(a);return delete this.map_[a],b},b.set=function(a,b){return this.map_[a]=b,this},b.forEach=function(a,b){for(var c in this.map_)a.call(b,this.map_[c],c,this)},a}(),jc=Ma["default"].Map?Ma["default"].Map:ic,kc=function(){function a(){this.set_={}}var b=a.prototype;return b.has=function(a){return a in this.set_},b["delete"]=function(a){var b=this.has(a);return delete this.set_[a],b},b.add=function(a){return this.set_[a]=1,this},b.forEach=function(a,b){for(var c in this.set_)a.call(b,c,c,this)},a}(),lc=Ma["default"].Set?Ma["default"].Set:kc,mc=function(){function a(a,b,c){if(!a&&this.play?this.player_=a=this:this.player_=a,this.isDisposed_=!1,this.parentComponent_=null,this.options_=$({},this.options_),b=this.options_=$(this.options_,b),this.id_=b.id||b.el&&b.el.id,!this.id_){var d=a&&a.id&&a.id()||"no_player";this.id_=d+"_component_"+P()}this.name_=b.name||null,b.el?this.el_=b.el:!1!==b.createEl&&(this.el_=this.createEl()),!1!==b.evented&&(Y(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Z(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new lc,this.setIntervalIds_=new lc,this.rafIds_=new lc,this.namedRafs_=new jc,this.clearingTimersOnDispose_=!1,!1!==b.initChildren&&this.initChildren(),this.ready(c),!1!==b.reportTouchActivity&&this.enableTouchActivity()}var b=a.prototype;return b.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.el_=null),this.player_=null}},b.isDisposed=function(){return Boolean(this.isDisposed_)},b.player=function(){return this.player_},b.options=function(a){return a?(this.options_=$(this.options_,a),this.options_):this.options_},b.el=function(){return this.el_},b.createEl=function(a,b,c){return q(a,b,c)},b.localize=function(a,b,c){void 0===c&&(c=a);var d=this.player_.language&&this.player_.language(),e=this.player_.languages&&this.player_.languages(),f=e&&e[d],g=d&&d.split("-")[0],h=e&&e[g],i=c;return f&&f[a]?i=f[a]:h&&h[a]&&(i=h[a]),b&&(i=i.replace(/\{(\d+)\}/g,function(a,c){var d=b[c-1],e=d;return void 0===d&&(e=a),e})),i},b.handleLanguagechange=function(){},b.contentEl=function(){return this.contentEl_||this.el_},b.id=function(){return this.id_},b.name=function(){return this.name_},b.children=function(){return this.children_},b.getChildById=function(a){return this.childIndex_[a]},b.getChild=function(a){if(a)return this.childNameIndex_[a]},b.getDescendant=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b=b.reduce(function(a,b){return a.concat(b)},[]);for(var d=this,e=0;e<b.length;e++)if(!(d=d.getChild(b[e]))||!d.getChild)return;return d},b.addChild=function(b,c,d){var e,f;if(void 0===c&&(c={}),void 0===d&&(d=this.children_.length),"string"==typeof b){f=hc(b);var g=c.componentClass||f;c.name=f;var h=a.getComponent(g);if(!h)throw new Error("Component "+g+" does not exist");if("function"!=typeof h)return null;e=new h(this.player_||this,c)}else e=b;if(e.parentComponent_&&e.parentComponent_.removeChild(e),this.children_.splice(d,0,e),e.parentComponent_=this,"function"==typeof e.id&&(this.childIndex_[e.id()]=e),(f=f||e.name&&hc(e.name()))&&(this.childNameIndex_[f]=e,this.childNameIndex_[gc(f)]=e),"function"==typeof e.el&&e.el()){var i=null;this.children_[d+1]&&(this.children_[d+1].el_?i=this.children_[d+1].el_:n(this.children_[d+1])&&(i=this.children_[d+1])),this.contentEl().insertBefore(e.el(),i)}return e},b.removeChild=function(a){if("string"==typeof a&&(a=this.getChild(a)),a&&this.children_){for(var b=!1,c=this.children_.length-1;c>=0;c--)if(this.children_[c]===a){b=!0,this.children_.splice(c,1);break}if(b){a.parentComponent_=null,this.childIndex_[a.id()]=null,this.childNameIndex_[hc(a.name())]=null,this.childNameIndex_[gc(a.name())]=null;var d=a.el();d&&d.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el())}}},b.initChildren=function(){var b=this,c=this.options_.children;if(c){var d,e=this.options_,f=a.getComponent("Tech");(d=Array.isArray(c)?c:Object.keys(c)).concat(Object.keys(this.options_).filter(function(a){return!d.some(function(b){return"string"==typeof b?a===b:a===b.name})})).map(function(a){var d,e;return"string"==typeof a?e=c[d=a]||b.options_[d]||{}:(d=a.name,e=a),{name:d,opts:e}}).filter(function(b){var c=a.getComponent(b.opts.componentClass||hc(b.name));return c&&!f.isTech(c)}).forEach(function(a){var c=a.name,d=a.opts;if(void 0!==e[c]&&(d=e[c]),!1!==d){!0===d&&(d={}),d.playerOptions=b.options_.playerOptions;var f=b.addChild(c,d);f&&(b[c]=f)}})}},b.buildCSSClass=function(){return""},b.ready=function(a,b){if(void 0===b&&(b=!1),a)return this.isReady_?void(b?a.call(this):this.setTimeout(a,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(a))},b.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var a=this.readyQueue_;this.readyQueue_=[],a&&a.length>0&&a.forEach(function(a){a.call(this)},this),this.trigger("ready")},1)},b.$=function(a,b){return Hb(a,b||this.contentEl())},b.$$=function(a,b){return Ib(a,b||this.contentEl())},b.hasClass=function(a){return t(this.el_,a)},b.addClass=function(a){u(this.el_,a)},b.removeClass=function(a){v(this.el_,a)},b.toggleClass=function(a,b){w(this.el_,a,b)},b.show=function(){this.removeClass("vjs-hidden")},b.hide=function(){this.addClass("vjs-hidden")},b.lockShowing=function(){this.addClass("vjs-lock-showing")},b.unlockShowing=function(){this.removeClass("vjs-lock-showing")},b.getAttribute=function(a){return z(this.el_,a)},b.setAttribute=function(a,b){A(this.el_,a,b)},b.removeAttribute=function(a){B(this.el_,a)},b.width=function(a,b){return this.dimension("width",a,b)},b.height=function(a,b){return this.dimension("height",a,b)},b.dimensions=function(a,b){this.width(a,!0),this.height(b)},b.dimension=function(a,b,c){if(void 0!==b)return null!==b&&b==b||(b=0),-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[a]=b:this.el_.style[a]="auto"===b?"":b+"px",void(c||this.trigger("componentresize"));if(!this.el_)return 0;var d=this.el_.style[a],e=d.indexOf("px");return-1!==e?parseInt(d.slice(0,e),10):parseInt(this.el_["offset"+hc(a)],10)},b.currentDimension=function(a){var b=0;if("width"!==a&&"height"!==a)throw new Error("currentDimension only accepts width or height value");if(b=j(this.el_,a),0===(b=parseFloat(b))||isNaN(b)){var c="offset"+hc(a);b=this.el_[c]}return b},b.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},b.currentWidth=function(){return this.currentDimension("width")},b.currentHeight=function(){return this.currentDimension("height")},b.focus=function(){this.el_.focus()},b.blur=function(){this.el_.blur()},b.handleKeyDown=function(a){this.player_&&(a.stopPropagation(),this.player_.handleKeyDown(a))},b.handleKeyPress=function(a){this.handleKeyDown(a)},b.emitTapEvents=function(){var a,b=0,c=null;this.on("touchstart",function(d){1===d.touches.length&&(c={pageX:d.touches[0].pageX,pageY:d.touches[0].pageY},b=Ma["default"].performance.now(),a=!0)}),this.on("touchmove",function(b){if(b.touches.length>1)a=!1;else if(c){var d=b.touches[0].pageX-c.pageX,e=b.touches[0].pageY-c.pageY;Math.sqrt(d*d+e*e)>10&&(a=!1)}});var d=function(){a=!1};this.on("touchleave",d),this.on("touchcancel",d),this.on("touchend",function(d){c=null,!0===a&&Ma["default"].performance.now()-b<200&&(d.preventDefault(),this.trigger("tap"))})},b.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var a,b=Vb(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){b(),this.clearInterval(a),a=this.setInterval(b,250)});var c=function(c){b(),this.clearInterval(a)};this.on("touchmove",b),this.on("touchend",c),this.on("touchcancel",c)}},b.setTimeout=function(a,b){var c,d=this;return a=Vb(this,a),this.clearTimersOnDispose_(),c=Ma["default"].setTimeout(function(){d.setTimeoutIds_.has(c)&&d.setTimeoutIds_["delete"](c),a()},b),this.setTimeoutIds_.add(c),c},b.clearTimeout=function(a){return this.setTimeoutIds_.has(a)&&(this.setTimeoutIds_["delete"](a),Ma["default"].clearTimeout(a)),a},b.setInterval=function(a,b){a=Vb(this,a),this.clearTimersOnDispose_();var c=Ma["default"].setInterval(a,b);return this.setIntervalIds_.add(c),c},b.clearInterval=function(a){return this.setIntervalIds_.has(a)&&(this.setIntervalIds_["delete"](a),Ma["default"].clearInterval(a)),a},b.requestAnimationFrame=function(a){var b,c=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),a=Vb(this,a),b=Ma["default"].requestAnimationFrame(function(){c.rafIds_.has(b)&&c.rafIds_["delete"](b),a()}),this.rafIds_.add(b),b):this.setTimeout(a,1e3/60)},b.requestNamedAnimationFrame=function(a,b){var c=this;if(!this.namedRafs_.has(a)){this.clearTimersOnDispose_(),b=Vb(this,b);var d=this.requestAnimationFrame(function(){b(),c.namedRafs_.has(a)&&c.namedRafs_["delete"](a)});return this.namedRafs_.set(a,d),a}},b.cancelNamedAnimationFrame=function(a){this.namedRafs_.has(a)&&(this.cancelAnimationFrame(this.namedRafs_.get(a)),this.namedRafs_["delete"](a))},b.cancelAnimationFrame=function(a){return this.supportsRaf_?(this.rafIds_.has(a)&&(this.rafIds_["delete"](a),Ma["default"].cancelAnimationFrame(a)),a):this.clearTimeout(a)},b.clearTimersOnDispose_=function(){var a=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(b){var c=b[0],d=b[1];a[c].forEach(function(b,c){return a[d](c)})}),a.clearingTimersOnDispose_=!1}))},a.registerComponent=function(b,c){if("string"!=typeof b||!b)throw new Error('Illegal component name, "'+b+'"; must be a non-empty string.');var d,e=a.getComponent("Tech"),f=e&&e.isTech(c),g=a===c||a.prototype.isPrototypeOf(c.prototype);if(f||!g)throw d=f?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+b+'"; '+d+".");b=hc(b),a.components_||(a.components_={});var h=a.getComponent("Player");if("Player"===b&&h&&h.players){var i=h.players,j=Object.keys(i);if(i&&j.length>0&&j.map(function(a){return i[a]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return a.components_[b]=c,a.components_[gc(b)]=c,c},a.getComponent=function(b){if(b&&a.components_)return a.components_[b]},a}();mc.prototype.supportsRaf_="function"==typeof Ma["default"].requestAnimationFrame&&"function"==typeof Ma["default"].cancelAnimationFrame,mc.registerComponent("Component",mc),da.prototype.code=0,da.prototype.message="",da.prototype.status=null,da.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],da.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var nc=0;nc<da.errorTypes.length;nc++)da[da.errorTypes[nc]]=nc,da.prototype[da.errorTypes[nc]]=nc;var oc=function(a){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(b,c,d){return a[c]&&(b[c]=a[c]),b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(a){return{startTime:a.startTime,endTime:a.endTime,text:a.text,id:a.id}})})},pc=function(a){var b=a.$$("track"),c=Array.prototype.map.call(b,function(a){return a.track});return Array.prototype.map.call(b,function(a){var b=oc(a.track);return a.src&&(b.src=a.src),b}).concat(Array.prototype.filter.call(a.textTracks(),function(a){return-1===c.indexOf(a)}).map(oc))},qc=function(a,b){return a.forEach(function(a){var c=b.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(function(a){return c.addCue(a)})}),b.textTracks()},rc=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).handleKeyDown_=function(a){return d.handleKeyDown(a)},d.close_=function(a){return d.close(a)},d.opened_=d.hasBeenOpened_=d.hasBeenFilled_=!1,d.closeable(!d.options_.uncloseable),d.content(d.options_.content),d.contentEl_=q("div",{className:"vjs-modal-dialog-content"},{role:"document"}),d.descEl_=q("p",{className:"vjs-modal-dialog-description vjs-control-text",id:d.el().getAttribute("aria-describedby")}),r(d.descEl_,d.description()),d.el_.appendChild(d.descEl_),d.el_.appendChild(d.contentEl_),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},c.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,a.prototype.dispose.call(this)},c.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+a.prototype.buildCSSClass.call(this)},c.label=function(){return this.localize(this.options_.label||"Modal Window")},c.description=function(){var a=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),a},c.open=function(){if(!this.opened_){var a=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!a.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&a.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=a.controls(),a.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},c.opened=function(a){return"boolean"==typeof a&&this[a?"open":"close"](),this.opened_},c.close=function(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&a.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&a.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},c.closeable=function(a){if("boolean"==typeof a){var b=this.closeable_=!!a,c=this.getChild("closeButton");if(b&&!c){var d=this.contentEl_;this.contentEl_=this.el_,c=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=d,this.on(c,"close",this.close_)}!b&&c&&(this.off(c,"close",this.close_),this.removeChild(c),c.dispose())}return this.closeable_},c.fill=function(){this.fillWith(this.content())},c.fillWith=function(a){var b=this.contentEl(),c=b.parentNode,d=b.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,c.removeChild(b),this.empty(),L(b,a),this.trigger("modalfill"),d?c.insertBefore(b,d):c.appendChild(b);var e=this.getChild("closeButton");e&&c.appendChild(e.el_)},c.empty=function(){this.trigger("beforemodalempty"),I(this.contentEl()),this.trigger("modalempty")},c.content=function(a){return void 0!==a&&(this.content_=a),this.content_},c.conditionalFocus_=function(){var a=Na["default"].activeElement,b=this.player_.el_;this.previouslyActiveEl_=null,(b.contains(a)||b===a)&&(this.previouslyActiveEl_=a,this.focus())},c.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},c.handleKeyDown=function(a){if(a.stopPropagation(),Sa["default"].isEventKey(a,"Escape")&&this.closeable())return a.preventDefault(),void this.close();if(Sa["default"].isEventKey(a,"Tab")){for(var b,c=this.focusableEls_(),d=this.el_.querySelector(":focus"),e=0;e<c.length;e++)if(d===c[e]){b=e;break}Na["default"].activeElement===this.el_&&(b=0),a.shiftKey&&0===b?(c[c.length-1].focus(),a.preventDefault()):a.shiftKey||b!==c.length-1||(c[0].focus(),a.preventDefault())}},c.focusableEls_=function(){var a=this.el_.querySelectorAll("*");return Array.prototype.filter.call(a,function(a){return(a instanceof Ma["default"].HTMLAnchorElement||a instanceof Ma["default"].HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof Ma["default"].HTMLInputElement||a instanceof Ma["default"].HTMLSelectElement||a instanceof Ma["default"].HTMLTextAreaElement||a instanceof Ma["default"].HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof Ma["default"].HTMLIFrameElement||a instanceof Ma["default"].HTMLObjectElement||a instanceof Ma["default"].HTMLEmbedElement||a.hasAttribute("tabindex")&&-1!==a.getAttribute("tabindex")||a.hasAttribute("contenteditable")})},b}(mc);rc.prototype.options_={
pauseOnOpen:!0,temporary:!0},mc.registerComponent("ModalDialog",rc);var sc=function(a){function b(b){var c;void 0===b&&(b=[]),(c=a.call(this)||this).tracks_=[],Object.defineProperty(Pa["default"](c),"length",{get:function(){return this.tracks_.length}});for(var d=0;d<b.length;d++)c.addTrack(b[d]);return c}Qa["default"](b,a);var c=b.prototype;return c.addTrack=function(a){var b=this,c=this.tracks_.length;""+c in this||Object.defineProperty(this,c,{get:function(){return this.tracks_[c]}}),-1===this.tracks_.indexOf(a)&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack",target:this})),a.labelchange_=function(){b.trigger({track:a,type:"labelchange",target:b})},Zb(a)&&a.addEventListener("labelchange",a.labelchange_)},c.removeTrack=function(a){for(var b,c=0,d=this.length;c<d;c++)if(this[c]===a){(b=this[c]).off&&b.off(),this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack",target:this})},c.getTrackById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b},b}(Xb);for(var tc in sc.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},sc.prototype.allowedEvents_)sc.prototype["on"+tc]=null;var uc=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].enabled=!1)},vc=function(a){function b(b){var c;void 0===b&&(b=[]);for(var d=b.length-1;d>=0;d--)if(b[d].enabled){uc(b,b[d]);break}return(c=a.call(this,b)||this).changing_=!1,c}Qa["default"](b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;b.enabled&&uc(this,b),a.prototype.addTrack.call(this,b),b.addEventListener&&(b.enabledChange_=function(){c.changing_||(c.changing_=!0,uc(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("enabledchange",b.enabledChange_))},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&b.enabledChange_&&(b.removeEventListener("enabledchange",b.enabledChange_),b.enabledChange_=null)},b}(sc),wc=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)},xc=function(a){function b(b){var c;void 0===b&&(b=[]);for(var d=b.length-1;d>=0;d--)if(b[d].selected){wc(b,b[d]);break}return(c=a.call(this,b)||this).changing_=!1,Object.defineProperty(Pa["default"](c),"selectedIndex",{get:function(){for(var a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set:function(){}}),c}Qa["default"](b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;b.selected&&wc(this,b),a.prototype.addTrack.call(this,b),b.addEventListener&&(b.selectedChange_=function(){c.changing_||(c.changing_=!0,wc(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("selectedchange",b.selectedChange_))},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&b.selectedChange_&&(b.removeEventListener("selectedchange",b.selectedChange_),b.selectedChange_=null)},b}(sc),yc=function(a){function b(){return a.apply(this,arguments)||this}Qa["default"](b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;a.prototype.addTrack.call(this,b),this.queueChange_||(this.queueChange_=function(){return c.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return c.trigger("selectedlanguagechange")}),b.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(b.kind)&&b.addEventListener("modechange",this.triggerSelectedlanguagechange_)},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&(this.queueChange_&&b.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&b.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},b}(sc),zc=function(){function a(a){void 0===a&&(a=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var b=0,c=a.length;b<c;b++)this.addTrackElement_(a[b])}var b=a.prototype;return b.addTrackElement_=function(a){var b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}}),-1===this.trackElements_.indexOf(a)&&this.trackElements_.push(a)},b.getTrackElementByTrack_=function(a){for(var b,c=0,d=this.trackElements_.length;c<d;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b},b.removeTrackElement_=function(a){for(var b=0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_[b].track&&"function"==typeof this.trackElements_[b].track.off&&this.trackElements_[b].track.off(),"function"==typeof this.trackElements_[b].off&&this.trackElements_[b].off(),this.trackElements_.splice(b,1);break}},a}(),Ac=function(){function a(b){a.prototype.setCues_.call(this,b),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var b=a.prototype;return b.setCues_=function(a){var b=this.length||0,c=0,d=a.length;this.cues_=a,this.length_=a.length;var e=function(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.cues_[a]}})};if(b<d)for(c=b;c<d;c++)e.call(this,c)},b.getCueById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b},a}(),Bc={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Cc={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Dc={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ec={disabled:"disabled",hidden:"hidden",showing:"showing"},Fc=function(a){function b(b){var c;void 0===b&&(b={}),c=a.call(this)||this;var d={id:b.id||"vjs_track_"+P(),kind:b.kind||"",language:b.language||""},e=b.label||"";for(var f in d)!function(a){Object.defineProperty(Pa["default"](c),a,{get:function(){return d[a]},set:function(){}})}(f);return Object.defineProperty(Pa["default"](c),"label",{get:function(){return e},set:function(a){a!==e&&(e=a,this.trigger("labelchange"))}}),c}return Qa["default"](b,a),b}(Xb),Gc=function(a){var b=["protocol","hostname","port","pathname","search","hash","host"],c=Na["default"].createElement("a");c.href=a;for(var d={},e=0;e<b.length;e++)d[b[e]]=c[b[e]];return"http:"===d.protocol&&(d.host=d.host.replace(/:80$/,"")),"https:"===d.protocol&&(d.host=d.host.replace(/:443$/,"")),d.protocol||(d.protocol=Ma["default"].location.protocol),d.host||(d.host=Ma["default"].location.host),d},Hc=function(a){if(!a.match(/^https?:\/\//)){var b=Na["default"].createElement("a");b.href=a,a=b.href}return a},Ic=function(a){if("string"==typeof a){var b=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(a);if(b)return b.pop().toLowerCase()}return""},Jc=function(a,b){void 0===b&&(b=Ma["default"].location);var c=Gc(a);return(":"===c.protocol?b.protocol:c.protocol)+c.host!==b.protocol+b.host},Kc=Object.freeze({__proto__:null,parseUrl:Gc,getAbsoluteURL:Hc,getFileExtension:Ic,isCrossOrigin:Jc}),Lc=function(a,b){var c=new Ma["default"].WebVTT.Parser(Ma["default"],Ma["default"].vttjs,Ma["default"].WebVTT.StringDecoder()),d=[];c.oncue=function(a){b.addCue(a)},c.onparsingerror=function(a){d.push(a)},c.onflush=function(){b.trigger({type:"loadeddata",target:b})},c.parse(a),d.length>0&&(Ma["default"].console&&Ma["default"].console.groupCollapsed&&Ma["default"].console.groupCollapsed("Text Track parsing errors for "+b.src),d.forEach(function(a){return ib.error(a)}),Ma["default"].console&&Ma["default"].console.groupEnd&&Ma["default"].console.groupEnd()),c.flush()},Mc=function(a,b){var c={uri:a},d=Jc(a);d&&(c.cors=d);var e="use-credentials"===b.tech_.crossOrigin();e&&(c.withCredentials=e),Ta["default"](c,Vb(this,function(a,c,d){return a?ib.error(a,c):(b.loaded_=!0,void("function"!=typeof Ma["default"].WebVTT?b.tech_&&b.tech_.any(["vttjsloaded","vttjserror"],function(a){return"vttjserror"!==a.type?Lc(d,b):void ib.error("vttjs failed to load, stopping trying to process "+b.src)}):Lc(d,b)))}))},Nc=function(a){function b(b){var c;if(void 0===b&&(b={}),!b.tech)throw new Error("A tech was not provided.");var d=$(b,{kind:Dc[b.kind]||"subtitles",language:b.language||b.srclang||""}),e=Ec[d.mode]||"disabled",f=d["default"];"metadata"!==d.kind&&"chapters"!==d.kind||(e="hidden"),(c=a.call(this,d)||this).tech_=d.tech,c.cues_=[],c.activeCues_=[],c.preload_=!1!==c.tech_.preloadTextTracks;var g=new Ac(c.cues_),h=new Ac(c.activeCues_),i=!1,j=Vb(Pa["default"](c),function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,i&&(this.trigger("cuechange"),i=!1))});return c.tech_.one("dispose",function(){c.tech_.off("timeupdate",j)}),"disabled"!==e&&c.tech_.on("timeupdate",j),Object.defineProperties(Pa["default"](c),{"default":{get:function(){return f},set:function(){}},mode:{get:function(){return e},set:function(a){Ec[a]&&e!==a&&(e=a,this.preload_||"disabled"===e||0!==this.cues.length||Mc(this.src,this),this.tech_.off("timeupdate",j),"disabled"!==e&&this.tech_.on("timeupdate",j),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?g:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return h;for(var a=this.tech_.currentTime(),b=[],c=0,d=this.cues.length;c<d;c++){var e=this.cues[c];(e.startTime<=a&&e.endTime>=a||e.startTime===e.endTime&&e.startTime<=a&&e.startTime+.5>=a)&&b.push(e)}if(i=!1,b.length!==this.activeCues_.length)i=!0;else for(var f=0;f<b.length;f++)-1===this.activeCues_.indexOf(b[f])&&(i=!0);return this.activeCues_=b,h.setCues_(this.activeCues_),h},set:function(){}}}),d.src?(c.src=d.src,c.preload_||(c.loaded_=!0),(c.preload_||"subtitles"!==d.kind&&"captions"!==d.kind)&&Mc(c.src,Pa["default"](c))):c.loaded_=!0,c}Qa["default"](b,a);var c=b.prototype;return c.addCue=function(a){var b=a;if(Ma["default"].vttjs&&!(a instanceof Ma["default"].vttjs.VTTCue)){for(var c in b=new Ma["default"].vttjs.VTTCue(a.startTime,a.endTime,a.text),a)c in b||(b[c]=a[c]);b.id=a.id,b.originalCue_=a}for(var d=this.tech_.textTracks(),e=0;e<d.length;e++)d[e]!==this&&d[e].removeCue(b);this.cues_.push(b),this.cues.setCues_(this.cues_)},c.removeCue=function(a){for(var b=this.cues_.length;b--;){var c=this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1),this.cues.setCues_(this.cues_);break}}},b}(Fc);Nc.prototype.allowedEvents_={cuechange:"cuechange"};var Oc=function(a){function b(b){var c;void 0===b&&(b={});var d=$(b,{kind:Cc[b.kind]||""});c=a.call(this,d)||this;var e=!1;return Object.defineProperty(Pa["default"](c),"enabled",{get:function(){return e},set:function(a){"boolean"==typeof a&&a!==e&&(e=a,this.trigger("enabledchange"))}}),d.enabled&&(c.enabled=d.enabled),c.loaded_=!0,c}return Qa["default"](b,a),b}(Fc),Pc=function(a){function b(b){var c;void 0===b&&(b={});var d=$(b,{kind:Bc[b.kind]||""});c=a.call(this,d)||this;var e=!1;return Object.defineProperty(Pa["default"](c),"selected",{get:function(){return e},set:function(a){"boolean"==typeof a&&a!==e&&(e=a,this.trigger("selectedchange"))}}),d.selected&&(c.selected=d.selected),c}return Qa["default"](b,a),b}(Fc),Qc=function(a){function b(b){var c,d;void 0===b&&(b={}),c=a.call(this)||this;var e=new Nc(b);return c.kind=e.kind,c.src=e.src,c.srclang=e.language,c.label=e.label,c["default"]=e["default"],Object.defineProperties(Pa["default"](c),{readyState:{get:function(){return d}},track:{get:function(){return e}}}),d=0,e.addEventListener("loadeddata",function(){d=2,c.trigger({type:"load",target:Pa["default"](c)})}),c}return Qa["default"](b,a),b}(Xb);Qc.prototype.allowedEvents_={load:"load"},Qc.NONE=0,Qc.LOADING=1,Qc.LOADED=2,Qc.ERROR=3;var Rc={audio:{ListClass:vc,TrackClass:Oc,capitalName:"Audio"},video:{ListClass:xc,TrackClass:Pc,capitalName:"Video"},text:{ListClass:yc,TrackClass:Nc,capitalName:"Text"}};Object.keys(Rc).forEach(function(a){Rc[a].getterName=a+"Tracks",Rc[a].privateName=a+"Tracks_"});var Sc={remoteText:{ListClass:yc,TrackClass:Nc,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:zc,TrackClass:Qc,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Tc=Oa["default"]({},Rc,Sc);Sc.names=Object.keys(Sc),Rc.names=Object.keys(Rc),Tc.names=[].concat(Sc.names).concat(Rc.names);var Uc=function(a){function b(b,c){var d;return void 0===b&&(b={}),void 0===c&&(c=function(){}),b.reportTouchActivity=!1,(d=a.call(this,null,b,c)||this).onDurationChange_=function(a){return d.onDurationChange(a)},d.trackProgress_=function(a){return d.trackProgress(a)},d.trackCurrentTime_=function(a){return d.trackCurrentTime(a)},d.stopTrackingCurrentTime_=function(a){return d.stopTrackingCurrentTime(a)},d.disposeSourceHandler_=function(a){return d.disposeSourceHandler(a)},d.hasStarted_=!1,d.on("playing",function(){this.hasStarted_=!0}),d.on("loadstart",function(){this.hasStarted_=!1}),Tc.names.forEach(function(a){var c=Tc[a];b&&b[c.getterName]&&(d[c.privateName]=b[c.getterName])}),d.featuresProgressEvents||d.manualProgressOn(),d.featuresTimeupdateEvents||d.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){!1===b["native"+a+"Tracks"]&&(d["featuresNative"+a+"Tracks"]=!1)}),!1===b.nativeCaptions||!1===b.nativeTextTracks?d.featuresNativeTextTracks=!1:!0!==b.nativeCaptions&&!0!==b.nativeTextTracks||(d.featuresNativeTextTracks=!0),d.featuresNativeTextTracks||d.emulateTextTracks(),d.preloadTextTracks=!1!==b.preloadTextTracks,d.autoRemoteTextTracks_=new Tc.text.ListClass,d.initTrackListeners(),b.nativeControlsForTouch||d.emitTapEvents(),d.constructor&&(d.name_=d.constructor.name||"Unknown Tech"),d}Qa["default"](b,a);var c=b.prototype;return c.triggerSourceset=function(a){var b=this;this.isReady_||this.one("ready",function(){return b.setTimeout(function(){return b.triggerSourceset(a)},1)}),this.trigger({src:a,type:"sourceset"})},c.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},c.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},c.trackProgress=function(a){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Vb(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,1===a&&this.stopTrackingProgress()}),500)},c.onDurationChange=function(a){this.duration_=this.duration()},c.buffered=function(){return ba(0,0)},c.bufferedPercent=function(){return ca(this.buffered(),this.duration_)},c.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},c.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},c.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},c.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},c.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},c.dispose=function(){this.clearTracks(Rc.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),a.prototype.dispose.call(this)},c.clearTracks=function(a){var b=this;(a=[].concat(a)).forEach(function(a){for(var c=b[a+"Tracks"]()||[],d=c.length;d--;){var e=c[d];"text"===a&&b.removeRemoteTextTrack(e),c.removeTrack(e)}})},c.cleanupAutoTextTracks=function(){for(var a=this.autoRemoteTextTracks_||[],b=a.length;b--;){var c=a[b];this.removeRemoteTextTrack(c)}},c.reset=function(){},c.crossOrigin=function(){},c.setCrossOrigin=function(){},c.error=function(a){return void 0!==a&&(this.error_=new da(a),this.trigger("error")),this.error_},c.played=function(){return this.hasStarted_?ba(0,0):ba()},c.play=function(){},c.setScrubbing=function(){},c.scrubbing=function(){},c.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},c.initTrackListeners=function(){var a=this;Rc.names.forEach(function(b){var c=Rc[b],d=function(){a.trigger(b+"trackchange")},e=a[c.getterName]();e.addEventListener("removetrack",d),e.addEventListener("addtrack",d),a.on("dispose",function(){e.removeEventListener("removetrack",d),e.removeEventListener("addtrack",d)})})},c.addWebVttScript_=function(){var a=this;if(!Ma["default"].WebVTT)if(Na["default"].body.contains(this.el())){if(!this.options_["vtt.js"]&&i(Ua["default"])&&Object.keys(Ua["default"]).length>0)return void this.trigger("vttjsloaded");var b=Na["default"].createElement("script");b.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",b.onload=function(){a.trigger("vttjsloaded")},b.onerror=function(){a.trigger("vttjserror")},this.on("dispose",function(){b.onload=null,b.onerror=null}),Ma["default"].WebVTT=!0,this.el().parentNode.appendChild(b)}else this.ready(this.addWebVttScript_)},c.emulateTextTracks=function(){var a=this,b=this.textTracks(),c=this.remoteTextTracks(),d=function(a){return b.addTrack(a.track)},e=function(a){return b.removeTrack(a.track)};c.on("addtrack",d),c.on("removetrack",e),this.addWebVttScript_();var f=function(){return a.trigger("texttrackchange")},g=function(){f();for(var a=0;a<b.length;a++){var c=b[a];c.removeEventListener("cuechange",f),"showing"===c.mode&&c.addEventListener("cuechange",f)}};g(),b.addEventListener("change",g),b.addEventListener("addtrack",g),b.addEventListener("removetrack",g),this.on("dispose",function(){c.off("addtrack",d),c.off("removetrack",e),b.removeEventListener("change",g),b.removeEventListener("addtrack",g),b.removeEventListener("removetrack",g);for(var a=0;a<b.length;a++)b[a].removeEventListener("cuechange",f)})},c.addTextTrack=function(a,b,c){if(!a)throw new Error("TextTrack kind is required but was not provided");return function(a,b,c,d,e){void 0===e&&(e={});var f=a.textTracks();e.kind=b,c&&(e.label=c),d&&(e.language=d),e.tech=a;var g=new Tc.text.TrackClass(e);return f.addTrack(g),g}(this,a,b,c)},c.createRemoteTextTrack=function(a){var b=$(a,{tech:this});return new Sc.remoteTextEl.TrackClass(b)},c.addRemoteTextTrack=function(a,b){var c=this;void 0===a&&(a={});var d=this.createRemoteTextTrack(a);return!0!==b&&!1!==b&&(ib.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),b=!0),this.remoteTextTrackEls().addTrackElement_(d),this.remoteTextTracks().addTrack(d.track),!0!==b&&this.ready(function(){return c.autoRemoteTextTracks_.addTrack(d.track)}),d},c.removeRemoteTextTrack=function(a){var b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b),this.remoteTextTracks().removeTrack(a),this.autoRemoteTextTracks_.removeTrack(a)},c.getVideoPlaybackQuality=function(){return{}},c.requestPictureInPicture=function(){var a=this.options_.Promise||Ma["default"].Promise;if(a)return a.reject()},c.disablePictureInPicture=function(){return!0},c.setDisablePictureInPicture=function(){},c.setPoster=function(){},c.playsinline=function(){},c.setPlaysinline=function(){},c.overrideNativeAudioTracks=function(){},c.overrideNativeVideoTracks=function(){},c.canPlayType=function(){return""},b.canPlayType=function(){return""},b.canPlaySource=function(a,c){return b.canPlayType(a.type)},b.isTech=function(a){return a.prototype instanceof b||a instanceof b||a===b},b.registerTech=function(a,c){if(b.techs_||(b.techs_={}),!b.isTech(c))throw new Error("Tech "+a+" must be a Tech");if(!b.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!b.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return a=hc(a),b.techs_[a]=c,b.techs_[gc(a)]=c,"Tech"!==a&&b.defaultTechOrder_.push(a),c},b.getTech=function(a){if(a)return b.techs_&&b.techs_[a]?b.techs_[a]:(a=hc(a),Ma["default"]&&Ma["default"].videojs&&Ma["default"].videojs[a]?(ib.warn("The "+a+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Ma["default"].videojs[a]):void 0)},b}(mc);Tc.names.forEach(function(a){var b=Tc[a];Uc.prototype[b.getterName]=function(){return this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName]}}),Uc.prototype.featuresVolumeControl=!0,Uc.prototype.featuresMuteControl=!0,Uc.prototype.featuresFullscreenResize=!1,Uc.prototype.featuresPlaybackRate=!1,Uc.prototype.featuresProgressEvents=!1,Uc.prototype.featuresSourceset=!1,Uc.prototype.featuresTimeupdateEvents=!1,Uc.prototype.featuresNativeTextTracks=!1,Uc.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){var d=a.sourceHandlers;d||(d=a.sourceHandlers=[]),void 0===c&&(c=d.length),d.splice(c,0,b)},a.canPlayType=function(b){for(var c,d=a.sourceHandlers||[],e=0;e<d.length;e++)if(c=d[e].canPlayType(b))return c;return""},a.selectSourceHandler=function(b,c){for(var d=a.sourceHandlers||[],e=0;e<d.length;e++)if(d[e].canHandleSource(b,c))return d[e];return null},a.canPlaySource=function(b,c){var d=a.selectSourceHandler(b,c);return d?d.canHandleSource(b,c):""},["seekable","seeking","duration"].forEach(function(a){var b=this[a];"function"==typeof b&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},a.prototype),a.prototype.setSource=function(b){var c=a.selectSourceHandler(b,this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:ib.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),c!==a.nativeSourceHandler&&(this.currentSource_=b),this.sourceHandler_=c.handleSource(b,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},mc.registerComponent("Tech",Uc),Uc.registerTech("Tech",Uc),Uc.defaultTechOrder_=[];var Vc={},Wc={},Xc={},Yc={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Zc={setCurrentTime:1,setMuted:1,setVolume:1},$c={play:1,pause:1},_c={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},ad=function(a){void 0===a&&(a="");var b=Ic(a);return _c[b.toLowerCase()]||""},bd=function(a){function b(b,c,d){var e,f=$({createEl:!1},c);if(e=a.call(this,b,f,d)||this,c.playerOptions.sources&&0!==c.playerOptions.sources.length)b.src(c.playerOptions.sources);else for(var g=0,h=c.playerOptions.techOrder;g<h.length;g++){var i=hc(h[g]),j=Uc.getTech(i);if(i||(j=mc.getComponent(i)),j&&j.isSupported()){b.loadTech_(i);break}}return e}return Qa["default"](b,a),b}(mc);mc.registerComponent("MediaLoader",bd);var cd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).handleMouseOver_=function(a){return d.handleMouseOver(a)},d.handleMouseOut_=function(a){return d.handleMouseOut(a)},d.handleClick_=function(a){return d.handleClick(a)},d.handleKeyDown_=function(a){return d.handleKeyDown(a)},d.emitTapEvents(),d.enable(),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(a,b,c){void 0===a&&(a="div"),void 0===b&&(b={}),void 0===c&&(c={}),b=f({className:this.buildCSSClass(),tabIndex:0},b),"button"===a&&ib.error("Creating a ClickableComponent with an HTML element of "+a+" is not supported; use a Button instead."),c=f({role:"button"},c),this.tabIndex_=b.tabIndex;var d=q(a,b,c);return d.appendChild(q("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(d),d},c.dispose=function(){this.controlTextEl_=null,a.prototype.dispose.call(this)},c.createControlTextEl=function(a){return this.controlTextEl_=q("span",{className:"vjs-control-text"},{"aria-live":"polite"}),a&&a.appendChild(this.controlTextEl_),this.controlText(this.controlText_,a),this.controlTextEl_},c.controlText=function(a,b){if(void 0===b&&(b=this.el()),void 0===a)return this.controlText_||"Need Text";var c=this.localize(a);this.controlText_=a,r(this.controlTextEl_,c),this.nonIconControl||this.player_.options_.noUITitleAttributes||b.setAttribute("title",c)},c.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)},c.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},c.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},c.handleLanguagechange=function(){this.controlText(this.controlText_)},c.handleClick=function(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},c.handleKeyDown=function(b){Sa["default"].isEventKey(b,"Space")||Sa["default"].isEventKey(b,"Enter")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)},b}(mc);mc.registerComponent("ClickableComponent",cd);var dd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).update(),d.update_=function(a){return d.update(a)},b.on("posterchange",d.update_),d}Qa["default"](b,a);var c=b.prototype;return c.dispose=function(){this.player().off("posterchange",this.update_),a.prototype.dispose.call(this)},c.createEl=function(){return q("div",{className:"vjs-poster",tabIndex:-1})},c.update=function(a){var b=this.player().poster();this.setSrc(b),b?this.show():this.hide()},c.setSrc=function(a){var b="";a&&(b='url("'+a+'")'),this.el_.style.backgroundImage=b},c.handleClick=function(a){if(this.player_.controls()){var b=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(yb||vb)&&b||this.player_.tech(!0).focus(),this.player_.paused()?fa(this.player_.play()):this.player_.pause()}},b}(cd);mc.registerComponent("PosterImage",dd);var ed={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},fd=function(a){function b(b,c,d){var e;e=a.call(this,b,c,d)||this;var f=function(a){return e.updateDisplay(a)};return b.on("loadstart",function(a){return e.toggleDisplay(a)}),b.on("texttrackchange",f),b.on("loadedmetadata",function(a){return e.preselectTrack(a)}),b.ready(Vb(Pa["default"](e),function(){if(b.tech_&&b.tech_.featuresNativeTextTracks)this.hide();else{b.on("fullscreenchange",f),b.on("playerresize",f),Ma["default"].addEventListener("orientationchange",f),b.on("dispose",function(){return Ma["default"].removeEventListener("orientationchange",f)});for(var a=this.options_.playerOptions.tracks||[],c=0;c<a.length;c++)this.player_.addRemoteTextTrack(a[c],!0);this.preselectTrack()}})),e}Qa["default"](b,a);var c=b.prototype;return c.preselectTrack=function(){for(var a,b,c,d={captions:1,subtitles:1},e=this.player_.textTracks(),f=this.player_.cache_.selectedLanguage,g=0;g<e.length;g++){var h=e[g];f&&f.enabled&&f.language&&f.language===h.language&&h.kind in d?h.kind===f.kind?c=h:c||(c=h):f&&!f.enabled?(c=null,a=null,b=null):h["default"]&&("descriptions"!==h.kind||a?h.kind in d&&!b&&(b=h):a=h)}c?c.mode="showing":b?b.mode="showing":a&&(a.mode="showing")},c.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},c.clearDisplay=function(){"function"==typeof Ma["default"].WebVTT&&Ma["default"].WebVTT.processCues(Ma["default"],[],this.el_)},c.updateDisplay=function(){var a=this.player_.textTracks(),b=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),b){for(var c=[],d=0;d<a.length;++d){var e=a[d];"showing"===e.mode&&c.push(e)}this.updateForTrack(c)}else{for(var f=null,g=null,h=a.length;h--;){var i=a[h];"showing"===i.mode&&("descriptions"===i.kind?f=i:g=i)}g?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(g)):f&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(f))}},c.updateDisplayState=function(a){for(var b=this.player_.textTrackSettings.getValues(),c=a.activeCues,d=c.length;d--;){var e=c[d];if(e){var f=e.displayState;if(b.color&&(f.firstChild.style.color=b.color),b.textOpacity&&la(f.firstChild,"color",ka(b.color||"#fff",b.textOpacity)),b.backgroundColor&&(f.firstChild.style.backgroundColor=b.backgroundColor),b.backgroundOpacity&&la(f.firstChild,"backgroundColor",ka(b.backgroundColor||"#000",b.backgroundOpacity)),b.windowColor&&(b.windowOpacity?la(f,"backgroundColor",ka(b.windowColor,b.windowOpacity)):f.style.backgroundColor=b.windowColor),b.edgeStyle&&("dropshadow"===b.edgeStyle?f.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===b.edgeStyle?f.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===b.edgeStyle?f.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===b.edgeStyle&&(f.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),b.fontPercent&&1!==b.fontPercent){var g=Ma["default"].parseFloat(f.style.fontSize);f.style.fontSize=g*b.fontPercent+"px",f.style.height="auto",f.style.top="auto"}b.fontFamily&&"default"!==b.fontFamily&&("small-caps"===b.fontFamily?f.firstChild.style.fontVariant="small-caps":f.firstChild.style.fontFamily=ed[b.fontFamily])}}},c.updateForTrack=function(a){if(Array.isArray(a)||(a=[a]),"function"==typeof Ma["default"].WebVTT&&!a.every(function(a){return!a.activeCues})){for(var b=[],c=0;c<a.length;++c)for(var d=a[c],e=0;e<d.activeCues.length;++e)b.push(d.activeCues[e]);Ma["default"].WebVTT.processCues(Ma["default"],b,this.el_);for(var f=0;f<a.length;++f){for(var g=a[f],h=0;h<g.activeCues.length;++h){var i=g.activeCues[h].displayState;u(i,"vjs-text-track-cue"),u(i,"vjs-text-track-cue-"+(g.language?g.language:f))}this.player_.textTrackSettings&&this.updateDisplayState(g)}}},b}(mc);mc.registerComponent("TextTrackDisplay",fd);var gd=function(a){function b(){return a.apply(this,arguments)||this}return Qa["default"](b,a),b.prototype.createEl=function(){var b=this.player_.isAudio(),c=this.localize(b?"Audio Player":"Video Player"),d=q("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[c])}),e=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return e.appendChild(d),e},b}(mc);mc.registerComponent("LoadingSpinner",gd);var hd=function(a){
function b(){return a.apply(this,arguments)||this}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={});var d=q("button",b=f({className:this.buildCSSClass()},b),c=f({type:"button"},c));return d.appendChild(q("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(d),d},c.addChild=function(a,b){void 0===b&&(b={});var c=this.constructor.name;return ib.warn("Adding an actionable (user controllable) child to a Button ("+c+") is not supported; use a ClickableComponent instead."),mc.prototype.addChild.call(this,a,b)},c.enable=function(){a.prototype.enable.call(this),this.el_.removeAttribute("disabled")},c.disable=function(){a.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},c.handleKeyDown=function(b){Sa["default"].isEventKey(b,"Space")||Sa["default"].isEventKey(b,"Enter")?b.stopPropagation():a.prototype.handleKeyDown.call(this,b)},b}(cd);mc.registerComponent("Button",hd);var id=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).mouseused_=!1,d.on("mousedown",function(a){return d.handleMouseDown(a)}),d}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-big-play-button"},c.handleClick=function(a){var b=this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY){var c=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return fa(b),void(!this.player_.tech(!0)||(yb||vb)&&c||this.player_.tech(!0).focus())}var d=this.player_.getChild("controlBar"),e=d&&d.getChild("playToggle");if(e){var f=function(){return e.focus()};ea(b)?b.then(f,function(){}):this.setTimeout(f,1)}else this.player_.tech(!0).focus()},c.handleKeyDown=function(b){this.mouseused_=!1,a.prototype.handleKeyDown.call(this,b)},c.handleMouseDown=function(a){this.mouseused_=!0},b}(hd);id.prototype.controlText_="Play Video",mc.registerComponent("BigPlayButton",id);var jd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).controlText(c&&c.controlText||d.localize("Close")),d}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){this.trigger({type:"close",bubbles:!1})},c.handleKeyDown=function(b){Sa["default"].isEventKey(b,"Esc")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)},b}(hd);mc.registerComponent("CloseButton",jd);var kd=function(a){function b(b,c){var d;return void 0===c&&(c={}),d=a.call(this,b,c)||this,c.replay=void 0===c.replay||c.replay,d.on(b,"play",function(a){return d.handlePlay(a)}),d.on(b,"pause",function(a){return d.handlePause(a)}),c.replay&&d.on(b,"ended",function(a){return d.handleEnded(a)}),d}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){this.player_.paused()?fa(this.player_.play()):this.player_.pause()},c.handleSeeked=function(a){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(a):this.handlePlay(a)},c.handlePlay=function(a){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},c.handlePause=function(a){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},c.handleEnded=function(a){var b=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(a){return b.handleSeeked(a)})},b}(hd);kd.prototype.controlText_="Play",mc.registerComponent("PlayToggle",kd);var ld=function(a,b){a=a<0?0:a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return(isNaN(a)||a===1/0)&&(e=d=c="-"),(e=e>0||g>0?e+":":"")+(d=((e||f>=10)&&d<10?"0"+d:d)+":")+(c=c<10?"0"+c:c)},md=ld,nd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on(b,["timeupdate","ended"],function(a){return d.updateContent(a)}),d.updateTextNode_(),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){var b=this.buildCSSClass(),c=a.prototype.createEl.call(this,"div",{className:b+" vjs-time-control vjs-control"}),d=q("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+""},{role:"presentation"});return c.appendChild(d),this.contentEl_=q("span",{className:b+"-display"},{"aria-live":"off",role:"presentation"}),c.appendChild(this.contentEl_),c},c.dispose=function(){this.contentEl_=null,this.textNode_=null,a.prototype.dispose.call(this)},c.updateTextNode_=function(a){var b=this;void 0===a&&(a=0),a=ma(a),this.formattedTime_!==a&&(this.formattedTime_=a,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(b.contentEl_){var a=b.textNode_;a&&b.contentEl_.firstChild!==a&&(a=null,ib.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),b.textNode_=Na["default"].createTextNode(b.formattedTime_),b.textNode_&&(a?b.contentEl_.replaceChild(b.textNode_,a):b.contentEl_.appendChild(b.textNode_))}}))},c.updateContent=function(a){},b}(mc);nd.prototype.labelText_="Time",nd.prototype.controlText_="Time",mc.registerComponent("TimeDisplay",nd);var od=function(a){function b(){return a.apply(this,arguments)||this}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-current-time"},c.updateContent=function(a){var b;b=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(b)},b}(nd);od.prototype.labelText_="Current Time",od.prototype.controlText_="Current Time",mc.registerComponent("CurrentTimeDisplay",od);var pd=function(a){function b(b,c){var d,e=function(a){return d.updateContent(a)};return(d=a.call(this,b,c)||this).on(b,"durationchange",e),d.on(b,"loadstart",e),d.on(b,"loadedmetadata",e),d}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-duration"},c.updateContent=function(a){var b=this.player_.duration();this.updateTextNode_(b)},b}(nd);pd.prototype.labelText_="Duration",pd.prototype.controlText_="Duration",mc.registerComponent("DurationDisplay",pd);var qd=function(a){function b(){return a.apply(this,arguments)||this}return Qa["default"](b,a),b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),c=a.prototype.createEl.call(this,"div"),d=a.prototype.createEl.call(this,"span",{textContent:"/"});return c.appendChild(d),b.appendChild(c),b},b}(mc);mc.registerComponent("TimeDivider",qd);var rd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on(b,"durationchange",function(a){return d.updateContent(a)}),d}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-remaining-time"},c.createEl=function(){var b=a.prototype.createEl.call(this);return b.insertBefore(q("span",{},{"aria-hidden":!0},"-"),this.contentEl_),b},c.updateContent=function(a){var b;"number"==typeof this.player_.duration()&&(b=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(b))},b}(nd);rd.prototype.labelText_="Remaining Time",rd.prototype.controlText_="Remaining Time",mc.registerComponent("RemainingTimeDisplay",rd);var sd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).updateShowing(),d.on(d.player(),"durationchange",function(a){return d.updateShowing(a)}),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=q("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(q("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+""})),this.contentEl_.appendChild(Na["default"].createTextNode(this.localize("LIVE"))),b.appendChild(this.contentEl_),b},c.dispose=function(){this.contentEl_=null,a.prototype.dispose.call(this)},c.updateShowing=function(a){this.player().duration()===1/0?this.show():this.hide()},b}(mc);mc.registerComponent("LiveDisplay",sd);var td=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).updateLiveEdgeStatus(),d.player_.liveTracker&&(d.updateLiveEdgeStatusHandler_=function(a){return d.updateLiveEdgeStatus(a)},d.on(d.player_.liveTracker,"liveedgechange",d.updateLiveEdgeStatusHandler_)),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=q("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),b.appendChild(this.textEl_),b},c.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},c.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},c.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,a.prototype.dispose.call(this)},b}(hd);td.prototype.controlText_="Seek to live, currently playing live",mc.registerComponent("SeekToLive",td);var ud=function(a,b,c){return a=Number(a),Math.min(c,Math.max(b,isNaN(a)?b:a))},vd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).handleMouseDown_=function(a){return d.handleMouseDown(a)},d.handleMouseUp_=function(a){return d.handleMouseUp(a)},d.handleKeyDown_=function(a){return d.handleKeyDown(a)},d.handleClick_=function(a){return d.handleClick(a)},d.handleMouseMove_=function(a){return d.handleMouseMove(a)},d.update_=function(a){return d.update(a)},d.bar=d.getChild(d.options_.barName),d.vertical(!!d.options_.vertical),d.enable(),d}Qa["default"](b,a);var c=b.prototype;return c.enabled=function(){return this.enabled_},c.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},c.disable=function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(a,"mousemove",this.handleMouseMove_),this.off(a,"mouseup",this.handleMouseUp_),this.off(a,"touchmove",this.handleMouseMove_),this.off(a,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},c.createEl=function(b,c,d){return void 0===c&&(c={}),void 0===d&&(d={}),c.className=c.className+" vjs-slider",c=f({tabIndex:0},c),d=f({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},d),a.prototype.createEl.call(this,b,c,d)},c.handleMouseDown=function(a){var b=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault(),"touchstart"!==a.type||wb||a.preventDefault(),C(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(b,"mousemove",this.handleMouseMove_),this.on(b,"mouseup",this.handleMouseUp_),this.on(b,"touchmove",this.handleMouseMove_),this.on(b,"touchend",this.handleMouseUp_),this.handleMouseMove(a)},c.handleMouseMove=function(a){},c.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;D(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(a,"mousemove",this.handleMouseMove_),this.off(a,"mouseup",this.handleMouseUp_),this.off(a,"touchmove",this.handleMouseMove_),this.off(a,"touchend",this.handleMouseUp_),this.update()},c.update=function(){var a=this;if(this.el_&&this.bar){var b=this.getProgress();return b===this.progress_||(this.progress_=b,this.requestNamedAnimationFrame("Slider#update",function(){var c=a.vertical()?"height":"width";a.bar.el().style[c]=(100*b).toFixed(2)+"%"})),b}},c.getProgress=function(){return Number(ud(this.getPercent(),0,1).toFixed(4))},c.calculateDistance=function(a){var b=G(this.el_,a);return this.vertical()?b.y:b.x},c.handleKeyDown=function(b){Sa["default"].isEventKey(b,"Left")||Sa["default"].isEventKey(b,"Down")?(b.preventDefault(),b.stopPropagation(),this.stepBack()):Sa["default"].isEventKey(b,"Right")||Sa["default"].isEventKey(b,"Up")?(b.preventDefault(),b.stopPropagation(),this.stepForward()):a.prototype.handleKeyDown.call(this,b)},c.handleClick=function(a){a.stopPropagation(),a.preventDefault()},c.vertical=function(a){return void 0===a?this.vertical_||!1:(this.vertical_=!!a,void(this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")))},b}(mc);mc.registerComponent("Slider",vd);var wd=function(a,b){return ud(a/b*100,0,100).toFixed(2)+"%"},xd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).partEls_=[],d.on(b,"progress",function(a){return d.update(a)}),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),c=q("span",{className:"vjs-control-text"}),d=q("span",{textContent:this.localize("Loaded")}),e=Na["default"].createTextNode(": ");return this.percentageEl_=q("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),b.appendChild(c),c.appendChild(d),c.appendChild(e),c.appendChild(this.percentageEl_),b},c.dispose=function(){this.partEls_=null,this.percentageEl_=null,a.prototype.dispose.call(this)},c.update=function(a){var b=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var a=b.player_.liveTracker,c=b.player_.buffered(),d=a&&a.isLive()?a.seekableEnd():b.player_.duration(),e=b.player_.bufferedEnd(),f=b.partEls_,g=wd(e,d);b.percent_!==g&&(b.el_.style.width=g,r(b.percentageEl_,g),b.percent_=g);for(var h=0;h<c.length;h++){var i=c.start(h),j=c.end(h),k=f[h];k||(k=b.el_.appendChild(q()),f[h]=k),k.dataset.start===i&&k.dataset.end===j||(k.dataset.start=i,k.dataset.end=j,k.style.left=wd(i,e),k.style.width=wd(j-i,e))}for(var l=f.length;l>c.length;l--)b.el_.removeChild(f[l-1]);f.length=c.length})},b}(mc);mc.registerComponent("LoadProgressBar",xd);var yd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).update=Wb(Vb(Pa["default"](d),d.update),30),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},c.update=function(a,b,c){var d=F(this.el_),e=E(this.player_.el()),f=a.width*b;if(e&&d){var g=a.left-e.left+f,h=a.width-f+(e.right-a.right),i=d.width/2;g<i?i+=i-g:h<i&&(i=h),i<0?i=0:i>d.width&&(i=d.width),i=Math.round(i),this.el_.style.right="-"+i+"px",this.write(c)}},c.write=function(a){r(this.el_,a)},c.updateTime=function(a,b,c,d){var e=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var f,g=e.player_.duration();if(e.player_.liveTracker&&e.player_.liveTracker.isLive()){var h=e.player_.liveTracker.liveWindow(),i=h-b*h;f=(i<1?"":"-")+ma(i,h)}else f=ma(c,g);e.update(a,b,f),d&&d()})},b}(mc);mc.registerComponent("TimeTooltip",yd);var zd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).update=Wb(Vb(Pa["default"](d),d.update),30),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},c.update=function(a,b){var c=this.getChild("timeTooltip");if(c){var d=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();c.updateTime(a,b,d)}},b}(mc);zd.prototype.options_={children:[]},Eb||rb||zd.prototype.options_.children.push("timeTooltip"),mc.registerComponent("PlayProgressBar",zd);var Ad=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).update=Wb(Vb(Pa["default"](d),d.update),30),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},c.update=function(a,b){var c=this,d=b*this.player_.duration();this.getChild("timeTooltip").updateTime(a,b,d,function(){c.el_.style.left=a.width*b+"px"})},b}(mc);Ad.prototype.options_={children:["timeTooltip"]},mc.registerComponent("MouseTimeDisplay",Ad);var Bd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).setEventHandlers_(),d}Qa["default"](b,a);var c=b.prototype;return c.setEventHandlers_=function(){var a=this;this.update_=Vb(this,this.update),this.update=Wb(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(b){return a.enableInterval_(b)},this.disableIntervalHandler_=function(b){return a.disableInterval_(b)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Na["default"]&&"visibilityState"in Na["default"]&&this.on(Na["default"],"visibilitychange",this.toggleVisibility_)},c.toggleVisibility_=function(a){"hidden"===Na["default"].visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(a)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},c.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},c.disableInterval_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&a&&"ended"!==a.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},c.update=function(b){var c=this;if("hidden"!==Na["default"].visibilityState){var d=a.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var a=c.player_.ended()?c.player_.duration():c.getCurrentTime_(),b=c.player_.liveTracker,e=c.player_.duration();b&&b.isLive()&&(e=c.player_.liveTracker.liveCurrentTime()),c.percent_!==d&&(c.el_.setAttribute("aria-valuenow",(100*d).toFixed(2)),c.percent_=d),c.currentTime_===a&&c.duration_===e||(c.el_.setAttribute("aria-valuetext",c.localize("progress bar timing: currentTime={1} duration={2}",[ma(a,e),ma(e,e)],"{1} of {2}")),c.currentTime_=a,c.duration_=e),c.bar&&c.bar.update(E(c.el()),c.getProgress())}),d}},c.userSeek_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(a)},c.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},c.getPercent=function(){var a,b=this.getCurrentTime_(),c=this.player_.liveTracker;return c&&c.isLive()?(a=(b-c.seekableStart())/c.liveWindow(),c.atLiveEdge()&&(a=1)):a=b/this.player_.duration(),a},c.handleMouseDown=function(b){M(b)&&(b.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,b))},c.handleMouseMove=function(a){if(M(a)){var b,c=this.calculateDistance(a),d=this.player_.liveTracker;if(d&&d.isLive()){if(c>=.99)return void d.seekToLiveEdge();var e=d.seekableStart(),f=d.liveCurrentTime();if((b=e+c*d.liveWindow())>=f&&(b=f),b<=e&&(b=e+.1),b===1/0)return}else(b=c*this.player_.duration())===this.player_.duration()&&(b-=.1);this.userSeek_(b)}},c.enable=function(){a.prototype.enable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.show()},c.disable=function(){a.prototype.disable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.hide()},c.handleMouseUp=function(b){a.prototype.handleMouseUp.call(this,b),b&&b.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?fa(this.player_.play()):this.update_()},c.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},c.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},c.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()},c.handleKeyDown=function(b){var c=this.player_.liveTracker;if(Sa["default"].isEventKey(b,"Space")||Sa["default"].isEventKey(b,"Enter"))b.preventDefault(),b.stopPropagation(),this.handleAction(b);else if(Sa["default"].isEventKey(b,"Home"))b.preventDefault(),b.stopPropagation(),this.userSeek_(0);else if(Sa["default"].isEventKey(b,"End"))b.preventDefault(),b.stopPropagation(),c&&c.isLive()?this.userSeek_(c.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Sa["default"](b))){b.preventDefault(),b.stopPropagation();var d=10*(Sa["default"].codes[Sa["default"](b)]-Sa["default"].codes[0])/100;c&&c.isLive()?this.userSeek_(c.seekableStart()+c.liveWindow()*d):this.userSeek_(this.player_.duration()*d)}else Sa["default"].isEventKey(b,"PgDn")?(b.preventDefault(),b.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Sa["default"].isEventKey(b,"PgUp")?(b.preventDefault(),b.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):a.prototype.handleKeyDown.call(this,b)},c.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Na["default"]&&"visibilityState"in Na["default"]&&this.off(Na["default"],"visibilitychange",this.toggleVisibility_),a.prototype.dispose.call(this)},b}(vd);Bd.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Eb||rb||Bd.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),mc.registerComponent("SeekBar",Bd);var Cd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).handleMouseMove=Wb(Vb(Pa["default"](d),d.handleMouseMove),30),d.throttledHandleMouseSeek=Wb(Vb(Pa["default"](d),d.handleMouseSeek),30),d.handleMouseUpHandler_=function(a){return d.handleMouseUp(a)},d.handleMouseDownHandler_=function(a){return d.handleMouseDown(a)},d.enable(),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},c.handleMouseMove=function(a){var b=this.getChild("seekBar");if(b){var c=b.getChild("playProgressBar"),d=b.getChild("mouseTimeDisplay");if(c||d){var e=b.el(),f=F(e),g=G(e,a).x;g=ud(g,0,1),d&&d.update(f,g),c&&c.update(f,b.getProgress())}}},c.handleMouseSeek=function(a){var b=this.getChild("seekBar");b&&b.handleMouseMove(a)},c.enabled=function(){return this.enabled_},c.disable=function(){if(this.children().forEach(function(a){return a.disable&&a.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var a=this.getChild("seekBar");this.player_.scrubbing(!1),a.videoWasPlaying&&fa(this.player_.play())}},c.enable=function(){this.children().forEach(function(a){return a.enable&&a.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},c.removeListenersAddedOnMousedownAndTouchstart=function(){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseSeek),this.off(a,"touchmove",this.throttledHandleMouseSeek),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},c.handleMouseDown=function(a){var b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseDown(a),this.on(b,"mousemove",this.throttledHandleMouseSeek),this.on(b,"touchmove",this.throttledHandleMouseSeek),this.on(b,"mouseup",this.handleMouseUpHandler_),this.on(b,"touchend",this.handleMouseUpHandler_)},c.handleMouseUp=function(a){var b=this.getChild("seekBar");b&&b.handleMouseUp(a),this.removeListenersAddedOnMousedownAndTouchstart()},b}(mc);Cd.prototype.options_={children:["seekBar"]},mc.registerComponent("ProgressControl",Cd);var Dd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on(b,["enterpictureinpicture","leavepictureinpicture"],function(a){return d.handlePictureInPictureChange(a)}),d.on(b,["disablepictureinpicturechanged","loadedmetadata"],function(a){return d.handlePictureInPictureEnabledChange(a)}),d.disable(),d}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)},c.handlePictureInPictureEnabledChange=function(){Na["default"].pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},c.handlePictureInPictureChange=function(a){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},c.handleClick=function(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},b}(hd);Dd.prototype.controlText_="Picture-in-Picture",mc.registerComponent("PictureInPictureToggle",Dd);var Ed=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on(b,"fullscreenchange",function(a){return d.handleFullscreenChange(a)}),!1===Na["default"][b.fsApi_.fullscreenEnabled]&&d.disable(),d}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},c.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},c.handleClick=function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},b}(hd);Ed.prototype.controlText_="Fullscreen",mc.registerComponent("FullscreenToggle",Ed);var Fd=function(a){function b(){return a.apply(this,arguments)||this}return Qa["default"](b,a),b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return b.appendChild(a.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),b},b}(mc);mc.registerComponent("VolumeLevel",Fd);var Gd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).update=Wb(Vb(Pa["default"](d),d.update),30),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},c.update=function(a,b,c,d){if(!c){var e=E(this.el_),f=E(this.player_.el()),g=a.width*b;if(!f||!e)return;var h=a.left-f.left+g,i=a.width-g+(f.right-a.right),j=e.width/2;h<j?j+=j-h:i<j&&(j=i),j<0?j=0:j>e.width&&(j=e.width),this.el_.style.right="-"+j+"px"}this.write(d+"%")},c.write=function(a){r(this.el_,a)},c.updateVolume=function(a,b,c,d,e){var f=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){f.update(a,b,c,d.toFixed(0)),e&&e()})},b}(mc);mc.registerComponent("VolumeLevelTooltip",Gd);var Hd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).update=Wb(Vb(Pa["default"](d),d.update),30),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},c.update=function(a,b,c){var d=this,e=100*b;this.getChild("volumeLevelTooltip").updateVolume(a,b,c,e,function(){c?d.el_.style.bottom=a.height*b+"px":d.el_.style.left=a.width*b+"px"})},b}(mc);Hd.prototype.options_={children:["volumeLevelTooltip"]},mc.registerComponent("MouseVolumeLevelDisplay",Hd);var Id=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on("slideractive",function(a){return d.updateLastVolume_(a)}),d.on(b,"volumechange",function(a){return d.updateARIAAttributes(a)}),b.ready(function(){return d.updateARIAAttributes()}),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},c.handleMouseDown=function(b){M(b)&&a.prototype.handleMouseDown.call(this,b)},c.handleMouseMove=function(a){var b=this.getChild("mouseVolumeLevelDisplay");if(b){var c=this.el(),d=E(c),e=this.vertical(),f=G(c,a);f=e?f.y:f.x,f=ud(f,0,1),b.update(d,f,e)}M(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))},c.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},c.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},c.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},c.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},c.updateARIAAttributes=function(a){var b=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",b),this.el_.setAttribute("aria-valuetext",b+"%")},c.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},c.updateLastVolume_=function(){var a=this,b=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(b)})},b}(vd);Id.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Eb||rb||Id.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Id.prototype.playerEvent="volumechange",mc.registerComponent("VolumeBar",Id);var Jd=function(a){function b(b,c){var d;return void 0===c&&(c={}),c.vertical=c.vertical||!1,(void 0===c.volumeBar||i(c.volumeBar))&&(c.volumeBar=c.volumeBar||{},c.volumeBar.vertical=c.vertical),d=a.call(this,b,c)||this,function(a,b){b.tech_&&!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})}(Pa["default"](d),b),d.throttledHandleMouseMove=Wb(Vb(Pa["default"](d),d.handleMouseMove),30),d.handleMouseUpHandler_=function(a){return d.handleMouseUp(a)},d.on("mousedown",function(a){return d.handleMouseDown(a)}),d.on("touchstart",function(a){return d.handleMouseDown(a)}),d.on("mousemove",function(a){return d.handleMouseMove(a)}),d.on(d.volumeBar,["focus","slideractive"],function(){d.volumeBar.addClass("vjs-slider-active"),d.addClass("vjs-slider-active"),d.trigger("slideractive")}),d.on(d.volumeBar,["blur","sliderinactive"],function(){d.volumeBar.removeClass("vjs-slider-active"),d.removeClass("vjs-slider-active"),d.trigger("sliderinactive")}),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){var b="vjs-volume-horizontal";return this.options_.vertical&&(b="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+b})},c.handleMouseDown=function(a){var b=this.el_.ownerDocument;this.on(b,"mousemove",this.throttledHandleMouseMove),this.on(b,"touchmove",this.throttledHandleMouseMove),this.on(b,"mouseup",this.handleMouseUpHandler_),this.on(b,"touchend",this.handleMouseUpHandler_)},c.handleMouseUp=function(a){var b=this.el_.ownerDocument
;this.off(b,"mousemove",this.throttledHandleMouseMove),this.off(b,"touchmove",this.throttledHandleMouseMove),this.off(b,"mouseup",this.handleMouseUpHandler_),this.off(b,"touchend",this.handleMouseUpHandler_)},c.handleMouseMove=function(a){this.volumeBar.handleMouseMove(a)},b}(mc);Jd.prototype.options_={children:["volumeBar"]},mc.registerComponent("VolumeControl",Jd);var Kd=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,function(a,b){b.tech_&&!b.tech_.featuresMuteControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})}(Pa["default"](d),b),d.on(b,["loadstart","volumechange"],function(a){return d.update(a)}),d}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){var b=this.player_.volume(),c=this.player_.lastVolume_();if(0===b){var d=c<.1?.1:c;this.player_.volume(d),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},c.update=function(a){this.updateIcon_(),this.updateControlText_()},c.updateIcon_=function(){var a=this.player_.volume(),b=3;Eb&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===a||this.player_.muted()?b=0:a<.33?b=1:a<.67&&(b=2);for(var c=0;c<4;c++)v(this.el_,"vjs-vol-"+c);u(this.el_,"vjs-vol-"+b)},c.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)},b}(hd);Kd.prototype.controlText_="Mute",mc.registerComponent("MuteToggle",Kd);var Ld=function(a){function b(b,c){var d;return void 0===c&&(c={}),void 0!==c.inline?c.inline=c.inline:c.inline=!0,(void 0===c.volumeControl||i(c.volumeControl))&&(c.volumeControl=c.volumeControl||{},c.volumeControl.vertical=!c.inline),(d=a.call(this,b,c)||this).handleKeyPressHandler_=function(a){return d.handleKeyPress(a)},d.on(b,["loadstart"],function(a){return d.volumePanelState_(a)}),d.on(d.muteToggle,"keyup",function(a){return d.handleKeyPress(a)}),d.on(d.volumeControl,"keyup",function(a){return d.handleVolumeControlKeyUp(a)}),d.on("keydown",function(a){return d.handleKeyPress(a)}),d.on("mouseover",function(a){return d.handleMouseOver(a)}),d.on("mouseout",function(a){return d.handleMouseOut(a)}),d.on(d.volumeControl,["slideractive"],d.sliderActive_),d.on(d.volumeControl,["sliderinactive"],d.sliderInactive_),d}Qa["default"](b,a);var c=b.prototype;return c.sliderActive_=function(){this.addClass("vjs-slider-active")},c.sliderInactive_=function(){this.removeClass("vjs-slider-active")},c.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},c.createEl=function(){var b="vjs-volume-panel-horizontal";return this.options_.inline||(b="vjs-volume-panel-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+b})},c.dispose=function(){this.handleMouseOut(),a.prototype.dispose.call(this)},c.handleVolumeControlKeyUp=function(a){Sa["default"].isEventKey(a,"Esc")&&this.muteToggle.focus()},c.handleMouseOver=function(a){this.addClass("vjs-hover"),T(Na["default"],"keyup",this.handleKeyPressHandler_)},c.handleMouseOut=function(a){this.removeClass("vjs-hover"),U(Na["default"],"keyup",this.handleKeyPressHandler_)},c.handleKeyPress=function(a){Sa["default"].isEventKey(a,"Esc")&&this.handleMouseOut()},b}(mc);Ld.prototype.options_={children:["muteToggle","volumeControl"]},mc.registerComponent("VolumePanel",Ld);var Md=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,c&&(d.menuButton_=c.menuButton),d.focusedChild_=-1,d.on("keydown",function(a){return d.handleKeyDown(a)}),d.boundHandleBlur_=function(a){return d.handleBlur(a)},d.boundHandleTapClick_=function(a){return d.handleTapClick(a)},d}Qa["default"](b,a);var c=b.prototype;return c.addEventListenerForItem=function(a){a instanceof mc&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))},c.removeEventListenerForItem=function(a){a instanceof mc&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))},c.removeChild=function(b){"string"==typeof b&&(b=this.getChild(b)),this.removeEventListenerForItem(b),a.prototype.removeChild.call(this,b)},c.addItem=function(a){var b=this.addChild(a);b&&this.addEventListenerForItem(b)},c.createEl=function(){var b=this.options_.contentElType||"ul";this.contentEl_=q(b,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var c=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return c.appendChild(this.contentEl_),T(c,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),c},c.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,a.prototype.dispose.call(this)},c.handleBlur=function(a){var b=a.relatedTarget||Na["default"].activeElement;if(!this.children().some(function(a){return a.el()===b})){var c=this.menuButton_;c&&c.buttonPressed_&&b!==c.el().firstChild&&c.unpressButton()}},c.handleTapClick=function(a){if(this.menuButton_){this.menuButton_.unpressButton();var b=this.children();if(!Array.isArray(b))return;var c=b.filter(function(b){return b.el()===a.target})[0];if(!c)return;"CaptionSettingsMenuItem"!==c.name()&&this.menuButton_.focus()}},c.handleKeyDown=function(a){Sa["default"].isEventKey(a,"Left")||Sa["default"].isEventKey(a,"Down")?(a.preventDefault(),a.stopPropagation(),this.stepForward()):(Sa["default"].isEventKey(a,"Right")||Sa["default"].isEventKey(a,"Up"))&&(a.preventDefault(),a.stopPropagation(),this.stepBack())},c.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1),this.focus(a)},c.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1),this.focus(a)},c.focus=function(a){void 0===a&&(a=0);var b=this.children().slice();b.length&&b[0].hasClass("vjs-menu-title")&&b.shift(),b.length>0&&(a<0?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())},b}(mc);mc.registerComponent("Menu",Md);var Nd=function(a){function b(b,c){var d;void 0===c&&(c={}),(d=a.call(this,b,c)||this).menuButton_=new hd(b,c),d.menuButton_.controlText(d.controlText_),d.menuButton_.el_.setAttribute("aria-haspopup","true");var e=hd.prototype.buildCSSClass();d.menuButton_.el_.className=d.buildCSSClass()+" "+e,d.menuButton_.removeClass("vjs-control"),d.addChild(d.menuButton_),d.update(),d.enabled_=!0;var f=function(a){return d.handleClick(a)};return d.handleMenuKeyUp_=function(a){return d.handleMenuKeyUp(a)},d.on(d.menuButton_,"tap",f),d.on(d.menuButton_,"click",f),d.on(d.menuButton_,"keydown",function(a){return d.handleKeyDown(a)}),d.on(d.menuButton_,"mouseenter",function(){d.addClass("vjs-hover"),d.menu.show(),T(Na["default"],"keyup",d.handleMenuKeyUp_)}),d.on("mouseleave",function(a){return d.handleMouseLeave(a)}),d.on("keydown",function(a){return d.handleSubmenuKeyDown(a)}),d}Qa["default"](b,a);var c=b.prototype;return c.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=a,this.addChild(a),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},c.createMenu=function(){var a=new Md(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var b=q("li",{className:"vjs-menu-title",textContent:hc(this.options_.title),tabIndex:-1}),c=new mc(this.player_,{el:b});a.addItem(c)}if(this.items=this.createItems(),this.items)for(var d=0;d<this.items.length;d++)a.addItem(this.items[d]);return a},c.createItems=function(){},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},c.buildWrapperCSSClass=function(){var b="vjs-menu-button";return"vjs-menu-button "+(b+=!0===this.options_.inline?"-inline":"-popup")+" "+hd.prototype.buildCSSClass()+" "+a.prototype.buildCSSClass.call(this)},c.buildCSSClass=function(){var b="vjs-menu-button";return"vjs-menu-button "+(b+=!0===this.options_.inline?"-inline":"-popup")+" "+a.prototype.buildCSSClass.call(this)},c.controlText=function(a,b){return void 0===b&&(b=this.menuButton_.el()),this.menuButton_.controlText(a,b)},c.dispose=function(){this.handleMouseLeave(),a.prototype.dispose.call(this)},c.handleClick=function(a){this.buttonPressed_?this.unpressButton():this.pressButton()},c.handleMouseLeave=function(a){this.removeClass("vjs-hover"),U(Na["default"],"keyup",this.handleMenuKeyUp_)},c.focus=function(){this.menuButton_.focus()},c.blur=function(){this.menuButton_.blur()},c.handleKeyDown=function(a){Sa["default"].isEventKey(a,"Esc")||Sa["default"].isEventKey(a,"Tab")?(this.buttonPressed_&&this.unpressButton(),Sa["default"].isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):(Sa["default"].isEventKey(a,"Up")||Sa["default"].isEventKey(a,"Down"))&&(this.buttonPressed_||(a.preventDefault(),this.pressButton()))},c.handleMenuKeyUp=function(a){(Sa["default"].isEventKey(a,"Esc")||Sa["default"].isEventKey(a,"Tab"))&&this.removeClass("vjs-hover")},c.handleSubmenuKeyPress=function(a){this.handleSubmenuKeyDown(a)},c.handleSubmenuKeyDown=function(a){(Sa["default"].isEventKey(a,"Esc")||Sa["default"].isEventKey(a,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Sa["default"].isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus()))},c.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Eb&&o())return;this.menu.focus()}},c.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},c.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},c.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},b}(mc);mc.registerComponent("MenuButton",Nd);var Od=function(a){function b(b,c){var d,e=c.tracks;if((d=a.call(this,b,c)||this).items.length<=1&&d.hide(),!e)return Pa["default"](d);var f=Vb(Pa["default"](d),d.update);return e.addEventListener("removetrack",f),e.addEventListener("addtrack",f),e.addEventListener("labelchange",f),d.player_.on("ready",f),d.player_.on("dispose",function(){e.removeEventListener("removetrack",f),e.removeEventListener("addtrack",f),e.removeEventListener("labelchange",f)}),d}return Qa["default"](b,a),b}(Nd);mc.registerComponent("TrackButton",Od);var Pd=["Tab","Esc","Up","Down","Right","Left"],Qd=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).selectable=c.selectable,d.isSelected_=c.selected||!1,d.multiSelectable=c.multiSelectable,d.selected(d.isSelected_),d.selectable?d.multiSelectable?d.el_.setAttribute("role","menuitemcheckbox"):d.el_.setAttribute("role","menuitemradio"):d.el_.setAttribute("role","menuitem"),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(b,c,d){this.nonIconControl=!0;var e=a.prototype.createEl.call(this,"li",f({className:"vjs-menu-item",tabIndex:-1},c),d);return e.replaceChild(q("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),e.querySelector(".vjs-icon-placeholder")),e},c.handleKeyDown=function(b){Pd.some(function(a){return Sa["default"].isEventKey(b,a)})||a.prototype.handleKeyDown.call(this,b)},c.handleClick=function(a){this.selected(!0)},c.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},b}(cd);mc.registerComponent("MenuItem",Qd);var Rd=function(a){function b(b,c){var d,e=c.track,f=b.textTracks();c.label=e.label||e.language||"Unknown",c.selected="showing"===e.mode,(d=a.call(this,b,c)||this).track=e,d.kinds=(c.kinds||[c.kind||d.track.kind]).filter(Boolean);var h,i=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];d.handleTracksChange.apply(Pa["default"](d),b)},j=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];d.handleSelectedLanguageChange.apply(Pa["default"](d),b)};return b.on(["loadstart","texttrackchange"],i),f.addEventListener("change",i),f.addEventListener("selectedlanguagechange",j),d.on("dispose",function(){b.off(["loadstart","texttrackchange"],i),f.removeEventListener("change",i),f.removeEventListener("selectedlanguagechange",j)}),void 0===f.onchange&&d.on(["tap","click"],function(){if("object"!=g(Ma["default"].Event))try{h=new Ma["default"].Event("change")}catch(a){}h||(h=Na["default"].createEvent("Event")).initEvent("change",!0,!0),f.dispatchEvent(h)}),d.handleTracksChange(),d}Qa["default"](b,a);var c=b.prototype;return c.handleClick=function(b){var c=this.track,d=this.player_.textTracks();if(a.prototype.handleClick.call(this,b),d)for(var e=0;e<d.length;e++){var f=d[e];-1!==this.kinds.indexOf(f.kind)&&(f===c?"showing"!==f.mode&&(f.mode="showing"):"disabled"!==f.mode&&(f.mode="disabled"))}},c.handleTracksChange=function(a){var b="showing"===this.track.mode;b!==this.isSelected_&&this.selected(b)},c.handleSelectedLanguageChange=function(a){if("showing"===this.track.mode){var b=this.player_.cache_.selectedLanguage;if(b&&b.enabled&&b.language===this.track.language&&b.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},c.dispose=function(){this.track=null,a.prototype.dispose.call(this)},b}(Qd);mc.registerComponent("TextTrackMenuItem",Rd);var Sd=function(a){function b(b,c){return c.track={player:b,kind:c.kind,kinds:c.kinds,"default":!1,mode:"disabled"},c.kinds||(c.kinds=[c.kind]),c.label?c.track.label=c.label:c.track.label=c.kinds.join(" and ")+" off",c.selectable=!0,c.multiSelectable=!1,a.call(this,b,c)||this}Qa["default"](b,a);var c=b.prototype;return c.handleTracksChange=function(a){for(var b=this.player().textTracks(),c=!0,d=0,e=b.length;d<e;d++){var f=b[d];if(this.options_.kinds.indexOf(f.kind)>-1&&"showing"===f.mode){c=!1;break}}c!==this.isSelected_&&this.selected(c)},c.handleSelectedLanguageChange=function(a){for(var b=this.player().textTracks(),c=!0,d=0,e=b.length;d<e;d++){var f=b[d];if(["captions","descriptions","subtitles"].indexOf(f.kind)>-1&&"showing"===f.mode){c=!1;break}}c&&(this.player_.cache_.selectedLanguage={enabled:!1})},b}(Rd);mc.registerComponent("OffTextTrackMenuItem",Sd);var Td=function(a){function b(b,c){return void 0===c&&(c={}),c.tracks=b.textTracks(),a.call(this,b,c)||this}return Qa["default"](b,a),b.prototype.createItems=function(a,b){var c;void 0===a&&(a=[]),void 0===b&&(b=Rd),this.label_&&(c=this.label_+" off"),a.push(new Sd(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c})),this.hideThreshold_+=1;var d=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var e=0;e<d.length;e++){var f=d[e];if(this.kinds_.indexOf(f.kind)>-1){var g=new b(this.player_,{track:f,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});g.addClass("vjs-"+f.kind+"-menu-item"),a.push(g)}}return a},b}(Od);mc.registerComponent("TextTrackButton",Td);var Ud=function(a){function b(b,c){var d,e=c.track,f=c.cue,g=b.currentTime();return c.selectable=!0,c.multiSelectable=!1,c.label=f.text,c.selected=f.startTime<=g&&g<f.endTime,(d=a.call(this,b,c)||this).track=e,d.cue=f,e.addEventListener("cuechange",Vb(Pa["default"](d),d.update)),d}Qa["default"](b,a);var c=b.prototype;return c.handleClick=function(b){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},c.update=function(a){var b=this.cue,c=this.player_.currentTime();this.selected(b.startTime<=c&&c<b.endTime)},b}(Qd);mc.registerComponent("ChaptersTrackMenuItem",Ud);var Vd=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)},c.update=function(b){this.track_&&(!b||"addtrack"!==b.type&&"removetrack"!==b.type)||this.setTrack(this.findChaptersTrack()),a.prototype.update.call(this)},c.setTrack=function(a){if(this.track_!==a){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=a,this.track_){this.track_.mode="hidden";var c=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);c&&c.addEventListener("load",this.updateHandler_)}}},c.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],b=a.length-1;b>=0;b--){var c=a[b];if(c.kind===this.kind_)return c}},c.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(hc(this.kind_))},c.createMenu=function(){return this.options_.title=this.getMenuCaption(),a.prototype.createMenu.call(this)},c.createItems=function(){var a=[];if(!this.track_)return a;var b=this.track_.cues;if(!b)return a;for(var c=0,d=b.length;c<d;c++){var e=b[c],f=new Ud(this.player_,{track:this.track_,cue:e});a.push(f)}return a},b}(Td);Vd.prototype.kind_="chapters",Vd.prototype.controlText_="Chapters",mc.registerComponent("ChaptersButton",Vd);var Wd=function(a){function b(b,c,d){var e;e=a.call(this,b,c,d)||this;var f=b.textTracks(),g=Vb(Pa["default"](e),e.handleTracksChange);return f.addEventListener("change",g),e.on("dispose",function(){f.removeEventListener("change",g)}),e}Qa["default"](b,a);var c=b.prototype;return c.handleTracksChange=function(a){for(var b=this.player().textTracks(),c=!1,d=0,e=b.length;d<e;d++){var f=b[d];if(f.kind!==this.kind_&&"showing"===f.mode){c=!0;break}}c?this.disable():this.enable()},c.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},b}(Td);Wd.prototype.kind_="descriptions",Wd.prototype.controlText_="Descriptions",mc.registerComponent("DescriptionsButton",Wd);var Xd=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)},b}(Td);Xd.prototype.kind_="subtitles",Xd.prototype.controlText_="Subtitles",mc.registerComponent("SubtitlesButton",Xd);var Yd=function(a){function b(b,c){var d;return c.track={player:b,kind:c.kind,label:c.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},c.selectable=!1,c.name="CaptionSettingsMenuItem",(d=a.call(this,b,c)||this).addClass("vjs-texttrack-settings"),d.controlText(", opens "+c.kind+" settings dialog"),d}return Qa["default"](b,a),b.prototype.handleClick=function(a){this.player().getChild("textTrackSettings").open()},b}(Rd);mc.registerComponent("CaptionSettingsMenuItem",Yd);var Zd=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new Yd(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,b)},b}(Td);Zd.prototype.kind_="captions",Zd.prototype.controlText_="Captions",mc.registerComponent("CaptionsButton",Zd);var $d=function(a){function b(){return a.apply(this,arguments)||this}return Qa["default"](b,a),b.prototype.createEl=function(b,c,d){var e=a.prototype.createEl.call(this,b,c,d),f=e.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(f.appendChild(q("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),f.appendChild(q("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),e},b}(Rd);mc.registerComponent("SubsCapsMenuItem",$d);var _d=function(a){function b(b,c){var d;return void 0===c&&(c={}),(d=a.call(this,b,c)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(d.player_.language_)>-1&&(d.label_="captions"),d.menuButton_.controlText(hc(d.label_)),d}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new Yd(this.player_,{kind:this.label_})),this.hideThreshold_+=1),b=a.prototype.createItems.call(this,b,$d)},b}(Td);_d.prototype.kinds_=["captions","subtitles"],_d.prototype.controlText_="Subtitles",mc.registerComponent("SubsCapsButton",_d);var ae=function(a){function b(b,c){var d,e=c.track,f=b.audioTracks();c.label=e.label||e.language||"Unknown",c.selected=e.enabled,(d=a.call(this,b,c)||this).track=e,d.addClass("vjs-"+e.kind+"-menu-item");var g=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];d.handleTracksChange.apply(Pa["default"](d),b)};return f.addEventListener("change",g),d.on("dispose",function(){f.removeEventListener("change",g)}),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(b,c,d){var e=a.prototype.createEl.call(this,b,c,d),f=e.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(f.appendChild(a.prototype.createEl.call(this,"span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),f.appendChild(a.prototype.createEl.call(this,"span",{className:"vjs-control-text",textContent:this.localize("Descriptions")}))),e},c.handleClick=function(b){a.prototype.handleClick.call(this,b),this.track.enabled=!0},c.handleTracksChange=function(a){this.selected(this.track.enabled)},b}(Qd);mc.registerComponent("AudioTrackMenuItem",ae);var be=function(a){function b(b,c){return void 0===c&&(c={}),c.tracks=b.audioTracks(),a.call(this,b,c)||this}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(a){void 0===a&&(a=[]),this.hideThreshold_=1;for(var b=this.player_.audioTracks(),c=0;c<b.length;c++){var d=b[c];a.push(new ae(this.player_,{track:d,selectable:!0,multiSelectable:!1}))}return a},b}(Od);be.prototype.controlText_="Audio Track",mc.registerComponent("AudioTrackButton",be);var ce=function(a){function b(b,c){var d,e=c.rate,f=parseFloat(e,10);return c.label=e,c.selected=f===b.playbackRate(),c.selectable=!0,c.multiSelectable=!1,(d=a.call(this,b,c)||this).label=e,d.rate=f,d.on(b,"ratechange",function(a){return d.update(a)}),d}Qa["default"](b,a);var c=b.prototype;return c.handleClick=function(b){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},c.update=function(a){this.selected(this.player().playbackRate()===this.rate)},b}(Qd);ce.prototype.contentElType="button",mc.registerComponent("PlaybackRateMenuItem",ce);var de=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).menuButton_.el_.setAttribute("aria-describedby",d.labelElId_),d.updateVisibility(),d.updateLabel(),d.on(b,"loadstart",function(a){return d.updateVisibility(a)}),d.on(b,"ratechange",function(a){return d.updateLabel(a)}),d.on(b,"playbackrateschange",function(a){return d.handlePlaybackRateschange(a)}),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=q("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),b.appendChild(this.labelEl_),b},c.dispose=function(){this.labelEl_=null,a.prototype.dispose.call(this)},c.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){for(var a=this.playbackRates(),b=[],c=a.length-1;c>=0;c--)b.push(new ce(this.player(),{rate:a[c]+"x"}));return b},c.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},c.handleClick=function(a){for(var b=this.player().playbackRate(),c=this.playbackRates(),d=c[0],e=0;e<c.length;e++)if(c[e]>b){d=c[e];break}this.player().playbackRate(d)},c.handlePlaybackRateschange=function(a){this.update()},c.playbackRates=function(){var a=this.player();return a.playbackRates&&a.playbackRates()||[]},c.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},c.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},c.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},b}(Nd);de.prototype.controlText_="Playback Rate",mc.registerComponent("PlaybackRateMenuButton",de);var ee=function(a){function b(){return a.apply(this,arguments)||this}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this)},c.createEl=function(b,c,d){return void 0===b&&(b="div"),void 0===c&&(c={}),void 0===d&&(d={}),c.className||(c.className=this.buildCSSClass()),a.prototype.createEl.call(this,b,c,d)},b}(mc);mc.registerComponent("Spacer",ee);var fe=function(a){function b(){return a.apply(this,arguments)||this}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:""})},b}(ee);mc.registerComponent("CustomControlSpacer",fe);var ge=function(a){function b(){return a.apply(this,arguments)||this}return Qa["default"](b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},b}(mc);ge.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Na["default"]&&ge.prototype.options_.children.splice(ge.prototype.options_.children.length-1,0,"pictureInPictureToggle"),mc.registerComponent("ControlBar",ge);var he=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on(b,"error",function(a){return d.open(a)}),d}Qa["default"](b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)},c.content=function(){var a=this.player().error();return a?this.localize(a.message):""},b}(rc);he.prototype.options_=Oa["default"]({},rc.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),mc.registerComponent("ErrorDisplay",he);var ie=["#000","Black"],je=["#00F","Blue"],ke=["#0FF","Cyan"],le=["#0F0","Green"],me=["#F0F","Magenta"],ne=["#F00","Red"],oe=["#FFF","White"],pe=["#FF0","Yellow"],qe=["1","Opaque"],re=["0.5","Semi-Transparent"],se=["0","Transparent"],te={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[ie,oe,ne,le,je,pe,me,ke]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[qe,re,se]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[oe,ie,ne,le,je,pe,me,ke]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(a){return"1.00"===a?null:Number(a)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[qe,re]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[se,re,qe]}};te.windowColor.options=te.backgroundColor.options;var ue=function(a){function b(b,c){var d;return c.temporary=!1,(d=a.call(this,b,c)||this).updateDisplay=d.updateDisplay.bind(Pa["default"](d)),d.fill(),d.hasBeenOpened_=d.hasBeenFilled_=!0,d.endDialog=q("p",{className:"vjs-control-text",textContent:d.localize("End of dialog window.")}),d.el().appendChild(d.endDialog),d.setDefaults(),void 0===c.persistTextTrackSettings&&(d.options_.persistTextTrackSettings=d.options_.playerOptions.persistTextTrackSettings),d.on(d.$(".vjs-done-button"),"click",function(){d.saveSettings(),d.close()}),d.on(d.$(".vjs-default-button"),"click",function(){d.setDefaults(),d.updateDisplay()}),e(te,function(a){d.on(d.$(a.selector),"change",d.updateDisplay)}),d.options_.persistTextTrackSettings&&d.restoreSettings(),d}Qa["default"](b,a);var c=b.prototype;return c.dispose=function(){this.endDialog=null,a.prototype.dispose.call(this)},c.createElSelect_=function(a,b,c){var d=this;void 0===b&&(b=""),void 0===c&&(c="label");var e=te[a],f=e.id.replace("%s",this.id_),g=[b,f].join(" ").trim();return["<"+c+' id="'+f+'" class="'+("label"===c?"vjs-label":"")+'">',this.localize(e.label),"</"+c+">",'<select aria-labelledby="'+g+'">'].concat(e.options.map(function(a){var b=f+"-"+a[1].replace(/\W+/g,"");return['<option id="'+b+'" value="'+a[0]+'" ','aria-labelledby="'+g+" "+b+'">',d.localize(a[1]),"</option>"].join("")})).concat("</select>").join("")},c.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",a),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",a),"</span>","</fieldset>"].join("")},c.createElBgColor_=function(){var a="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span>","</fieldset>"].join("")},c.createElWinColor_=function(){var a="captions-window-"+this.id_
;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span>","</fieldset>"].join("")},c.createElColors_=function(){return q("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},c.createElFont_=function(){return q("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},c.createElControls_=function(){var a=this.localize("restore all settings to the default values");return q("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},c.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},c.label=function(){return this.localize("Caption Settings Dialog")},c.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},c.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},c.getValues=function(){var a,b,c,d=this;return b=function(a,b,c){var e,f,g=(e=d.$(b.selector),f=b.parser,na(e.options[e.options.selectedIndex].value,f));return void 0!==g&&(a[c]=g),a},void 0===(c={})&&(c=0),lb(a=te).reduce(function(c,d){return b(c,a[d],d)},c)},c.setValues=function(a){var b=this;e(te,function(c,d){!function(a,b,c){if(b)for(var d=0;d<a.options.length;d++)if(na(a.options[d].value,c)===b){a.selectedIndex=d;break}}(b.$(c.selector),a[d],c.parser)})},c.setDefaults=function(){var a=this;e(te,function(b){var c=b.hasOwnProperty("default")?b["default"]:0;a.$(b.selector).selectedIndex=c})},c.restoreSettings=function(){var a;try{a=JSON.parse(Ma["default"].localStorage.getItem("vjs-text-track-settings"))}catch(a){ib.warn(a)}a&&this.setValues(a)},c.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?Ma["default"].localStorage.setItem("vjs-text-track-settings",JSON.stringify(a)):Ma["default"].localStorage.removeItem("vjs-text-track-settings")}catch(a){ib.warn(a)}}},c.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()},c.conditionalBlur_=function(){this.previouslyActiveEl_=null;var a=this.player_.controlBar,b=a&&a.subsCapsButton,c=a&&a.captionsButton;b?b.focus():c&&c.focus()},b}(rc);mc.registerComponent("TextTrackSettings",ue);var ve=function(a){function b(b,c){var d,e=c.ResizeObserver||Ma["default"].ResizeObserver;null===c.ResizeObserver&&(e=!1);var f=$({createEl:!e,reportTouchActivity:!1},c);return(d=a.call(this,b,f)||this).ResizeObserver=c.ResizeObserver||Ma["default"].ResizeObserver,d.loadListener_=null,d.resizeObserver_=null,d.debouncedHandler_=function(a,b,c,d){var e;void 0===d&&(d=Ma["default"]);var f=function(){var b=this,c=arguments,f=function(){e=null,f=null,a.apply(b,c)};!e&&!1&&a.apply(b,c),d.clearTimeout(e),e=d.setTimeout(f,100)};return f.cancel=function(){d.clearTimeout(e),e=null},f}(function(){d.resizeHandler()},0,0,Pa["default"](d)),e?(d.resizeObserver_=new d.ResizeObserver(d.debouncedHandler_),d.resizeObserver_.observe(b.el())):(d.loadListener_=function(){if(d.el_&&d.el_.contentWindow){var a=d.debouncedHandler_,b=d.unloadListener_=function(){U(this,"resize",a),U(this,"unload",b),b=null};T(d.el_.contentWindow,"unload",b),T(d.el_.contentWindow,"resize",a)}},d.one("load",d.loadListener_)),d}Qa["default"](b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},c.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},c.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,a.prototype.dispose.call(this)},b}(mc);mc.registerComponent("ResizeManager",ve);var we={trackingThreshold:30,liveTolerance:15},xe=function(a){function b(b,c){var d,e=$(we,c,{createEl:!1});return(d=a.call(this,b,e)||this).handleVisibilityChange_=function(a){return d.handleVisibilityChange(a)},d.trackLiveHandler_=function(){return d.trackLive_()},d.handlePlay_=function(a){return d.handlePlay(a)},d.handleFirstTimeupdate_=function(a){return d.handleFirstTimeupdate(a)},d.handleSeeked_=function(a){return d.handleSeeked(a)},d.seekToLiveEdge_=function(a){return d.seekToLiveEdge(a)},d.reset_(),d.on(d.player_,"durationchange",function(a){return d.handleDurationchange(a)}),d.one(d.player_,"canplay",function(){return d.toggleTracking()}),yb&&"hidden"in Na["default"]&&"visibilityState"in Na["default"]&&d.on(Na["default"],"visibilitychange",d.handleVisibilityChange_),d}Qa["default"](b,a);var c=b.prototype;return c.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Na["default"].hidden?this.stopTracking():this.startTracking())},c.trackLive_=function(){var a=this.player_.seekable();if(a&&a.length){var b=Number(Ma["default"].performance.now().toFixed(4)),c=-1===this.lastTime_?0:(b-this.lastTime_)/1e3;this.lastTime_=b,this.pastSeekEnd_=this.pastSeekEnd()+c;var d=this.liveCurrentTime(),e=this.player_.currentTime(),f=this.player_.paused()||this.seekedBehindLive_||Math.abs(d-e)>this.options_.liveTolerance;this.timeupdateSeen_&&d!==1/0||(f=!1),f!==this.behindLiveEdge_&&(this.behindLiveEdge_=f,this.trigger("liveedgechange"))}},c.handleDurationchange=function(){this.toggleTracking()},c.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},c.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},c.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},c.handleSeeked=function(){var a=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&a>2,this.nextSeekedFromUser_=!1,this.trackLive_()},c.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},c.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},c.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},c.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},c.seekableEnd=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.end(c));return b.length?b.sort()[b.length-1]:1/0},c.seekableStart=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.start(c));return b.length?b.sort()[0]:0},c.liveWindow=function(){var a=this.liveCurrentTime();return a===1/0?0:a-this.seekableStart()},c.isLive=function(){return this.isTracking()},c.atLiveEdge=function(){return!this.behindLiveEdge()},c.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},c.pastSeekEnd=function(){var a=this.seekableEnd();return-1!==this.lastSeekEnd_&&a!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=a,this.pastSeekEnd_},c.behindLiveEdge=function(){return this.behindLiveEdge_},c.isTracking=function(){return"number"==typeof this.trackingInterval_},c.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},c.dispose=function(){this.off(Na["default"],"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),a.prototype.dispose.call(this)},b}(mc);mc.registerComponent("LiveTracker",xe);var ye,ze=function(a){var b=a.el();if(b.hasAttribute("src"))return a.triggerSourceset(b.src),!0;var c=a.$$("source"),d=[],e="";if(!c.length)return!1;for(var f=0;f<c.length;f++){var g=c[f].src;g&&-1===d.indexOf(g)&&d.push(g)}return!!d.length&&(1===d.length&&(e=d[0]),a.triggerSourceset(e),!0)},Ae=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(a){var b=Na["default"].createElement(this.nodeName.toLowerCase());b.innerHTML=a;for(var c=Na["default"].createDocumentFragment();b.childNodes.length;)c.appendChild(b.childNodes[0]);return this.innerText="",Ma["default"].Element.prototype.appendChild.call(this,c),this.innerHTML}}),Be=function(a,b){for(var c={},d=0;d<a.length&&!((c=Object.getOwnPropertyDescriptor(a[d],b))&&c.set&&c.get);d++);return c.enumerable=!0,c.configurable=!0,c},Ce=function(a){var b=a.el();if(!b.resetSourceWatch_){var c={},d=function(a){return Be([a.el(),Ma["default"].HTMLMediaElement.prototype,Ma["default"].Element.prototype,Ae],"innerHTML")}(a),e=function(c){return function(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=c.apply(b,e);return ze(a),g}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){b[a]&&(c[a]=b[a],b[a]=e(c[a]))}),Object.defineProperty(b,"innerHTML",$(d,{set:e(d.set)})),b.resetSourceWatch_=function(){b.resetSourceWatch_=null,Object.keys(c).forEach(function(a){b[a]=c[a]}),Object.defineProperty(b,"innerHTML",d)},a.one("sourceset",b.resetSourceWatch_)}},De=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Hc(Ma["default"].Element.prototype.getAttribute.call(this,"src")):""},set:function(a){return Ma["default"].Element.prototype.setAttribute.call(this,"src",a),a}}),Ee=function(a){if(a.featuresSourceset){var b=a.el();if(!b.resetSourceset_){var c=function(a){return Be([a.el(),Ma["default"].HTMLMediaElement.prototype,De],"src")}(a),d=b.setAttribute,e=b.load;Object.defineProperty(b,"src",$(c,{set:function(d){var e=c.set.call(b,d);return a.triggerSourceset(b.src),e}})),b.setAttribute=function(c,e){var f=d.call(b,c,e);return/src/i.test(c)&&a.triggerSourceset(b.src),f},b.load=function(){var c=e.call(b);return ze(a)||(a.triggerSourceset(""),Ce(a)),c},b.currentSrc?a.triggerSourceset(b.currentSrc):ze(a)||Ce(a),b.resetSourceset_=function(){b.resetSourceset_=null,b.load=e,b.setAttribute=d,Object.defineProperty(b,"src",c),b.resetSourceWatch_&&b.resetSourceWatch_()}}}},Fe=function(a,b,c,d){void 0===d&&(d=!0);var e=function(c){return Object.defineProperty(a,b,{value:c,enumerable:!0,writable:!0})},f={configurable:!0,enumerable:!0,get:function(){var a=c();return e(a),a}};return d&&(f.set=e),Object.defineProperty(a,b,f)},Ge=function(a){function b(b,c){var d;d=a.call(this,b,c)||this;var e=b.source,f=!1;if(e&&(d.el_.currentSrc!==e.src||b.tag&&3===b.tag.initNetworkState_)?d.setSource(e):d.handleLateInit_(d.el_),b.enableSourceset&&d.setupSourcesetHandling_(),d.isScrubbing_=!1,d.el_.hasChildNodes()){for(var g=d.el_.childNodes,h=g.length,i=[];h--;){var j=g[h];"track"===j.nodeName.toLowerCase()&&(d.featuresNativeTextTracks?(d.remoteTextTrackEls().addTrackElement_(j),d.remoteTextTracks().addTrack(j.track),d.textTracks().addTrack(j.track),f||d.el_.hasAttribute("crossorigin")||!Jc(j.src)||(f=!0)):i.push(j))}for(var k=0;k<i.length;k++)d.el_.removeChild(i[k])}return d.proxyNativeTracks_(),d.featuresNativeTextTracks&&f&&ib.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),d.restoreMetadataTracksInIOSNativePlayer_(),(Bb||Db||tb)&&!0===b.nativeControlsForTouch&&d.setControls(!0),d.proxyWebkitFullscreen_(),d.triggerReady(),d}Qa["default"](b,a);var c=b.prototype;return c.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),b.disposeMediaElement(this.el_),this.options_=null,a.prototype.dispose.call(this)},c.setupSourcesetHandling_=function(){Ee(this)},c.restoreMetadataTracksInIOSNativePlayer_=function(){var a,b=this.textTracks(),c=function(){a=[];for(var c=0;c<b.length;c++){var d=b[c];"metadata"===d.kind&&a.push({track:d,storedMode:d.mode})}};c(),b.addEventListener("change",c),this.on("dispose",function(){return b.removeEventListener("change",c)});var d=function e(){for(var c=0;c<a.length;c++){var d=a[c];"disabled"===d.track.mode&&d.track.mode!==d.storedMode&&(d.track.mode=d.storedMode)}b.removeEventListener("change",e)};this.on("webkitbeginfullscreen",function(){b.removeEventListener("change",c),b.removeEventListener("change",d),b.addEventListener("change",d)}),this.on("webkitendfullscreen",function(){b.removeEventListener("change",c),b.addEventListener("change",c),b.removeEventListener("change",d)})},c.overrideNative_=function(a,b){var c=this;if(b===this["featuresNative"+a+"Tracks"]){var d=a.toLowerCase();this[d+"TracksListeners_"]&&Object.keys(this[d+"TracksListeners_"]).forEach(function(a){c.el()[d+"Tracks"].removeEventListener(a,c[d+"TracksListeners_"][a])}),this["featuresNative"+a+"Tracks"]=!b,this[d+"TracksListeners_"]=null,this.proxyNativeTracksForType_(d)}},c.overrideNativeAudioTracks=function(a){this.overrideNative_("Audio",a)},c.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)},c.proxyNativeTracksForType_=function(a){var b=this,c=Rc[a],d=this.el()[c.getterName],e=this[c.getterName]();if(this["featuresNative"+c.capitalName+"Tracks"]&&d&&d.addEventListener){var f={change:function(c){var d={type:"change",target:e,currentTarget:e,srcElement:e};e.trigger(d),"text"===a&&b[Sc.remoteText.getterName]().trigger(d)},addtrack:function(a){e.addTrack(a.track)},removetrack:function(a){e.removeTrack(a.track)}},g=function(){for(var a=[],b=0;b<e.length;b++){for(var c=!1,f=0;f<d.length;f++)if(d[f]===e[b]){c=!0;break}c||a.push(e[b])}for(;a.length;)e.removeTrack(a.shift())};this[c.getterName+"Listeners_"]=f,Object.keys(f).forEach(function(a){var c=f[a];d.addEventListener(a,c),b.on("dispose",function(b){return d.removeEventListener(a,c)})}),this.on("loadstart",g),this.on("dispose",function(a){return b.off("loadstart",g)})}},c.proxyNativeTracks_=function(){var a=this;Rc.names.forEach(function(b){a.proxyNativeTracksForType_(b)})},c.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var c=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(c,a),b.disposeMediaElement(a),a=c}else{a=Na["default"].createElement("video");var d=$({},this.options_.tag&&y(this.options_.tag));Bb&&!0===this.options_.nativeControlsForTouch||delete d.controls,x(a,f(d,{id:this.options_.techId,"class":"vjs-tech"}))}a.playerId=this.options_.playerId}void 0!==this.options_.preload&&A(a,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(a.disablePictureInPicture=this.options_.disablePictureInPicture);for(var e=["loop","muted","playsinline","autoplay"],g=0;g<e.length;g++){var h=e[g],i=this.options_[h];void 0!==i&&(i?A(a,h,h):B(a,h),a[h]=i)}return a},c.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState){if(0===a.readyState){var b=!1,c=function(){b=!0};this.on("loadstart",c);var d=function(){b||this.trigger("loadstart")};return this.on("loadedmetadata",d),void this.ready(function(){this.off("loadstart",c),this.off("loadedmetadata",d),b||this.trigger("loadstart")})}var e=["loadstart"];e.push("loadedmetadata"),a.readyState>=2&&e.push("loadeddata"),a.readyState>=3&&e.push("canplay"),a.readyState>=4&&e.push("canplaythrough"),this.ready(function(){e.forEach(function(a){this.trigger(a)},this)})}},c.setScrubbing=function(a){this.isScrubbing_=a},c.scrubbing=function(){return this.isScrubbing_},c.setCurrentTime=function(a){try{this.isScrubbing_&&this.el_.fastSeek&&Fb?this.el_.fastSeek(a):this.el_.currentTime=a}catch(a){ib(a,"Video is not ready. (Video.js)")}},c.duration=function(){var a=this;return this.el_.duration===1/0&&rb&&wb&&0===this.el_.currentTime?(this.on("timeupdate",function b(){a.el_.currentTime>0&&(a.el_.duration===1/0&&a.trigger("durationchange"),a.off("timeupdate",b))}),NaN):this.el_.duration||NaN},c.width=function(){return this.el_.offsetWidth},c.height=function(){return this.el_.offsetHeight},c.proxyWebkitFullscreen_=function(){var a=this;if("webkitDisplayingFullscreen"in this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},c=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",c),this.on("dispose",function(){a.off("webkitbeginfullscreen",c),a.off("webkitendfullscreen",b)})}},c.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var a=Ma["default"].navigator&&Ma["default"].navigator.userAgent||"";if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1},c.enterFullScreen=function(){var a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA)fa(this.el_.play()),this.setTimeout(function(){a.pause();try{a.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{a.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},c.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},c.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},c.src=function(a){return void 0===a?this.el_.src:void this.setSrc(a)},c.reset=function(){b.resetMediaElement(this.el_)},c.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},c.setControls=function(a){this.el_.controls=!!a},c.addTextTrack=function(b,c,d){return this.featuresNativeTextTracks?this.el_.addTextTrack(b,c,d):a.prototype.addTextTrack.call(this,b,c,d)},c.createRemoteTextTrack=function(b){if(!this.featuresNativeTextTracks)return a.prototype.createRemoteTextTrack.call(this,b);var c=Na["default"].createElement("track");return b.kind&&(c.kind=b.kind),b.label&&(c.label=b.label),(b.language||b.srclang)&&(c.srclang=b.language||b.srclang),b["default"]&&(c["default"]=b["default"]),b.id&&(c.id=b.id),b.src&&(c.src=b.src),c},c.addRemoteTextTrack=function(b,c){var d=a.prototype.addRemoteTextTrack.call(this,b,c);return this.featuresNativeTextTracks&&this.el().appendChild(d),d},c.removeRemoteTextTrack=function(b){if(a.prototype.removeRemoteTextTrack.call(this,b),this.featuresNativeTextTracks)for(var c=this.$$("track"),d=c.length;d--;)b!==c[d]&&b!==c[d].track||this.el().removeChild(c[d])},c.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var a={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount),Ma["default"].performance&&"function"==typeof Ma["default"].performance.now?a.creationTime=Ma["default"].performance.now():Ma["default"].performance&&Ma["default"].performance.timing&&"number"==typeof Ma["default"].performance.timing.navigationStart&&(a.creationTime=Ma["default"].Date.now()-Ma["default"].performance.timing.navigationStart),a},b}(Uc);Fe(Ge,"TEST_VID",function(){if(m()){var a=Na["default"].createElement("video"),b=Na["default"].createElement("track");return b.kind="captions",b.srclang="en",b.label="English",a.appendChild(b),a}}),Ge.isSupported=function(){try{Ge.TEST_VID.volume=.5}catch(a){return!1}return!(!Ge.TEST_VID||!Ge.TEST_VID.canPlayType)},Ge.canPlayType=function(a){return Ge.TEST_VID.canPlayType(a)},Ge.canPlaySource=function(a,b){return Ge.canPlayType(a.type)},Ge.canControlVolume=function(){try{var a=Ge.TEST_VID.volume;return Ge.TEST_VID.volume=a/2+.1,a!==Ge.TEST_VID.volume}catch(a){return!1}},Ge.canMuteVolume=function(){try{var a=Ge.TEST_VID.muted;return Ge.TEST_VID.muted=!a,Ge.TEST_VID.muted?A(Ge.TEST_VID,"muted","muted"):B(Ge.TEST_VID,"muted"),a!==Ge.TEST_VID.muted}catch(a){return!1}},Ge.canControlPlaybackRate=function(){if(rb&&wb&&xb<58)return!1;try{var a=Ge.TEST_VID.playbackRate;return Ge.TEST_VID.playbackRate=a/2+.1,a!==Ge.TEST_VID.playbackRate}catch(a){return!1}},Ge.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(Na["default"].createElement("video"),"src",{get:a,set:a}),Object.defineProperty(Na["default"].createElement("audio"),"src",{get:a,set:a}),Object.defineProperty(Na["default"].createElement("video"),"innerHTML",{get:a,set:a}),Object.defineProperty(Na["default"].createElement("audio"),"innerHTML",{get:a,set:a})}catch(a){return!1}return!0},Ge.supportsNativeTextTracks=function(){return Fb||Eb&&wb},Ge.supportsNativeVideoTracks=function(){return!(!Ge.TEST_VID||!Ge.TEST_VID.videoTracks)},Ge.supportsNativeAudioTracks=function(){return!(!Ge.TEST_VID||!Ge.TEST_VID.audioTracks)},Ge.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(a){var b=a[0],c=a[1];Fe(Ge.prototype,b,function(){return Ge[c]()},!0)}),Ge.prototype.movingMediaElementInDOM=!Eb,Ge.prototype.featuresFullscreenResize=!0,Ge.prototype.featuresProgressEvents=!0,Ge.prototype.featuresTimeupdateEvents=!0,Ge.patchCanPlayType=function(){sb>=4&&!ub&&!wb&&(ye=Ge.TEST_VID&&Ge.TEST_VID.constructor.prototype.canPlayType,Ge.TEST_VID.constructor.prototype.canPlayType=function(a){return a&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(a)?"maybe":ye.call(this,a)})},Ge.unpatchCanPlayType=function(){var a=Ge.TEST_VID.constructor.prototype.canPlayType;return ye&&(Ge.TEST_VID.constructor.prototype.canPlayType=ye),a},Ge.patchCanPlayType(),Ge.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),"function"==typeof a.load&&function(){try{a.load()}catch(a){}}()}},Ge.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src"),"function"==typeof a.load&&function(){try{a.load()}catch(a){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(a){Ge.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){Ge.prototype["set"+hc(a)]=function(b){this.el_[a]=b,b?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(a){Ge.prototype[a]=function(){return this.el_[a]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(a){Ge.prototype["set"+hc(a)]=function(b){this.el_[a]=b}}),["pause","load","play"].forEach(function(a){Ge.prototype[a]=function(){return this.el_[a]()}}),Uc.withSourceHandlers(Ge),Ge.nativeSourceHandler={},Ge.nativeSourceHandler.canPlayType=function(a){try{return Ge.TEST_VID.canPlayType(a)}catch(a){return""}},Ge.nativeSourceHandler.canHandleSource=function(a,b){if(a.type)return Ge.nativeSourceHandler.canPlayType(a.type);if(a.src){var c=Ic(a.src);return Ge.nativeSourceHandler.canPlayType("video/"+c)}return""},Ge.nativeSourceHandler.handleSource=function(a,b,c){b.setSrc(a.src)},Ge.nativeSourceHandler.dispose=function(){},Ge.registerSourceHandler(Ge.nativeSourceHandler),Uc.registerTech("Html5",Ge);var He=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Ie={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Je=["tiny","xsmall","small","medium","large","xlarge","huge"],Ke={};Je.forEach(function(a){var b="x"===a.charAt(0)?"x-"+a.substring(1):a;Ke[a]="vjs-layout-"+b});var Le={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Me=function(a){function b(c,d,e){var g;if(c.id=c.id||d.id||"vjs_video_"+P(),(d=f(b.getTagSettings(c),d)).initChildren=!1,d.createEl=!1,d.evented=!1,d.reportTouchActivity=!1,!d.language)if("function"==typeof c.closest){var h=c.closest("[lang]");h&&h.getAttribute&&(d.language=h.getAttribute("lang"))}else for(var i=c;i&&1===i.nodeType;){if(y(i).hasOwnProperty("lang")){d.language=i.getAttribute("lang");break}i=i.parentNode}if((g=a.call(this,null,d,e)||this).boundDocumentFullscreenChange_=function(a){return g.documentFullscreenChange_(a)},g.boundFullWindowOnEscKey_=function(a){return g.fullWindowOnEscKey(a)},g.boundUpdateStyleEl_=function(a){return g.updateStyleEl_(a)},g.boundApplyInitTime_=function(a){return g.applyInitTime_(a)},g.boundUpdateCurrentBreakpoint_=function(a){return g.updateCurrentBreakpoint_(a)},g.boundHandleTechClick_=function(a){return g.handleTechClick_(a)},g.boundHandleTechDoubleClick_=function(a){return g.handleTechDoubleClick_(a)},g.boundHandleTechTouchStart_=function(a){return g.handleTechTouchStart_(a)},g.boundHandleTechTouchMove_=function(a){return g.handleTechTouchMove_(a)},g.boundHandleTechTouchEnd_=function(a){return g.handleTechTouchEnd_(a)},g.boundHandleTechTap_=function(a){return g.handleTechTap_(a)},g.isFullscreen_=!1,g.log=jb(g.id_),g.fsApi_=ab,g.isPosterFromTech_=!1,g.queuedCallbacks_=[],g.isReady_=!1,g.hasStarted_=!1,g.userActive_=!1,g.debugEnabled_=!1,!g.options_||!g.options_.techOrder||!g.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(g.tag=c,g.tagAttributes=c&&y(c),g.language(g.options_.language),d.languages){var j={};Object.getOwnPropertyNames(d.languages).forEach(function(a){j[a.toLowerCase()]=d.languages[a]}),g.languages_=j}else g.languages_=b.prototype.options_.languages;g.resetCache_(),g.poster_=d.poster||"",g.controls_=!!d.controls,c.controls=!1,c.removeAttribute("controls"),g.changingSrc_=!1,g.playCallbacks_=[],g.playTerminatedQueue_=[],c.hasAttribute("autoplay")?g.autoplay(!0):g.autoplay(g.options_.autoplay),d.plugins&&Object.keys(d.plugins).forEach(function(a){if("function"!=typeof g[a])throw new Error('plugin "'+a+'" does not exist')}),g.scrubbing_=!1,g.el_=g.createEl(),Y(Pa["default"](g),{eventBusKey:"el_"}),g.fsApi_.requestFullscreen&&(T(Na["default"],g.fsApi_.fullscreenchange,g.boundDocumentFullscreenChange_),g.on(g.fsApi_.fullscreenchange,g.boundDocumentFullscreenChange_)),g.fluid_&&g.on(["playerreset","resize"],g.boundUpdateStyleEl_);var k=$(g.options_);d.plugins&&Object.keys(d.plugins).forEach(function(a){g[a](d.plugins[a])}),d.debug&&g.debug(!0),g.options_.playerOptions=k,g.middleware_=[],g.playbackRates(d.playbackRates),g.initChildren(),g.isAudio("audio"===c.nodeName.toLowerCase()),g.controls()?g.addClass("vjs-controls-enabled"):g.addClass("vjs-controls-disabled"),g.el_.setAttribute("role","region"),g.isAudio()?g.el_.setAttribute("aria-label",g.localize("Audio Player")):g.el_.setAttribute("aria-label",g.localize("Video Player")),g.isAudio()&&g.addClass("vjs-audio"),g.flexNotSupported_()&&g.addClass("vjs-no-flex"),Bb&&g.addClass("vjs-touch-enabled"),Eb||g.addClass("vjs-workinghover"),b.players[g.id_]=Pa["default"](g);var l="7.15.4".split(".")[0];return g.addClass("vjs-v"+l),g.userActive(!0),g.reportUserActivity(),g.one("play",function(a){return g.listenForUserActivity_(a)}),g.on("stageclick",function(a){return g.handleStageClick_(a)}),g.on("keydown",function(a){return g.handleKeyDown(a)}),g.on("languagechange",function(a){return g.handleLanguagechange(a)}),g.breakpoints(g.options_.breakpoints),g.responsive(g.options_.responsive),g}Qa["default"](b,a);var c=b.prototype;return c.dispose=function(){var c=this;this.trigger("dispose"),this.off("dispose"),U(Na["default"],this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),U(Na["default"],"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),b.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Wc[this.id()]=null,Tc.names.forEach(function(a){var b=Tc[a],d=c[b.getterName]();d&&d.off&&d.off()}),a.prototype.dispose.call(this)},c.createEl=function(){var b,c=this.tag,d=this.playerElIngest_=c.parentNode&&c.parentNode.hasAttribute&&c.parentNode.hasAttribute("data-vjs-player"),e="video-js"===this.tag.tagName.toLowerCase();d?b=this.el_=c.parentNode:e||(b=this.el_=a.prototype.createEl.call(this,"div"));var f=y(c);if(e){for(b=this.el_=c,c=this.tag=Na["default"].createElement("video");b.children.length;)c.appendChild(b.firstChild);t(b,"video-js")||u(b,"video-js"),b.appendChild(c),d=this.playerElIngest_=b,Object.keys(b).forEach(function(a){try{c[a]=b[a]}catch(a){}})}if(c.setAttribute("tabindex","-1"),f.tabindex="-1",(yb||wb&&Ab)&&(c.setAttribute("role","application"),f.role="application"),c.removeAttribute("width"),c.removeAttribute("height"),"width"in f&&delete f.width,"height"in f&&delete f.height,Object.getOwnPropertyNames(f).forEach(function(a){e&&"class"===a||b.setAttribute(a,f[a]),e&&c.setAttribute(a,f[a])}),c.playerId=c.id,c.id+="_html5_api",c.className="vjs-tech",c.player=b.player=this,this.addClass("vjs-paused"),!0!==Ma["default"].VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Nb("vjs-styles-dimensions");var g=Hb(".vjs-styles-defaults"),h=Hb("head");h.insertBefore(this.styleEl_,g?g.nextSibling:h.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var i=c.getElementsByTagName("a"),j=0;j<i.length;j++){
var k=i.item(j);u(k,"vjs-hidden"),k.setAttribute("hidden","hidden")}return c.initNetworkState_=c.networkState,c.parentNode&&!d&&c.parentNode.insertBefore(b,c),s(c,b),this.children_.unshift(c),this.el_.setAttribute("lang",this.language_),this.el_=b,b},c.crossOrigin=function(a){return a?void("anonymous"===a||"use-credentials"===a?this.techCall_("setCrossOrigin",a):ib.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+a+'"')):this.techGet_("crossOrigin")},c.width=function(a){return this.dimension("width",a)},c.height=function(a){return this.dimension("height",a)},c.dimension=function(a,b){var c=a+"_";if(void 0===b)return this[c]||0;if(""===b||"auto"===b)return this[c]=void 0,void this.updateStyleEl_();var d=parseFloat(b);isNaN(d)?ib.error('Improper value "'+b+'" supplied for for '+a):(this[c]=d,this.updateStyleEl_())},c.fluid=function(a){var b,c,d=this;return void 0===a?!!this.fluid_:(this.fluid_=!!a,Zb(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),a?(this.addClass("vjs-fluid"),this.fill(!1),c=function(){d.on(["playerreset","resize"],d.boundUpdateStyleEl_)},Zb(b=this)?c():(b.eventedCallbacks||(b.eventedCallbacks=[]),b.eventedCallbacks.push(c))):this.removeClass("vjs-fluid"),void this.updateStyleEl_())},c.fill=function(a){return void 0===a?!!this.fill_:(this.fill_=!!a,void(a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")))},c.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(a))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a,this.fluid(!0),this.updateStyleEl_()},c.updateStyleEl_=function(){if(!0!==Ma["default"].VIDEOJS_NO_DYNAMIC_STYLE){var a,b,c,d=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),e=d[1]/d[0];a=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/e:this.videoWidth()||300,b=void 0!==this.height_?this.height_:a*e,c=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(c),Ob(this.styleEl_,"\n      ."+c+" {\n        width: "+a+"px;\n        height: "+b+"px;\n      }\n\n      ."+c+".vjs-fluid {\n        padding-top: "+100*e+"%;\n      }\n    ")}else{var f="number"==typeof this.width_?this.width_:this.options_.width,g="number"==typeof this.height_?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(f>=0&&(h.width=f),g>=0&&(h.height=g))}},c.loadTech_=function(a,b){var c=this;this.tech_&&this.unloadTech_();var d=hc(a),e=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==d&&this.tag&&(Uc.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=d,this.isReady_=!1;var g=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(g=!1);var h={source:b,autoplay:g,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+e+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Tc.names.forEach(function(a){var b=Tc[a];h[b.getterName]=c[b.privateName]}),f(h,this.options_[d]),f(h,this.options_[e]),f(h,this.options_[a.toLowerCase()]),this.tag&&(h.tag=this.tag),b&&b.src===this.cache_.src&&this.cache_.currentTime>0&&(h.startTime=this.cache_.currentTime);var i=Uc.getTech(a);if(!i)throw new Error("No Tech named '"+d+"' exists! '"+d+"' should be registered using videojs.registerTech()'");this.tech_=new i(h),this.tech_.ready(Vb(this,this.handleTechReady_),!0),qc(this.textTracksJson_||[],this.tech_),He.forEach(function(a){c.on(c.tech_,a,function(b){return c["handleTech"+hc(a)+"_"](b)})}),Object.keys(Ie).forEach(function(a){c.on(c.tech_,a,function(b){0===c.tech_.playbackRate()&&c.tech_.seeking()?c.queuedCallbacks_.push({callback:c["handleTech"+Ie[a]+"_"].bind(c),event:b}):c["handleTech"+Ie[a]+"_"](b)})}),this.on(this.tech_,"loadstart",function(a){return c.handleTechLoadStart_(a)}),this.on(this.tech_,"sourceset",function(a){return c.handleTechSourceset_(a)}),this.on(this.tech_,"waiting",function(a){return c.handleTechWaiting_(a)}),this.on(this.tech_,"ended",function(a){return c.handleTechEnded_(a)}),this.on(this.tech_,"seeking",function(a){return c.handleTechSeeking_(a)}),this.on(this.tech_,"play",function(a){return c.handleTechPlay_(a)}),this.on(this.tech_,"firstplay",function(a){return c.handleTechFirstPlay_(a)}),this.on(this.tech_,"pause",function(a){return c.handleTechPause_(a)}),this.on(this.tech_,"durationchange",function(a){return c.handleTechDurationChange_(a)}),this.on(this.tech_,"fullscreenchange",function(a,b){return c.handleTechFullscreenChange_(a,b)}),this.on(this.tech_,"fullscreenerror",function(a,b){return c.handleTechFullscreenError_(a,b)}),this.on(this.tech_,"enterpictureinpicture",function(a){return c.handleTechEnterPictureInPicture_(a)}),this.on(this.tech_,"leavepictureinpicture",function(a){return c.handleTechLeavePictureInPicture_(a)}),this.on(this.tech_,"error",function(a){return c.handleTechError_(a)}),this.on(this.tech_,"posterchange",function(a){return c.handleTechPosterChange_(a)}),this.on(this.tech_,"textdata",function(a){return c.handleTechTextData_(a)}),this.on(this.tech_,"ratechange",function(a){return c.handleTechRateChange_(a)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===d&&this.tag||s(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},c.unloadTech_=function(){var a=this;Tc.names.forEach(function(b){var c=Tc[b];a[c.privateName]=a[c.getterName]()}),this.textTracksJson_=pc(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},c.tech=function(a){return void 0===a&&ib.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},c.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},c.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},c.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},c.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},c.manualAutoplay_=function(a){var b=this;if(this.tech_&&"string"==typeof a){var c,d=function(){var a=b.muted();b.muted(!0);var c=function(){b.muted(a)};b.playTerminatedQueue_.push(c);var d=b.play();if(ea(d))return d["catch"](function(a){throw c(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(a||""))})};if("any"!==a||this.muted()?c="muted"!==a||this.muted()?this.play():d():ea(c=this.play())&&(c=c["catch"](d)),ea(c))return c.then(function(){b.trigger({type:"autoplay-success",autoplay:a})})["catch"](function(){b.trigger({type:"autoplay-failure",autoplay:a})})}},c.updateSourceCaches_=function(a){void 0===a&&(a="");var b=a,c="";"string"!=typeof b&&(b=a.src,c=a.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],b&&!c&&(c=function(a,b){if(!b)return"";if(a.cache_.source.src===b&&a.cache_.source.type)return a.cache_.source.type;var c=a.cache_.sources.filter(function(a){return a.src===b});if(c.length)return c[0].type;for(var d=a.$$("source"),e=0;e<d.length;e++){var f=d[e];if(f.type&&f.src&&f.src===b)return f.type}return ad(b)}(this,b)),this.cache_.source=$({},a,{src:b,type:c});for(var d=this.cache_.sources.filter(function(a){return a.src&&a.src===b}),e=[],f=this.$$("source"),g=[],h=0;h<f.length;h++){var i=y(f[h]);e.push(i),i.src&&i.src===b&&g.push(i.src)}g.length&&!d.length?this.cache_.sources=e:d.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=b},c.handleTechSourceset_=function(a){var b=this;if(!this.changingSrc_){var c=function(a){return b.updateSourceCaches_(a)},d=this.currentSource().src,e=a.src;d&&!/^blob:/.test(d)&&/^blob:/.test(e)&&(!this.lastSource_||this.lastSource_.tech!==e&&this.lastSource_.player!==d)&&(c=function(){}),c(e),a.src||this.tech_.any(["sourceset","loadstart"],function(a){if("sourceset"!==a.type){var c=b.techGet("currentSrc");b.lastSource_.tech=c,b.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:a.src},this.trigger({src:a.src,type:"sourceset"})},c.hasStarted=function(a){return void 0===a?this.hasStarted_:void(a!==this.hasStarted_&&(this.hasStarted_=a,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")))},c.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},c.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},c.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting"),this.trigger("waiting");var b=this.currentTime();this.on("timeupdate",function c(){b!==a.currentTime()&&(a.removeClass("vjs-waiting"),a.off("timeupdate",c))})},c.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},c.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},c.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},c.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},c.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},c.handleTechFirstPlay_=function(){this.options_.starttime&&(ib.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},c.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},c.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},c.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},c.handleTechClick_=function(a){this.controls_&&(this.paused()?fa(this.play()):this.pause())},c.handleTechDoubleClick_=function(a){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(b){return b.contains(a.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},c.handleTechTap_=function(){this.userActive(!this.userActive())},c.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},c.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},c.handleTechTouchEnd_=function(a){a.cancelable&&a.preventDefault()},c.handleStageClick_=function(){this.reportUserActivity()},c.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},c.documentFullscreenChange_=function(a){var b=a.target.player;if(!b||b===this){var c=this.el(),d=Na["default"][this.fsApi_.fullscreenElement]===c;!d&&c.matches?d=c.matches(":"+this.fsApi_.fullscreen):!d&&c.msMatchesSelector&&(d=c.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(d)}},c.handleTechFullscreenChange_=function(a,b){b&&(b.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(b.isFullscreen))},c.handleTechFullscreenError_=function(a,b){this.trigger("fullscreenerror",b)},c.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},c.handleTechEnterPictureInPicture_=function(a){this.isInPictureInPicture(!0)},c.handleTechLeavePictureInPicture_=function(a){this.isInPictureInPicture(!1)},c.handleTechError_=function(){var a=this.tech_.error();this.error(a)},c.handleTechTextData_=function(){var a=null;arguments.length>1&&(a=arguments[1]),this.trigger("textdata",a)},c.getCache=function(){return this.cache_},c.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},c.techCall_=function(a,b){this.ready(function(){if(a in Zc)return function(a,b,c,d){return b[c](a.reduce(ia(c),d))}(this.middleware_,this.tech_,a,b);if(a in $c)return ha(this.middleware_,this.tech_,a,b);try{this.tech_&&this.tech_[a](b)}catch(a){throw ib(a),a}},!0)},c.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in Yc)return function(a,b,c){return a.reduceRight(ia(c),b[c]())}(this.middleware_,this.tech_,a);if(a in $c)return ha(this.middleware_,this.tech_,a);try{return this.tech_[a]()}catch(b){if(void 0===this.tech_[a])throw ib("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",b),b;if("TypeError"===b.name)throw ib("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",b),this.tech_.isReady_=!1,b;throw ib(b),b}}},c.play=function(){var a=this,b=this.options_.Promise||Ma["default"].Promise;return b?new b(function(b){a.play_(b)}):this.play_()},c.play_=function(a){var b=this;void 0===a&&(a=fa),this.playCallbacks_.push(a);var c=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!c)return this.waitToPlay_=function(a){b.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(c||!Fb&&!Eb||this.load());var d=this.techGet_("play");null===d?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(d)},c.runPlayTerminatedQueue_=function(){var a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],a.forEach(function(a){a()})},c.runPlayCallbacks_=function(a){var b=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],b.forEach(function(b){b(a)})},c.pause=function(){this.techCall_("pause")},c.paused=function(){return!1!==this.techGet_("paused")},c.played=function(){return this.techGet_("played")||ba(0,0)},c.scrubbing=function(a){return void 0===a?this.scrubbing_:(this.scrubbing_=!!a,this.techCall_("setScrubbing",this.scrubbing_),void(a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")))},c.currentTime=function(a){return void 0!==a?(a<0&&(a=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",a),void(this.cache_.initTime=0)):(this.cache_.initTime=a,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},c.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},c.duration=function(a){return void 0===a?void 0!==this.cache_.duration?this.cache_.duration:NaN:((a=parseFloat(a))<0&&(a=1/0),void(a!==this.cache_.duration&&(this.cache_.duration=a,a===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(a)||this.trigger("durationchange"))))},c.remainingTime=function(){return this.duration()-this.currentTime()},c.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},c.buffered=function(){var a=this.techGet_("buffered");return a&&a.length||(a=ba(0,0)),a},c.bufferedPercent=function(){return ca(this.buffered(),this.duration())},c.bufferedEnd=function(){var a=this.buffered(),b=this.duration(),c=a.end(a.length-1);return c>b&&(c=b),c},c.volume=function(a){var b;return void 0!==a?(b=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=b,this.techCall_("setVolume",b),void(b>0&&this.lastVolume_(b))):(b=parseFloat(this.techGet_("volume")),isNaN(b)?1:b)},c.muted=function(a){return void 0===a?this.techGet_("muted")||!1:void this.techCall_("setMuted",a)},c.defaultMuted=function(a){return void 0!==a?this.techCall_("setDefaultMuted",a):this.techGet_("defaultMuted")||!1},c.lastVolume_=function(a){return void 0===a||0===a?this.cache_.lastVolume:void(this.cache_.lastVolume=a)},c.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},c.isFullscreen=function(a){if(void 0!==a){var b=this.isFullscreen_;return this.isFullscreen_=Boolean(a),this.isFullscreen_!==b&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},c.requestFullscreen=function(a){var b=this.options_.Promise||Ma["default"].Promise;if(b){var c=this;return new b(function(b,d){function e(){c.off("fullscreenerror",g),c.off("fullscreenchange",f)}function f(){e(),b()}function g(a,b){e(),d(b)}c.one("fullscreenchange",f),c.one("fullscreenerror",g);var h=c.requestFullscreenHelper_(a);h&&(h.then(e,e),h.then(b,d))})}return this.requestFullscreenHelper_()},c.requestFullscreenHelper_=function(a){var b,c=this;if(this.fsApi_.prefixed||(b=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==a&&(b=a)),this.fsApi_.requestFullscreen){var d=this.el_[this.fsApi_.requestFullscreen](b);return d&&d.then(function(){return c.isFullscreen(!0)},function(){return c.isFullscreen(!1)}),d}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},c.exitFullscreen=function(){var a=this.options_.Promise||Ma["default"].Promise;if(a){var b=this;return new a(function(a,c){function d(){b.off("fullscreenerror",f),b.off("fullscreenchange",e)}function e(){d(),a()}function f(a,b){d(),c(b)}b.one("fullscreenchange",e),b.one("fullscreenerror",f);var g=b.exitFullscreenHelper_();g&&(g.then(d,d),g.then(a,c))})}return this.exitFullscreenHelper_()},c.exitFullscreenHelper_=function(){var a=this;if(this.fsApi_.requestFullscreen){var b=Na["default"][this.fsApi_.exitFullscreen]();return b&&fa(b.then(function(){return a.isFullscreen(!1)})),b}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},c.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Na["default"].documentElement.style.overflow,T(Na["default"],"keydown",this.boundFullWindowOnEscKey_),Na["default"].documentElement.style.overflow="hidden",u(Na["default"].body,"vjs-full-window"),this.trigger("enterFullWindow")},c.fullWindowOnEscKey=function(a){Sa["default"].isEventKey(a,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},c.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,U(Na["default"],"keydown",this.boundFullWindowOnEscKey_),Na["default"].documentElement.style.overflow=this.docOrigOverflow,v(Na["default"].body,"vjs-full-window"),this.trigger("exitFullWindow")},c.disablePictureInPicture=function(a){return void 0===a?this.techGet_("disablePictureInPicture"):(this.techCall_("setDisablePictureInPicture",a),this.options_.disablePictureInPicture=a,void this.trigger("disablepictureinpicturechanged"))},c.isInPictureInPicture=function(a){return void 0!==a?(this.isInPictureInPicture_=!!a,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},c.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Na["default"]&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},c.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Na["default"])return Na["default"].exitPictureInPicture()},c.handleKeyDown=function(a){var b=this.options_.userActions;b&&b.hotkeys&&(function(a){var b=a.tagName.toLowerCase();return!!a.isContentEditable||("input"===b?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(a.type):-1!==["textarea"].indexOf(b))}(this.el_.ownerDocument.activeElement)||("function"==typeof b.hotkeys?b.hotkeys.call(this,a):this.handleHotkeys(a)))},c.handleHotkeys=function(a){var b=this.options_.userActions?this.options_.userActions.hotkeys:{},c=b.fullscreenKey,d=void 0===c?function(a){return Sa["default"].isEventKey(a,"f")}:c,e=b.muteKey,f=void 0===e?function(a){return Sa["default"].isEventKey(a,"m")}:e,g=b.playPauseKey,h=void 0===g?function(a){return Sa["default"].isEventKey(a,"k")||Sa["default"].isEventKey(a,"Space")}:g;if(d.call(this,a)){a.preventDefault(),a.stopPropagation();var i=mc.getComponent("FullscreenToggle");!1!==Na["default"][this.fsApi_.fullscreenEnabled]&&i.prototype.handleClick.call(this,a)}else f.call(this,a)?(a.preventDefault(),a.stopPropagation(),mc.getComponent("MuteToggle").prototype.handleClick.call(this,a)):h.call(this,a)&&(a.preventDefault(),a.stopPropagation(),mc.getComponent("PlayToggle").prototype.handleClick.call(this,a))},c.canPlayType=function(a){for(var b,c=0,d=this.options_.techOrder;c<d.length;c++){var e=d[c],f=Uc.getTech(e);if(f||(f=mc.getComponent(e)),f){if(f.isSupported()&&(b=f.canPlayType(a)))return b}else ib.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.')}return""},c.selectSource=function(a){var b,c=this,d=this.options_.techOrder.map(function(a){return[a,Uc.getTech(a)]}).filter(function(a){var b=a[0],c=a[1];return c?c.isSupported():(ib.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),e=function(a,b,c){var d;return a.some(function(a){return b.some(function(b){if(d=c(a,b))return!0})}),d},f=function(a,b){var d=a[0];if(a[1].canPlaySource(b,c.options_[d.toLowerCase()]))return{source:b,tech:d}};return(this.options_.sourceOrder?e(a,d,(b=f,function(a,c){return b(c,a)})):e(d,a,f))||!1},c.handleSrc_=function(a,b){var c=this;if(void 0===a)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var d=function g(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){a=g(a),Array.isArray(a)?b=b.concat(a):h(a)&&b.push(a)}),a=b}else a="string"==typeof a&&a.trim()?[ja({src:a})]:h(a)&&"string"==typeof a.src&&a.src&&a.src.trim()?[ja(a)]:[];return a}(a);if(d.length){if(this.changingSrc_=!0,b||(this.cache_.sources=d),this.updateSourceCaches_(d[0]),ga(this,d[0],function(a,e){var f,g;return c.middleware_=e,b||(c.cache_.sources=d),c.updateSourceCaches_(a),c.src_(a)?d.length>1?c.handleSrc_(d.slice(1)):(c.changingSrc_=!1,c.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void c.triggerReady()):(f=e,g=c.tech_,void f.forEach(function(a){return a.setTech&&a.setTech(g)}))}),this.options_.retryOnError&&d.length>1){var e=function(){c.error(null),c.handleSrc_(d.slice(1),!0)},f=function(){c.off("error",e)};this.one("error",e),this.one("playing",f),this.resetRetryOnError_=function(){c.off("error",e),c.off("playing",f)}}}else this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},c.src=function(a){return this.handleSrc_(a,!1)},c.src_=function(a){var b,c,d=this,e=this.selectSource([a]);return!e||(b=e.tech,c=this.techName_,hc(b)!==hc(c)?(this.changingSrc_=!0,this.loadTech_(e.tech,e.source),this.tech_.ready(function(){d.changingSrc_=!1}),!1):(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src),this.changingSrc_=!1},!0),!1))},c.load=function(){this.techCall_("load")},c.reset=function(){var a=this,b=this.options_.Promise||Ma["default"].Promise;this.paused()||!b?this.doReset_():fa(this.play().then(function(){return a.doReset_()}))},c.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Zb(this)&&this.trigger("playerreset")},c.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},c.resetProgressBar_=function(){this.currentTime(0);var a=this.controlBar,b=a.durationDisplay,c=a.remainingTimeDisplay;b&&b.updateContent(),c&&c.updateContent()},c.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},c.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},c.currentSources=function(){var a=this.currentSource(),b=[];return 0!==Object.keys(a).length&&b.push(a),this.cache_.sources||b},c.currentSource=function(){return this.cache_.source||{}},c.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},c.currentType=function(){return this.currentSource()&&this.currentSource().type||""},c.preload=function(a){return void 0!==a?(this.techCall_("setPreload",a),void(this.options_.preload=a)):this.techGet_("preload")},c.autoplay=function(a){if(void 0===a)return this.options_.autoplay||!1;var b;"string"==typeof a&&/(any|play|muted)/.test(a)||!0===a&&this.options_.normalizeAutoplay?(this.options_.autoplay=a,this.manualAutoplay_("string"==typeof a?a:"play"),b=!1):this.options_.autoplay=!!a,b=void 0===b?this.options_.autoplay:b,this.tech_&&this.techCall_("setAutoplay",b)},c.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")},c.loop=function(a){return void 0!==a?(this.techCall_("setLoop",a),void(this.options_.loop=a)):this.techGet_("loop")},c.poster=function(a){return void 0===a?this.poster_:(a||(a=""),void(a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))))},c.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},c.controls=function(a){return void 0===a?!!this.controls_:(a=!!a,void(this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))))},c.usingNativeControls=function(a){return void 0===a?!!this.usingNativeControls_:(a=!!a,void(this.usingNativeControls_!==a&&(this.usingNativeControls_=a,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))))},c.error=function(a){var b=this;if(void 0===a)return this.error_||null;if($a("beforeerror").forEach(function(c){var d=c(b,a);h(d)&&!Array.isArray(d)||"string"==typeof d||"number"==typeof d||null===d?a=d:b.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&a&&4===a.code){var c=function(){this.error(a)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],c),void this.one("loadstart",function(){this.off(["click","touchstart"],c)})}return null===a?(this.error_=a,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new da(a),this.addClass("vjs-error"),ib.error("(CODE:"+this.error_.code+" "+da.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),void $a("error").forEach(function(a){return a(b,b.error_)}))},c.reportUserActivity=function(a){this.userActivity_=!0},c.userActive=function(a){if(void 0===a)return this.userActive_;if((a=!!a)!==this.userActive_){if(this.userActive_=a,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},c.listenForUserActivity_=function(){var a,b,c,d=Vb(this,this.reportUserActivity),e=function(b){d(),this.clearInterval(a)};this.on("mousedown",function(){d(),this.clearInterval(a),a=this.setInterval(d,250)}),this.on("mousemove",function(a){a.screenX===b&&a.screenY===c||(b=a.screenX,c=a.screenY,d())}),this.on("mouseup",e),this.on("mouseleave",e);var f,g=this.getChild("controlBar");!g||Eb||rb||(g.on("mouseenter",function(a){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),g.on("mouseleave",function(a){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",d),this.on("keyup",d),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(f);var a=this.options_.inactivityTimeout;a<=0||(f=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))}},250)},c.playbackRate=function(a){return void 0===a?this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1:void this.techCall_("setPlaybackRate",a)},c.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},c.isAudio=function(a){return void 0===a?!!this.isAudio_:void(this.isAudio_=!!a)},c.addTextTrack=function(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)},c.addRemoteTextTrack=function(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)},c.removeRemoteTextTrack=function(a){void 0===a&&(a={});var b=a.track;if(b||(b=a),this.tech_)return this.tech_.removeRemoteTextTrack(b)},c.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},c.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},c.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},
c.language=function(a){return void 0===a?this.language_:void(this.language_!==String(a).toLowerCase()&&(this.language_=String(a).toLowerCase(),Zb(this)&&this.trigger("languagechange")))},c.languages=function(){return $(b.prototype.options_.languages,this.languages_)},c.toJSON=function(){var a=$(this.options_),b=a.tracks;a.tracks=[];for(var c=0;c<b.length;c++){var d=b[c];(d=$(d)).player=void 0,a.tracks[c]=d}return a},c.createModal=function(a,b){var c=this;(b=b||{}).content=a||"";var d=new rc(this,b);return this.addChild(d),d.on("dispose",function(){c.removeChild(d)}),d.open(),d},c.updateCurrentBreakpoint_=function(){if(this.responsive())for(var a=this.currentBreakpoint(),b=this.currentWidth(),c=0;c<Je.length;c++){var d=Je[c];if(b<=this.breakpoints_[d]){if(a===d)return;a&&this.removeClass(Ke[a]),this.addClass(Ke[d]),this.breakpoint_=d;break}}},c.removeCurrentBreakpoint_=function(){var a=this.currentBreakpointClass();this.breakpoint_="",a&&this.removeClass(a)},c.breakpoints=function(a){return void 0===a||(this.breakpoint_="",this.breakpoints_=f({},Le,a),this.updateCurrentBreakpoint_()),f(this.breakpoints_)},c.responsive=function(a){return void 0===a?this.responsive_:(a=Boolean(a))!==this.responsive_?(this.responsive_=a,a?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),a):void 0},c.currentBreakpoint=function(){return this.breakpoint_},c.currentBreakpointClass=function(){return Ke[this.breakpoint_]||""},c.loadMedia=function(a,b){var c=this;if(a&&"object"==(void 0===a?"undefined":g(a))){this.reset(),this.cache_.media=$(a);var d=this.cache_.media,e=d.artwork,f=d.poster,h=d.src,i=d.textTracks;!e&&f&&(this.cache_.media.artwork=[{src:f,type:ad(f)}]),h&&this.src(h),f&&this.poster(f),Array.isArray(i)&&i.forEach(function(a){return c.addRemoteTextTrack(a,!1)}),this.ready(b)}},c.getMedia=function(){if(!this.cache_.media){var a=this.poster(),b={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(a){return{kind:a.kind,label:a.label,language:a.language,src:a.src}})};return a&&(b.poster=a,b.artwork=[{src:b.poster,type:ad(b.poster)}]),b}return $(this.cache_.media)},b.getTagSettings=function(a){var b={sources:[],tracks:[]},c=y(a),d=c["data-setup"];if(t(a,"vjs-fill")&&(c.fill=!0),t(a,"vjs-fluid")&&(c.fluid=!0),null!==d){var e=Ra["default"](d||"{}"),g=e[0],h=e[1];g&&ib.error(g),f(c,h)}if(f(b,c),a.hasChildNodes())for(var i=a.childNodes,j=0,k=i.length;j<k;j++){var l=i[j],m=l.nodeName.toLowerCase();"source"===m?b.sources.push(y(l)):"track"===m&&b.tracks.push(y(l))}return b},c.flexNotSupported_=function(){var a=Na["default"].createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)},c.debug=function(a){return void 0===a?this.debugEnabled_:void(a?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1))},c.playbackRates=function(a){return void 0===a?this.cache_.playbackRates:void(Array.isArray(a)&&a.every(function(a){return"number"==typeof a})&&(this.cache_.playbackRates=a,this.trigger("playbackrateschange")))},b}(mc);Tc.names.forEach(function(a){var b=Tc[a];Me.prototype[b.getterName]=function(){return this.tech_?this.tech_[b.getterName]():(this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName])}}),Me.prototype.crossorigin=Me.prototype.crossOrigin,Me.players={};var Ne=Ma["default"].navigator;Me.prototype.options_={techOrder:Uc.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Ne&&(Ne.languages&&Ne.languages[0]||Ne.userLanguage||Ne.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(a){Me.prototype[a]=function(){return this.techGet_(a)}}),He.forEach(function(a){Me.prototype["handleTech"+hc(a)+"_"]=function(){return this.trigger(a)}}),mc.registerComponent("Player",Me);var Oe={},Pe=function(a){return Oe.hasOwnProperty(a)},Qe=function(a){return Pe(a)?Oe[a]:void 0},Re=function(a,b){a.activePlugins_=a.activePlugins_||{},a.activePlugins_[b]=!0},Se=function(a,b,c){var d=(c?"before":"")+"pluginsetup";a.trigger(d,b),a.trigger(d+":"+b.name,b)},Te=function(a,b){return b.prototype.name=a,function(){Se(this,{name:a,plugin:b,instance:null},!0);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=Va["default"](b,[this].concat(d));return this[a]=function(){return f},Se(this,f.getEventHash()),f}},Ue=function(){function a(b){if(this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=b,this.log||(this.log=this.player.log.createLogger(this.name)),Y(this),delete this.trigger,Z(this,this.constructor.defaultState),Re(b,this.name),this.dispose=this.dispose.bind(this),b.on("dispose",this.dispose)}var b=a.prototype;return b.version=function(){return this.constructor.VERSION},b.getEventHash=function(a){return void 0===a&&(a={}),a.name=this.name,a.plugin=this.constructor,a.instance=this,a},b.trigger=function(a,b){return void 0===b&&(b={}),V(this.eventBusEl_,a,this.getEventHash(b))},b.handleStateChanged=function(a){},b.dispose=function(){var a=this.name,b=this.player;this.trigger("dispose"),this.off(),b.off("dispose",this.dispose),b.activePlugins_[a]=!1,this.player=this.state=null,b[a]=Te(a,Oe[a])},a.isBasic=function(b){var c="string"==typeof b?Qe(b):b;return"function"==typeof c&&!a.prototype.isPrototypeOf(c.prototype)},a.registerPlugin=function(b,c){if("string"!=typeof b)throw new Error('Illegal plugin name, "'+b+'", must be a string, was '+(void 0===b?"undefined":g(b))+".");if(Pe(b))ib.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(Me.prototype.hasOwnProperty(b))throw new Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');if("function"!=typeof c)throw new Error('Illegal plugin for "'+b+'", must be a function, was '+(void 0===c?"undefined":g(c))+".");return Oe[b]=c,"plugin"!==b&&(a.isBasic(c)?Me.prototype[b]=function(a,b){var c=function(){Se(this,{name:a,plugin:b,instance:null},!0);var c=b.apply(this,arguments);return Re(this,a),Se(this,{name:a,plugin:b,instance:c}),c};return Object.keys(b).forEach(function(a){c[a]=b[a]}),c}(b,c):Me.prototype[b]=Te(b,c)),c},a.deregisterPlugin=function(a){if("plugin"===a)throw new Error("Cannot de-register base plugin.");Pe(a)&&(delete Oe[a],delete Me.prototype[a])},a.getPlugins=function(a){var b;return void 0===a&&(a=Object.keys(Oe)),a.forEach(function(a){var c=Qe(a);c&&((b=b||{})[a]=c)}),b},a.getPluginVersion=function(a){var b=Qe(a);return b&&b.VERSION||""},a}();Ue.getPlugin=Qe,Ue.BASE_PLUGIN_NAME="plugin",Ue.registerPlugin("plugin",Ue),Me.prototype.usingPlugin=function(a){return!!this.activePlugins_&&!0===this.activePlugins_[a]},Me.prototype.hasPlugin=function(a){return!!Pe(a)};var Ve=function(a){return 0===a.indexOf("#")?a.slice(1):a};if(oa.hooks_=Za,oa.hooks=$a,oa.hook=function(a,b){$a(a,b)},oa.hookOnce=function(a,b){$a(a,[].concat(b).map(function(b){return function c(){return _a(a,c),b.apply(void 0,arguments)}}))},oa.removeHook=_a,!0!==Ma["default"].VIDEOJS_NO_DYNAMIC_STYLE&&m()){var We=Hb(".vjs-styles-defaults");if(!We){We=Nb("vjs-styles-defaults");var Xe=Hb("head");Xe&&Xe.insertBefore(We,Xe.firstChild),Ob(We,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}N(1,oa),oa.VERSION="7.15.4",oa.options=Me.prototype.options_,oa.getPlayers=function(){return Me.players},oa.getPlayer=function(a){var b,c=Me.players;if("string"==typeof a){var d=Ve(a),e=c[d];if(e)return e;b=Hb("#"+d)}else b=a;if(n(b)){var f=b,g=f.player,h=f.playerId;if(g||c[h])return g||c[h]}},oa.getAllPlayers=function(){return Object.keys(Me.players).map(function(a){return Me.players[a]}).filter(Boolean)},oa.players=Me.players,oa.getComponent=mc.getComponent,oa.registerComponent=function(a,b){Uc.isTech(b)&&ib.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),mc.registerComponent.call(mc,a,b)},oa.getTech=Uc.getTech,oa.registerTech=Uc.registerTech,oa.use=function(a,b){Vc[a]=Vc[a]||[],Vc[a].push(b)},Object.defineProperty(oa,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(oa.middleware,"TERMINATOR",{value:Xc,writeable:!1,enumerable:!0}),oa.browser=Gb,oa.TOUCH_ENABLED=Bb,oa.extend=function(a,b){void 0===b&&(b={});var c=function(){a.apply(this,arguments)},d={};for(var e in"object"==(void 0===b?"undefined":g(b))?(b.constructor!==Object.prototype.constructor&&(c=b.constructor),d=b):"function"==typeof b&&(c=b),Wa["default"](c,a),a&&(c.super_=a),d)d.hasOwnProperty(e)&&(c.prototype[e]=d[e]);return c},oa.mergeOptions=$,oa.bind=Vb,oa.registerPlugin=Ue.registerPlugin,oa.deregisterPlugin=Ue.deregisterPlugin,oa.plugin=function(a,b){return ib.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ue.registerPlugin(a,b)},oa.getPlugins=Ue.getPlugins,oa.getPlugin=Ue.getPlugin,oa.getPluginVersion=Ue.getPluginVersion,oa.addLanguage=function(a,b){var c;return a=(""+a).toLowerCase(),oa.options.languages=$(oa.options.languages,((c={})[a]=b,c)),oa.options.languages[a]},oa.log=ib,oa.createLogger=jb,oa.createTimeRange=oa.createTimeRanges=ba,oa.formatTime=ma,oa.setFormatTime=function(a){md=a},oa.resetFormatTime=function(){md=ld},oa.parseUrl=Gc,oa.isCrossOrigin=Jc,oa.EventTarget=Xb,oa.on=T,oa.one=W,oa.off=U,oa.trigger=V,oa.xhr=Ta["default"],oa.TextTrack=Nc,oa.AudioTrack=Oc,oa.VideoTrack=Pc,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(a){oa[a]=function(){return ib.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead"),Jb[a].apply(null,arguments)}}),oa.computedStyle=j,oa.dom=Jb,oa.url=Kc,oa.defineLazyProperty=Fe,oa.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Ye,Ze=Xa["default"],$e=function(a,b,c){return a&&c&&c.responseURL&&b!==c.responseURL?c.responseURL:b},_e=function(a){return oa.log.debug?oa.log.debug.bind(oa,"VHS:",a+" >"):function(){}},af=function(a,b){var c,d=[];if(a&&a.length)for(c=0;c<a.length;c++)b(a.start(c),a.end(c))&&d.push([a.start(c),a.end(c)]);return oa.createTimeRanges(d)},bf=function(a,b){return af(a,function(a,c){return a-.1<=b&&c+.1>=b})},cf=function(a,b){return af(a,function(a){return a-1/30>=b})},df=function(a){var b=[];if(!a||!a.length)return"";for(var c=0;c<a.length;c++)b.push(a.start(c)+" => "+a.end(c));return b.join(", ")},ef=function(a){for(var b=[],c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b},ff=function(a){if(a&&a.length&&a.end)return a.end(a.length-1)},gf=oa.createTimeRange,hf=function(a){return(a.segments||[]).reduce(function(a,b,c){return b.parts?b.parts.forEach(function(d,e){a.push({duration:d.duration,segmentIndex:c,partIndex:e,part:d,segment:b})}):a.push({duration:b.duration,segmentIndex:c,partIndex:null,segment:b,part:null}),a},[])},jf=function(a){var b=a.segments&&a.segments.length&&a.segments[a.segments.length-1];return b&&b.parts||[]},kf=function(a){var b=a.preloadSegment;if(b){var c=b.parts,d=(b.preloadHints||[]).reduce(function(a,b){return a+("PART"===b.type?1:0)},0);return d+=c&&c.length?c.length:0}},lf=function(a,b){if(b.endList)return 0;if(a&&a.suggestedPresentationDelay)return a.suggestedPresentationDelay;var c=jf(b).length>0;return c&&b.serverControl&&b.serverControl.partHoldBack?b.serverControl.partHoldBack:c&&b.partTargetDuration?3*b.partTargetDuration:b.serverControl&&b.serverControl.holdBack?b.serverControl.holdBack:b.targetDuration?3*b.targetDuration:0},mf=function(a,b,c){if(void 0===b&&(b=a.mediaSequence+a.segments.length),b<a.mediaSequence)return 0;var d=function(a,b){var c=0,d=b-a.mediaSequence,e=a.segments[d];if(e){if(void 0!==e.start)return{result:e.start,precise:!0};if(void 0!==e.end)return{result:e.end-e.duration,precise:!0}}for(;d--;){if(void 0!==(e=a.segments[d]).end)return{result:c+e.end,precise:!0};if(c+=e.duration,void 0!==e.start)return{result:c+e.start,precise:!0}}return{result:c,precise:!1}}(a,b);if(d.precise)return d.result;var e=function(a,b){for(var c,d=0,e=b-a.mediaSequence;e<a.segments.length;e++){if(void 0!==(c=a.segments[e]).start)return{result:c.start-d,precise:!0};if(d+=c.duration,void 0!==c.end)return{result:c.end-d,precise:!0}}return{result:-1,precise:!1}}(a,b);return e.precise?e.result:d.result+c},nf=function(a,b,c){if(!a)return 0;if("number"!=typeof c&&(c=0),void 0===b){if(a.totalDuration)return a.totalDuration;if(!a.endList)return Ma["default"].Infinity}return mf(a,b,c)},of=function(a){var b=a.defaultDuration,c=a.durationList,d=a.startIndex,e=a.endIndex,f=0;if(d>e){var g=[e,d];d=g[0],e=g[1]}if(d<0){for(var h=d;h<Math.min(0,e);h++)f+=b;d=0}for(var i=d;i<e;i++)f+=c[i].duration;return f},pf=function(a,b,c,d){if(!a||!a.segments)return null;if(a.endList)return nf(a);if(null===b)return null;b=b||0;var e=mf(a,a.mediaSequence+a.segments.length,b);return c&&(e-=d="number"==typeof d?d:lf(null,a)),Math.max(0,e)},qf=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()},rf=function(a){return a.excludeUntil&&a.excludeUntil===1/0},sf=function(a){var b=qf(a);return!a.disabled&&!b},tf=function(a,b){return b.attributes&&b.attributes[a]},uf=function(a,b){if(1===a.playlists.length)return!0;var c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(a){return!!sf(a)&&(a.attributes.BANDWIDTH||0)<c}).length},vf=function(a,b){return!(!a&&!b||!a&&b||a&&!b||a!==b&&(!a.id||!b.id||a.id!==b.id)&&(!a.resolvedUri||!b.resolvedUri||a.resolvedUri!==b.resolvedUri)&&(!a.uri||!b.uri||a.uri!==b.uri))},wf=function(a,b){var c=a&&a.mediaGroups&&a.mediaGroups.AUDIO||{},d=!1;for(var e in c){for(var f in c[e])if(d=b(c[e][f]))break;if(d)break}return!!d},xf=function(a){if(!a||!a.playlists||!a.playlists.length)return wf(a,function(a){return a.playlists&&a.playlists.length||a.uri});for(var b=0;b<a.playlists.length;b++){var c=function(b){var c=a.playlists[b],d=c.attributes&&c.attributes.CODECS;return d&&d.split(",").every(function(a){return Ea.isAudioCodec(a)})||wf(a,function(a){return vf(c,a)})?"continue":{v:!1}}(b);if("continue"!==c&&"object"==(void 0===c?"undefined":g(c)))return c.v}return!0},yf={liveEdgeDelay:lf,duration:nf,seekable:function(a,b,c){var d=b||0,e=pf(a,b,!0,c);return null===e?gf():gf(d,e)},getMediaInfoForTime:function(a){for(var b=a.playlist,c=a.currentTime,d=a.startingSegmentIndex,e=a.startingPartIndex,f=a.startTime,g=a.experimentalExactManifestTimings,h=c-f,i=hf(b),j=0,k=0;k<i.length;k++){var l=i[k];if(d===l.segmentIndex&&("number"!=typeof e||"number"!=typeof l.partIndex||e===l.partIndex)){j=k;break}}if(h<0){if(j>0)for(var m=j-1;m>=0;m--){var n=i[m];if(h+=n.duration,g){if(h<0)continue}else if(h+1/30<=0)continue;return{partIndex:n.partIndex,segmentIndex:n.segmentIndex,startTime:f-of({defaultDuration:b.targetDuration,durationList:i,startIndex:j,endIndex:m})}}return{partIndex:i[0]&&i[0].partIndex||null,segmentIndex:i[0]&&i[0].segmentIndex||0,startTime:c}}if(j<0){for(var o=j;o<0;o++)if((h-=b.targetDuration)<0)return{partIndex:i[0]&&i[0].partIndex||null,segmentIndex:i[0]&&i[0].segmentIndex||0,startTime:c};j=0}for(var p=j;p<i.length;p++){var q=i[p];if(h-=q.duration,g){if(h>0)continue}else if(h-1/30>=0)continue;return{partIndex:q.partIndex,segmentIndex:q.segmentIndex,startTime:f+of({defaultDuration:b.targetDuration,durationList:i,startIndex:j,endIndex:p})}}return{segmentIndex:i[i.length-1].segmentIndex,partIndex:i[i.length-1].partIndex,startTime:c}},isEnabled:sf,isDisabled:function(a){return a.disabled},isBlacklisted:qf,isIncompatible:rf,playlistEnd:pf,isAes:function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;return!1},hasAttribute:tf,estimateSegmentRequestTime:function(a,b,c,d){return void 0===d&&(d=0),tf("BANDWIDTH",c)?(a*c.attributes.BANDWIDTH-8*d)/b:NaN},isLowestEnabledRendition:uf,isAudioOnly:xf,playlistMatch:vf},zf=oa.log,Af=function(a,b){return a+"-"+b},Bf=function(a,b){a.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(c){if(a.mediaGroups[c])for(var d in a.mediaGroups[c])for(var e in a.mediaGroups[c][d]){var f=a.mediaGroups[c][d][e];b(f,c,d,e)}})},Cf=function(a){var b=a.playlist,c=a.uri,d=a.id;b.id=d,b.playlistErrors_=0,c&&(b.uri=c),b.attributes=b.attributes||{}},Df=function(a,b){a.uri=b;for(var c=0;c<a.playlists.length;c++)if(!a.playlists[c].uri){var d="placeholder-uri-"+c;a.playlists[c].uri=d}var e=xf(a);Bf(a,function(b,c,d,f){var g="placeholder-uri-"+c+"-"+d+"-"+f;if(!b.playlists||!b.playlists.length){if(e&&"AUDIO"===c&&!b.uri)for(var h=0;h<a.playlists.length;h++){var i=a.playlists[h];if(i.attributes&&i.attributes.AUDIO&&i.attributes.AUDIO===d)return}b.playlists=[Oa["default"]({},b)]}b.playlists.forEach(function(b,c){var d=Af(c,g);b.uri?b.resolvedUri=b.resolvedUri||Ze(a.uri,b.uri):(b.uri=0===c?g:d,b.resolvedUri=b.uri),b.id=b.id||d,b.attributes=b.attributes||{},a.playlists[b.id]=b,a.playlists[b.uri]=b})}),function(a){for(var b=a.playlists.length;b--;){var c=a.playlists[b];Cf({playlist:c,id:Af(b,c.uri)}),c.resolvedUri=Ze(a.uri,c.uri),a.playlists[c.id]=c,a.playlists[c.uri]=c,c.attributes.BANDWIDTH||zf.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(a),function(a){Bf(a,function(b){b.uri&&(b.resolvedUri=Ze(a.uri,b.uri))})}(a)},Ef=oa.mergeOptions,Ff=oa.EventTarget,Gf=function(a,b){if(!a)return b;var c=Ef(a,b);if(a.preloadHints&&!b.preloadHints&&delete c.preloadHints,a.parts&&!b.parts)delete c.parts;else if(a.parts&&b.parts)for(var d=0;d<b.parts.length;d++)a.parts&&a.parts[d]&&(c.parts[d]=Ef(a.parts[d],b.parts[d]));return!a.skipped&&b.skipped&&(c.skipped=!1),a.preload&&!b.preload&&(c.preload=!1),c},Hf=function(a,b){!a.resolvedUri&&a.uri&&(a.resolvedUri=Ze(b,a.uri)),a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=Ze(b,a.key.uri)),a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=Ze(b,a.map.uri)),a.map&&a.map.key&&!a.map.key.resolvedUri&&(a.map.key.resolvedUri=Ze(b,a.map.key.uri)),a.parts&&a.parts.length&&a.parts.forEach(function(a){a.resolvedUri||(a.resolvedUri=Ze(b,a.uri))}),a.preloadHints&&a.preloadHints.length&&a.preloadHints.forEach(function(a){a.resolvedUri||(a.resolvedUri=Ze(b,a.uri))})},If=function(a){var b=a.segments||[],c=a.preloadSegment;if(c&&c.parts&&c.parts.length){if(c.preloadHints)for(var d=0;d<c.preloadHints.length;d++)if("MAP"===c.preloadHints[d].type)return b;c.duration=a.targetDuration,c.preload=!0,b.push(c)}return b},Jf=function(a,b){return a===b||a.segments&&b.segments&&a.segments.length===b.segments.length&&a.endList===b.endList&&a.mediaSequence===b.mediaSequence},Kf=function(a,b,c){void 0===c&&(c=Jf);var d=Ef(a,{}),e=d.playlists[b.id];if(!e)return null;if(c(e,b))return null;b.segments=If(b);var f=Ef(e,b);if(f.preloadSegment&&!b.preloadSegment&&delete f.preloadSegment,e.segments){if(b.skip){b.segments=b.segments||[];for(var g=0;g<b.skip.skippedSegments;g++)b.segments.unshift({skipped:!0})}f.segments=function(a,b,c){var d=a.slice(),e=b.slice();c=c||0;for(var f,g=[],h=0;h<e.length;h++){var i=d[h+c],j=e[h];i?(f=i.map||f,g.push(Gf(i,j))):(f&&!j.map&&(j.map=f),g.push(j))}return g}(e.segments,b.segments,b.mediaSequence-e.mediaSequence)}f.segments.forEach(function(a){Hf(a,f.resolvedUri)});for(var h=0;h<d.playlists.length;h++)d.playlists[h].id===b.id&&(d.playlists[h]=f);return d.playlists[b.id]=f,d.playlists[b.uri]=f,Bf(a,function(a,c,d,e){if(a.playlists)for(var f=0;f<a.playlists.length;f++)b.id===a.playlists[f].id&&(a.playlists[f]=b)}),d},Lf=function(a,b){var c=a.segments[a.segments.length-1],d=c&&c.parts&&c.parts[c.parts.length-1],e=d&&d.duration||c&&c.duration;return b&&e?1e3*e:500*(a.partTargetDuration||a.targetDuration||10)},Mf=function(a){function b(b,c,d){var e;if(void 0===d&&(d={}),e=a.call(this)||this,!b)throw new Error("A non-empty playlist URL or object is required");e.logger_=_e("PlaylistLoader");var f=d,g=f.withCredentials,h=void 0!==g&&g,i=f.handleManifestRedirects,j=void 0!==i&&i;e.src=b,e.vhs_=c,e.withCredentials=h,e.handleManifestRedirects=j;var k=c.options_;return e.customTagParsers=k&&k.customTagParsers||[],e.customTagMappers=k&&k.customTagMappers||[],e.experimentalLLHLS=k&&k.experimentalLLHLS||!1,e.state="HAVE_NOTHING",e.handleMediaupdatetimeout_=e.handleMediaupdatetimeout_.bind(Pa["default"](e)),e.on("mediaupdatetimeout",e.handleMediaupdatetimeout_),e}Qa["default"](b,a);var c=b.prototype;return c.handleMediaupdatetimeout_=function(){var a=this;if("HAVE_METADATA"===this.state){var b=this.media(),c=Ze(this.master.uri,b.uri);this.experimentalLLHLS&&(c=function(a,b){if(b.endList)return a;var c=[];if(b.serverControl&&b.serverControl.canBlockReload){var d=b.preloadSegment,e=b.mediaSequence+b.segments.length;if(d){var f=d.parts||[],g=kf(b)-1;g>-1&&g!==f.length-1&&c.push("_HLS_part="+g),(g>-1||f.length)&&e--}c.unshift("_HLS_msn="+e)}return b.serverControl&&b.serverControl.canSkipUntil&&c.unshift("_HLS_skip="+(b.serverControl.canSkipDateranges?"v2":"YES")),c.forEach(function(b,c){a+=(0===c?"?":"&")+b}),a}(c,b)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:c,withCredentials:this.withCredentials},function(b,c){if(a.request)return b?a.playlistRequestError(a.request,a.media(),"HAVE_METADATA"):void a.haveMetadata({playlistString:a.request.responseText,url:a.media().uri,id:a.media().id})})}},c.playlistRequestError=function(a,b,c){var d=b.uri,e=b.id;this.request=null,c&&(this.state=c),this.error={playlist:this.master.playlists[e],status:a.status,message:"HLS playlist request error at URL: "+d+".",responseText:a.responseText,code:a.status>=500?4:2},this.trigger("error")},c.parseManifest_=function(a){var b=this,c=a.url;return function(a){var b=a.onwarn,c=a.oninfo,d=a.manifestString,e=a.customTagParsers,f=void 0===e?[]:e,g=a.customTagMappers,h=void 0===g?[]:g,i=a.experimentalLLHLS,j=new Da.Parser;b&&j.on("warn",b),c&&j.on("info",c),f.forEach(function(a){return j.addParser(a)}),h.forEach(function(a){return j.addTagMapper(a)}),j.push(d),j.end();var k=j.manifest;if(i||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(a){k.hasOwnProperty(a)&&delete k[a]}),k.segments&&k.segments.forEach(function(a){["parts","preloadHints"].forEach(function(b){a.hasOwnProperty(b)&&delete a[b]})})),!k.targetDuration){var l=10;k.segments&&k.segments.length&&(l=k.segments.reduce(function(a,b){return Math.max(a,b.duration)},0)),b&&b("manifest has no targetDuration defaulting to "+l),k.targetDuration=l}var m=jf(k);if(m.length&&!k.partTargetDuration){var n=m.reduce(function(a,b){return Math.max(a,b.duration)},0);b&&(b("manifest has no partTargetDuration defaulting to "+n),zf.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),k.partTargetDuration=n}return k}({onwarn:function(a){var d=a.message;return b.logger_("m3u8-parser warn for "+c+": "+d)},oninfo:function(a){var d=a.message;return b.logger_("m3u8-parser info for "+c+": "+d)},manifestString:a.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},c.haveMetadata=function(a){var b=a.playlistString,c=a.playlistObject,d=a.url,e=a.id;this.request=null,this.state="HAVE_METADATA";var f=c||this.parseManifest_({url:d,manifestString:b});f.lastRequest=Date.now(),Cf({playlist:f,uri:d,id:e});var g=Kf(this.master,f);this.targetDuration=f.partTargetDuration||f.targetDuration,g?(this.master=g,this.media_=this.master.playlists[e]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Lf(this.media(),!!g)),this.trigger("loadedplaylist")},c.dispose=function(){this.trigger("dispose"),this.stopRequest(),Ma["default"].clearTimeout(this.mediaUpdateTimeout),Ma["default"].clearTimeout(this.finalRenditionTimeout),this.off()},c.stopRequest=function(){if(this.request){var a=this.request;this.request=null,a.onreadystatechange=null,a.abort()}},c.media=function(a,b){var c=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof a){if(!this.master.playlists[a])throw new Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}if(Ma["default"].clearTimeout(this.finalRenditionTimeout),b){var d=(a.partTargetDuration||a.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Ma["default"].setTimeout(this.media.bind(this,a,!1),d)}else{var e=this.state,f=!this.media_||a.id!==this.media_.id,g=this.master.playlists[a.id];if(g&&g.endList||a.endList&&a.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,void(f&&(this.trigger("mediachanging"),"HAVE_MASTER"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(Lf(a,!0)),f){if(this.state="SWITCHING_MEDIA",this.request){if(a.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:a.resolvedUri,withCredentials:this.withCredentials},function(b,d){if(c.request){if(a.lastRequest=Date.now(),a.resolvedUri=$e(c.handleManifestRedirects,a.resolvedUri,d),b)return c.playlistRequestError(c.request,a,e);c.haveMetadata({playlistString:d.responseText,url:a.uri,id:a.id}),"HAVE_MASTER"===e?c.trigger("loadedmetadata"):c.trigger("mediachange")}})}}},c.pause=function(){this.mediaUpdateTimeout&&(Ma["default"].clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},c.load=function(a){var b=this;this.mediaUpdateTimeout&&(Ma["default"].clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var c=this.media();if(a){var d=c?(c.partTargetDuration||c.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Ma["default"].setTimeout(function(){b.mediaUpdateTimeout=null,b.load()},d)}else this.started?c&&!c.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},c.updateMediaUpdateTimeout_=function(a){var b=this;this.mediaUpdateTimeout&&(Ma["default"].clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Ma["default"].setTimeout(function(){b.mediaUpdateTimeout=null,b.trigger("mediaupdatetimeout"),b.updateMediaUpdateTimeout_(a)},a))},c.start=function(){var a=this;return this.started=!0,"object"==g(this.src)?(this.src.uri||(this.src.uri=Ma["default"].location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){a.setupInitialPlaylist(a.src)},0)):void(this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(b,c){if(a.request){if(a.request=null,b)return a.error={status:c.status,message:"HLS playlist request error at URL: "+a.src+".",responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.src=$e(a.handleManifestRedirects,a.src,c);var d=a.parseManifest_({manifestString:c.responseText,url:a.src});a.setupInitialPlaylist(d)}}))},c.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},c.setupInitialPlaylist=function(a){if(this.state="HAVE_MASTER",a.playlists)return this.master=a,Df(this.master,this.srcUri()),a.playlists.forEach(function(a){a.segments=If(a),a.segments.forEach(function(b){Hf(b,a.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var b=this.srcUri()||Ma["default"].location.href;this.master=function(a,b){var c=Af(0,b),d={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Ma["default"].location.href,resolvedUri:Ma["default"].location.href,playlists:[{uri:b,id:c,resolvedUri:b,attributes:{}}]};return d.playlists[c]=d.playlists[0],d.playlists[b]=d.playlists[0],d}(0,b),this.haveMetadata({playlistObject:a,url:b,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},b}(Ff),Nf=oa.xhr,Of=oa.mergeOptions,Pf=function(a,b,c,d){var e="arraybuffer"===a.responseType?a.response:a.responseText;!b&&e&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=e.byteLength||e.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),c.headers&&(a.responseHeaders=c.headers),b&&"ETIMEDOUT"===b.code&&(a.timedout=!0),b||a.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(b=new Error("XHR Failed with a response of: "+(a&&(e||a.responseText)))),d(b,a)},Qf=function(){var a=function b(a,c){a=Of({timeout:45e3},a);var d=b.beforeRequest||oa.Vhs.xhr.beforeRequest;if(d&&"function"==typeof d){var e=d(a);e&&(a=e)}var f=(!0===oa.Vhs.xhr.original?Nf:oa.Vhs.xhr)(a,function(a,b){return Pf(f,a,b,c)}),g=f.abort;return f.abort=function(){return f.aborted=!0,g.apply(f,arguments)},f.uri=a.uri,f.requestTime=Date.now(),f};return a.original=!0,a},Rf=function(a){var b,c,d={};return a.byterange&&(d.Range=(b=a.byterange,c=b.offset+b.length-1,"bytes="+b.offset+"-"+c)),d},Sf=function(a,b){return a.start(b)+"-"+a.end(b)},Tf=function(a,b){var c=a.toString(16);return"00".substring(0,2-c.length)+c+(b%2?" ":"")},Uf=function(a){return a>=32&&a<126?String.fromCharCode(a):"."},Vf=function(a){var b={};return Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d}),b},Wf=function(a){var b=a.byterange||{length:1/0,offset:0};return[b.length,b.offset,a.resolvedUri].join(",")},Xf=function(a){return a.resolvedUri},Yf=function(a){for(var b=Array.prototype.slice.call(a),c="",d=0;d<b.length/16;d++)c+=b.slice(16*d,16*d+16).map(Tf).join("")+" "+b.slice(16*d,16*d+16).map(Uf).join("")+"\n";return c},Zf=Object.freeze({__proto__:null,createTransferableMessage:Vf,initSegmentId:Wf,segmentKeyId:Xf,hexDump:Yf,tagDump:function(a){var b=a.bytes;return Yf(b)},textRanges:function(a){var b,c="";for(b=0;b<a.length;b++)c+=Sf(a,b)+" ";return c}}),$f=function(a){var b=a.playlist,c=a.time,d=void 0===c?void 0:c,e=a.callback;if(!e)throw new Error("getProgramTime: callback must be provided");if(!b||void 0===d)return e({message:"getProgramTime: playlist and time must be provided"});var f=function(a,b){if(!b||!b.segments||0===b.segments.length)return null;for(var c,d=0,e=0;e<b.segments.length&&!(a<=(d=(c=b.segments[e]).videoTimingInfo?c.videoTimingInfo.transmuxedPresentationEnd:d+c.duration));e++);var f=b.segments[b.segments.length-1];if(f.videoTimingInfo&&f.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(a>d){if(a>d+.25*f.duration)return null;c=f}return{segment:c,estimatedStart:c.videoTimingInfo?c.videoTimingInfo.transmuxedPresentationStart:d-c.duration,type:c.videoTimingInfo?"accurate":"estimate"}}(d,b);if(!f)return e({message:"valid programTime was not found"});if("estimate"===f.type)return e({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:f.estimatedStart});var g={mediaSeconds:d},h=function(a,b){if(!b.dateTimeObject)return null
;var c=b.videoTimingInfo.transmuxerPrependedSeconds,d=a-(b.videoTimingInfo.transmuxedPresentationStart+c);return new Date(b.dateTimeObject.getTime()+1e3*d)}(d,f.segment);return h&&(g.programDateTime=h.toISOString()),e(null,g)},_f=function Yh(a){var b=a.programTime,c=a.playlist,d=a.retryCount,e=void 0===d?2:d,f=a.seekTo,g=a.pauseAfterSeek,h=void 0===g||g,i=a.tech,j=a.callback;if(!j)throw new Error("seekToProgramTime: callback must be provided");if(void 0===b||!c||!f)return j({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!c.endList&&!i.hasStarted_)return j({message:"player must be playing a live stream to start buffering"});if(!function(a){if(!a.segments||0===a.segments.length)return!1;for(var b=0;b<a.segments.length;b++)if(!a.segments[b].dateTimeObject)return!1;return!0}(c))return j({message:"programDateTime tags must be provided in the manifest "+c.resolvedUri});var k=function(a,b){var c;try{c=new Date(a)}catch(a){return null}if(!b||!b.segments||0===b.segments.length)return null;var d=b.segments[0];if(c<d.dateTimeObject)return null;for(var e=0;e<b.segments.length-1&&(d=b.segments[e],!(c<b.segments[e+1].dateTimeObject));e++);var f,g=b.segments[b.segments.length-1],h=g.dateTimeObject,i=g.videoTimingInfo?(f=g.videoTimingInfo).transmuxedPresentationEnd-f.transmuxedPresentationStart-f.transmuxerPrependedSeconds:g.duration+.25*g.duration;return c>new Date(h.getTime()+1e3*i)?null:(c>h&&(d=g),{segment:d,estimatedStart:d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationStart:yf.duration(b,b.mediaSequence+b.segments.indexOf(d)),type:d.videoTimingInfo?"accurate":"estimate"})}(b,c);if(!k)return j({message:b+" was not found in the stream"});var l=k.segment,m=function(a,b){var c,d;try{c=new Date(a),d=new Date(b)}catch(a){}var e=c.getTime();return(d.getTime()-e)/1e3}(l.dateTimeObject,b);if("estimate"===k.type)return 0===e?j({message:b+" is not buffered yet. Try again"}):(f(k.estimatedStart+m),void i.one("seeked",function(){Yh({programTime:b,playlist:c,retryCount:e-1,seekTo:f,pauseAfterSeek:h,tech:i,callback:j})}));var n=l.start+m;i.one("seeked",function(){return j(null,i.currentTime())}),h&&i.pause(),f(n)},ag=function(a,b){if(4===a.readyState)return b()},bg=oa.EventTarget,cg=oa.mergeOptions,dg=function(a,b){if(!Jf(a,b))return!1;if(a.sidx&&b.sidx&&(a.sidx.offset!==b.sidx.offset||a.sidx.length!==b.sidx.length))return!1;if(!a.sidx&&b.sidx||a.sidx&&!b.sidx)return!1;if(a.segments&&!b.segments||!a.segments&&b.segments)return!1;if(!a.segments&&!b.segments)return!0;for(var c=0;c<a.segments.length;c++){var d=a.segments[c],e=b.segments[c];if(d.uri!==e.uri)return!1;if(d.byterange||e.byterange){var f=d.byterange,g=e.byterange;if(f&&!g||!f&&g)return!1;if(f.offset!==g.offset||f.length!==g.length)return!1}}return!0},eg=function(a,b){var c,d,e={};for(var f in a){var g=a[f].sidx;if(g){var h=Ga.generateSidxKey(g);if(!b[h])break;c=b[h].sidxInfo,d=g,(Boolean(!c.map&&!d.map)||Boolean(c.map&&d.map&&c.map.byterange.offset===d.map.byterange.offset&&c.map.byterange.length===d.map.byterange.length))&&c.uri===d.uri&&c.byterange.offset===d.byterange.offset&&c.byterange.length===d.byterange.length&&(e[h]=b[h])}}return e},fg=function(a){function b(b,c,d,e){var f;void 0===d&&(d={}),(f=a.call(this)||this).masterPlaylistLoader_=e||Pa["default"](f),e||(f.isMaster_=!0);var g=d,h=g.withCredentials,i=void 0!==h&&h,j=g.handleManifestRedirects,k=void 0!==j&&j;if(f.vhs_=c,f.withCredentials=i,f.handleManifestRedirects=k,!b)throw new Error("A non-empty playlist URL or object is required");return f.on("minimumUpdatePeriod",function(){f.refreshXml_()}),f.on("mediaupdatetimeout",function(){f.refreshMedia_(f.media().id)}),f.state="HAVE_NOTHING",f.loadedPlaylists_={},f.logger_=_e("DashPlaylistLoader"),f.isMaster_?(f.masterPlaylistLoader_.srcUrl=b,f.masterPlaylistLoader_.sidxMapping_={}):f.childPlaylist_=b,f}Qa["default"](b,a);var c=b.prototype;return c.requestErrored_=function(a,b,c){return!this.request||(this.request=null,a?(this.error="object"!=(void 0===a?"undefined":g(a))||a instanceof Error?{status:b.status,message:"DASH request error at URL: "+b.uri,response:b.response,code:2}:a,c&&(this.state=c),this.trigger("error"),!0):void 0)},c.addSidxSegments_=function(a,b,c){var d=this,e=a.sidx&&Ga.generateSidxKey(a.sidx);if(a.sidx&&e&&!this.masterPlaylistLoader_.sidxMapping_[e]){var f=$e(this.handleManifestRedirects,a.sidx.resolvedUri),g=function(f,g){if(!d.requestErrored_(f,g,b)){var h,i=d.masterPlaylistLoader_.sidxMapping_;try{h=Ya["default"](Ka.toUint8(g.response).subarray(8))}catch(a){return void d.requestErrored_(a,g,b)}return i[e]={sidxInfo:a.sidx,sidx:h},Ga.addSidxSegmentsToPlaylist(a,h,a.sidx.resolvedUri),c(!0)}};this.request=function(a,b,c){var d,e=[],f=!1,g=function(a,b,d,e){return b.abort(),f=!0,c(a,b,d,e)},h=function(a,b){if(!f){if(a)return g(a,b,"",e);var c=b.responseText.substring(e&&e.byteLength||0,b.responseText.length);if(e=Ka.concatTypedArrays(e,Ka.stringToBytes(c,!0)),d=d||Ia.getId3Offset(e),e.length<10||d&&e.length<d+2)return ag(b,function(){return g(a,b,"",e)});var h=Ja.detectContainerForBytes(e);return"ts"===h&&e.length<188||!h&&e.length<376?ag(b,function(){return g(a,b,"",e)}):g(null,b,h,e)}},i=b({uri:a,beforeSend:function(a){a.overrideMimeType("text/plain; charset=x-user-defined"),a.addEventListener("progress",function(b){return b.total,b.loaded,Pf(a,null,{statusCode:a.status},h)})}},function(a,b){return Pf(i,a,b,h)});return i}(f,this.vhs_.xhr,function(b,c,e,h){if(b)return g(b,c);if(!e||"mp4"!==e)return g({status:c.status,message:"Unsupported "+(e||"unknown")+" container type for sidx segment at URL: "+f,response:"",playlist:a,internal:!0,blacklistDuration:1/0,code:2},c);var i=a.sidx.byterange,j=i.offset,k=i.length;return h.length>=k+j?g(b,{response:h.subarray(j,j+k),status:c.status,uri:c.uri}):void(d.request=d.vhs_.xhr({uri:f,responseType:"arraybuffer",headers:Rf({byterange:a.sidx.byterange})},g))})}else this.mediaRequest_=Ma["default"].setTimeout(function(){return c(!1)},0)},c.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Ma["default"].clearTimeout(this.minimumUpdatePeriodTimeout_),Ma["default"].clearTimeout(this.mediaRequest_),Ma["default"].clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},c.hasPendingRequest=function(){return this.request||this.mediaRequest_},c.stopRequest=function(){if(this.request){var a=this.request;this.request=null,a.onreadystatechange=null,a.abort()}},c.media=function(a){var b=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var c=this.state;if("string"==typeof a){if(!this.masterPlaylistLoader_.master.playlists[a])throw new Error("Unknown playlist URI: "+a);a=this.masterPlaylistLoader_.master.playlists[a]}var d=!this.media_||a.id!==this.media_.id;return d&&this.loadedPlaylists_[a.id]&&this.loadedPlaylists_[a.id].endList?(this.state="HAVE_METADATA",this.media_=a,void(d&&(this.trigger("mediachanging"),this.trigger("mediachange")))):void(d&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(a,c,function(d){b.haveMetadata({startingState:c,playlist:a})})))},c.haveMetadata=function(a){var b=a.startingState,c=a.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[c.id]=c,this.mediaRequest_=null,this.refreshMedia_(c.id),"HAVE_MASTER"===b?this.trigger("loadedmetadata"):this.trigger("mediachange")},c.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Ma["default"].clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(Ma["default"].clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},c.load=function(a){var b=this;Ma["default"].clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var c=this.media();if(a){var d=c?c.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Ma["default"].setTimeout(function(){return b.load()},d)}else this.started?c&&!c.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},c.start=function(){var a=this;this.started=!0,this.isMaster_?this.requestMaster_(function(b,c){a.haveMaster_(),a.hasPendingRequest()||a.media_||a.media(a.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=Ma["default"].setTimeout(function(){return a.haveMaster_()},0)},c.requestMaster_=function(a){var b=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(c,d){if(!b.requestErrored_(c,d)){var e=d.responseText!==b.masterPlaylistLoader_.masterXml_;return b.masterPlaylistLoader_.masterXml_=d.responseText,d.responseHeaders&&d.responseHeaders.date?b.masterLoaded_=Date.parse(d.responseHeaders.date):b.masterLoaded_=Date.now(),b.masterPlaylistLoader_.srcUrl=$e(b.handleManifestRedirects,b.masterPlaylistLoader_.srcUrl,d),e?(b.handleMaster_(),void b.syncClientServerClock_(function(){return a(d,e)})):a(d,e)}"HAVE_NOTHING"===b.state&&(b.started=!1)})},c.syncClientServerClock_=function(a){var b=this,c=Ga.parseUTCTiming(this.masterPlaylistLoader_.masterXml_);return null===c?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),a()):"DIRECT"===c.method?(this.masterPlaylistLoader_.clientOffset_=c.value-Date.now(),a()):void(this.request=this.vhs_.xhr({uri:Ze(this.masterPlaylistLoader_.srcUrl,c.value),method:c.method,withCredentials:this.withCredentials},function(d,e){if(b.request){if(d)return b.masterPlaylistLoader_.clientOffset_=b.masterLoaded_-Date.now(),a();var f;f="HEAD"===c.method?e.responseHeaders&&e.responseHeaders.date?Date.parse(e.responseHeaders.date):b.masterLoaded_:Date.parse(e.responseText),b.masterPlaylistLoader_.clientOffset_=f-Date.now(),a()}}))},c.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},c.handleMaster_=function(){this.mediaRequest_=null;var a,b,c,d,e,f,g=(a={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_},b=a.masterXml,c=a.srcUrl,d=a.clientOffset,e=a.sidxMapping,f=Ga.parse(b,{manifestUri:c,clientOffset:d,sidxMapping:e}),Df(f,c),f),h=this.masterPlaylistLoader_.master;h&&(g=function(a,b,c){for(var d=!0,e=cg(a,{duration:b.duration,minimumUpdatePeriod:b.minimumUpdatePeriod}),f=0;f<b.playlists.length;f++){var g=b.playlists[f];if(g.sidx){var h=Ga.generateSidxKey(g.sidx);c&&c[h]&&c[h].sidx&&Ga.addSidxSegmentsToPlaylist(g,c[h].sidx,g.sidx.resolvedUri)}var i=Kf(e,g,dg);i&&(e=i,d=!1)}return Bf(b,function(a,b,c,f){if(a.playlists&&a.playlists.length){var g=a.playlists[0].id,h=Kf(e,a.playlists[0],dg);h&&((e=h).mediaGroups[b][c][f].playlists[0]=e.playlists[g],d=!1)}}),b.minimumUpdatePeriod!==a.minimumUpdatePeriod&&(d=!1),d?null:e}(h,g,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=g||h;var i=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return i&&i!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=i),(!h||g&&g.minimumUpdatePeriod!==h.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(g)},c.updateMinimumUpdatePeriodTimeout_=function(){var a=this.masterPlaylistLoader_;a.createMupOnMedia_&&(a.off("loadedmetadata",a.createMupOnMedia_),a.createMupOnMedia_=null),a.minimumUpdatePeriodTimeout_&&(Ma["default"].clearTimeout(a.minimumUpdatePeriodTimeout_),a.minimumUpdatePeriodTimeout_=null);var b=a.master&&a.master.minimumUpdatePeriod;0===b&&(a.media()?b=1e3*a.media().targetDuration:(a.createMupOnMedia_=a.updateMinimumUpdatePeriodTimeout_,a.one("loadedmetadata",a.createMupOnMedia_))),"number"!=typeof b||b<=0?b<0&&this.logger_("found invalid minimumUpdatePeriod of "+b+", not setting a timeout"):this.createMUPTimeout_(b)},c.createMUPTimeout_=function(a){var b=this.masterPlaylistLoader_;b.minimumUpdatePeriodTimeout_=Ma["default"].setTimeout(function(){b.minimumUpdatePeriodTimeout_=null,b.trigger("minimumUpdatePeriod"),b.createMUPTimeout_(a)},a)},c.refreshXml_=function(){var a=this;this.requestMaster_(function(b,c){var d,e,f;c&&(a.media_&&(a.media_=a.masterPlaylistLoader_.master.playlists[a.media_.id]),a.masterPlaylistLoader_.sidxMapping_=(d=a.masterPlaylistLoader_.master,e=a.masterPlaylistLoader_.sidxMapping_,f=eg(d.playlists,e),Bf(d,function(a,b,c,d){if(a.playlists&&a.playlists.length){var g=a.playlists;f=cg(f,eg(g,e))}}),f),a.addSidxSegments_(a.media(),a.state,function(b){a.refreshMedia_(a.media().id)}))})},c.refreshMedia_=function(a){var b=this;if(!a)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var c=this.masterPlaylistLoader_.master.playlists,d=!this.media_||this.media_!==c[a];d?this.media_=c[a]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){b.media().endList||(b.mediaUpdateTimeout=Ma["default"].setTimeout(function(){b.trigger("mediaupdatetimeout"),e()},Lf(b.media(),Boolean(d))))}(),this.trigger("loadedplaylist")},b}(bg),gg={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},hg=function(a){return a.on=a.addEventListener,a.off=a.removeEventListener,a},ig=function(a){return function(){var b=function(a){try{return URL.createObjectURL(new Blob([a],{type:"application/javascript"}))}catch(c){var b=new BlobBuilder;return b.append(a),URL.createObjectURL(b.getBlob())}}(a),c=hg(new Worker(b));c.objURL=b;var d=c.terminate;return c.on=c.addEventListener,c.off=c.removeEventListener,c.terminate=function(){return URL.revokeObjectURL(b),d.call(this)},c}},jg=function(a){return"var browserWorkerPolyFill = "+hg.toString()+";\nbrowserWorkerPolyFill(self);\n"+a},kg=function(a){return a.toString().replace(/^function.+?{/,"").slice(0,-1)},lg=ig(jg(kg(function(){var a=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b]=a[b].concat(c)},this.off=function(b,c){var d;return!!a[b]&&(d=a[b].indexOf(c),a[b]=a[b].slice(),a[b].splice(d,1),d>-1)},this.trigger=function(b){var c,d,e,f;if(c=a[b])if(2===arguments.length)for(e=c.length,d=0;d<e;++d)c[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(e=c.length,d=0;d<e;++d)c[d].apply(this,f)}},this.dispose=function(){a={}}}};a.prototype.pipe=function(a){return this.on("data",function(b){a.push(b)}),this.on("done",function(b){a.flush(b)}),this.on("partialdone",function(b){a.partialFlush(b)}),this.on("endedtimeline",function(b){a.endTimeline(b)}),this.on("reset",function(b){a.reset(b)}),a},a.prototype.push=function(a){this.trigger("data",a)},a.prototype.flush=function(a){this.trigger("done",a)},a.prototype.partialFlush=function(a){this.trigger("partialdone",a)},a.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)},a.prototype.reset=function(a){this.trigger("reset",a)};var b,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q=a,R=Math.pow(2,32)-1;!function(){var a;if(x={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(a in x)x.hasOwnProperty(a)&&(x[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);y=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),z=new Uint8Array([0,0,0,1]),B=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),C=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),D={video:B,audio:C},G=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),F=new Uint8Array([0,0,0,0,0,0,0,0]),H=new Uint8Array([0,0,0,0,0,0,0,0]),I=H,J=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),K=H,E=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),b=function(a){var b,c,d=[],e=0;for(b=1;b<arguments.length;b++)d.push(arguments[b]);for(b=d.length;b--;)e+=d[b].byteLength;for(c=new Uint8Array(e+8),new DataView(c.buffer,c.byteOffset,c.byteLength).setUint32(0,c.byteLength),c.set(a,4),b=0,e=8;b<d.length;b++)c.set(d[b],e),e+=d[b].byteLength;return c},c=function(){return b(x.dinf,b(x.dref,G))},d=function(a){return b(x.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))},q=function(a){return b(x.hdlr,D[a])},p=function(a){var c=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,255&a.duration,85,196,0,0]);return a.samplerate&&(c[12]=a.samplerate>>>24&255,c[13]=a.samplerate>>>16&255,c[14]=a.samplerate>>>8&255,c[15]=255&a.samplerate),b(x.mdhd,c)},o=function(a){return b(x.mdia,p(a),q(a.type),h(a))},f=function(a){return b(x.mfhd,new Uint8Array([0,0,0,0,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a]))},h=function(a){return b(x.minf,"video"===a.type?b(x.vmhd,E):b(x.smhd,F),c(),s(a))},i=function(a,c){for(var d=[],e=c.length;e--;)d[e]=u(c[e]);return b.apply(null,[x.moof,f(a)].concat(d))},j=function(a){for(var c=a.length,d=[];c--;)d[c]=m(a[c]);return b.apply(null,[x.moov,l(4294967295)].concat(d).concat(k(a)))},k=function(a){for(var c=a.length,d=[];c--;)d[c]=v(a[c]);return b.apply(null,[x.mvex].concat(d))},l=function(a){var c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return b(x.mvhd,c)},r=function(a){var c,d,e=a.samples||[],f=new Uint8Array(4+e.length);for(d=0;d<e.length;d++)c=e[d].flags,f[d+4]=c.dependsOn<<4|c.isDependedOn<<2|c.hasRedundancy;return b(x.sdtp,f)},s=function(a){return b(x.stbl,t(a),b(x.stts,K),b(x.stsc,I),b(x.stsz,J),b(x.stco,H))},t=function(a){return b(x.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===a.type?L(a):M(a))},L=function(a){var c,d,e=a.sps||[],f=a.pps||[],g=[],h=[];for(c=0;c<e.length;c++)g.push((65280&e[c].byteLength)>>>8),g.push(255&e[c].byteLength),g=g.concat(Array.prototype.slice.call(e[c]));for(c=0;c<f.length;c++)h.push((65280&f[c].byteLength)>>>8),h.push(255&f[c].byteLength),h=h.concat(Array.prototype.slice.call(f[c]));if(d=[x.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&a.width)>>8,255&a.width,(65280&a.height)>>8,255&a.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),b(x.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([e.length],g,[f.length],h))),b(x.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],a.sarRatio){var i=a.sarRatio[0],j=a.sarRatio[1];d.push(b(x.pasp,new Uint8Array([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,(4278190080&j)>>24,(16711680&j)>>16,(65280&j)>>8,255&j])))}return b.apply(null,d)},M=function(a){return b(x.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&a.channelcount)>>8,255&a.channelcount,(65280&a.samplesize)>>8,255&a.samplesize,0,0,0,0,(65280&a.samplerate)>>8,255&a.samplerate,0,0]),d(a))},n=function(a){var c=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,0,(4278190080&a.duration)>>24,(16711680&a.duration)>>16,(65280&a.duration)>>8,255&a.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&a.width)>>8,255&a.width,0,0,(65280&a.height)>>8,255&a.height,0,0]);return b(x.tkhd,c)},u=function(a){var c,d,e,f,g,h;return c=b(x.tfhd,new Uint8Array([0,0,0,58,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),g=Math.floor(a.baseMediaDecodeTime/(R+1)),h=Math.floor(a.baseMediaDecodeTime%(R+1)),d=b(x.tfdt,new Uint8Array([1,0,0,0,g>>>24&255,g>>>16&255,g>>>8&255,255&g,h>>>24&255,h>>>16&255,h>>>8&255,255&h])),"audio"===a.type?(e=w(a,92),b(x.traf,c,d,e)):(f=r(a),e=w(a,f.length+92),b(x.traf,c,d,e,f))},m=function(a){return a.duration=a.duration||4294967295,b(x.trak,n(a),o(a))},v=function(a){var c=new Uint8Array([0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==a.type&&(c[c.length-1]=0),b(x.trex,c)},P=function(a,b){var c=0,d=0,e=0,f=0;return a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(e=4),void 0!==a[0].compositionTimeOffset&&(f=8)),[0,0,c|d|e|f,1,(4278190080&a.length)>>>24,(16711680&a.length)>>>16,(65280&a.length)>>>8,255&a.length,(4278190080&b)>>>24,(16711680&b)>>>16,(65280&b)>>>8,255&b]},O=function(a,c){var d,e,f,g,h,i;for(c+=20+16*(g=a.samples||[]).length,f=P(g,c),(e=new Uint8Array(f.length+16*g.length)).set(f),d=f.length,i=0;i<g.length;i++)h=g[i],e[d++]=(4278190080&h.duration)>>>24,e[d++]=(16711680&h.duration)>>>16,e[d++]=(65280&h.duration)>>>8,e[d++]=255&h.duration,e[d++]=(4278190080&h.size)>>>24,e[d++]=(16711680&h.size)>>>16,e[d++]=(65280&h.size)>>>8,e[d++]=255&h.size,e[d++]=h.flags.isLeading<<2|h.flags.dependsOn,e[d++]=h.flags.isDependedOn<<6|h.flags.hasRedundancy<<4|h.flags.paddingValue<<1|h.flags.isNonSyncSample,e[d++]=61440&h.flags.degradationPriority,e[d++]=15&h.flags.degradationPriority,e[d++]=(4278190080&h.compositionTimeOffset)>>>24,e[d++]=(16711680&h.compositionTimeOffset)>>>16,e[d++]=(65280&h.compositionTimeOffset)>>>8,e[d++]=255&h.compositionTimeOffset;return b(x.trun,e)},N=function(a,c){var d,e,f,g,h,i;for(c+=20+8*(g=a.samples||[]).length,f=P(g,c),(d=new Uint8Array(f.length+8*g.length)).set(f),e=f.length,i=0;i<g.length;i++)h=g[i],d[e++]=(4278190080&h.duration)>>>24,d[e++]=(16711680&h.duration)>>>16,d[e++]=(65280&h.duration)>>>8,d[e++]=255&h.duration,d[e++]=(4278190080&h.size)>>>24,d[e++]=(16711680&h.size)>>>16,d[e++]=(65280&h.size)>>>8,d[e++]=255&h.size;return b(x.trun,d)},w=function(a,b){return"audio"===a.type?N(a,b):O(a,b)},e=function(){return b(x.ftyp,y,z,y,A)};var S,T,U,V,W,X,Y,Z,$=function(a){return b(x.mdat,a)},_=i,aa=function(a){var b,c=e(),d=j(a);return(b=new Uint8Array(c.byteLength+d.byteLength)).set(c),b.set(d,c.byteLength),b},ba=function(a,b){var c={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return c.dataOffset=b,c.compositionTimeOffset=a.pts-a.dts,c.duration=a.duration,c.size=4*a.length,c.size+=a.byteLength,a.keyFrame&&(c.flags.dependsOn=2,c.flags.isNonSyncSample=0),c},ca=function(a){var b,c,d=[],e=[];for(e.byteLength=0,e.nalCount=0,e.duration=0,d.byteLength=0,b=0;b<a.length;b++)"access_unit_delimiter_rbsp"===(c=a[b]).nalUnitType?(d.length&&(d.duration=c.dts-d.dts,e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d)),(d=[c]).byteLength=c.data.byteLength,d.pts=c.pts,d.dts=c.dts):("slice_layer_without_partitioning_rbsp_idr"===c.nalUnitType&&(d.keyFrame=!0),d.duration=c.dts-d.dts,d.byteLength+=c.data.byteLength,d.push(c));return e.length&&(!d.duration||d.duration<=0)&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d),e},da=function(a){var b,c,d=[],e=[];for(d.byteLength=0,d.nalCount=0,d.duration=0,d.pts=a[0].pts,d.dts=a[0].dts,e.byteLength=0,e.nalCount=0,e.duration=0,e.pts=a[0].pts,e.dts=a[0].dts,b=0;b<a.length;b++)(c=a[b]).keyFrame?(d.length&&(e.push(d),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration),(d=[c]).nalCount=c.length,d.byteLength=c.byteLength,d.pts=c.pts,d.dts=c.dts,d.duration=c.duration):(d.duration+=c.duration,d.nalCount+=c.length,d.byteLength+=c.byteLength,d.push(c));return e.length&&d.duration<=0&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration,e.push(d),e},ea=function(a){var b;return!a[0][0].keyFrame&&a.length>1&&(b=a.shift(),a.byteLength-=b.byteLength,a.nalCount-=b.nalCount,a[0][0].dts=b.dts,a[0][0].pts=b.pts,a[0][0].duration+=b.duration),a},fa=function(a,b){var c,d,e,f,g,h=b||0,i=[];for(c=0;c<a.length;c++)for(f=a[c],d=0;d<f.length;d++)g=f[d],h+=(e=ba(g,h)).size,i.push(e);return i},ga=function(a){var b,c,d,e,f,g,h=0,i=a.byteLength,j=a.nalCount,k=new Uint8Array(i+4*j),l=new DataView(k.buffer);for(b=0;b<a.length;b++)for(e=a[b],c=0;c<e.length;c++)for(f=e[c],d=0;d<f.length;d++)g=f[d],l.setUint32(h,g.data.byteLength),h+=4,k.set(g.data,h),h+=g.data.byteLength;return k},ha=[33,16,5,32,164,27],ia=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ja=function(a){for(var b=[];a--;)b.push(0);return b},ka=function(){if(!S){var a={96e3:[ha,[227,64],ja(154),[56]],88200:[ha,[231],ja(170),[56]],64e3:[ha,[248,192],ja(240),[56]],48e3:[ha,[255,192],ja(268),[55,148,128],ja(54),[112]],44100:[ha,[255,192],ja(268),[55,163,128],ja(84),[112]],32e3:[ha,[255,192],ja(268),[55,234],ja(226),[112]],24e3:[ha,[255,192],ja(268),[55,255,128],ja(268),[111,112],ja(126),[224]],16e3:[ha,[255,192],ja(268),[55,255,128],ja(268),[111,255],ja(269),[223,108],ja(195),[1,192]],12e3:[ia,ja(268),[3,127,248],ja(268),[6,255,240],ja(268),[13,255,224],ja(268),[27,253,128],ja(259),[56]],11025:[ia,ja(268),[3,127,248],ja(268),[6,255,240],ja(268),[13,255,224],ja(268),[27,255,192],ja(268),[55,175,128],ja(108),[112]],8e3:[ia,ja(268),[3,121,16],ja(47),[7]]};b=a,S=Object.keys(b).reduce(function(a,c){return a[c]=new Uint8Array(b[c].reduce(function(a,b){return a.concat(b)},[])),a},{})}var b;return S};X=function(a,b){return T(W(a,b))},Y=function(a,b){return U(V(a),b)},Z=function(a,b,c){return V(c?a:a-b)};var la=T=function(a){return 9e4*a},ma=(U=function(a,b){return a*b},V=function(a){return a/9e4}),na=(W=function(a,b){return a/b},X),oa=Y,pa=Z,qa=function(a,b,c,d){var e,f,g,h,i,j=0,k=0,l=0;if(b.length&&(e=na(a.baseMediaDecodeTime,a.samplerate),f=Math.ceil(9e4/(a.samplerate/1024)),c&&d&&(j=e-Math.max(c,d),l=(k=Math.floor(j/f))*f),!(k<1||l>45e3))){for((g=ka()[a.samplerate])||(g=b[0].data),h=0;h<k;h++)i=b[0],b.splice(0,0,{data:g,dts:i.dts-f,pts:i.pts-f});return a.baseMediaDecodeTime-=Math.floor(oa(l,a.samplerate)),l}},ra=function(a,b,c){return b.minSegmentDts>=c?a:(b.minSegmentDts=1/0,a.filter(function(a){return a.dts>=c&&(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0)}))},sa=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b],d.push({size:c.data.byteLength,duration:1024});return d},ta=function(a){var b,c,d=0,e=new Uint8Array(function(a){var b,c=0;for(b=0;b<a.length;b++)c+=a[b].data.byteLength;return c}(a));for(b=0;b<a.length;b++)c=a[b],e.set(c.data,d),d+=c.data.byteLength;return e},ua=function(a){delete a.minSegmentDts,delete a.maxSegmentDts,delete a.minSegmentPts,delete a.maxSegmentPts},va=function(a,b){var c,d=a.minSegmentDts;return b||(d-=a.timelineStartInfo.dts),c=a.timelineStartInfo.baseMediaDecodeTime,c+=d,c=Math.max(0,c),"audio"===a.type&&(c*=a.samplerate/9e4,c=Math.floor(c)),c},wa=function(a,b){"number"==typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),void 0===a.minSegmentPts?a.minSegmentPts=b.pts:a.minSegmentPts=Math.min(a.minSegmentPts,b.pts),void 0===a.maxSegmentPts?a.maxSegmentPts=b.pts:a.maxSegmentPts=Math.max(a.maxSegmentPts,b.pts)),"number"==typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),void 0===a.minSegmentDts?a.minSegmentDts=b.dts:a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),void 0===a.maxSegmentDts?a.maxSegmentDts=b.dts:a.maxSegmentDts=Math.max(a.maxSegmentDts,b.dts))},xa=function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,e=0;b<a.byteLength&&128!==a[b];){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)e+=255,b++;if(e+=a[b++],!c.payload&&4===d){if("GA94"===String.fromCharCode(a[b+3],a[b+4],a[b+5],a[b+6])){c.payloadType=d,c.payloadSize=e,c.payload=a.subarray(b,b+e);break}c.payload=void 0}b+=e,d=0,e=0}return c},ya=function(a){return 181!==a.payload[0]||49!=(a.payload[1]<<8|a.payload[2])||"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])||3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},za=function(a,b){var c,d,e,f,g=[];if(!(64&b[0]))return g;for(d=31&b[0],c=0;c<d;c++)f={type:3&b[2+(e=3*c)],pts:a},4&b[e+2]&&(f.ccData=b[e+3]<<8|b[e+4],g.push(f));return g},Aa=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},Ba=function hc(a){a=a||{},hc.prototype.init.call(this),this.parse708captions_="boolean"!=typeof a.parse708captions||a.parse708captions,this.captionPackets_=[],this.ccStreams_=[new La(0,0),new La(0,1),new La(1,0),new La(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ga),this.reset(),this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data")),a.on("partialdone",this.trigger.bind(this,"partialdone")),a.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(Ba.prototype=new Q).push=function(a){var b,c,d;if("sei_rbsp"===a.nalUnitType&&(b=xa(a.escapedRBSP)).payload&&4===b.payloadType&&(c=ya(b)))if(a.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(a.dts===this.latestDts_&&this.ignoreNextEqualDts_)return void(--this.numSameDts_||(this.ignoreNextEqualDts_=!1));d=za(a.pts,c),this.captionPackets_=this.captionPackets_.concat(d),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts}},Ba.prototype.flushCCStreams=function(a){this.ccStreams_.forEach(function(b){return"flush"===a?b.flush():b.partialFlush()},this)},Ba.prototype.flushStream=function(a){this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){a.type<2?this.dispatchCea608Packet(a):this.dispatchCea708Packet(a)},this),this.captionPackets_.length=0,this.flushCCStreams(a)):this.flushCCStreams(a)},Ba.prototype.flush=function(){return this.flushStream("flush")},Ba.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ba.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(a){a.reset()})},Ba.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1),
null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)},Ba.prototype.setsChannel1Active=function(a){return 4096==(30720&a.ccData)},Ba.prototype.setsChannel2Active=function(a){return 6144==(30720&a.ccData)},Ba.prototype.setsTextOrXDSActive=function(a){return 256==(28928&a.ccData)||4138==(30974&a.ccData)||6186==(30974&a.ccData)},Ba.prototype.dispatchCea708Packet=function(a){this.parse708captions_&&this.cc708Stream_.push(a)};var Ca={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Da=function(a){return 32<=a&&a<=127||160<=a&&a<=255},Ea=function(a){this.windowNum=a,this.reset()};Ea.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ea.prototype.getText=function(){return this.rows.join("\n")},Ea.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ea.prototype.newLine=function(a){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(a),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ea.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Ea.prototype.addText=function(a){this.rows[this.rowIdx]+=a},Ea.prototype.backspace=function(){if(!this.isEmpty()){var a=this.rows[this.rowIdx];this.rows[this.rowIdx]=a.substr(0,a.length-1)}};var Fa=function(a){this.serviceNum=a,this.text="",this.currentWindow=new Ea(-1),this.windows=[]};Fa.prototype.init=function(a,b){this.startPts=a;for(var c=0;c<8;c++)this.windows[c]=new Ea(c),"function"==typeof b&&(this.windows[c].beforeRowOverflow=b)},Fa.prototype.setCurrentWindow=function(a){this.currentWindow=this.windows[a]};var Ga=function ic(){ic.prototype.init.call(this);var a=this;this.current708Packet=null,this.services={},this.push=function(b){3===b.type?(a.new708Packet(),a.add708Bytes(b)):(null===a.current708Packet&&a.new708Packet(),a.add708Bytes(b))}};Ga.prototype=new Q,Ga.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ga.prototype.add708Bytes=function(a){var b=a.ccData,c=b>>>8,d=255&b;this.current708Packet.ptsVals.push(a.pts),this.current708Packet.data.push(c),this.current708Packet.data.push(d)},Ga.prototype.push708Packet=function(){var a=this.current708Packet,b=a.data,c=null,d=null,e=0,f=b[e++];for(a.seq=f>>6,a.sizeCode=63&f;e<b.length;e++)d=31&(f=b[e++]),7==(c=f>>5)&&d>0&&(c=f=b[e++]),this.pushServiceBlock(c,e,d),d>0&&(e+=d-1)},Ga.prototype.pushServiceBlock=function(a,b,c){var d,e=b,f=this.current708Packet.data,g=this.services[a];for(g||(g=this.initService(a,e));e<b+c&&e<f.length;e++)d=f[e],Da(d)?e=this.handleText(e,g):16===d?e=this.extendedCommands(e,g):128<=d&&d<=135?e=this.setCurrentWindow(e,g):152<=d&&d<=159?e=this.defineWindow(e,g):136===d?e=this.clearWindows(e,g):140===d?e=this.deleteWindows(e,g):137===d?e=this.displayWindows(e,g):138===d?e=this.hideWindows(e,g):139===d?e=this.toggleWindows(e,g):151===d?e=this.setWindowAttributes(e,g):144===d?e=this.setPenAttributes(e,g):145===d?e=this.setPenColor(e,g):146===d?e=this.setPenLocation(e,g):143===d?g=this.reset(e,g):8===d?g.currentWindow.backspace():12===d?g.currentWindow.clearText():13===d?g.currentWindow.pendingNewLine=!0:14===d?g.currentWindow.clearText():141===d&&e++},Ga.prototype.extendedCommands=function(a,b){var c=this.current708Packet.data[++a];return Da(c)&&(a=this.handleText(a,b,!0)),a},Ga.prototype.getPts=function(a){return this.current708Packet.ptsVals[Math.floor(a/2)]},Ga.prototype.initService=function(a,b){var c=this;return this.services[a]=new Fa(a),this.services[a].init(this.getPts(b),function(b){c.flushDisplayed(b,c.services[a])}),this.services[a]},Ga.prototype.handleText=function(a,b,c){var d,e,f=this.current708Packet.data[a],g=(e=Ca[d=(c?4096:0)|f]||d,4096&d&&d===e?"":String.fromCharCode(e)),h=b.currentWindow;return h.pendingNewLine&&!h.isEmpty()&&h.newLine(this.getPts(a)),h.pendingNewLine=!1,h.addText(g),a},Ga.prototype.setCurrentWindow=function(a,b){var c=7&this.current708Packet.data[a];return b.setCurrentWindow(c),a},Ga.prototype.defineWindow=function(a,b){var c=this.current708Packet.data,d=c[a],e=7&d;b.setCurrentWindow(e);var f=b.currentWindow;return d=c[++a],f.visible=(32&d)>>5,f.rowLock=(16&d)>>4,f.columnLock=(8&d)>>3,f.priority=7&d,d=c[++a],f.relativePositioning=(128&d)>>7,f.anchorVertical=127&d,d=c[++a],f.anchorHorizontal=d,d=c[++a],f.anchorPoint=(240&d)>>4,f.rowCount=15&d,d=c[++a],f.columnCount=63&d,d=c[++a],f.windowStyle=(56&d)>>3,f.penStyle=7&d,f.virtualRowCount=f.rowCount+1,a},Ga.prototype.setWindowAttributes=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.winAttr;return d=c[++a],e.fillOpacity=(192&d)>>6,e.fillRed=(48&d)>>4,e.fillGreen=(12&d)>>2,e.fillBlue=3&d,d=c[++a],e.borderType=(192&d)>>6,e.borderRed=(48&d)>>4,e.borderGreen=(12&d)>>2,e.borderBlue=3&d,d=c[++a],e.borderType+=(128&d)>>5,e.wordWrap=(64&d)>>6,e.printDirection=(48&d)>>4,e.scrollDirection=(12&d)>>2,e.justify=3&d,d=c[++a],e.effectSpeed=(240&d)>>4,e.effectDirection=(12&d)>>2,e.displayEffect=3&d,a},Ga.prototype.flushDisplayed=function(a,b){for(var c=[],d=0;d<8;d++)b.windows[d].visible&&!b.windows[d].isEmpty()&&c.push(b.windows[d].getText());b.endPts=a,b.text=c.join("\n\n"),this.pushCaption(b),b.startPts=a},Ga.prototype.pushCaption=function(a){""!==a.text&&(this.trigger("data",{startPts:a.startPts,endPts:a.endPts,text:a.text,stream:"cc708_"+a.serviceNum}),a.text="",a.startPts=a.endPts)},Ga.prototype.displayWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&(b.windows[e].visible=1);return a},Ga.prototype.hideWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&(b.windows[e].visible=0);return a},Ga.prototype.toggleWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&(b.windows[e].visible^=1);return a},Ga.prototype.clearWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&b.windows[e].clearText();return a},Ga.prototype.deleteWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&b.windows[e].reset();return a},Ga.prototype.setPenAttributes=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penAttr;return d=c[++a],e.textTag=(240&d)>>4,e.offset=(12&d)>>2,e.penSize=3&d,d=c[++a],e.italics=(128&d)>>7,e.underline=(64&d)>>6,e.edgeType=(56&d)>>3,e.fontStyle=7&d,a},Ga.prototype.setPenColor=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penColor;return d=c[++a],e.fgOpacity=(192&d)>>6,e.fgRed=(48&d)>>4,e.fgGreen=(12&d)>>2,e.fgBlue=3&d,d=c[++a],e.bgOpacity=(192&d)>>6,e.bgRed=(48&d)>>4,e.bgGreen=(12&d)>>2,e.bgBlue=3&d,d=c[++a],e.edgeRed=(48&d)>>4,e.edgeGreen=(12&d)>>2,e.edgeBlue=3&d,a},Ga.prototype.setPenLocation=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penLoc;return b.currentWindow.pendingNewLine=!0,d=c[++a],e.row=15&d,d=c[++a],e.column=63&d,a},Ga.prototype.reset=function(a,b){var c=this.getPts(a);return this.flushDisplayed(c,b),this.initService(b.serviceNum,a)};var Ha={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ia=function(a){return null===a?"":(a=Ha[a]||a,String.fromCharCode(a))},Ja=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ka=function(){for(var a=[],b=15;b--;)a.push("");return a},La=function jc(a,b){jc.prototype.init.call(this),this.field_=a||0,this.dataChannel_=b||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(a){var b,c,d,e,f;if((b=32639&a.ccData)!==this.lastControlCode_){if(4096==(61440&b)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),d=b>>>8,e=255&b,b!==this.PADDING_)if(b===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(b===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),c=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=c,this.startPts_=a.pts;else if(b===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(a.pts);else if(b===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(a.pts);else if(b===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(a.pts);else if(b===this.CARRIAGE_RETURN_)this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts;else if(b===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(b===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(a.pts),this.displayed_=Ka();else if(b===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ka();else if(b===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=Ka()),this.mode_="paintOn",this.startPts_=a.pts;else if(this.isSpecialCharacter(d,e))f=Ia((d=(3&d)<<8)|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isExtCharacter(d,e))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),f=Ia((d=(3&d)<<8)|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isMidRowCode(d,e))this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14==(14&e)&&this.addFormatting(a.pts,["i"]),1==(1&e)&&this.addFormatting(a.pts,["u"]);else if(this.isOffsetControlCode(d,e))this.column_+=3&e;else if(this.isPAC(d,e)){var g=Ja.indexOf(7968&b);"rollUp"===this.mode_&&(g-this.rollUpRows_+1<0&&(g=this.rollUpRows_-1),this.setRollUp(a.pts,g)),g!==this.row_&&(this.clearFormatting(a.pts),this.row_=g),1&e&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16==(16&b)&&(this.column_=4*((14&b)>>1)),this.isColorPAC(e)&&14==(14&e)&&this.addFormatting(a.pts,["i"])}else this.isNormalChar(d)&&(0===e&&(e=null),f=Ia(d),f+=Ia(e),this[this.mode_](a.pts,f),this.column_+=f.length)}else this.lastControlCode_=null}};La.prototype=new Q,La.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a,b){try{return a.trim()}catch(a){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+b+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})},La.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ka(),this.nonDisplayed_=Ka(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},La.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},La.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&b>=48&&b<=63},La.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&b>=32&&b<=63},La.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&b>=32&&b<=47},La.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&b>=33&&b<=35},La.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&b>=64&&b<=127},La.prototype.isColorPAC=function(a){return a>=64&&a<=79||a>=96&&a<=127},La.prototype.isNormalChar=function(a){return a>=32&&a<=127},La.prototype.setRollUp=function(a,b){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=Ka(),this.displayed_=Ka()),void 0!==b&&b!==this.row_)for(var c=0;c<this.rollUpRows_;c++)this.displayed_[b-c]=this.displayed_[this.row_-c],this.displayed_[this.row_-c]="";void 0===b&&(b=this.row_),this.topRow_=b-this.rollUpRows_+1},La.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);var c=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,c)},La.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[],this[this.mode_](a,b)}},La.prototype.popOn=function(a,b){var c=this.nonDisplayed_[this.row_];c+=b,this.nonDisplayed_[this.row_]=c},La.prototype.rollUp=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c},La.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;a<15;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""},La.prototype.paintOn=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c};var Ma={CaptionStream:Ba,Cea608Stream:La,Cea708Stream:Ga},Na={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Oa=function(a,b){var c=1;for(a>b&&(c=-1);Math.abs(b-a)>4294967296;)a+=8589934592*c;return a},Pa=function kc(a){var b,c;kc.prototype.init.call(this),this.type_=a||"shared",this.push=function(a){"shared"!==this.type_&&a.type!==this.type_||(void 0===c&&(c=a.dts),a.dts=Oa(a.dts,c),a.pts=Oa(a.pts,c),b=a.dts,this.trigger("data",a))},this.flush=function(){c=b,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){c=void 0,b=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Pa.prototype=new Q;var Qa,Ra=Pa,Sa=Oa,Ta=function(a,b,c){var d,e="";for(d=b;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},Ua=function(a,b,c){return decodeURIComponent(Ta(a,b,c))},Va=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Wa={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=Ua(a.data,1,b),a.value=Ua(a.data,b+1,a.data.length).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=Ua(a.data,1,b),a.url=Ua(a.data,b+1,a.data.length);break}},PRIV:function(a){var b,c;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=(c=a.data,unescape(Ta(c,0,b)));break}a.privateData=a.data.subarray(b+1),a.data=a.privateData}};(Qa=function(a){var b,c={descriptor:a&&a.descriptor},d=0,e=[],f=0;if(Qa.prototype.init.call(this),this.dispatchType=Na.METADATA_STREAM_TYPE.toString(16),c.descriptor)for(b=0;b<c.descriptor.length;b++)this.dispatchType+=("00"+c.descriptor[b].toString(16)).slice(-2);this.push=function(a){var b,c,g,h,i;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&(f=0,e.length=0),0===e.length&&(a.data.length<10||a.data[0]!=="I".charCodeAt(0)||a.data[1]!=="D".charCodeAt(0)||a.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(e.push(a),f+=a.data.byteLength,1===e.length&&(d=Va(a.data.subarray(6,10)),d+=10),!(f<d)){for(b={data:new Uint8Array(d),frames:[],pts:e[0].pts,dts:e[0].dts},i=0;i<d;)b.data.set(e[0].data.subarray(0,d-i),i),i+=e[0].data.byteLength,f-=e[0].data.byteLength,e.shift();c=10,64&b.data[5]&&(c+=4,c+=Va(b.data.subarray(10,14)),d-=Va(b.data.subarray(16,20)));do{if((g=Va(b.data.subarray(c+4,c+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((h={id:String.fromCharCode(b.data[c],b.data[c+1],b.data[c+2],b.data[c+3]),data:b.data.subarray(c+10,c+g+10)}).key=h.id,Wa[h.id]&&(Wa[h.id](h),"com.apple.streaming.transportStreamTimestamp"===h.owner)){var j=h.data,k=(1&j[3])<<30|j[4]<<22|j[5]<<14|j[6]<<6|j[7]>>>2;k*=4,k+=3&j[7],h.timeStamp=k,void 0===b.pts&&void 0===b.dts&&(b.pts=h.timeStamp,b.dts=h.timeStamp),this.trigger("timestamp",h)}b.frames.push(h),c+=10,c+=g}while(c<d);this.trigger("data",b)}}}).prototype=new Q;var Xa,Ya,Za,$a=Qa,_a=Ra;(Xa=function(){var a=new Uint8Array(188),b=0;Xa.prototype.init.call(this),this.push=function(c){var d,e=0,f=188;for(b?((d=new Uint8Array(c.byteLength+b)).set(a.subarray(0,b)),d.set(c,b),b=0):d=c;f<d.byteLength;)71!==d[e]||71!==d[f]?(e++,f++):(this.trigger("data",d.subarray(e,f)),e+=188,f+=188);e<d.byteLength&&(a.set(d.subarray(e),0),b=d.byteLength-e)},this.flush=function(){188===b&&71===a[0]&&(this.trigger("data",a),b=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){b=0,this.trigger("reset")}}).prototype=new Q,(Ya=function(){var a,b,c,d;Ya.prototype.init.call(this),d=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,a=function(a,d){var e=0;d.payloadUnitStartIndicator&&(e+=a[e]+1),"pat"===d.type?b(a.subarray(e),d):c(a.subarray(e),d)},b=function(a,b){b.section_number=a[7],b.last_section_number=a[8],d.pmtPid=(31&a[10])<<8|a[11],b.pmtPid=d.pmtPid},c=function(a,b){var c,e;if(1&a[5]){for(d.programMapTable={video:null,audio:null,"timed-metadata":{}},c=3+((15&a[1])<<8|a[2])-4,e=12+((15&a[10])<<8|a[11]);e<c;){var f=a[e],g=(31&a[e+1])<<8|a[e+2];f===Na.H264_STREAM_TYPE&&null===d.programMapTable.video?d.programMapTable.video=g:f===Na.ADTS_STREAM_TYPE&&null===d.programMapTable.audio?d.programMapTable.audio=g:f===Na.METADATA_STREAM_TYPE&&(d.programMapTable["timed-metadata"][g]=f),e+=5+((15&a[e+3])<<8|a[e+4])}b.programMapTable=d.programMapTable}},this.push=function(b){var c={},d=4;if(c.payloadUnitStartIndicator=!!(64&b[1]),c.pid=31&b[1],c.pid<<=8,c.pid|=b[2],(48&b[3])>>>4>1&&(d+=b[d]+1),0===c.pid)c.type="pat",a(b.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",a(b.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([b,d,c]):this.processPes_(b,d,c)},this.processPes_=function(a,b,c){c.pid===this.programMapTable.video?c.streamType=Na.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?c.streamType=Na.ADTS_STREAM_TYPE:c.streamType=this.programMapTable["timed-metadata"][c.pid],c.type="pes",c.data=a.subarray(b),this.trigger("data",c)}}).prototype=new Q,Ya.STREAM_TYPES={h264:27,adts:15},(Za=function(){var a,b=this,c=!1,d={data:[],size:0},e={data:[],size:0},f={data:[],size:0},g=function(a,c,d){var e,f,g=new Uint8Array(a.size),h={type:c},i=0,j=0;if(a.data.length&&!(a.size<9)){for(h.trackId=a.data[0].pid,i=0;i<a.data.length;i++)f=a.data[i],g.set(f.data,j),j+=f.data.byteLength;var k,l,m,n;l=h,n=(k=g)[0]<<16|k[1]<<8|k[2],l.data=new Uint8Array,1===n&&(l.packetLength=6+(k[4]<<8|k[5]),l.dataAlignmentIndicator=0!=(4&k[6]),192&(m=k[7])&&(l.pts=(14&k[9])<<27|(255&k[10])<<20|(254&k[11])<<12|(255&k[12])<<5|(254&k[13])>>>3,l.pts*=4,l.pts+=(6&k[13])>>>1,l.dts=l.pts,64&m&&(l.dts=(14&k[14])<<27|(255&k[15])<<20|(254&k[16])<<12|(255&k[17])<<5|(254&k[18])>>>3,l.dts*=4,l.dts+=(6&k[18])>>>1)),l.data=k.subarray(9+k[8])),e="video"===c||h.packetLength<=a.size,(d||e)&&(a.size=0,a.data.length=0),e&&b.trigger("data",h)}};Za.prototype.init.call(this),this.push=function(h){({pat:function(){},pes:function(){var a,b;switch(h.streamType){case Na.H264_STREAM_TYPE:a=d,b="video";break;case Na.ADTS_STREAM_TYPE:a=e,b="audio";break;case Na.METADATA_STREAM_TYPE:a=f,b="timed-metadata";break;default:return}h.payloadUnitStartIndicator&&g(a,b,!0),a.data.push(h),a.size+=h.data.byteLength},pmt:function(){var d={type:"metadata",tracks:[]};null!==(a=h.programMapTable).video&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"}),null!==a.audio&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"}),c=!0,b.trigger("data",d)}})[h.type]()},this.reset=function(){d.size=0,d.data.length=0,e.size=0,e.data.length=0,this.trigger("reset")},this.flushStreams_=function(){g(d,"video"),g(e,"audio"),g(f,"timed-metadata")},this.flush=function(){if(!c&&a){var d={type:"metadata",tracks:[]};null!==a.video&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"}),null!==a.audio&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"}),b.trigger("data",d)}c=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new Q;var ab={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Xa,TransportParseStream:Ya,ElementaryStream:Za,TimestampRolloverStream:_a,CaptionStream:Ma.CaptionStream,Cea608Stream:Ma.Cea608Stream,Cea708Stream:Ma.Cea708Stream,MetadataStream:$a};for(var bb in Na)Na.hasOwnProperty(bb)&&(ab[bb]=Na[bb]);var cb,db=ab,eb=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(cb=function(a){var b,c=0;cb.prototype.init.call(this),this.skipWarn_=function(a,b){this.trigger("log",{level:"warn",message:"adts skiping bytes "+a+" to "+b+" in frame "+c+" outside syncword"})},this.push=function(d){var e,f,g,h,i,j=0;if(a||(c=0),"audio"===d.type){var k;for(b&&b.length?(g=b,(b=new Uint8Array(g.byteLength+d.data.byteLength)).set(g),b.set(d.data,g.byteLength)):b=d.data;j+7<b.length;)if(255===b[j]&&240==(246&b[j+1])){if("number"==typeof k&&(this.skipWarn_(k,j),k=null),f=2*(1&~b[j+1]),e=(3&b[j+3])<<11|b[j+4]<<3|(224&b[j+5])>>5,i=9e4*(h=1024*(1+(3&b[j+6])))/eb[(60&b[j+2])>>>2],b.byteLength-j<e)break;this.trigger("data",{pts:d.pts+c*i,dts:d.dts+c*i,sampleCount:h,audioobjecttype:1+(b[j+2]>>>6&3),channelcount:(1&b[j+2])<<2|(192&b[j+3])>>>6,samplerate:eb[(60&b[j+2])>>>2],samplingfrequencyindex:(60&b[j+2])>>>2,samplesize:16,data:b.subarray(j+7+f,j+e)}),c++,j+=e}else"number"!=typeof k&&(k=j),j++;"number"==typeof k&&(this.skipWarn_(k,j),k=null),b=b.subarray(j)}},this.flush=function(){c=0,this.trigger("done")},this.reset=function(){b=void 0,this.trigger("reset")},this.endTimeline=function(){b=void 0,this.trigger("endedtimeline")}}).prototype=new Q;var fb,gb,hb,ib=cb,jb=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b},this.bitsAvailable=function(){return 8*b+d},this.loadWord=function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw new Error("no bytes available");f.set(a.subarray(e,e+g)),c=new DataView(f.buffer).getUint32(0),d=8*g,b-=g},this.skipBits=function(a){var e;d>a?(c<<=a,d-=a):(a-=d,a-=8*(e=Math.floor(a/8)),b-=e,this.loadWord(),c<<=a,d-=a)},this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;return(d-=e)>0?c<<=e:b>0&&this.loadWord(),(e=a-e)>0?f<<e|this.readBits(e):f},this.skipLeadingZeros=function(){var a;for(a=0;a<d;++a)if(0!=(c&2147483648>>>a))return c<<=a,d-=a,a;return this.loadWord(),a+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1},this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(gb=function(){var a,b,c=0;gb.prototype.init.call(this),this.push=function(d){var e;b?((e=new Uint8Array(b.byteLength+d.data.byteLength)).set(b),e.set(d.data,b.byteLength),b=e):b=d.data;for(var f=b.byteLength;c<f-3;c++)if(1===b[c+2]){a=c+5;break}for(;a<f;)switch(b[a]){case 0:if(0!==b[a-1]){a+=2;break}if(0!==b[a-2]){a++;break}c+3!==a-2&&this.trigger("data",b.subarray(c+3,a-2));do{a++}while(1!==b[a]&&a<f);c=a-2,a+=3;break;case 1:if(0!==b[a-1]||0!==b[a-2]){a+=3;break}this.trigger("data",b.subarray(c+3,a-2)),c=a-2,a+=3;break;default:a+=3}b=b.subarray(c),a-=c,c=0},this.reset=function(){b=null,c=0,this.trigger("reset")},this.flush=function(){b&&b.byteLength>3&&this.trigger("data",b.subarray(c+3)),b=null,c=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new Q,hb={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(fb=function(){var a,b,c,d,e,f,g,h=new gb;fb.prototype.init.call(this),a=this,this.push=function(a){"video"===a.type&&(b=a.trackId,c=a.pts,d=a.dts,h.push(a))},h.on("data",function(g){var h={trackId:b,pts:c,dts:d,data:g,nalUnitTypeCode:31&g[0]};switch(h.nalUnitTypeCode){case 5:h.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:h.nalUnitType="sei_rbsp",h.escapedRBSP=e(g.subarray(1));break;case 7:h.nalUnitType="seq_parameter_set_rbsp",h.escapedRBSP=e(g.subarray(1)),h.config=f(h.escapedRBSP);break;case 8:h.nalUnitType="pic_parameter_set_rbsp";break;case 9:h.nalUnitType="access_unit_delimiter_rbsp"}a.trigger("data",h)}),h.on("done",function(){a.trigger("done")}),h.on("partialdone",function(){a.trigger("partialdone")}),h.on("reset",function(){a.trigger("reset")}),h.on("endedtimeline",function(){a.trigger("endedtimeline")}),this.flush=function(){h.flush()},this.partialFlush=function(){h.partialFlush()},this.reset=function(){h.reset()},this.endTimeline=function(){h.endTimeline()},g=function(a,b){var c,d=8,e=8;for(c=0;c<a;c++)0!==e&&(e=(d+b.readExpGolomb()+256)%256),d=0===e?d:e},e=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},f=function(a){var b,c,d,e,f,h,i,j,k,l,m,n,o=0,p=0,q=0,r=0,s=[1,1];if(c=(b=new jb(a)).readUnsignedByte(),e=b.readUnsignedByte(),d=b.readUnsignedByte(),b.skipUnsignedExpGolomb(),hb[c]&&(3===(f=b.readUnsignedExpGolomb())&&b.skipBits(1),b.skipUnsignedExpGolomb(),b.skipUnsignedExpGolomb(),b.skipBits(1),b.readBoolean()))for(m=3!==f?8:12,n=0;n<m;n++)b.readBoolean()&&g(n<6?16:64,b);if(b.skipUnsignedExpGolomb(),0===(h=b.readUnsignedExpGolomb()))b.readUnsignedExpGolomb();else if(1===h)for(b.skipBits(1),b.skipExpGolomb(),b.skipExpGolomb(),i=b.readUnsignedExpGolomb(),n=0;n<i;n++)b.skipExpGolomb();if(b.skipUnsignedExpGolomb(),b.skipBits(1),j=b.readUnsignedExpGolomb(),k=b.readUnsignedExpGolomb(),0===(l=b.readBits(1))&&b.skipBits(1),b.skipBits(1),b.readBoolean()&&(o=b.readUnsignedExpGolomb(),p=b.readUnsignedExpGolomb(),q=b.readUnsignedExpGolomb(),r=b.readUnsignedExpGolomb()),b.readBoolean()&&b.readBoolean()){switch(b.readUnsignedByte()){case 1:s=[1,1];break;case 2:s=[12,11];break;case 3:s=[10,11];break;case 4:s=[16,11];break;case 5:s=[40,33];break;case 6:s=[24,11];break;case 7:s=[20,11];break;case 8:s=[32,11];break;case 9:s=[80,33];break;case 10:s=[18,11];break;case 11:s=[15,11];break;case 12:s=[64,33];break;case 13:s=[160,99];break;case 14:s=[4,3];break;case 15:s=[3,2];break;case 16:s=[2,1];break;case 255:s=[b.readUnsignedByte()<<8|b.readUnsignedByte(),b.readUnsignedByte()<<8|b.readUnsignedByte()]}s&&(s[0],s[1])}return{profileIdc:c,levelIdc:d,profileCompatibility:e,width:16*(j+1)-2*o-2*p,height:(2-l)*(k+1)*16-2*q-2*r,sarRatio:s}}}).prototype=new Q;var kb,lb={H264Stream:fb,NalByteStream:gb},mb=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],nb=function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return c=c>=0?c:0,(16&a[b+5])>>4?c+20:c+10},ob=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},pb={isLikelyAacData:function(a){var b=function c(a,b){return a.length-b<10||a[b]!=="I".charCodeAt(0)||a[b+1]!=="D".charCodeAt(0)||a[b+2]!=="3".charCodeAt(0)?b:c(a,b+=nb(a,b))}(a,0);return a.length>=b+2&&255==(255&a[b])&&240==(240&a[b+1])&&16==(22&a[b+1])},parseId3TagSize:nb,parseAdtsSize:function(a,b){var c=(224&a[b+5])>>5,d=a[b+4]<<3;return 6144&a[b+3]|d|c},parseType:function(a,b){return a[b]==="I".charCodeAt(0)&&a[b+1]==="D".charCodeAt(0)&&a[b+2]==="3".charCodeAt(0)?"timed-metadata":!0&a[b]&&240==(240&a[b+1])?"audio":null},parseSampleRate:function(a){for(var b=0;b+5<a.length;){if(255===a[b]&&240==(246&a[b+1]))return mb[(60&a[b+2])>>>2];b++}return null},parseAacTimestamp:function(a){var b,c,d;b=10,64&a[5]&&(b+=4,b+=ob(a.subarray(10,14)));do{if((c=ob(a.subarray(b+4,b+8)))<1)return null;if("PRIV"===String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3])){d=a.subarray(b+10,b+c+10);for(var e=0;e<d.byteLength;e++)if(0===d[e]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(a,b,c){var d,e="";for(d=0;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e}(d,0,e))){var f=d.subarray(e+1),g=(1&f[3])<<30|f[4]<<22|f[5]<<14|f[6]<<6|f[7]>>>2;return g*=4,g+=3&f[7]}break}}b+=10,b+=c}while(b<a.byteLength);return null}};(kb=function(){var a=new Uint8Array,b=0;kb.prototype.init.call(this),this.setTimestamp=function(a){b=a},this.push=function(c){var d,e,f,g,h=0,i=0;for(a.length?(g=a.length,(a=new Uint8Array(c.byteLength+g)).set(a.subarray(0,g)),a.set(c,g)):a=c;a.length-i>=3;)if(a[i]!=="I".charCodeAt(0)||a[i+1]!=="D".charCodeAt(0)||a[i+2]!=="3".charCodeAt(0))if(255!=(255&a[i])||240!=(240&a[i+1]))i++;else{if(a.length-i<7)break;if(i+(h=pb.parseAdtsSize(a,i))>a.length)break;f={type:"audio",data:a.subarray(i,i+h),pts:b,dts:b},this.trigger("data",f),i+=h}else{if(a.length-i<10)break;if(i+(h=pb.parseId3TagSize(a,i))>a.length)break;e={type:"timed-metadata",data:a.subarray(i,i+h)},this.trigger("data",e),i+=h}d=a.length-i,a=d>0?a.subarray(i):new Uint8Array},this.reset=function(){a=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){a=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new Q;var qb,rb,sb,tb,ub=kb,vb=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],wb=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],xb=lb.H264Stream,yb=pb.isLikelyAacData,zb=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},Ab=function(a,b,c,d,e,f){return{start:{dts:a,pts:a+(c-b)},end:{dts:a+(d-b),pts:a+(e-c)},prependedContentDuration:f,baseMediaDecodeTime:a}};(rb=function(a,b){var c,d=[],e=0,f=0,g=1/0;c=(b=b||{}).firstSequenceNumber||0,rb.prototype.init.call(this),this.push=function(b){wa(a,b),a&&vb.forEach(function(c){a[c]=b[c]}),d.push(b)},this.setEarliestDts=function(a){e=a},this.setVideoBaseMediaDecodeTime=function(a){g=a},this.setAudioAppendStart=function(a){f=a},this.flush=function(){var h,i,j,k,l,m,n;0!==d.length?(h=ra(d,a,e),a.baseMediaDecodeTime=va(a,b.keepOriginalTimestamps),n=qa(a,h,f,g),a.samples=sa(h),j=$(ta(h)),d=[],i=_(c,[a]),
k=new Uint8Array(i.byteLength+j.byteLength),c++,k.set(i),k.set(j,i.byteLength),ua(a),l=Math.ceil(9216e4/a.samplerate),h.length&&(m=h.length*l,this.trigger("segmentTimingInfo",Ab(na(a.baseMediaDecodeTime,a.samplerate),h[0].dts,h[0].pts,h[0].dts+m,h[0].pts+m,n||0)),this.trigger("timingInfo",{start:h[0].pts,end:h[0].pts+m})),this.trigger("data",{track:a,boxes:k}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){ua(a),d=[],this.trigger("reset")}}).prototype=new Q,(qb=function(a,b){var c,d,e,f=[],g=[];c=(b=b||{}).firstSequenceNumber||0,qb.prototype.init.call(this),delete a.minPTS,this.gopCache_=[],this.push=function(b){wa(a,b),"seq_parameter_set_rbsp"!==b.nalUnitType||d||(d=b.config,a.sps=[b.data],wb.forEach(function(b){a[b]=d[b]},this)),"pic_parameter_set_rbsp"!==b.nalUnitType||e||(e=b.data,a.pps=[b.data]),f.push(b)},this.flush=function(){for(var d,e,h,i,j,k,l,m,n=0;f.length&&"access_unit_delimiter_rbsp"!==f[0].nalUnitType;)f.shift();if(0===f.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(d=ca(f),(h=da(d))[0][0].keyFrame||((e=this.getGopForFusion_(f[0],a))?(n=e.duration,h.unshift(e),h.byteLength+=e.byteLength,h.nalCount+=e.nalCount,h.pts=e.pts,h.dts=e.dts,h.duration+=e.duration):h=ea(h)),g.length){var o;if(!(o=b.alignGopsAtEnd?this.alignGopsAtEnd_(h):this.alignGopsAtStart_(h)))return this.gopCache_.unshift({gop:h.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ua(a),h=o}wa(a,h),a.samples=fa(h),j=$(ga(h)),a.baseMediaDecodeTime=va(a,b.keepOriginalTimestamps),this.trigger("processedGopsInfo",h.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}})),l=h[0],m=h[h.length-1],this.trigger("segmentTimingInfo",Ab(a.baseMediaDecodeTime,l.dts,l.pts,m.dts+m.duration,m.pts+m.duration,n)),this.trigger("timingInfo",{start:h[0].pts,end:h[h.length-1].pts+h[h.length-1].duration}),this.gopCache_.unshift({gop:h.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime),this.trigger("timelineStartInfo",a.timelineStartInfo),i=_(c,[a]),k=new Uint8Array(i.byteLength+j.byteLength),c++,k.set(i),k.set(j,i.byteLength),this.trigger("data",{track:a,boxes:k}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),f=[],this.gopCache_.length=0,g.length=0,this.trigger("reset")},this.resetStream_=function(){ua(a),d=void 0,e=void 0},this.getGopForFusion_=function(b){var c,d,e,f,g,h=1/0;for(g=0;g<this.gopCache_.length;g++)e=(f=this.gopCache_[g]).gop,a.pps&&zb(a.pps[0],f.pps[0])&&a.sps&&zb(a.sps[0],f.sps[0])&&(e.dts<a.timelineStartInfo.dts||(c=b.dts-e.dts-e.duration)>=-1e4&&c<=45e3&&(!d||h>c)&&(d=f,h=c));return d?d.gop:null},this.alignGopsAtStart_=function(a){var b,c,d,e,f,h,i,j;for(f=a.byteLength,h=a.nalCount,i=a.duration,b=c=0;b<g.length&&c<a.length&&(d=g[b],e=a[c],d.pts!==e.pts);)e.pts>d.pts?b++:(c++,f-=e.byteLength,h-=e.nalCount,i-=e.duration);return 0===c?a:c===a.length?null:((j=a.slice(c)).byteLength=f,j.duration=i,j.nalCount=h,j.pts=j[0].pts,j.dts=j[0].dts,j)},this.alignGopsAtEnd_=function(a){var b,c,d,e,f,h,i;for(b=g.length-1,c=a.length-1,f=null,h=!1;b>=0&&c>=0;){if(d=g[b],e=a[c],d.pts===e.pts){h=!0;break}d.pts>e.pts?b--:(b===g.length-1&&(f=c),c--)}if(!h&&null===f)return null;if(0===(i=h?c:f))return a;var j=a.slice(i),k=j.reduce(function(a,b){return a.byteLength+=b.byteLength,a.duration+=b.duration,a.nalCount+=b.nalCount,a},{byteLength:0,duration:0,nalCount:0});return j.byteLength=k.byteLength,j.duration=k.duration,j.nalCount=k.nalCount,j.pts=j[0].pts,j.dts=j[0].dts,j},this.alignGopsWith=function(a){g=a}}).prototype=new Q,(tb=function(a,b){this.numberOfTracks=0,this.metadataStream=b,void 0!==(a=a||{}).remux?this.remuxTracks=!!a.remux:this.remuxTracks=!0,"boolean"==typeof a.keepOriginalTimestamps?this.keepOriginalTimestamps=a.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,tb.prototype.init.call(this),this.push=function(a){return a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):(this.pendingTracks.push(a.track),this.pendingBytes+=a.boxes.byteLength,"video"===a.track.type&&(this.videoTrack=a.track,this.pendingBoxes.push(a.boxes)),void("audio"===a.track.type&&(this.audioTrack=a.track,this.pendingBoxes.unshift(a.boxes))))}}).prototype=new Q,tb.prototype.flush=function(a){var b,c,d,e,f=0,g={captions:[],captionStreams:{},metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return void(++this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,wb.forEach(function(a){g.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,vb.forEach(function(a){g.info[a]=this.audioTrack[a]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?g.type=this.pendingTracks[0].type:g.type="combined",this.emittedTracks+=this.pendingTracks.length,d=aa(this.pendingTracks),g.initSegment=new Uint8Array(d.byteLength),g.initSegment.set(d),g.data=new Uint8Array(this.pendingBytes),e=0;e<this.pendingBoxes.length;e++)g.data.set(this.pendingBoxes[e],f),f+=this.pendingBoxes[e].byteLength;for(e=0;e<this.pendingCaptions.length;e++)(b=this.pendingCaptions[e]).startTime=pa(b.startPts,h,this.keepOriginalTimestamps),b.endTime=pa(b.endPts,h,this.keepOriginalTimestamps),g.captionStreams[b.stream]=!0,g.captions.push(b);for(e=0;e<this.pendingMetadata.length;e++)(c=this.pendingMetadata[e]).cueTime=pa(c.pts,h,this.keepOriginalTimestamps),g.metadata.push(c);for(g.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",g),e=0;e<g.captions.length;e++)b=g.captions[e],this.trigger("caption",b);for(e=0;e<g.metadata.length;e++)c=g.metadata[e],this.trigger("id3Frame",c)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},tb.prototype.setRemux=function(a){this.remuxTracks=a},(sb=function(a){var b,c,d=this,e=!0;sb.prototype.init.call(this),a=a||{},this.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="aac",e.metadataStream=new db.MetadataStream,e.aacStream=new ub,e.audioTimestampRolloverStream=new db.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new db.TimestampRolloverStream("timed-metadata"),e.adtsStream=new ib,e.coalesceStream=new tb(a,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(a){e.aacStream.setTimestamp(a.timeStamp)}),e.aacStream.on("data",function(f){"timed-metadata"!==f.type&&"audio"!==f.type||e.audioSegmentStream||(c=c||{timelineStartInfo:{baseMediaDecodeTime:d.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new rb(c,a),e.audioSegmentStream.on("log",d.getLogTrigger_("audioSegmentStream")),e.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream),d.trigger("trackinfo",{hasAudio:!!c,hasVideo:!!b}))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="ts",e.metadataStream=new db.MetadataStream,e.packetStream=new db.TransportPacketStream,e.parseStream=new db.TransportParseStream,e.elementaryStream=new db.ElementaryStream,e.timestampRolloverStream=new db.TimestampRolloverStream,e.adtsStream=new ib,e.h264Stream=new xb,e.captionStream=new db.CaptionStream(a),e.coalesceStream=new tb(a,e.metadataStream),e.headOfPipeline=e.packetStream,e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream).pipe(e.timestampRolloverStream),e.timestampRolloverStream.pipe(e.h264Stream),e.timestampRolloverStream.pipe(e.adtsStream),e.timestampRolloverStream.pipe(e.metadataStream).pipe(e.coalesceStream),e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream),e.elementaryStream.on("data",function(f){var g;if("metadata"===f.type){for(g=f.tracks.length;g--;)b||"video"!==f.tracks[g].type?c||"audio"!==f.tracks[g].type||((c=f.tracks[g]).timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime):(b=f.tracks[g]).timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime;b&&!e.videoSegmentStream&&(e.coalesceStream.numberOfTracks++,e.videoSegmentStream=new qb(b,a),e.videoSegmentStream.on("log",d.getLogTrigger_("videoSegmentStream")),e.videoSegmentStream.on("timelineStartInfo",function(b){c&&!a.keepOriginalTimestamps&&(c.timelineStartInfo=b,e.audioSegmentStream.setEarliestDts(b.dts-d.baseMediaDecodeTime))}),e.videoSegmentStream.on("processedGopsInfo",d.trigger.bind(d,"gopInfo")),e.videoSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"videoSegmentTimingInfo")),e.videoSegmentStream.on("baseMediaDecodeTime",function(a){c&&e.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),e.videoSegmentStream.on("timingInfo",d.trigger.bind(d,"videoTimingInfo")),e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream)),c&&!e.audioSegmentStream&&(e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new rb(c,a),e.audioSegmentStream.on("log",d.getLogTrigger_("audioSegmentStream")),e.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),e.audioSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"audioSegmentTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)),d.trigger("trackinfo",{hasAudio:!!c,hasVideo:!!b})}}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("id3Frame",function(a){a.dispatchType=e.metadataStream.dispatchType,d.trigger("id3Frame",a)}),e.coalesceStream.on("caption",this.trigger.bind(this,"caption")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(d){var e=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=d),c&&(c.timelineStartInfo.dts=void 0,c.timelineStartInfo.pts=void 0,ua(c),e.audioTimestampRolloverStream&&e.audioTimestampRolloverStream.discontinuity()),b&&(e.videoSegmentStream&&(e.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,ua(b),e.captionStream.reset()),e.timestampRolloverStream&&e.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(a){c&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)},this.setRemux=function(b){var c=this.transmuxPipeline_;a.remux=b,c&&c.coalesceStream&&c.coalesceStream.setRemux(b)},this.alignGopsWith=function(a){b&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)},this.getLogTrigger_=function(a){var b=this;return function(c){c.stream=a,b.trigger("log",c)}},this.push=function(a){if(e){var b=yb(a);if(b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),this.transmuxPipeline_)for(var c=Object.keys(this.transmuxPipeline_),d=0;d<c.length;d++){var f=c[d];"headOfPipeline"!==f&&this.transmuxPipeline_[f].on&&this.transmuxPipeline_[f].on("log",this.getLogTrigger_(f))}e=!1}this.transmuxPipeline_.headOfPipeline.push(a)},this.flush=function(){e=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new Q;var Bb,Cb,Db,Eb={Transmuxer:sb,VideoSegmentStream:qb,AudioSegmentStream:rb,AUDIO_PROPERTIES:vb,VIDEO_PROPERTIES:wb,generateSegmentTimingInfo:Ab},Fb=function(a){return a>>>0},Gb=function(a){var b="";return b+=String.fromCharCode(a[0]),b+=String.fromCharCode(a[1]),b+=String.fromCharCode(a[2]),b+=String.fromCharCode(a[3])},Hb=Fb,Ib=function lc(a,b){var c,d,e,f,g,h=[];if(!b.length)return null;for(c=0;c<a.byteLength;)d=Hb(a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3]),e=Gb(a.subarray(c+4,c+8)),f=d>1?c+d:a.byteLength,e===b[0]&&(1===b.length?h.push(a.subarray(c+8,f)):(g=lc(a.subarray(c+8,f),b.slice(1))).length&&(h=h.concat(g))),c=f;return h},Jb=Fb,Kb=function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4)),baseMediaDecodeTime:Jb(a[4]<<24|a[5]<<16|a[6]<<8|a[7])};return 1===b.version&&(b.baseMediaDecodeTime*=Math.pow(2,32),b.baseMediaDecodeTime+=Jb(a[8]<<24|a[9]<<16|a[10]<<8|a[11])),b},Lb=function(a){return{isLeading:(12&a[0])>>>2,dependsOn:3&a[0],isDependedOn:(192&a[1])>>>6,hasRedundancy:(48&a[1])>>>4,paddingValue:(14&a[1])>>>1,isNonSyncSample:1&a[1],degradationPriority:a[2]<<8|a[3]}},Mb=function(a){var b,c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},d=new DataView(a.buffer,a.byteOffset,a.byteLength),e=1&c.flags[2],f=4&c.flags[2],g=1&c.flags[1],h=2&c.flags[1],i=4&c.flags[1],j=8&c.flags[1],k=d.getUint32(4),l=8;for(e&&(c.dataOffset=d.getInt32(l),l+=4),f&&k&&(b={flags:Lb(a.subarray(l,l+4))},l+=4,g&&(b.duration=d.getUint32(l),l+=4),h&&(b.size=d.getUint32(l),l+=4),j&&(1===c.version?b.compositionTimeOffset=d.getInt32(l):b.compositionTimeOffset=d.getUint32(l),l+=4),c.samples.push(b),k--);k--;)b={},g&&(b.duration=d.getUint32(l),l+=4),h&&(b.size=d.getUint32(l),l+=4),i&&(b.flags=Lb(a.subarray(l,l+4)),l+=4),j&&(1===c.version?b.compositionTimeOffset=d.getInt32(l):b.compositionTimeOffset=d.getUint32(l),l+=4),c.samples.push(b);return c},Nb=function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:c.getUint32(4)},e=1&d.flags[2],f=2&d.flags[2],g=8&d.flags[2],h=16&d.flags[2],i=32&d.flags[2],j=65536&d.flags[0],k=131072&d.flags[0];return b=8,e&&(b+=4,d.baseDataOffset=c.getUint32(12),b+=4),f&&(d.sampleDescriptionIndex=c.getUint32(b),b+=4),g&&(d.defaultSampleDuration=c.getUint32(b),b+=4),h&&(d.defaultSampleSize=c.getUint32(b),b+=4),i&&(d.defaultSampleFlags=c.getUint32(b)),j&&(d.durationIsEmpty=!0),!e&&k&&(d.baseDataOffsetIsMoof=!0),d},Ob=Aa,Pb=Ma.CaptionStream,Qb=function(a,b){for(var c=a,d=0;d<b.length;d++){var e=b[d];if(c<e.size)return e;c-=e.size}return null},Rb=function(a,b){var c=Ib(a,["moof","traf"]),d=Ib(a,["mdat"]),e={},f=[];return d.forEach(function(a,b){var d=c[b];f.push({mdat:a,traf:d})}),f.forEach(function(a){var c,d=a.mdat,f=a.traf,g=Ib(f,["tfhd"]),h=Nb(g[0]),i=h.trackId,j=Ib(f,["tfdt"]),k=j.length>0?Kb(j[0]).baseMediaDecodeTime:0,l=Ib(f,["trun"]);b===i&&l.length>0&&(c=function(a,b,c){var d,e,f,g,h=new DataView(a.buffer,a.byteOffset,a.byteLength),i={logs:[],seiNals:[]};for(e=0;e+4<a.length;e+=f)if(f=h.getUint32(e),e+=4,!(f<=0))switch(31&a[e]){case 6:var j=a.subarray(e+1,e+1+f),k=Qb(e,b);if(d={nalUnitType:"sei_rbsp",size:f,data:j,escapedRBSP:Ob(j),trackId:c},k)d.pts=k.pts,d.dts=k.dts,g=k;else{if(!g){i.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+e+" for trackId "+c+". See mux.js#223."});break}d.pts=g.pts,d.dts=g.dts}i.seiNals.push(d)}return i}(d,function(a,b,c){var d=b,e=c.defaultSampleDuration||0,f=c.defaultSampleSize||0,g=c.trackId,h=[];return a.forEach(function(a){var b=Mb(a).samples;b.forEach(function(a){void 0===a.duration&&(a.duration=e),void 0===a.size&&(a.size=f),a.trackId=g,a.dts=d,void 0===a.compositionTimeOffset&&(a.compositionTimeOffset=0),a.pts=d+a.compositionTimeOffset,d+=a.duration}),h=h.concat(b)}),h}(l,k,h),i),e[i]||(e[i]={seiNals:[],logs:[]}),e[i].seiNals=e[i].seiNals.concat(c.seiNals),e[i].logs=e[i].logs.concat(c.logs))}),e},Sb=function(){var a,b,c,d,e,f,h=!1;this.isInitialized=function(){return h},this.init=function(b){a=new Pb,h=!0,f=!!b&&b.isPartial,a.on("data",function(a){a.startTime=a.startPts/d,a.endTime=a.endPts/d,e.captions.push(a),e.captionStreams[a.stream]=!0}),a.on("log",function(a){e.logs.push(a)})},this.isNewInit=function(a,b){return!(a&&0===a.length||b&&"object"==(void 0===b?"undefined":g(b))&&0===Object.keys(b).length||c===a[0]&&d===b[c])},this.parse=function(a,f,g){var h;if(!this.isInitialized())return null;if(!f||!g)return null;if(this.isNewInit(f,g))c=f[0],d=g[c];else if(null===c||!d)return b.push(a),null;for(;b.length>0;){var i=b.shift();this.parse(i,f,g)}return(h=function(a,b,c){if(null===b)return null;var d=Rb(a,b)[b]||{};return{seiNals:d.seiNals,logs:d.logs,timescale:c}}(a,c,d))&&h.logs&&(e.logs=e.logs.concat(h.logs)),null!==h&&h.seiNals?(this.pushNals(h.seiNals),this.flushStream(),e):e.logs.length?{logs:e.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(b){return this.isInitialized()&&b&&0!==b.length?void b.forEach(function(b){a.push(b)}):null},this.flushStream=function(){return this.isInitialized()?void(f?a.partialFlush():a.flush()):null},this.clearParsedCaptions=function(){e.captions=[],e.captionStreams={},e.logs=[]},this.resetCaptionStream=function(){return this.isInitialized()?void a.reset():null},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){b=[],c=null,d=null,e?this.clearParsedCaptions():e={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Tb=Fb,Ub=function(a){return("00"+a.toString(16)).slice(-2)};Bb=function(a,b){var c,d,e;return c=Ib(b,["moof","traf"]),d=[].concat.apply([],c.map(function(b){return Ib(b,["tfhd"]).map(function(c){var d,e,f;return d=Tb(c[4]<<24|c[5]<<16|c[6]<<8|c[7]),e=a[d]||9e4,(f="number"!=typeof(f=Ib(b,["tfdt"]).map(function(a){var b,c;return b=a[0],c=Tb(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),1===b&&(c*=Math.pow(2,32),c+=Tb(a[8]<<24|a[9]<<16|a[10]<<8|a[11])),c})[0])||isNaN(f)?1/0:f)/e})})),e=Math.min.apply(null,d),isFinite(e)?e:0},Cb=function(a){var b=Ib(a,["moov","trak"]),c=[];return b.forEach(function(a){var b,d,e={},f=Ib(a,["tkhd"])[0];f&&(d=(b=new DataView(f.buffer,f.byteOffset,f.byteLength)).getUint8(0),e.id=0===d?b.getUint32(12):b.getUint32(20));var g=Ib(a,["mdia","hdlr"])[0];if(g){var h=Gb(g.subarray(8,12));e.type="vide"===h?"video":"soun"===h?"audio":h}var i=Ib(a,["mdia","minf","stbl","stsd"])[0];if(i){var j=i.subarray(8);e.codec=Gb(j.subarray(4,8));var k,l=Ib(j,[e.codec])[0];l&&(/^[a-z]vc[1-9]$/i.test(e.codec)?(k=l.subarray(78),"avcC"===Gb(k.subarray(4,8))&&k.length>11?(e.codec+=".",e.codec+=Ub(k[9]),e.codec+=Ub(k[10]),e.codec+=Ub(k[11])):e.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(e.codec)?(k=l.subarray(28),"esds"===Gb(k.subarray(4,8))&&k.length>20&&0!==k[19]?(e.codec+="."+Ub(k[19]),e.codec+="."+Ub(k[20]>>>2&63).replace(/^0/,"")):e.codec="mp4a.40.2"):e.codec=e.codec.toLowerCase())}var m=Ib(a,["mdia","mdhd"])[0];m&&(e.timescale=Db(m)),c.push(e)}),c};var Vb=Bb,Wb=Cb,Xb=(Db=function(a){var b=0===a[0]?12:20;return Tb(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])},function(a){var b=31&a[1];return b<<=8,b|=a[2]}),Yb=function(a){return!!(64&a[1])},Zb=function(a){var b=0;return(48&a[3])>>>4>1&&(b+=a[4]+1),b},$b=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},_b={parseType:function(a,b){var c=Xb(a);return 0===c?"pat":c===b?"pmt":b?"pes":null},parsePat:function(a){var b=Yb(a),c=4+Zb(a);return b&&(c+=a[c]+1),(31&a[c+10])<<8|a[c+11]},parsePmt:function(a){var b={},c=Yb(a),d=4+Zb(a);if(c&&(d+=a[d]+1),1&a[d+5]){var e;e=3+((15&a[d+1])<<8|a[d+2])-4;for(var f=12+((15&a[d+10])<<8|a[d+11]);f<e;){var g=d+f;b[(31&a[g+1])<<8|a[g+2]]=a[g],f+=5+((15&a[g+3])<<8|a[g+4])}return b}},parsePayloadUnitStartIndicator:Yb,parsePesType:function(a,b){switch(b[Xb(a)]){case Na.H264_STREAM_TYPE:return"video";case Na.ADTS_STREAM_TYPE:return"audio";case Na.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(a){if(!Yb(a))return null;var b=4+Zb(a);if(b>=a.byteLength)return null;var c,d=null;return 192&(c=a[b+7])&&((d={}).pts=(14&a[b+9])<<27|(255&a[b+10])<<20|(254&a[b+11])<<12|(255&a[b+12])<<5|(254&a[b+13])>>>3,d.pts*=4,d.pts+=(6&a[b+13])>>>1,d.dts=d.pts,64&c&&(d.dts=(14&a[b+14])<<27|(255&a[b+15])<<20|(254&a[b+16])<<12|(255&a[b+17])<<5|(254&a[b+18])>>>3,d.dts*=4,d.dts+=(6&a[b+18])>>>1)),d},videoPacketContainsKeyFrame:function(a){for(var b=4+Zb(a),c=a.subarray(b),d=0,e=0,f=!1;e<c.byteLength-3;e++)if(1===c[e+2]){d=e+5;break}for(;d<c.byteLength;)switch(c[d]){case 0:if(0!==c[d-1]){d+=2;break}if(0!==c[d-2]){d++;break}e+3!==d-2&&"slice_layer_without_partitioning_rbsp_idr"===$b(31&c[e+3])&&(f=!0);do{d++}while(1!==c[d]&&d<c.length);e=d-2,d+=3;break;case 1:if(0!==c[d-1]||0!==c[d-2]){d+=3;break}"slice_layer_without_partitioning_rbsp_idr"===$b(31&c[e+3])&&(f=!0),e=d-2,d+=3;break;default:d+=3}return c=c.subarray(e),d-=e,e=0,c&&c.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===$b(31&c[e+3])&&(f=!0),f}},ac=Sa,bc={};bc.ts=_b,bc.aac=pb;var cc=function(a,b,c){for(var d,e,f,g,h=0,i=188,j=!1;i<=a.byteLength;)if(71!==a[h]||71!==a[i]&&i!==a.byteLength)h++,i++;else{switch(d=a.subarray(h,i),bc.ts.parseType(d,b.pid)){case"pes":e=bc.ts.parsePesType(d,b.table),f=bc.ts.parsePayloadUnitStartIndicator(d),"audio"===e&&f&&(g=bc.ts.parsePesTime(d))&&(g.type="audio",c.audio.push(g),j=!0)}if(j)break;h+=188,i+=188}for(h=(i=a.byteLength)-188,j=!1;h>=0;)if(71!==a[h]||71!==a[i]&&i!==a.byteLength)h--,i--;else{switch(d=a.subarray(h,i),bc.ts.parseType(d,b.pid)){case"pes":e=bc.ts.parsePesType(d,b.table),f=bc.ts.parsePayloadUnitStartIndicator(d),"audio"===e&&f&&(g=bc.ts.parsePesTime(d))&&(g.type="audio",c.audio.push(g),j=!0)}if(j)break;h-=188,i-=188}},dc=function(a,b,c){for(var d,e,f,g,h,i,j,k=0,l=188,m=!1,n={data:[],size:0};l<a.byteLength;)if(71!==a[k]||71!==a[l])k++,l++;else{switch(d=a.subarray(k,l),bc.ts.parseType(d,b.pid)){case"pes":if(e=bc.ts.parsePesType(d,b.table),f=bc.ts.parsePayloadUnitStartIndicator(d),"video"===e&&(f&&!m&&(g=bc.ts.parsePesTime(d))&&(g.type="video",c.video.push(g),m=!0),!c.firstKeyFrame)){if(f&&0!==n.size){for(h=new Uint8Array(n.size),i=0;n.data.length;)j=n.data.shift(),h.set(j,i),i+=j.byteLength;if(bc.ts.videoPacketContainsKeyFrame(h)){var o=bc.ts.parsePesTime(h);o&&(c.firstKeyFrame=o,c.firstKeyFrame.type="video")}n.size=0}n.data.push(d),n.size+=d.byteLength}}if(m&&c.firstKeyFrame)break;k+=188,l+=188}for(k=(l=a.byteLength)-188,m=!1;k>=0;)if(71!==a[k]||71!==a[l])k--,l--;else{switch(d=a.subarray(k,l),bc.ts.parseType(d,b.pid)){case"pes":e=bc.ts.parsePesType(d,b.table),f=bc.ts.parsePayloadUnitStartIndicator(d),"video"===e&&f&&(g=bc.ts.parsePesTime(d))&&(g.type="video",c.video.push(g),m=!0)}if(m)break;k-=188,l-=188}},ec=function(a){var b={pid:null,table:null},c={};for(var d in function(a,b){for(var c,d=0,e=188;e<a.byteLength;)if(71!==a[d]||71!==a[e])d++,e++;else{switch(c=a.subarray(d,e),bc.ts.parseType(c,b.pid)){case"pat":b.pid=bc.ts.parsePat(c);break;case"pmt":var f=bc.ts.parsePmt(c);b.table=b.table||{},Object.keys(f).forEach(function(a){b.table[a]=f[a]})}d+=188,e+=188}}(a,b),b.table)if(b.table.hasOwnProperty(d))switch(b.table[d]){case Na.H264_STREAM_TYPE:c.video=[],dc(a,b,c),0===c.video.length&&delete c.video;break;case Na.ADTS_STREAM_TYPE:c.audio=[],cc(a,b,c),0===c.audio.length&&delete c.audio}return c},fc=function(a,b){var c;return(c=bc.aac.isLikelyAacData(a)?function(a){for(var b,c=!1,d=0,e=null,f=null,g=0,h=0;a.length-h>=3;){switch(bc.aac.parseType(a,h)){case"timed-metadata":if(a.length-h<10){c=!0;break}if((g=bc.aac.parseId3TagSize(a,h))>a.length){c=!0;break}null===f&&(b=a.subarray(h,h+g),f=bc.aac.parseAacTimestamp(b)),h+=g;break;case"audio":if(a.length-h<7){c=!0;break}if((g=bc.aac.parseAdtsSize(a,h))>a.length){c=!0;break}null===e&&(b=a.subarray(h,h+g),e=bc.aac.parseSampleRate(b)),d++,h+=g;break;default:h++}if(c)return null}if(null===e||null===f)return null;var i=9e4/e;return{audio:[{type:"audio",dts:f,pts:f},{type:"audio",dts:f+1024*d*i,pts:f+1024*d*i}]}}(a):ec(a))&&(c.audio||c.video)?(function(a,b){if(a.audio&&a.audio.length){var c=b;(void 0===c||isNaN(c))&&(c=a.audio[0].dts),a.audio.forEach(function(a){a.dts=ac(a.dts,c),a.pts=ac(a.pts,c),a.dtsTime=a.dts/9e4,a.ptsTime=a.pts/9e4})}if(a.video&&a.video.length){var d=b;if((void 0===d||isNaN(d))&&(d=a.video[0].dts),a.video.forEach(function(a){a.dts=ac(a.dts,d),a.pts=ac(a.pts,d),a.dtsTime=a.dts/9e4,a.ptsTime=a.pts/9e4}),a.firstKeyFrame){var e=a.firstKeyFrame;e.dts=ac(e.dts,d),e.pts=ac(e.pts,d),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}}}(c,b),c):null},gc=function(){function a(a,b){this.options=b||{},this.self=a,this.init()}var b=a.prototype;return b.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Eb.Transmuxer(this.options),function(a,b){b.on("data",function(b){var c=b.initSegment;b.initSegment={data:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength};var d=b.data;b.data=d.buffer,a.postMessage({action:"data",segment:b,byteOffset:d.byteOffset,byteLength:d.byteLength},[b.data])}),b.on("done",function(b){a.postMessage({action:"done"})}),b.on("gopInfo",function(b){a.postMessage({action:"gopInfo",gopInfo:b})}),b.on("videoSegmentTimingInfo",function(b){var c={start:{decode:ma(b.start.dts),presentation:ma(b.start.pts)},end:{decode:ma(b.end.dts),presentation:ma(b.end.pts)},baseMediaDecodeTime:ma(b.baseMediaDecodeTime)};b.prependedContentDuration&&(c.prependedContentDuration=ma(b.prependedContentDuration)),a.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:c})}),b.on("audioSegmentTimingInfo",function(b){var c={start:{decode:ma(b.start.dts),presentation:ma(b.start.pts)},end:{decode:ma(b.end.dts),presentation:ma(b.end.pts)},baseMediaDecodeTime:ma(b.baseMediaDecodeTime)};b.prependedContentDuration&&(c.prependedContentDuration=ma(b.prependedContentDuration)),a.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:c})}),b.on("id3Frame",function(b){a.postMessage({action:"id3Frame",id3Frame:b})}),b.on("caption",function(b){a.postMessage({action:"caption",caption:b})}),b.on("trackinfo",function(b){a.postMessage({action:"trackinfo",trackInfo:b})}),b.on("audioTimingInfo",function(b){a.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ma(b.start),end:ma(b.end)}})}),b.on("videoTimingInfo",function(b){a.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ma(b.start),end:ma(b.end)}})}),b.on("log",function(b){a.postMessage({action:"log",log:b})})}(this.self,this.transmuxer)},b.pushMp4Captions=function(a){this.captionParser||(this.captionParser=new Sb,this.captionParser.init());var b=new Uint8Array(a.data,a.byteOffset,a.byteLength),c=this.captionParser.parse(b,a.trackIds,a.timescales);this.self.postMessage({action:"mp4Captions",captions:c&&c.captions||[],logs:c&&c.logs||[],data:b.buffer},[b.buffer])},b.probeMp4StartTime=function(a){var b=a.timescales,c=a.data,d=Vb(b,c);this.self.postMessage({action:"probeMp4StartTime",startTime:d,data:c},[c.buffer])},b.probeMp4Tracks=function(a){var b=a.data,c=Wb(b);this.self.postMessage({action:"probeMp4Tracks",tracks:c,data:b},[b.buffer])},b.probeTs=function(a){var b=a.data,c=a.baseStartTime,d="number"!=typeof c||isNaN(c)?void 0:9e4*c,e=fc(b,d),f=null;e&&((f={hasVideo:e.video&&2===e.video.length||!1,hasAudio:e.audio&&2===e.audio.length||!1}).hasVideo&&(f.videoStart=e.video[0].ptsTime),f.hasAudio&&(f.audioStart=e.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:f,data:b},[b.buffer])},b.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},b.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},b.push=function(a){var b=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(b)},b.reset=function(){this.transmuxer.reset()},b.setTimestampOffset=function(a){var b=a.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(la(b)))},b.setAudioAppendStart=function(a){this.transmuxer.setAudioAppendStart(Math.ceil(la(a.appendStart)))},b.setRemux=function(a){this.transmuxer.setRemux(a.remux)},b.flush=function(a){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},b.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},b.alignGopsWith=function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())},a}();self.onmessage=function(a){"init"===a.data.action&&a.data.options?this.messageHandlers=new gc(self,a.data.options):(this.messageHandlers||(this.messageHandlers=new gc(self)),a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action]&&this.messageHandlers[a.data.action](a.data))}}))),mg=function(a){var b=a.transmuxer,c=a.bytes,d=a.audioAppendStart,e=a.gopsToAlignWith,f=a.remux,g=a.onData,h=a.onTrackInfo,i=a.onAudioTimingInfo,j=a.onVideoTimingInfo,k=a.onVideoSegmentTimingInfo,l=a.onAudioSegmentTimingInfo,m=a.onId3,n=a.onCaptions,o=a.onDone,p=a.onEndedTimeline,q=a.onTransmuxerLog,r=a.isEndOfTimeline,s={buffer:[]},t=r;if(b.onmessage=function(c){b.currentTransmux===a&&("data"===c.data.action&&function(a,b,c){var d=a.data.segment,e=d.type,f=d.initSegment,g=d.captions,h=d.captionStreams,i=d.metadata,j=d.videoFrameDtsTime,k=d.videoFramePtsTime;b.buffer.push({captions:g,captionStreams:h,metadata:i});var l=a.data.segment.boxes||{data:a.data.segment.data},m={type:e,data:new Uint8Array(l.data,l.data.byteOffset,l.data.byteLength),initSegment:new Uint8Array(f.data,f.byteOffset,f.byteLength)};void 0!==j&&(m.videoFrameDtsTime=j),void 0!==k&&(m.videoFramePtsTime=k),c(m)}(c,s,g),"trackinfo"===c.data.action&&h(c.data.trackInfo),"gopInfo"===c.data.action&&function(a,b){b.gopInfo=a.data.gopInfo}(c,s),"audioTimingInfo"===c.data.action&&i(c.data.audioTimingInfo),"videoTimingInfo"===c.data.action&&j(c.data.videoTimingInfo),"videoSegmentTimingInfo"===c.data.action&&k(c.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===c.data.action&&l(c.data.audioSegmentTimingInfo),"id3Frame"===c.data.action&&m([c.data.id3Frame],c.data.id3Frame.dispatchType),"caption"===c.data.action&&n(c.data.caption),"endedtimeline"===c.data.action&&(t=!1,p()),"log"===c.data.action&&q(c.data.log),"transmuxed"===c.data.type&&(t||(b.onmessage=null,function(a){var b=a.transmuxedData,c=a.callback;b.buffer=[],c(b)}({transmuxedData:s,callback:o}),ng(b))))},d&&b.postMessage({action:"setAudioAppendStart",appendStart:d}),Array.isArray(e)&&b.postMessage({action:"alignGopsWith",gopsToAlignWith:e}),void 0!==f&&b.postMessage({action:"setRemux",remux:f}),c.byteLength){var u=c instanceof ArrayBuffer?c:c.buffer,v=c instanceof ArrayBuffer?0:c.byteOffset;b.postMessage({action:"push",data:u,byteOffset:v,byteLength:c.byteLength},[u])}r&&b.postMessage({action:"endTimeline"}),b.postMessage({action:"flush"})},ng=function(a){a.currentTransmux=null,a.transmuxQueue.length&&(a.currentTransmux=a.transmuxQueue.shift(),"function"==typeof a.currentTransmux?a.currentTransmux():mg(a.currentTransmux))},og=function(a,b){a.postMessage({action:b}),ng(a)},pg=function(a,b){return b.currentTransmux?void b.transmuxQueue.push(og.bind(null,b,a)):(b.currentTransmux=a,void og(b,a))},qg=function(a){return a.transmuxer.currentTransmux?void a.transmuxer.transmuxQueue.push(a):(a.transmuxer.currentTransmux=a,void mg(a))},rg=function(a){pg("reset",a)},sg=function(a){var b=new lg;b.currentTransmux=null,b.transmuxQueue=[];var c=b.terminate;return b.terminate=function(){return b.currentTransmux=null,b.transmuxQueue.length=0,c.call(b)},b.postMessage({action:"init",options:a}),b
},tg=function(a){var b=a.transmuxer,c=a.endAction||a.action,d=a.callback,e=Oa["default"]({},a,{endAction:null,transmuxer:null,callback:null});if(b.addEventListener("message",function h(e){e.data.action===c&&(b.removeEventListener("message",h),e.data.data&&(e.data.data=new Uint8Array(e.data.data,a.byteOffset||0,a.byteLength||e.data.data.byteLength),a.data&&(a.data=e.data.data)),d(e.data))}),a.data){var f=a.data instanceof ArrayBuffer;e.byteOffset=f?0:a.data.byteOffset,e.byteLength=a.data.byteLength;var g=[f?a.data:a.data.buffer];b.postMessage(e,g)}else b.postMessage(e)},ug=function(a){a.forEach(function(a){a.abort()})},vg=function(a,b){return b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+b.uri,code:-101,xhr:b}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:-102,xhr:b}:a?{status:b.status,message:"HLS request errored at URL: "+b.uri,code:2,xhr:b}:"arraybuffer"===b.responseType&&0===b.response.byteLength?{status:b.status,message:"Empty HLS response at URL: "+b.uri,code:2,xhr:b}:null},wg=function(a,b,c){return function(d,e){var f=e.response,g=vg(d,e);if(g)return c(g,a);if(16!==f.byteLength)return c({status:e.status,message:"Invalid HLS key at URL: "+e.uri,code:2,xhr:e},a);for(var h=new DataView(f),i=new Uint32Array([h.getUint32(0),h.getUint32(4),h.getUint32(8),h.getUint32(12)]),j=0;j<b.length;j++)b[j].bytes=i;return c(null,a)}},xg=function(a,b){var c=Ja.detectContainerForBytes(a.map.bytes);if("mp4"!==c){var d=a.map.resolvedUri||a.map.uri;return b({internal:!0,message:"Found unsupported "+(c||"unknown")+" container for initialization segment at URL: "+d,code:2})}tg({action:"probeMp4Tracks",data:a.map.bytes,transmuxer:a.transmuxer,callback:function(c){var d=c.tracks,e=c.data;return a.map.bytes=e,d.forEach(function(b){a.map.tracks=a.map.tracks||{},a.map.tracks[b.type]||(a.map.tracks[b.type]=b,"number"==typeof b.id&&b.timescale&&(a.map.timescales=a.map.timescales||{},a.map.timescales[b.id]=b.timescale))}),b(null)}})},yg=function(a){var b=a.segment,c=a.finishProcessingFn,d=a.responseType;return function(a,e){var f=vg(a,e);if(f)return c(f,b);var g="arraybuffer"!==d&&e.responseText?function(a){for(var b=new Uint8Array(new ArrayBuffer(a.length)),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer}(e.responseText.substring(b.lastReachedChar||0)):e.response;return b.stats=function(a){return{bandwidth:a.bandwidth,bytesReceived:a.bytesReceived||0,roundTripTime:a.roundTripTime||0}}(e),b.key?b.encryptedBytes=new Uint8Array(g):b.bytes=new Uint8Array(g),c(null,b)}},zg=function(a){var b=a.segment,c=a.bytes,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.isEndOfTimeline,k=a.endedTimelineFn,l=a.dataFn,m=a.doneFn,n=a.onTransmuxerLog,o=b.map&&b.map.tracks||{},p=Boolean(o.audio&&o.video),q=e.bind(null,b,"audio","start"),r=e.bind(null,b,"audio","end"),s=e.bind(null,b,"video","start"),t=e.bind(null,b,"video","end");tg({action:"probeTs",transmuxer:b.transmuxer,data:c,baseStartTime:b.baseStartTime,callback:function(a){b.bytes=c=a.data;var e=a.result;e&&(d(b,{hasAudio:e.hasAudio,hasVideo:e.hasVideo,isMuxed:p}),d=null,e.hasAudio&&!p&&q(e.audioStart),e.hasVideo&&s(e.videoStart),q=null,s=null),qg({bytes:c,transmuxer:b.transmuxer,audioAppendStart:b.audioAppendStart,gopsToAlignWith:b.gopsToAlignWith,remux:p,onData:function(a){a.type="combined"===a.type?"video":a.type,l(b,a)},onTrackInfo:function(a){d&&(p&&(a.isMuxed=!0),d(b,a))},onAudioTimingInfo:function(a){q&&void 0!==a.start&&(q(a.start),q=null),r&&void 0!==a.end&&r(a.end)},onVideoTimingInfo:function(a){s&&void 0!==a.start&&(s(a.start),s=null),t&&void 0!==a.end&&t(a.end)},onVideoSegmentTimingInfo:function(a){f(a)},onAudioSegmentTimingInfo:function(a){g(a)},onId3:function(a,c){h(b,a,c)},onCaptions:function(a){i(b,[a])},isEndOfTimeline:j,onEndedTimeline:function(){k()},onTransmuxerLog:n,onDone:function(a){m&&(a.type="combined"===a.type?"video":a.type,m(null,b,a))}})}})},Ag=function(a){var b=a.segment,c=a.bytes,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.isEndOfTimeline,k=a.endedTimelineFn,l=a.dataFn,m=a.doneFn,n=a.onTransmuxerLog,o=new Uint8Array(c);if(Ja.isLikelyFmp4MediaSegment(o)){b.isFmp4=!0;var p=b.map.tracks,q={isFmp4:!0,hasVideo:!!p.video,hasAudio:!!p.audio};p.audio&&p.audio.codec&&"enca"!==p.audio.codec&&(q.audioCodec=p.audio.codec),p.video&&p.video.codec&&"encv"!==p.video.codec&&(q.videoCodec=p.video.codec),p.video&&p.audio&&(q.isMuxed=!0),d(b,q);var r=function(a){l(b,{data:o,type:q.hasAudio&&!q.isMuxed?"audio":"video"}),a&&a.length&&i(b,a),m(null,b,{})};tg({action:"probeMp4StartTime",timescales:b.map.timescales,data:o,transmuxer:b.transmuxer,callback:function(a){var d=a.data,f=a.startTime;c=d.buffer,b.bytes=o=d,q.hasAudio&&!q.isMuxed&&e(b,"audio","start",f),q.hasVideo&&e(b,"video","start",f),p.video&&d.byteLength&&b.transmuxer?tg({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:b.transmuxer,data:o,timescales:b.map.timescales,trackIds:[p.video.id],callback:function(a){c=a.data.buffer,b.bytes=o=a.data,a.logs.forEach(function(a){n(oa.mergeOptions(a,{stream:"mp4CaptionParser"}))}),r(a.captions)}}):r()}})}else if(b.transmuxer){if(void 0===b.container&&(b.container=Ja.detectContainerForBytes(o)),"ts"!==b.container&&"aac"!==b.container)return d(b,{hasAudio:!1,hasVideo:!1}),void m(null,b,{});zg({segment:b,bytes:c,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,isEndOfTimeline:j,endedTimelineFn:k,dataFn:l,doneFn:m,onTransmuxerLog:n})}else m(null,b,{})},Bg=function(a,b){var c,d=a.id,e=a.key,f=a.encryptedBytes,g=a.decryptionWorker;g.addEventListener("message",function h(a){if(a.data.source===d){g.removeEventListener("message",h);var c=a.data.decrypted;b(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}}),c=e.bytes.slice?e.bytes.slice():new Uint32Array(Array.prototype.slice.call(e.bytes)),g.postMessage(Vf({source:d,encrypted:f,key:c,iv:e.iv}),[f.buffer,c.buffer])},Cg=function(a){var b=a.activeXhrs,c=a.decryptionWorker,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.isEndOfTimeline,k=a.endedTimelineFn,l=a.dataFn,m=a.doneFn,n=a.onTransmuxerLog,o=0,p=!1;return function(a,q){if(!p){if(a)return p=!0,ug(b),m(a,q);if((o+=1)===b.length){var r=function(){return q.encryptedBytes?function(a){var b=a.decryptionWorker,c=a.segment,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.isEndOfTimeline,k=a.endedTimelineFn,l=a.dataFn,m=a.doneFn,n=a.onTransmuxerLog;Bg({id:c.requestId,key:c.key,encryptedBytes:c.encryptedBytes,decryptionWorker:b},function(a){c.bytes=a,Ag({segment:c,bytes:c.bytes,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,isEndOfTimeline:j,endedTimelineFn:k,dataFn:l,doneFn:m,onTransmuxerLog:n})})}({decryptionWorker:c,segment:q,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,isEndOfTimeline:j,endedTimelineFn:k,dataFn:l,doneFn:m,onTransmuxerLog:n}):void Ag({segment:q,bytes:q.bytes,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,isEndOfTimeline:j,endedTimelineFn:k,dataFn:l,doneFn:m,onTransmuxerLog:n})};if(q.endOfAllRequests=Date.now(),q.map&&q.map.encryptedBytes&&!q.map.bytes)return Bg({decryptionWorker:c,id:q.requestId+"-init",encryptedBytes:q.map.encryptedBytes,key:q.map.key},function(a){q.map.bytes=a,xg(q,function(a){return a?(ug(b),m(a,q)):void r()})});r()}}}},Dg=function(a){var b=a.segment,c=a.progressFn;return a.trackInfoFn,a.timingInfoFn,a.videoSegmentTimingInfoFn,a.audioSegmentTimingInfoFn,a.id3Fn,a.captionsFn,a.isEndOfTimeline,a.endedTimelineFn,a.dataFn,function(a){if(!a.target.aborted)return b.stats=oa.mergeOptions(b.stats,function(a){var b=a.target,c={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-b.requestTime||0};return c.bytesReceived=a.loaded,c.bandwidth=Math.floor(c.bytesReceived/c.roundTripTime*8*1e3),c}(a)),!b.stats.firstBytesReceivedAt&&b.stats.bytesReceived&&(b.stats.firstBytesReceivedAt=Date.now()),c(a,b)}},Eg=function(a){var b=a.xhr,c=a.xhrOptions,d=a.decryptionWorker,e=a.segment,f=a.abortFn,g=a.progressFn,h=a.trackInfoFn,i=a.timingInfoFn,j=a.videoSegmentTimingInfoFn,k=a.audioSegmentTimingInfoFn,l=a.id3Fn,m=a.captionsFn,n=a.isEndOfTimeline,o=a.endedTimelineFn,p=a.dataFn,q=a.doneFn,r=a.onTransmuxerLog,s=[],t=Cg({activeXhrs:s,decryptionWorker:d,trackInfoFn:h,timingInfoFn:i,videoSegmentTimingInfoFn:j,audioSegmentTimingInfoFn:k,id3Fn:l,captionsFn:m,isEndOfTimeline:n,endedTimelineFn:o,dataFn:p,doneFn:q,onTransmuxerLog:r});if(e.key&&!e.key.bytes){var u=[e.key];e.map&&!e.map.bytes&&e.map.key&&e.map.key.resolvedUri===e.key.resolvedUri&&u.push(e.map.key);var v=b(oa.mergeOptions(c,{uri:e.key.resolvedUri,responseType:"arraybuffer"}),wg(e,u,t));s.push(v)}if(e.map&&!e.map.bytes){if(e.map.key&&(!e.key||e.key.resolvedUri!==e.map.key.resolvedUri)){var w=b(oa.mergeOptions(c,{uri:e.map.key.resolvedUri,responseType:"arraybuffer"}),wg(e,[e.map.key],t));s.push(w)}var x=b(oa.mergeOptions(c,{uri:e.map.resolvedUri,responseType:"arraybuffer",headers:Rf(e.map)}),function(a){var b=a.segment,c=a.finishProcessingFn;return function(a,d){var e=vg(a,d);if(e)return c(e,b);var f=new Uint8Array(d.response);return b.map.key?(b.map.encryptedBytes=f,c(null,b)):(b.map.bytes=f,void xg(b,function(a){return a?(a.xhr=d,a.status=d.status,c(a,b)):void c(null,b)}))}}({segment:e,finishProcessingFn:t}));s.push(x)}var y=oa.mergeOptions(c,{uri:e.part&&e.part.resolvedUri||e.resolvedUri,responseType:"arraybuffer",headers:Rf(e)}),z=b(y,yg({segment:e,finishProcessingFn:t,responseType:y.responseType}));z.addEventListener("progress",Dg({segment:e,progressFn:g,trackInfoFn:h,timingInfoFn:i,videoSegmentTimingInfoFn:j,audioSegmentTimingInfoFn:k,id3Fn:l,captionsFn:m,isEndOfTimeline:n,endedTimelineFn:o,dataFn:p})),s.push(z);var A={};return s.forEach(function(a){a.addEventListener("loadend",function(a){var b=a.loadendState,c=a.abortFn;return function(a){a.target.aborted&&c&&!b.calledAbortFn&&(c(),b.calledAbortFn=!0)}}({loadendState:A,abortFn:f}))}),function(){return ug(s)}},Fg=_e("CodecUtils"),Gg=function(a,b){var c=b.attributes||{};return a&&a.mediaGroups&&a.mediaGroups.AUDIO&&c.AUDIO&&a.mediaGroups.AUDIO[c.AUDIO]},Hg=function(a){var b={};return a.forEach(function(a){var c=a.mediaType,d=a.type,e=a.details;b[c]=b[c]||[],b[c].push(Ea.translateLegacyCodec(""+d+e))}),Object.keys(b).forEach(function(a){return b[a].length>1?(Fg("multiple "+a+" codecs found as attributes: "+b[a].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(b[a]=null)):void(b[a]=b[a][0])}),b},Ig=function(a){var b=0;return a.audio&&b++,a.video&&b++,b},Jg=function(a,b){var c=b.attributes||{},d=Hg(function(a){var b=a.attributes||{};if(b.CODECS)return Ea.parseCodecs(b.CODECS)}(b)||[]);if(Gg(a,b)&&!d.audio&&!function(a,b){if(!Gg(a,b))return!0;var c=b.attributes||{},d=a.mediaGroups.AUDIO[c.AUDIO];for(var e in d)if(!d[e].uri&&!d[e].playlists)return!0;return!1}(a,b)){var e=Hg(Ea.codecsFromDefault(a,c.AUDIO)||[]);e.audio&&(d.audio=e.audio)}return d},Kg=_e("PlaylistSelector"),Lg=function(a){if(a&&a.playlist){var b=a.playlist;return JSON.stringify({id:b.id,bandwidth:a.bandwidth,width:a.width,height:a.height,codecs:b.attributes&&b.attributes.CODECS||""})}},Mg=function(a,b){if(!a)return"";var c=Ma["default"].getComputedStyle(a);return c?c[b]:""},Ng=function(a,b){var c=a.slice();a.sort(function(a,d){var e=b(a,d);return 0===e?c.indexOf(a)-c.indexOf(d):e})},Og=function(a,b){var c,d;return a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH),c=c||Ma["default"].Number.MAX_VALUE,b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH),c-(d=d||Ma["default"].Number.MAX_VALUE)},Pg=function(a,b,c,d,e,f){if(a){var g={bandwidth:b,width:c,height:d,limitRenditionByPlayerDimensions:e},h=a.playlists;yf.isAudioOnly(a)&&(h=f.getAudioTrackPlaylists_(),g.audioOnly=!0);var i=h.map(function(a){var b=a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width,c=a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height;return{bandwidth:a.attributes&&a.attributes.BANDWIDTH||Ma["default"].Number.MAX_VALUE,width:b,height:c,playlist:a}});Ng(i,function(a,b){return a.bandwidth-b.bandwidth});var j=(i=i.filter(function(a){return!yf.isIncompatible(a.playlist)})).filter(function(a){return yf.isEnabled(a.playlist)});j.length||(j=i.filter(function(a){return!yf.isDisabled(a.playlist)}));var k=j.filter(function(a){return a.bandwidth*gg.BANDWIDTH_VARIANCE<b}),l=k[k.length-1],m=k.filter(function(a){return a.bandwidth===l.bandwidth})[0];if(!1===e){var n=m||j[0]||i[0];if(n&&n.playlist){var o="sortedPlaylistReps";return m&&(o="bandwidthBestRep"),j[0]&&(o="enabledPlaylistReps"),Kg("choosing "+Lg(n)+" using "+o+" with options",g),n.playlist}return Kg("could not choose a playlist with options",g),null}var p=k.filter(function(a){return a.width&&a.height});Ng(p,function(a,b){return a.width-b.width});var q=p.filter(function(a){return a.width===c&&a.height===d});l=q[q.length-1];var r,s,t,u,v=q.filter(function(a){return a.bandwidth===l.bandwidth})[0];if(v||(s=(r=p.filter(function(a){return a.width>c||a.height>d})).filter(function(a){return a.width===r[0].width&&a.height===r[0].height}),l=s[s.length-1],t=s.filter(function(a){return a.bandwidth===l.bandwidth})[0]),f.experimentalLeastPixelDiffSelector){var w=p.map(function(a){return a.pixelDiff=Math.abs(a.width-c)+Math.abs(a.height-d),a});Ng(w,function(a,b){return a.pixelDiff===b.pixelDiff?b.bandwidth-a.bandwidth:a.pixelDiff-b.pixelDiff}),u=w[0]}var x=u||t||v||m||j[0]||i[0];if(x&&x.playlist){var y="sortedPlaylistReps";return u?y="leastPixelDiffRep":t?y="resolutionPlusOneRep":v?y="resolutionBestRep":m?y="bandwidthBestRep":j[0]&&(y="enabledPlaylistReps"),Kg("choosing "+Lg(x)+" using "+y+" with options",g),x.playlist}return Kg("could not choose a playlist with options",g),null}},Qg=function(){var a=this.useDevicePixelRatio&&Ma["default"].devicePixelRatio||1;return Pg(this.playlists.master,this.systemBandwidth,parseInt(Mg(this.tech_.el(),"width"),10)*a,parseInt(Mg(this.tech_.el(),"height"),10)*a,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Rg=function(a){var b=a.inbandTextTracks,c=a.metadataArray,d=a.timestampOffset,e=a.videoDuration;if(c){var f=Ma["default"].WebKitDataCue||Ma["default"].VTTCue,g=b.metadataTrack_;if(g&&(c.forEach(function(a){var b=a.cueTime+d;!("number"!=typeof b||Ma["default"].isNaN(b)||b<0)&&b<1/0&&a.frames.forEach(function(a){var c=new f(b,b,a.value||a.url||a.data||"");c.frame=a,c.value=a,function(a){Object.defineProperties(a.frame,{id:{get:function(){return oa.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),a.value.key}},value:{get:function(){return oa.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),a.value.data}},privateData:{get:function(){return oa.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),a.value.data}}})}(c),g.addCue(c)})}),g.cues&&g.cues.length)){for(var h=g.cues,i=[],j=0;j<h.length;j++)h[j]&&i.push(h[j]);var k=i.reduce(function(a,b){var c=a[b.startTime]||[];return c.push(b),a[b.startTime]=c,a},{}),l=Object.keys(k).sort(function(a,b){return Number(a)-Number(b)});l.forEach(function(a,b){var c=k[a],d=Number(l[b+1])||e;c.forEach(function(a){a.endTime=d})})}}},Sg=function(a,b,c){var d,e;if(c&&c.cues)for(d=c.cues.length;d--;)(e=c.cues[d]).startTime>=a&&e.endTime<=b&&c.removeCue(e)},Tg=function(a){return"number"==typeof a&&isFinite(a)},Ug=function(a){var b=a.startOfSegment,c=a.duration,d=a.segment,e=a.part,f=a.playlist,g=f.mediaSequence,h=f.id,i=f.segments,j=void 0===i?[]:i,k=a.mediaIndex,l=a.partIndex,m=a.timeline,n=j.length-1,o="mediaIndex/partIndex increment";a.getMediaInfoForTime?o="getMediaInfoForTime ("+a.getMediaInfoForTime+")":a.isSyncRequest&&(o="getSyncSegmentCandidate (isSyncRequest)");var p="number"==typeof l,q=a.segment.uri?"segment":"pre-segment",r=p?kf({preloadSegment:d})-1:0;return q+" ["+(g+k)+"/"+(g+n)+"]"+(p?" part ["+l+"/"+r+"]":"")+" segment start/end ["+d.start+" => "+d.end+"]"+(p?" part start/end ["+e.start+" => "+e.end+"]":"")+" startOfSegment ["+b+"] duration ["+c+"] timeline ["+m+"] selected by ["+o+"] playlist ["+h+"]"},Vg=function(a){return a+"TimingInfo"},Wg=function(a){var b=a.timelineChangeController,c=a.currentTimeline,d=a.segmentTimeline,e=a.loaderType,f=a.audioDisabled;if(c===d)return!1;if("audio"===e){var g=b.lastTimelineChange({type:"main"});return!g||g.to!==d}if("main"===e&&f){var h=b.pendingTimelineChange({type:"audio"});return!h||h.to!==d}return!1},Xg=function(a){var b=a.segmentDuration,c=a.maxDuration;return!!b&&Math.round(b)>c+1/30},Yg=function(a,b){if("hls"!==b)return null;var c,d,e,f,g=(c=a.audioTimingInfo,d=a.videoTimingInfo,e=c&&"number"==typeof c.start&&"number"==typeof c.end?c.end-c.start:0,f=d&&"number"==typeof d.start&&"number"==typeof d.end?d.end-d.start:0,Math.max(e,f));if(!g)return null;var h=a.playlist.targetDuration,i=Xg({segmentDuration:g,maxDuration:2*h}),j=Xg({segmentDuration:g,maxDuration:h}),k="Segment with index "+a.mediaIndex+" from playlist "+a.playlist.id+" has a duration of "+g+" when the reported duration is "+a.duration+" and the target duration is "+h+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return i||j?{severity:i?"warn":"info",message:k}:null},Zg=function(a){function b(b,c){var d;if(d=a.call(this)||this,!b)throw new TypeError("Initialization settings are required");if("function"!=typeof b.currentTime)throw new TypeError("No currentTime getter specified");if(!b.mediaSource)throw new TypeError("No MediaSource specified");return d.bandwidth=b.bandwidth,d.throughput={rate:0,count:0},d.roundTrip=NaN,d.resetStats_(),d.mediaIndex=null,d.partIndex=null,d.hasPlayed_=b.hasPlayed,d.currentTime_=b.currentTime,d.seekable_=b.seekable,d.seeking_=b.seeking,d.duration_=b.duration,d.mediaSource_=b.mediaSource,d.vhs_=b.vhs,d.loaderType_=b.loaderType,d.currentMediaInfo_=void 0,d.startingMediaInfo_=void 0,d.segmentMetadataTrack_=b.segmentMetadataTrack,d.goalBufferLength_=b.goalBufferLength,d.sourceType_=b.sourceType,d.sourceUpdater_=b.sourceUpdater,d.inbandTextTracks_=b.inbandTextTracks,d.state_="INIT",d.timelineChangeController_=b.timelineChangeController,d.shouldSaveSegmentTimingInfo_=!0,d.parse708captions_=b.parse708captions,d.experimentalExactManifestTimings=b.experimentalExactManifestTimings,d.checkBufferTimeout_=null,d.error_=void 0,d.currentTimeline_=-1,d.pendingSegment_=null,d.xhrOptions_=null,d.pendingSegments_=[],d.audioDisabled_=!1,d.isPendingTimestampOffset_=!1,d.gopBuffer_=[],d.timeMapping_=0,d.safeAppend_=oa.browser.IE_VERSION>=11,d.appendInitSegment_={audio:!0,video:!0},d.playlistOfLastInitSegment_={audio:null,video:null},d.callQueue_=[],d.loadQueue_=[],d.metadataQueue_={id3:[],caption:[]},d.waitingOnRemove_=!1,d.quotaExceededErrorRetryTimeout_=null,d.activeInitSegmentId_=null,d.initSegments_={},d.cacheEncryptionKeys_=b.cacheEncryptionKeys,d.keyCache_={},d.decrypter_=b.decrypter,d.syncController_=b.syncController,d.syncPoint_={segmentIndex:0,time:0},d.transmuxer_=d.createTransmuxer_(),d.triggerSyncInfoUpdate_=function(){return d.trigger("syncinfoupdate")},d.syncController_.on("syncinfoupdate",d.triggerSyncInfoUpdate_),d.mediaSource_.addEventListener("sourceopen",function(){d.isEndOfStream_()||(d.ended_=!1)}),d.fetchAtBuffer_=!1,d.logger_=_e("SegmentLoader["+d.loaderType_+"]"),Object.defineProperty(Pa["default"](d),"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+" -> "+a),this.state_=a,this.trigger("statechange"))}}),d.sourceUpdater_.on("ready",function(){d.hasEnoughInfoToAppend_()&&d.processCallQueue_()}),"main"===d.loaderType_&&d.timelineChangeController_.on("pendingtimelinechange",function(){d.hasEnoughInfoToAppend_()&&d.processCallQueue_()}),"audio"===d.loaderType_&&d.timelineChangeController_.on("timelinechange",function(){d.hasEnoughInfoToLoad_()&&d.processLoadQueue_(),d.hasEnoughInfoToAppend_()&&d.processCallQueue_()}),d}Qa["default"](b,a);var c=b.prototype;return c.createTransmuxer_=function(){return sg({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_})},c.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},c.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Ma["default"].clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},c.setAudio=function(a){this.audioDisabled_=!a,a?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},c.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},c.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Ma["default"].clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},c.checkForAbort_=function(a){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==a:(this.state="READY",!0)},c.error=function(a){return void 0!==a&&(this.logger_("error occurred:",a),this.error_=a),this.pendingSegment_=null,this.error_},c.endOfStream=function(){this.ended_=!0,this.transmuxer_&&rg(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},c.buffered_=function(){var a=this.getMediaInfo_();if(!this.sourceUpdater_||!a)return oa.createTimeRanges();if("main"===this.loaderType_){var b=a.hasAudio,c=a.hasVideo,d=a.isMuxed;if(c&&b&&!this.audioDisabled_&&!d)return this.sourceUpdater_.buffered();if(c)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},c.initSegmentForMap=function(a,b){if(void 0===b&&(b=!1),!a)return null;var c=Wf(a),d=this.initSegments_[c];return b&&!d&&a.bytes&&(this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,tracks:a.tracks,timescales:a.timescales}),d||a},c.segmentKey=function(a,b){if(void 0===b&&(b=!1),!a)return null;var c=Xf(a),d=this.keyCache_[c];this.cacheEncryptionKeys_&&b&&!d&&a.bytes&&(this.keyCache_[c]=d={resolvedUri:a.resolvedUri,bytes:a.bytes});var e={resolvedUri:(d||a).resolvedUri};return d&&(e.bytes=d.bytes),e},c.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},c.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},c.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},c.playlist=function(a,b){if(void 0===b&&(b={}),a){var c=this.playlist_,d=this.pendingSegment_;this.playlist_=a,this.xhrOptions_=b,"INIT"===this.state&&(a.syncInfo={mediaSequence:a.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(a));var e=null;if(c&&(c.id?e=c.id:c.uri&&(e=c.uri)),this.logger_("playlist update ["+e+" => "+(a.id||a.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!c||c.uri!==a.uri)return null!==this.mediaIndex&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var f=a.mediaSequence-c.mediaSequence;if(this.logger_("live window shift ["+f+"]"),null!==this.mediaIndex)if(this.mediaIndex-=f,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var g=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!g.parts||!g.parts.length||!g.parts[this.partIndex])){var h=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=h}}d&&(d.mediaIndex-=f,d.mediaIndex<0?(d.mediaIndex=null,d.partIndex=null):(d.mediaIndex>=0&&(d.segment=a.segments[d.mediaIndex]),d.partIndex>=0&&d.segment.parts&&(d.part=d.segment.parts[d.partIndex]))),this.syncController_.saveExpiredSegmentInfo(c,a)}},c.pause=function(){this.checkBufferTimeout_&&(Ma["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},c.paused=function(){return null===this.checkBufferTimeout_},c.resetEverything=function(a){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,a),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},c.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},c.resyncLoader=function(){this.transmuxer_&&rg(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},c.remove=function(a,b,c,d){if(void 0===c&&(c=function(){}),void 0===d&&(d=!1),b===1/0&&(b=this.duration_()),b<=a)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var e=1,f=function(){0==--e&&c()};for(var g in!d&&this.audioDisabled_||(e++,this.sourceUpdater_.removeAudio(a,b,f)),(d||"main"===this.loaderType_)&&(this.gopBuffer_=function(a,b,c,d){for(var e=Math.ceil((b-d)*La.ONE_SECOND_IN_TS),f=Math.ceil((c-d)*La.ONE_SECOND_IN_TS),g=a.slice(),h=a.length;h--&&!(a[h].pts<=f););if(-1===h)return g;for(var i=h+1;i--&&!(a[i].pts<=e););return i=Math.max(i,0),g.splice(i,h-i+1),g}(this.gopBuffer_,a,b,this.timeMapping_),e++,this.sourceUpdater_.removeVideo(a,b,f)),this.inbandTextTracks_)Sg(a,b,this.inbandTextTracks_[g]);Sg(a,b,this.segmentMetadataTrack_),f()}else this.logger_("skipping remove because no source updater or starting media info")},c.monitorBuffer_=function(){this.checkBufferTimeout_&&Ma["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ma["default"].setTimeout(this.monitorBufferTick_.bind(this),1)},c.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Ma["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ma["default"].setTimeout(this.monitorBufferTick_.bind(this),500)},c.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var a=this.chooseNextRequest_();a&&("number"==typeof a.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:a.timeline})),this.loadSegment_(a))}},c.isEndOfStream_=function(a,b,c){if(void 0===a&&(a=this.mediaIndex),void 0===b&&(b=this.playlist_),void 0===c&&(c=this.partIndex),!b||!this.mediaSource_)return!1;var d="number"==typeof a&&b.segments[a],e=a+1===b.segments.length,f=!d||!d.parts||c+1===d.parts.length;return b.endList&&"open"===this.mediaSource_.readyState&&e&&f},c.chooseNextRequest_=function(){var a=ff(this.buffered_())||0,b=Math.max(0,a-this.currentTime_()),c=!this.hasPlayed_()&&b>=1,d=b>=this.goalBufferLength_(),e=this.playlist_.segments;if(!e.length||c||d)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var f={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(f.isSyncRequest)f.mediaIndex=function(a,b,c){b=b||[];for(var d=[],e=0,f=0;f<b.length;f++){var g=b[f];if(a===g.timeline&&(d.push(f),(e+=g.duration)>c))return f}return 0===d.length?0:d[d.length-1]}(this.currentTimeline_,e,a);else if(null!==this.mediaIndex){var g=e[this.mediaIndex],h="number"==typeof this.partIndex?this.partIndex:-1;f.startOfSegment=g.end?g.end:a,g.parts&&g.parts[h+1]?(f.mediaIndex=this.mediaIndex,f.partIndex=h+1):f.mediaIndex=this.mediaIndex+1}else{var i=yf.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?a:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),j=i.segmentIndex,k=i.startTime,l=i.partIndex;f.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd":"currentTime",f.mediaIndex=j,f.startOfSegment=k,f.partIndex=l}var m=e[f.mediaIndex],n=m&&"number"==typeof f.partIndex&&m.parts&&m.parts[f.partIndex];if(!m||"number"==typeof f.partIndex&&!n)return null;"number"!=typeof f.partIndex&&m.parts&&(f.partIndex=0);var o=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return f.mediaIndex>=e.length-1&&o&&!this.seeking_()?null:this.generateSegmentInfo_(f)},c.generateSegmentInfo_=function(a){var b=a.playlist,c=a.mediaIndex,d=a.startOfSegment,e=a.isSyncRequest,f=a.partIndex,g=a.forceTimestampOffset,h=a.getMediaInfoForTime,i=b.segments[c],j="number"==typeof f&&i.parts[f],k={requestId:"segment-loader-"+Math.random(),uri:j&&j.resolvedUri||i.resolvedUri,mediaIndex:c,partIndex:j?f:null,isSyncRequest:e,startOfSegment:d,playlist:b,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:i.timeline,duration:j&&j.duration||i.duration,segment:i,part:j,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:h},l=void 0!==g?g:this.isPendingTimestampOffset_;k.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:i.timeline,currentTimeline:this.currentTimeline_,startOfSegment:d,buffered:this.buffered_(),overrideCheck:l});var m=ff(this.sourceUpdater_.audioBuffered());return"number"==typeof m&&(k.audioAppendStart=m-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(k.gopsToAlignWith=function(a,b,c){if(null==b||!a.length)return[];var d,e=Math.ceil((b-c+3)*La.ONE_SECOND_IN_TS);for(d=0;d<a.length&&!(a[d].pts>e);d++);return a.slice(d)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),k},c.timestampOffsetForSegment_=function(a){return c=(b=a).segmentTimeline,d=b.currentTimeline,e=b.startOfSegment,f=b.buffered,b.overrideCheck||c!==d?c<d?e:f.length?f.end(f.length-1):e:null;var b,c,d,e,f},c.earlyAbortWhenNeeded_=function(a){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(a.firstBytesReceivedAt||Date.now())<1e3)){var b=this.currentTime_(),c=a.bandwidth,d=this.pendingSegment_.duration,e=yf.estimateSegmentRequestTime(d,c,this.playlist_,a.bytesReceived),f=function(a,b,c){return void 0===c&&(c=1),((a.length?a.end(a.length-1):0)-b)/c}(this.buffered_(),b,this.vhs_.tech_.playbackRate())-1;if(!(e<=f)){var g=function(a){var b=a.master,c=a.currentTime,d=a.bandwidth,e=a.duration,f=a.segmentDuration,g=a.timeUntilRebuffer,h=a.currentTimeline,i=a.syncController,j=b.playlists.filter(function(a){return!yf.isIncompatible(a)}),k=j.filter(yf.isEnabled);k.length||(k=j.filter(function(a){return!yf.isDisabled(a)}));var l=k.filter(yf.hasAttribute.bind(null,"BANDWIDTH")).map(function(a){var b=i.getSyncPoint(a,e,h,c)?1:2;return{playlist:a,
rebufferingImpact:yf.estimateSegmentRequestTime(f,d,a)*b-g}}),m=l.filter(function(a){return a.rebufferingImpact<=0});return Ng(m,function(a,b){return Og(b.playlist,a.playlist)}),m.length?m[0]:(Ng(l,function(a,b){return a.rebufferingImpact-b.rebufferingImpact}),l[0]||null)}({master:this.vhs_.playlists.master,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:f,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(g){var h=e-f-g.rebufferingImpact,i=.5;f<=1/30&&(i=1),!g.playlist||g.playlist.uri===this.playlist_.uri||h<i||(this.bandwidth=g.playlist.attributes.BANDWIDTH*gg.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},c.handleAbort_=function(a){this.logger_("Aborting "+Ug(a)),this.mediaRequestsAborted+=1},c.handleProgress_=function(a,b){this.earlyAbortWhenNeeded_(b.stats),this.checkForAbort_(b.requestId)||this.trigger("progress")},c.handleTrackInfo_=function(a,b){this.earlyAbortWhenNeeded_(a.stats),this.checkForAbort_(a.requestId)||this.checkForIllegalMediaSwitch(b)||(b=b||{},function(a,b){if(!a&&!b||!a&&b||a&&!b)return!1;if(a===b)return!0;var c=Object.keys(a).sort(),d=Object.keys(b).sort();if(c.length!==d.length)return!1;for(var e=0;e<c.length;e++){var f=c[e];if(f!==d[e])return!1;if(a[f]!==b[f])return!1}return!0}(this.currentMediaInfo_,b)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=b,this.currentMediaInfo_=b,this.logger_("trackinfo update",b),this.trigger("trackinfo")),this.checkForAbort_(a.requestId)||(this.pendingSegment_.trackInfo=b,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},c.handleTimingInfo_=function(a,b,c,d){if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)){var e=this.pendingSegment_,f=Vg(b);e[f]=e[f]||{},e[f][c]=d,this.logger_("timinginfo: "+b+" - "+c+" - "+d),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},c.handleCaptions_=function(a,b){var c=this;if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId))if(0!==b.length)if(this.pendingSegment_.hasAppendedData_){var d=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),e={};b.forEach(function(a){e[a.stream]=e[a.stream]||{startTime:1/0,captions:[],endTime:0};var b=e[a.stream];b.startTime=Math.min(b.startTime,a.startTime+d),b.endTime=Math.max(b.endTime,a.endTime+d),b.captions.push(a)}),Object.keys(e).forEach(function(a){var b=e[a],f=b.startTime,g=b.endTime,h=b.captions,i=c.inbandTextTracks_;c.logger_("adding cues from "+f+" -> "+g+" for "+a),function(a,b,c){if(!a[c]){b.trigger({type:"usage",name:"vhs-608"}),b.trigger({type:"usage",name:"hls-608"});var d=c;/^cc708_/.test(c)&&(d="SERVICE"+c.split("_")[1]);var e=b.textTracks().getTrackById(d);if(e)a[c]=e;else{var f=c,g=c,h=!1,i=(b.options_.vhs&&b.options_.vhs.captionServices||{})[d];i&&(f=i.label,g=i.language,h=i["default"]),a[c]=b.addRemoteTextTrack({kind:"captions",id:d,"default":h,label:f,language:g},!1).track}}}(i,c.vhs_.tech_,a),Sg(f,g,i[a]),function(a){var b=a.inbandTextTracks,c=a.captionArray,d=a.timestampOffset;if(c){var e=Ma["default"].WebKitDataCue||Ma["default"].VTTCue;c.forEach(function(a){var c=a.stream;b[c].addCue(new e(a.startTime+d,a.endTime+d,a.text))})}}({captionArray:h,inbandTextTracks:i,timestampOffset:d})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,a,b));else this.logger_("SegmentLoader received no captions from a caption event")},c.handleId3_=function(a,b,c){if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId))if(this.pendingSegment_.hasAppendedData_){var d=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(a,b,c){a.metadataTrack_||(a.metadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,a.metadataTrack_.inBandMetadataTrackDispatchType=b)}(this.inbandTextTracks_,c,this.vhs_.tech_),Rg({inbandTextTracks:this.inbandTextTracks_,metadataArray:b,timestampOffset:d,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,a,b,c))},c.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(a){return a()}),this.metadataQueue_.caption.forEach(function(a){return a()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},c.processCallQueue_=function(){var a=this.callQueue_;this.callQueue_=[],a.forEach(function(a){return a()})},c.processLoadQueue_=function(){var a=this.loadQueue_;this.loadQueue_=[],a.forEach(function(a){return a()})},c.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var a=this.pendingSegment_;return!(!a||this.getCurrentMediaInfo_()&&Wg({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},c.getCurrentMediaInfo_=function(a){return void 0===a&&(a=this.pendingSegment_),a&&a.trackInfo||this.currentMediaInfo_},c.getMediaInfo_=function(a){return void 0===a&&(a=this.pendingSegment_),this.getCurrentMediaInfo_(a)||this.startingMediaInfo_},c.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var a=this.pendingSegment_,b=this.getCurrentMediaInfo_();if(!a||!b)return!1;var c=b.hasAudio,d=b.hasVideo,e=b.isMuxed;return!(d&&!a.videoTimingInfo||c&&!this.audioDisabled_&&!e&&!a.audioTimingInfo||Wg({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},c.handleData_=function(a,b){if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var c=this.pendingSegment_;if(this.setTimeMapping_(c.timeline),this.updateMediaSecondsLoaded_(c.segment),"closed"!==this.mediaSource_.readyState){if(a.map&&(a.map=this.initSegmentForMap(a.map,!0),c.segment.map=a.map),a.key&&this.segmentKey(a.key,!0),c.isFmp4=a.isFmp4,c.timingInfo=c.timingInfo||{},c.isFmp4)this.trigger("fmp4"),c.timingInfo.start=c[Vg(b.type)].start;else{var d,e=this.getCurrentMediaInfo_(),f="main"===this.loaderType_&&e&&e.hasVideo;f&&(d=c.videoTimingInfo.start),c.timingInfo.start=this.trueSegmentStart_({currentStart:c.timingInfo.start,playlist:c.playlist,mediaIndex:c.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:f,firstVideoFrameTimeForData:d,videoTimingInfo:c.videoTimingInfo,audioTimingInfo:c.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(c,b.type),this.updateSourceBufferTimestampOffset_(c),c.isSyncRequest){this.updateTimingInfoEnd_(c),this.syncController_.saveSegmentTimingInfo({segmentInfo:c,shouldSaveTimelineMapping:"main"===this.loaderType_});var g=this.chooseNextRequest_();if(g.mediaIndex!==c.mediaIndex||g.partIndex!==c.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}c.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(c,b)}}else this.callQueue_.push(this.handleData_.bind(this,a,b))},c.updateAppendInitSegmentStatus=function(a,b){"main"!==this.loaderType_||"number"!=typeof a.timestampOffset||a.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[b]!==a.playlist&&(this.appendInitSegment_[b]=!0)},c.getInitSegmentAndUpdateState_=function(a){var b=a.type,c=a.initSegment,d=a.map,e=a.playlist;if(d){var f=Wf(d);if(this.activeInitSegmentId_===f)return null;c=this.initSegmentForMap(d,!0).bytes,this.activeInitSegmentId_=f}return c&&this.appendInitSegment_[b]?(this.playlistOfLastInitSegment_[b]=e,this.appendInitSegment_[b]=!1,this.activeInitSegmentId_=null,c):null},c.handleQuotaExceededError_=function(a,b){var c=this,d=a.segmentInfo,e=a.type,f=a.bytes,g=this.sourceUpdater_.audioBuffered(),h=this.sourceUpdater_.videoBuffered();g.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ef(g).join(", ")),h.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ef(h).join(", "));var i=g.length?g.start(0):0,j=g.length?g.end(g.length-1):0,k=h.length?h.start(0):0,l=h.length?h.end(h.length-1):0;if(j-i<=1&&l-k<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+f.byteLength+", audio buffer: "+ef(g).join(", ")+", video buffer: "+ef(h).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:d,type:e,bytes:f}));var m=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+m),this.remove(0,m,function(){c.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),c.waitingOnRemove_=!1,c.quotaExceededErrorRetryTimeout_=Ma["default"].setTimeout(function(){c.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),c.quotaExceededErrorRetryTimeout_=null,c.processCallQueue_()},1e3)},!0)},c.handleAppendError_=function(a,b){var c=a.segmentInfo,d=a.type,e=a.bytes;b&&(22!==b.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",b),this.error(d+" append of "+e.length+"b failed for segment #"+c.mediaIndex+" in playlist "+c.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:c,type:d,bytes:e}))},c.appendToSourceBuffer_=function(a){var b,c,d,e=a.segmentInfo,f=a.type,g=a.initSegment,h=a.data,i=a.bytes;if(!i){var j=[h],k=h.byteLength;g&&(j.unshift(g),k+=g.byteLength),d=0,(b={bytes:k,segments:j}).bytes&&(c=new Uint8Array(b.bytes),b.segments.forEach(function(a){c.set(a,d),d+=a.byteLength})),i=c}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:f,bytes:i},this.handleAppendError_.bind(this,{segmentInfo:e,type:f,bytes:i}))},c.handleSegmentTimingInfo_=function(a,b,c){if(this.pendingSegment_&&b===this.pendingSegment_.requestId){var d=this.pendingSegment_.segment,e=a+"TimingInfo";d[e]||(d[e]={}),d[e].transmuxerPrependedSeconds=c.prependedContentDuration||0,d[e].transmuxedPresentationStart=c.start.presentation,d[e].transmuxedDecodeStart=c.start.decode,d[e].transmuxedPresentationEnd=c.end.presentation,d[e].transmuxedDecodeEnd=c.end.decode,d[e].baseMediaDecodeTime=c.baseMediaDecodeTime}},c.appendData_=function(a,b){var c=b.type,d=b.data;if(d&&d.byteLength&&("audio"!==c||!this.audioDisabled_)){var e=this.getInitSegmentAndUpdateState_({type:c,initSegment:b.initSegment,playlist:a.playlist,map:a.isFmp4?a.segment.map:null});this.appendToSourceBuffer_({segmentInfo:a,type:c,initSegment:e,data:d})}},c.loadSegment_=function(a){var b=this;this.state="WAITING",this.pendingSegment_=a,this.trimBackBuffer_(a),"number"==typeof a.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(a):this.loadQueue_.push(function(){var c=Oa["default"]({},a,{forceTimestampOffset:!0});Oa["default"](a,b.generateSegmentInfo_(c)),b.isPendingTimestampOffset_=!1,b.updateTransmuxerAndRequestSegment_(a)})},c.updateTransmuxerAndRequestSegment_=function(a){var b=this;this.shouldUpdateTransmuxerTimestampOffset_(a.timestampOffset)&&(this.gopBuffer_.length=0,a.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a.timestampOffset}));var c=this.createSimplifiedSegmentObj_(a),d=this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex),e=null!==this.mediaIndex,f=a.timeline!==this.currentTimeline_&&a.timeline>0,g=d||e&&f;this.logger_("Requesting "+Ug(a)),c.map&&!c.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),a.abortRequests=Eg({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:c,abortFn:this.handleAbort_.bind(this,a),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",a.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",a.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:g,endedTimelineFn:function(){b.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(c){var d=c.message,e=c.level,f=c.stream;b.logger_(Ug(a)+" logged from transmuxer stream "+f+" as a "+e+": "+d)}})},c.trimBackBuffer_=function(a){var b=function(a,b,c){var d=b-gg.BACK_BUFFER_LENGTH;a.length&&(d=Math.max(d,a.start(0)));var e=b-c;return Math.min(e,d)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);b>0&&this.remove(0,b)},c.createSimplifiedSegmentObj_=function(a){var b=a.segment,c=a.part,d={resolvedUri:c?c.resolvedUri:b.resolvedUri,byterange:c?c.byterange:b.byterange,requestId:a.requestId,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,part:a.part},e=a.playlist.segments[a.mediaIndex-1];if(e&&e.timeline===b.timeline&&(e.videoTimingInfo?d.baseStartTime=e.videoTimingInfo.transmuxedDecodeEnd:e.audioTimingInfo&&(d.baseStartTime=e.audioTimingInfo.transmuxedDecodeEnd)),b.key){var f=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]);d.key=this.segmentKey(b.key),d.key.iv=f}return b.map&&(d.map=this.initSegmentForMap(b.map)),d},c.saveTransferStats_=function(a){this.mediaRequests+=1,a&&(this.mediaBytesTransferred+=a.bytesReceived,this.mediaTransferDuration+=a.roundTripTime)},c.saveBandwidthRelatedStats_=function(a,b){this.pendingSegment_.byteLength=b.bytesReceived,a<1/60?this.logger_("Ignoring segment's bandwidth because its duration of "+a+" is less than the min to record "+1/60):(this.bandwidth=b.bandwidth,this.roundTrip=b.roundTripTime)},c.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},c.segmentRequestFinished_=function(a,b,c){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,a,b,c));else if(this.saveTransferStats_(b.stats),this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId){if(a){if(this.pendingSegment_=null,this.state="READY",-102===a.code)return;return this.pause(),-101===a.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(a),void this.trigger("error"))}var d=this.pendingSegment_;this.saveBandwidthRelatedStats_(d.duration,b.stats),d.endOfAllRequests=b.endOfAllRequests,c.gopInfo&&(this.gopBuffer_=function(a,b,c){if(!b.length)return a;if(c)return b.slice();for(var d=b[0].pts,e=0;e<a.length&&!(a[e].pts>=d);e++);return a.slice(0,e).concat(b)}(this.gopBuffer_,c.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(d)}},c.setTimeMapping_=function(a){var b=this.syncController_.mappingForTimeline(a);null!==b&&(this.timeMapping_=b)},c.updateMediaSecondsLoaded_=function(a){"number"==typeof a.start&&"number"==typeof a.end?this.mediaSecondsLoaded+=a.end-a.start:this.mediaSecondsLoaded+=a.duration},c.shouldUpdateTransmuxerTimestampOffset_=function(a){return null!==a&&("main"===this.loaderType_&&a!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&a!==this.sourceUpdater_.audioTimestampOffset())},c.trueSegmentStart_=function(a){var b=a.currentStart,c=a.playlist,d=a.mediaIndex,e=a.firstVideoFrameTimeForData,f=a.currentVideoTimestampOffset,g=a.useVideoTimingInfo,h=a.videoTimingInfo,i=a.audioTimingInfo;if(void 0!==b)return b;if(!g)return i.start;var j=c.segments[d-1];return 0!==d&&j&&void 0!==j.start&&j.end===e+f?h.start:e},c.waitForAppendsToComplete_=function(a){var b=this.getCurrentMediaInfo_(a);if(!b)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var c=b.hasAudio,d=b.hasVideo,e=b.isMuxed,f="main"===this.loaderType_&&d,g=!this.audioDisabled_&&c&&!e;return a.waitingOnAppends=0,a.hasAppendedData_?(f&&a.waitingOnAppends++,g&&a.waitingOnAppends++,f&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,a)),void(g&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,a)))):(a.timingInfo||"number"!=typeof a.timestampOffset||(this.isPendingTimestampOffset_=!0),a.timingInfo={start:0},a.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(a),this.processMetadataQueue_()),void this.checkAppendsDone_(a))},c.checkAppendsDone_=function(a){this.checkForAbort_(a.requestId)||0===--a.waitingOnAppends&&this.handleAppendsDone_()},c.checkForIllegalMediaSwitch=function(a){var b=function(a,b,c){return"main"===a&&b&&c?c.hasAudio||c.hasVideo?b.hasVideo&&!c.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!b.hasVideo&&c.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),a);return!!b&&(this.error({message:b,blacklistDuration:1/0}),this.trigger("error"),!0)},c.updateSourceBufferTimestampOffset_=function(a){if(null!==a.timestampOffset&&"number"==typeof a.timingInfo.start&&!a.changedTimestampOffset&&"main"===this.loaderType_){var b=!1;a.timestampOffset-=a.timingInfo.start,a.changedTimestampOffset=!0,a.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(a.timestampOffset),b=!0),a.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(a.timestampOffset),b=!0),b&&this.trigger("timestampoffset")}},c.updateTimingInfoEnd_=function(a){a.timingInfo=a.timingInfo||{};var b=this.getMediaInfo_(),c="main"===this.loaderType_&&b&&b.hasVideo&&a.videoTimingInfo?a.videoTimingInfo:a.audioTimingInfo;c&&(a.timingInfo.end="number"==typeof c.end?c.end:c.start+a.duration)},c.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var a=this.pendingSegment_;this.updateTimingInfoEnd_(a),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:"main"===this.loaderType_});var b=Yg(a,this.sourceType_);if(b&&("warn"===b.severity?oa.log.warn(b.message):this.logger_(b.message)),this.recordThroughput_(a),this.pendingSegment_=null,this.state="READY",!a.isSyncRequest||(this.trigger("syncinfoupdate"),a.hasAppendedData_)){this.logger_("Appended "+Ug(a)),this.addSegmentMetadataCue_(a),this.fetchAtBuffer_=!0,this.currentTimeline_!==a.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:a.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:a.timeline})),this.currentTimeline_=a.timeline,this.trigger("syncinfoupdate");var c=a.segment;c.end&&this.currentTime_()-c.end>3*a.playlist.targetDuration?this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=a.mediaIndex,this.partIndex=a.partIndex,this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex)&&this.endOfStream(),this.trigger("appended"),a.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_())}else this.logger_("Throwing away un-appended sync request "+Ug(a))},c.recordThroughput_=function(a){if(a.duration<1/60)this.logger_("Ignoring segment's throughput because its duration of "+a.duration+" is less than the min to record "+1/60);else{var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1,d=Math.floor(a.byteLength/c*8*1e3);this.throughput.rate+=(d-b)/++this.throughput.count}},c.addSegmentMetadataCue_=function(a){if(this.segmentMetadataTrack_){var b=a.segment,c=b.start,d=b.end;if(Tg(c)&&Tg(d)){Sg(c,d,this.segmentMetadataTrack_);var e=Ma["default"].WebKitDataCue||Ma["default"].VTTCue,f={custom:b.custom,dateTimeObject:b.dateTimeObject,dateTimeString:b.dateTimeString,bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.id,start:c,end:d},g=new e(c,d,JSON.stringify(f));g.value=f,this.segmentMetadataTrack_.addCue(g)}}},b}(oa.EventTarget),$g=function(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toUpperCase()})},_g=["video","audio"],ah=function(a,b){var c=b[a+"Buffer"];return c&&c.updating||b.queuePending[a]},bh=function Zh(a,b){if(0!==b.queue.length){var c=0,d=b.queue[c];if("mediaSource"!==d.type){if("mediaSource"!==a&&b.ready()&&"closed"!==b.mediaSource.readyState&&!ah(a,b)){if(d.type!==a){if(null===(c=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];if("mediaSource"===d.type)return null;if(d.type===a)return c}return null}(a,b.queue)))return;d=b.queue[c]}return b.queue.splice(c,1),b.queuePending[a]=d,d.action(a,b),d.doneFn?void 0:(b.queuePending[a]=null,void Zh(a,b))}}else b.updating()||"closed"===b.mediaSource.readyState||(b.queue.shift(),d.action(b),d.doneFn&&d.doneFn(),Zh("audio",b),Zh("video",b))}},ch=function(a,b){var c=b[a+"Buffer"],d=$g(a);c&&(c.removeEventListener("updateend",b["on"+d+"UpdateEnd_"]),c.removeEventListener("error",b["on"+d+"Error_"]),b.codecs[a]=null,b[a+"Buffer"]=null)},dh=function(a,b){return a&&b&&-1!==Array.prototype.indexOf.call(a.sourceBuffers,b)},eh=function(a,b,c){return function(d,e){var f=e[d+"Buffer"];if(dh(e.mediaSource,f)){e.logger_("Appending segment "+b.mediaIndex+"'s "+a.length+" bytes to "+d+"Buffer");try{f.appendBuffer(a)}catch(a){e.logger_("Error with code "+a.code+" "+(22===a.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+b.mediaIndex+" to "+d+"Buffer"),e.queuePending[d]=null,c(a)}}}},fh=function(a,b){return function(c,d){var e=d[c+"Buffer"];if(dh(d.mediaSource,e)){d.logger_("Removing "+a+" to "+b+" from "+c+"Buffer");try{e.remove(a,b)}catch(e){d.logger_("Remove "+a+" to "+b+" from "+c+"Buffer failed")}}}},gh=function(a){return function(b,c){var d=c[b+"Buffer"];dh(c.mediaSource,d)&&(c.logger_("Setting "+b+"timestampOffset to "+a),d.timestampOffset=a)}},hh=function(a){return function(b,c){a()}},ih=function(a){return function(b){if("open"===b.mediaSource.readyState){b.logger_("Calling mediaSource endOfStream("+(a||"")+")");try{b.mediaSource.endOfStream(a)}catch(a){oa.log.warn("Failed to call media source endOfStream",a)}}}},jh=function(a){return function(b){b.logger_("Setting mediaSource duration to "+a);try{b.mediaSource.duration=a}catch(a){oa.log.warn("Failed to set media source duration",a)}}},kh=function(){return function(a,b){if("open"===b.mediaSource.readyState){var c=b[a+"Buffer"];if(dh(b.mediaSource,c)){b.logger_("calling abort on "+a+"Buffer");try{c.abort()}catch(b){oa.log.warn("Failed to abort on "+a+"Buffer",b)}}}}},lh=function(a,b){return function(c){var d=$g(a),e=Ea.getMimeForCodec(b);c.logger_("Adding "+a+"Buffer with codec "+b+" to mediaSource");var f=c.mediaSource.addSourceBuffer(e);f.addEventListener("updateend",c["on"+d+"UpdateEnd_"]),f.addEventListener("error",c["on"+d+"Error_"]),c.codecs[a]=b,c[a+"Buffer"]=f}},mh=function(a){return function(b){var c=b[a+"Buffer"];if(ch(a,b),dh(b.mediaSource,c)){b.logger_("Removing "+a+"Buffer with codec "+b.codecs[a]+" from mediaSource");try{b.mediaSource.removeSourceBuffer(c)}catch(b){oa.log.warn("Failed to removeSourceBuffer "+a+"Buffer",b)}}}},nh=function(a){return function(b,c){var d=c[b+"Buffer"],e=Ea.getMimeForCodec(a);dh(c.mediaSource,d)&&c.codecs[b]!==a&&(c.logger_("changing "+b+"Buffer codec from "+c.codecs[b]+" to "+a),d.changeType(e),c.codecs[b]=a)}},oh=function(a){var b=a.type,c=a.sourceUpdater,d=a.action,e=a.doneFn,f=a.name;c.queue.push({type:b,action:d,doneFn:e,name:f}),bh(b,c)},ph=function(a,b){return function(c){if(b.queuePending[a]){var d=b.queuePending[a].doneFn;b.queuePending[a]=null,d&&d(b[a+"Error_"])}bh(a,b)}},qh=function(a){function b(b){var c;return(c=a.call(this)||this).mediaSource=b,c.sourceopenListener_=function(){return bh("mediaSource",Pa["default"](c))},c.mediaSource.addEventListener("sourceopen",c.sourceopenListener_),c.logger_=_e("SourceUpdater"),c.audioTimestampOffset_=0,c.videoTimestampOffset_=0,c.queue=[],c.queuePending={audio:null,video:null},c.delayedAudioAppendQueue_=[],c.videoAppendQueued_=!1,c.codecs={},c.onVideoUpdateEnd_=ph("video",Pa["default"](c)),c.onAudioUpdateEnd_=ph("audio",Pa["default"](c)),c.onVideoError_=function(a){c.videoError_=a},c.onAudioError_=function(a){c.audioError_=a},c.createdSourceBuffers_=!1,c.initializedEme_=!1,c.triggeredReady_=!1,c}Qa["default"](b,a);var c=b.prototype;return c.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},c.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},c.hasInitializedAnyEme=function(){return this.initializedEme_},c.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},c.createSourceBuffers=function(a){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(a),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},c.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},c.addSourceBuffer=function(a,b){oh({type:"mediaSource",sourceUpdater:this,action:lh(a,b),name:"addSourceBuffer"})},c.abort=function(a){oh({type:a,sourceUpdater:this,action:kh(),name:"abort"})},c.removeSourceBuffer=function(a){this.canRemoveSourceBuffer()?oh({type:"mediaSource",sourceUpdater:this,action:mh(a),name:"removeSourceBuffer"}):oa.log.error("removeSourceBuffer is not supported!")},c.canRemoveSourceBuffer=function(){return!oa.browser.IE_VERSION&&!oa.browser.IS_FIREFOX&&Ma["default"].MediaSource&&Ma["default"].MediaSource.prototype&&"function"==typeof Ma["default"].MediaSource.prototype.removeSourceBuffer},b.canChangeType=function(){return Ma["default"].SourceBuffer&&Ma["default"].SourceBuffer.prototype&&"function"==typeof Ma["default"].SourceBuffer.prototype.changeType},c.canChangeType=function(){return this.constructor.canChangeType()},c.changeType=function(a,b){this.canChangeType()?oh({type:a,sourceUpdater:this,action:nh(b),name:"changeType"}):oa.log.error("changeType is not supported!")},c.addOrChangeSourceBuffers=function(a){var b=this;if(!a||"object"!=(void 0===a?"undefined":g(a))||0===Object.keys(a).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(a).forEach(function(c){var d=a[c];return b.hasCreatedSourceBuffers()?void(b.canChangeType()&&b.changeType(c,d)):b.addSourceBuffer(c,d)})},c.appendBuffer=function(a,b){var c=this,d=a.segmentInfo,e=a.type,f=a.bytes;if(this.processedAppend_=!0,"audio"===e&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([a,b]),void this.logger_("delayed audio append of "+f.length+" until video append");if(oh({type:e,sourceUpdater:this,action:eh(f,d||{mediaIndex:-1},b),doneFn:b,name:"appendBuffer"}),"video"===e){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var g=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+g.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,g.forEach(function(a){c.appendBuffer.apply(c,a)})}},c.audioBuffered=function(){return dh(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:oa.createTimeRange()},c.videoBuffered=function(){return dh(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:oa.createTimeRange()},c.buffered=function(){var a=dh(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,b=dh(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return b&&!a?this.audioBuffered():a&&!b?this.videoBuffered():function(a,b){var c=null,d=null,e=0,f=[],g=[];if(!(a&&a.length&&b&&b.length))return oa.createTimeRange();for(var h=a.length;h--;)f.push({time:a.start(h),type:"start"}),f.push({time:a.end(h),type:"end"});for(h=b.length;h--;)f.push({time:b.start(h),type:"start"}),f.push({time:b.end(h),type:"end"});for(f.sort(function(a,b){return a.time-b.time}),h=0;h<f.length;h++)"start"===f[h].type?2==++e&&(c=f[h].time):"end"===f[h].type&&1==--e&&(d=f[h].time),null!==c&&null!==d&&(g.push([c,d]),c=null,d=null);return oa.createTimeRanges(g)}(this.audioBuffered(),this.videoBuffered())},c.setDuration=function(a,b){void 0===b&&(b=pa),oh({type:"mediaSource",sourceUpdater:this,action:jh(a),name:"duration",doneFn:b})},c.endOfStream=function(a,b){void 0===a&&(a=null),void 0===b&&(b=pa),"string"!=typeof a&&(a=void 0),oh({type:"mediaSource",sourceUpdater:this,action:ih(a),name:"endOfStream",doneFn:b})},c.removeAudio=function(a,b,c){void 0===c&&(c=pa),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?oh({type:"audio",sourceUpdater:this,action:fh(a,b),doneFn:c,name:"remove"}):c()},c.removeVideo=function(a,b,c){void 0===c&&(c=pa),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?oh({type:"video",sourceUpdater:this,action:fh(a,b),doneFn:c,name:"remove"}):c()},c.updating=function(){return!(!ah("audio",this)&&!ah("video",this))},c.audioTimestampOffset=function(a){return void 0!==a&&this.audioBuffer&&this.audioTimestampOffset_!==a&&(oh({type:"audio",sourceUpdater:this,action:gh(a),name:"timestampOffset"}),this.audioTimestampOffset_=a),this.audioTimestampOffset_},c.videoTimestampOffset=function(a){return void 0!==a&&this.videoBuffer&&this.videoTimestampOffset!==a&&(oh({type:"video",sourceUpdater:this,action:gh(a),name:"timestampOffset"}),this.videoTimestampOffset_=a),this.videoTimestampOffset_},c.audioQueueCallback=function(a){this.audioBuffer&&oh({type:"audio",sourceUpdater:this,action:hh(a),name:"callback"})},c.videoQueueCallback=function(a){this.videoBuffer&&oh({type:"video",sourceUpdater:this,action:hh(a),name:"callback"})},c.dispose=function(){var a=this;this.trigger("dispose"),_g.forEach(function(b){a.abort(b),a.canRemoveSourceBuffer()?a.removeSourceBuffer(b):a[b+"QueueCallback"](function(){return ch(b,a)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},b}(oa.EventTarget),rh=function(a){return decodeURIComponent(escape(String.fromCharCode.apply(null,a)))},sh=new Uint8Array("\n\n".split("").map(function(a){return a.charCodeAt(0)})),th=function(a){function b(b,c){var d;return void 0===c&&(c={}),(d=a.call(this,b,c)||this).mediaSource_=null,d.subtitlesTrack_=null,d.loaderType_="subtitle",d.featuresNativeTextTracks_=b.featuresNativeTextTracks,d.shouldSaveSegmentTimingInfo_=!1,d}Qa["default"](b,a);var c=b.prototype;return c.createTransmuxer_=function(){return null},c.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return oa.createTimeRanges();var a=this.subtitlesTrack_.cues,b=a[0].startTime,c=a[a.length-1].startTime;return oa.createTimeRanges([[b,c]])},c.initSegmentForMap=function(a,b){if(void 0===b&&(b=!1),!a)return null;var c=Wf(a),d=this.initSegments_[c];if(b&&!d&&a.bytes){var e=sh.byteLength+a.bytes.byteLength,f=new Uint8Array(e);f.set(a.bytes),f.set(sh,a.bytes.byteLength),this.initSegments_[c]=d={
resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:f}}return d||a},c.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},c.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},c.track=function(a){return void 0===a||(this.subtitlesTrack_=a,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},c.remove=function(a,b){Sg(a,b,this.subtitlesTrack_)},c.fillBuffer_=function(){var a=this,b=this.chooseNextRequest_();if(b){if(null===this.syncController_.timestampOffsetForTimeline(b.timeline))return this.syncController_.one("timestampoffset",function(){a.state="READY",a.paused()||a.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(b)}},c.timestampOffsetForSegment_=function(){return null},c.chooseNextRequest_=function(){return this.skipEmptySegments_(a.prototype.chooseNextRequest_.call(this))},c.skipEmptySegments_=function(a){for(;a&&a.segment.empty;){if(a.mediaIndex+1>=a.playlist.segments.length){a=null;break}a=this.generateSegmentInfo_({playlist:a.playlist,mediaIndex:a.mediaIndex+1,startOfSegment:a.startOfSegment+a.duration,isSyncRequest:a.isSyncRequest})}return a},c.stopForError=function(a){this.error(a),this.state="READY",this.pause(),this.trigger("error")},c.segmentRequestFinished_=function(a,b,c){var d=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(b.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(a)return-101===a.code&&this.handleTimeout_(),-102===a.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(a);var e=this.pendingSegment_;this.saveBandwidthRelatedStats_(e.duration,b.stats),this.state="APPENDING",this.trigger("appending");var f=e.segment;if(f.map&&(f.map.bytes=b.map.bytes),e.bytes=b.bytes,"function"!=typeof Ma["default"].WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var g,h=function(){d.subtitlesTrack_.tech_.off("vttjsloaded",g),d.stopForError({message:"Error loading vtt.js"})};return g=function(){d.subtitlesTrack_.tech_.off("vttjserror",h),d.segmentRequestFinished_(a,b,c)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",g),void this.subtitlesTrack_.tech_.one("vttjserror",h)}f.requested=!0;try{this.parseVTTCues_(e)}catch(a){return void this.stopForError({message:a.message})}if(this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_),e.cues.length?e.timingInfo={start:e.cues[0].startTime,end:e.cues[e.cues.length-1].endTime}:e.timingInfo={start:e.startOfSegment,end:e.startOfSegment+e.duration},e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=f.duration,e.cues.forEach(function(a){d.subtitlesTrack_.addCue(d.featuresNativeTextTracks_?new Ma["default"].VTTCue(a.startTime,a.endTime,a.text):a)}),function(a){var b=a.cues;if(b)for(var c=0;c<b.length;c++){for(var d=[],e=0,f=0;f<b.length;f++)b[c].startTime===b[f].startTime&&b[c].endTime===b[f].endTime&&b[c].text===b[f].text&&++e>1&&d.push(b[f]);d.length&&d.forEach(function(b){return a.removeCue(b)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},c.handleData_=function(){},c.updateTimingInfoEnd_=function(){},c.parseVTTCues_=function(a){var b,c=!1;"function"==typeof Ma["default"].TextDecoder?b=new Ma["default"].TextDecoder("utf8"):(b=Ma["default"].WebVTT.StringDecoder(),c=!0);var d=new Ma["default"].WebVTT.Parser(Ma["default"],Ma["default"].vttjs,b);if(a.cues=[],a.timestampmap={MPEGTS:0,LOCAL:0},d.oncue=a.cues.push.bind(a.cues),d.ontimestampmap=function(b){a.timestampmap=b},d.onparsingerror=function(a){oa.log.warn("Error encountered when parsing cues: "+a.message)},a.segment.map){var e=a.segment.map.bytes;c&&(e=rh(e)),d.parse(e)}var f=a.bytes;c&&(f=rh(f)),d.parse(f),d.flush()},c.updateTimeMapping_=function(a,b,c){var d=a.segment;if(b)if(a.cues.length){var e=a.timestampmap,f=e.MPEGTS/La.ONE_SECOND_IN_TS-e.LOCAL+b.mapping;if(a.cues.forEach(function(a){a.startTime+=f,a.endTime+=f}),!c.syncInfo){var g=a.cues[0].startTime,h=a.cues[a.cues.length-1].startTime;c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(g,h-d.duration)}}}else d.empty=!0},b}(Zg),uh=function(a,b){for(var c=a.cues,d=0;d<c.length;d++){var e=c[d];if(b>=e.adStartTime&&b<=e.adEndTime)return e}return null},vh=[{name:"VOD",run:function(a,b,c,d,e){return c!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(a,b,c,d,e){if(!Object.keys(a.timelineToDatetimeMappings).length)return null;var f=null,g=null,h=hf(b);e=e||0;for(var i=0;i<h.length;i++){var j=h[b.endList||0===e?i:h.length-(i+1)],k=j.segment,l=a.timelineToDatetimeMappings[k.timeline];if(l&&k.dateTimeObject){var m=k.dateTimeObject.getTime()/1e3+l;if(k.parts&&"number"==typeof j.partIndex)for(var n=0;n<j.partIndex;n++)m+=k.parts[n].duration;var o=Math.abs(e-m);if(null!==g&&(0===o||g<o))break;g=o,f={time:m,segmentIndex:j.segmentIndex,partIndex:j.partIndex}}}return f}},{name:"Segment",run:function(a,b,c,d,e){var f=null,g=null;e=e||0;for(var h=hf(b),i=0;i<h.length;i++){var j=h[b.endList||0===e?i:h.length-(i+1)],k=j.segment,l=j.part&&j.part.start||k&&k.start;if(k.timeline===d&&void 0!==l){var m=Math.abs(e-l);if(null!==g&&g<m)break;(!f||null===g||g>=m)&&(g=m,f={time:l,segmentIndex:j.segmentIndex,partIndex:j.partIndex})}}return f}},{name:"Discontinuity",run:function(a,b,c,d,e){var f=null;if(e=e||0,b.discontinuityStarts&&b.discontinuityStarts.length)for(var g=null,h=0;h<b.discontinuityStarts.length;h++){var i=b.discontinuityStarts[h],j=b.discontinuitySequence+h+1,k=a.discontinuities[j];if(k){var l=Math.abs(e-k.time);if(null!==g&&g<l)break;(!f||null===g||g>=l)&&(g=l,f={time:k.time,segmentIndex:i,partIndex:null})}}return f}},{name:"Playlist",run:function(a,b,c,d,e){return b.syncInfo?{time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence,partIndex:null}:null}}],wh=function(a){function b(b){var c;return(c=a.call(this)||this).timelines=[],c.discontinuities=[],c.timelineToDatetimeMappings={},c.logger_=_e("SyncController"),c}Qa["default"](b,a);var c=b.prototype;return c.getSyncPoint=function(a,b,c,d){var e=this.runStrategies_(a,b,c,d);return e.length?this.selectSyncPoint_(e,{key:"time",value:d}):null},c.getExpiredTime=function(a,b){if(!a||!a.segments)return null;var c=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!c.length)return null;var d=this.selectSyncPoint_(c,{key:"segmentIndex",value:0});return d.segmentIndex>0&&(d.time*=-1),Math.abs(d.time+of({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:d.segmentIndex,endIndex:0}))},c.runStrategies_=function(a,b,c,d){for(var e=[],f=0;f<vh.length;f++){var g=vh[f],h=g.run(this,a,b,c,d);h&&(h.strategy=g.name,e.push({strategy:g.name,syncPoint:h}))}return e},c.selectSyncPoint_=function(a,b){for(var c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),e=a[0].strategy,f=1;f<a.length;f++){var g=Math.abs(a[f].syncPoint[b.key]-b.value);g<d&&(d=g,c=a[f].syncPoint,e=a[f].strategy)}return this.logger_("syncPoint for ["+b.key+": "+b.value+"] chosen with strategy ["+e+"]: [time:"+c.time+", segmentIndex:"+c.segmentIndex+("number"==typeof c.partIndex?",partIndex:"+c.partIndex:"")+"]"),c},c.saveExpiredSegmentInfo=function(a,b){for(var c=b.mediaSequence-a.mediaSequence-1;c>=0;c--){var d=a.segments[c];if(d&&void 0!==d.start){b.syncInfo={mediaSequence:a.mediaSequence+c,time:d.start},this.logger_("playlist refresh sync: [time:"+b.syncInfo.time+", mediaSequence: "+b.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},c.setDateTimeMappingForStart=function(a){if(this.timelineToDatetimeMappings={},a.segments&&a.segments.length&&a.segments[0].dateTimeObject){var b=a.segments[0],c=b.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[b.timeline]=-c}},c.saveSegmentTimingInfo=function(a){var b=a.segmentInfo,c=a.shouldSaveTimelineMapping,d=this.calculateSegmentTimeMapping_(b,b.timingInfo,c),e=b.segment;d&&(this.saveDiscontinuitySyncInfo_(b),b.playlist.syncInfo||(b.playlist.syncInfo={mediaSequence:b.playlist.mediaSequence+b.mediaIndex,time:e.start}));var f=e.dateTimeObject;e.discontinuity&&c&&f&&(this.timelineToDatetimeMappings[e.timeline]=-f.getTime()/1e3)},c.timestampOffsetForTimeline=function(a){return void 0===this.timelines[a]?null:this.timelines[a].time},c.mappingForTimeline=function(a){return void 0===this.timelines[a]?null:this.timelines[a].mapping},c.calculateSegmentTimeMapping_=function(a,b,c){var d,e,f=a.segment,g=a.part,h=this.timelines[a.timeline];if("number"==typeof a.timestampOffset)h={time:a.startOfSegment,mapping:a.startOfSegment-b.start},c&&(this.timelines[a.timeline]=h,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+a.timeline+": [time: "+h.time+"] [mapping: "+h.mapping+"]")),d=a.startOfSegment,e=b.end+h.mapping;else{if(!h)return!1;d=b.start+h.mapping,e=b.end+h.mapping}return g&&(g.start=d,g.end=e),(!f.start||d<f.start)&&(f.start=d),f.end=e,!0},c.saveDiscontinuitySyncInfo_=function(a){var b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(var d=0;d<b.discontinuityStarts.length;d++){var e=b.discontinuityStarts[d],f=b.discontinuitySequence+d+1,g=e-a.mediaIndex,h=Math.abs(g);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>h){var i=void 0;i=g<0?c.start-of({defaultDuration:b.targetDuration,durationList:b.segments,startIndex:a.mediaIndex,endIndex:e}):c.end+of({defaultDuration:b.targetDuration,durationList:b.segments,startIndex:a.mediaIndex+1,endIndex:e}),this.discontinuities[f]={time:i,accuracy:h}}}},c.dispose=function(){this.trigger("dispose"),this.off()},b}(oa.EventTarget),xh=function(a){function b(){var b;return(b=a.call(this)||this).pendingTimelineChanges_={},b.lastTimelineChanges_={},b}Qa["default"](b,a);var c=b.prototype;return c.clearPendingTimelineChange=function(a){this.pendingTimelineChanges_[a]=null,this.trigger("pendingtimelinechange")},c.pendingTimelineChange=function(a){var b=a.type,c=a.from,d=a.to;return"number"==typeof c&&"number"==typeof d&&(this.pendingTimelineChanges_[b]={type:b,from:c,to:d},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[b]},c.lastTimelineChange=function(a){var b=a.type,c=a.from,d=a.to;return"number"==typeof c&&"number"==typeof d&&(this.lastTimelineChanges_[b]={type:b,from:c,to:d},delete this.pendingTimelineChanges_[b],this.trigger("timelinechange")),this.lastTimelineChanges_[b]},c.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},b}(oa.EventTarget),yh=ig(jg(kg(function(){function a(a,b,c){return a(c={path:b,exports:{},require:function(a,b){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==b&&c.path)}},c.exports),c.exports}var b=a(function(a){function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}a.exports=function(a,c,d){return c&&b(a.prototype,c),d&&b(a,d),a},a.exports["default"]=a.exports,a.exports.__esModule=!0}),c=a(function(a){function b(c,d){return a.exports=b=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},a.exports["default"]=a.exports,a.exports.__esModule=!0,b(c,d)}a.exports=b,a.exports["default"]=a.exports,a.exports.__esModule=!0}),d=a(function(a){a.exports=function(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,c(a,b)},a.exports["default"]=a.exports,a.exports.__esModule=!0}),e=function(){function a(){this.listeners={}}var b=a.prototype;return b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},b.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a]=this.listeners[a].slice(0),this.listeners[a].splice(c,1),c>-1},b.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else for(var e=Array.prototype.slice.call(arguments,1),f=b.length,g=0;g<f;++g)b[g].apply(this,e)},b.dispose=function(){this.listeners={}},b.pipe=function(a){this.on("data",function(b){a.push(b)})},a}(),f=null,g=function(){function a(a){var b,c,d;f||(f=function(){var a,b,c,d,e,f,g,h,i=[[[],[],[],[],[]],[[],[],[],[],[]]],j=i[0],k=i[1],l=j[4],m=k[4],n=[],o=[];for(a=0;a<256;a++)o[(n[a]=a<<1^283*(a>>7))^a]=a;for(b=c=0;!l[b];b^=d||1,c=o[c]||1)for(f=(f=c^c<<1^c<<2^c<<3^c<<4)>>8^255&f^99,l[b]=f,m[f]=b,h=16843009*n[e=n[d=n[b]]]^65537*e^257*d^16843008*b,g=257*n[f]^16843008*f,a=0;a<4;a++)j[a][b]=g=g<<24^g>>>8,k[a][f]=h=h<<24^h>>>8;for(a=0;a<5;a++)j[a]=j[a].slice(0),k[a]=k[a].slice(0);return i}()),this._tables=[[f[0][0].slice(),f[0][1].slice(),f[0][2].slice(),f[0][3].slice(),f[0][4].slice()],[f[1][0].slice(),f[1][1].slice(),f[1][2].slice(),f[1][3].slice(),f[1][4].slice()]];var e=this._tables[0][4],g=this._tables[1],h=a.length,i=1;if(4!==h&&6!==h&&8!==h)throw new Error("Invalid aes key size");var j=a.slice(0),k=[];for(this._key=[j,k],b=h;b<4*h+28;b++)d=j[b-1],(b%h==0||8===h&&b%h==4)&&(d=e[d>>>24]<<24^e[d>>16&255]<<16^e[d>>8&255]<<8^e[255&d],b%h==0&&(d=d<<8^d>>>24^i<<24,i=i<<1^283*(i>>7))),j[b]=j[b-h]^d;for(c=0;b;c++,b--)d=j[3&c?b:b-4],k[c]=b<=4||c<4?d:g[0][e[d>>>24]]^g[1][e[d>>16&255]]^g[2][e[d>>8&255]]^g[3][e[255&d]]}return a.prototype.decrypt=function(a,b,c,d,e,f){var g,h,i,j,k=this._key[1],l=a^k[0],m=d^k[1],n=c^k[2],o=b^k[3],p=k.length/4-2,q=4,r=this._tables[1],s=r[0],t=r[1],u=r[2],v=r[3],w=r[4];for(j=0;j<p;j++)g=s[l>>>24]^t[m>>16&255]^u[n>>8&255]^v[255&o]^k[q],h=s[m>>>24]^t[n>>16&255]^u[o>>8&255]^v[255&l]^k[q+1],i=s[n>>>24]^t[o>>16&255]^u[l>>8&255]^v[255&m]^k[q+2],o=s[o>>>24]^t[l>>16&255]^u[m>>8&255]^v[255&n]^k[q+3],q+=4,l=g,m=h,n=i;for(j=0;j<4;j++)e[(3&-j)+f]=w[l>>>24]<<24^w[m>>16&255]<<16^w[n>>8&255]<<8^w[255&o]^k[q++],g=l,l=m,m=n,n=o,o=g},a}(),h=function(a){function b(){var b;return(b=a.call(this,e)||this).jobs=[],b.delay=1,b.timeout_=null,b}d(b,a);var c=b.prototype;return c.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},c.push=function(a){this.jobs.push(a),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},b}(e),i=function(a){return a<<24|(65280&a)<<8|(16711680&a)>>8|a>>>24},j=function(){function a(b,c,d,e){var f=a.STEP,g=new Int32Array(b.buffer),j=new Uint8Array(b.byteLength),k=0;for(this.asyncStream_=new h,this.asyncStream_.push(this.decryptChunk_(g.subarray(k,k+f),c,d,j)),k=f;k<g.length;k+=f)d=new Uint32Array([i(g[k-4]),i(g[k-3]),i(g[k-2]),i(g[k-1])]),this.asyncStream_.push(this.decryptChunk_(g.subarray(k,k+f),c,d,j));this.asyncStream_.push(function(){var a;e(null,(a=j).subarray(0,a.byteLength-a[a.byteLength-1]))})}return a.prototype.decryptChunk_=function(a,b,c,d){return function(){var e=function(a,b,c){var d,e,f,h,j,k,l,m,n,o=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),p=new g(Array.prototype.slice.call(b)),q=new Uint8Array(a.byteLength),r=new Int32Array(q.buffer);for(d=c[0],e=c[1],f=c[2],h=c[3],n=0;n<o.length;n+=4)j=i(o[n]),k=i(o[n+1]),l=i(o[n+2]),m=i(o[n+3]),p.decrypt(j,k,l,m,r,n),r[n]=i(r[n]^d),r[n+1]=i(r[n+1]^e),r[n+2]=i(r[n+2]^f),r[n+3]=i(r[n+3]^h),d=j,e=k,f=l,h=m;return q}(a,b,c);d.set(e,a.byteOffset)}},b(a,null,[{key:"STEP",get:function(){return 32e3}}]),a}();self.onmessage=function(a){var b=a.data,c=new Uint8Array(b.encrypted.bytes,b.encrypted.byteOffset,b.encrypted.byteLength),d=new Uint32Array(b.key.bytes,b.key.byteOffset,b.key.byteLength/4),e=new Uint32Array(b.iv.bytes,b.iv.byteOffset,b.iv.byteLength/4);new j(c,d,e,function(a,c){var d,e;self.postMessage((d={source:b.source,decrypted:c},e={},Object.keys(d).forEach(function(a){var b=d[a];ArrayBuffer.isView(b)?e[a]={bytes:b.buffer,byteOffset:b.byteOffset,byteLength:b.byteLength}:e[a]=b}),e),[c.buffer])})}}))),zh=function(a){var b=a["default"]?"main":"alternative";return a.characteristics&&a.characteristics.indexOf("public.accessibility.describes-video")>=0&&(b="main-desc"),b},Ah=function(a,b){a.abort(),a.pause(),b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),b.activePlaylistLoader=null)},Bh=function(a,b){b.activePlaylistLoader=a,a.load()},Ch={AUDIO:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a],e=b.blacklistCurrentPlaylist;Ah(c,d);var f=d.activeTrack(),g=d.activeGroup(),h=(g.filter(function(a){return a["default"]})[0]||g[0]).id,i=d.tracks[h];if(f!==i){for(var j in oa.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),d.tracks)d.tracks[j].enabled=d.tracks[j]===i;d.onTrackChanged()}else e({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a];oa.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Ah(c,d);var e=d.activeTrack();e&&(e.mode="disabled"),d.onTrackChanged()}}},Dh={AUDIO:function(a,b,c){if(b){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e),(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()}),b.on("loadedplaylist",function(){f.playlist(b.media(),e),d.paused()||f.load()}),b.on("error",Ch[a](a,c))}},SUBTITLES:function(a,b,c){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a],g=c.mediaTypes[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e),f.track(g.activeTrack()),(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()}),b.on("loadedplaylist",function(){f.playlist(b.media(),e),d.paused()||f.load()}),b.on("error",Ch[a](a,c))}},Eh={AUDIO:function(a,b){var c=b.vhs,d=b.sourceType,e=b.segmentLoaders[a],f=b.requestOptions,g=b.master.mediaGroups,h=b.mediaTypes[a],i=h.groups,j=h.tracks,k=h.logger_,l=b.masterPlaylistLoader,m=xf(l.master);for(var n in g[a]&&0!==Object.keys(g[a]).length||(g[a]={main:{"default":{"default":!0}}},m&&(g[a].main["default"].playlists=l.master.playlists)),g[a])for(var o in i[n]||(i[n]=[]),g[a][n]){var p=g[a][n][o],q=void 0;if(m?(k("AUDIO group '"+n+"' label '"+o+"' is a master playlist"),p.isMasterPlaylist=!0,q=null):q="vhs-json"===d&&p.playlists?new Mf(p.playlists[0],c,f):p.resolvedUri?new Mf(p.resolvedUri,c,f):p.playlists&&"dash"===d?new fg(p.playlists[0],c,f,l):null,p=oa.mergeOptions({id:o,playlistLoader:q},p),Dh[a](a,p.playlistLoader,b),i[n].push(p),void 0===j[o]){var r=new oa.AudioTrack({id:o,kind:zh(p),enabled:!1,language:p.language,"default":p["default"],label:o});j[o]=r}}e.on("error",Ch[a](a,b))},SUBTITLES:function(a,b){var c=b.tech,d=b.vhs,e=b.sourceType,f=b.segmentLoaders[a],g=b.requestOptions,h=b.master.mediaGroups,i=b.mediaTypes[a],j=i.groups,k=i.tracks,l=b.masterPlaylistLoader;for(var m in h[a])for(var n in j[m]||(j[m]=[]),h[a][m])if(!h[a][m][n].forced){var o=h[a][m][n],p=void 0;if("hls"===e)p=new Mf(o.resolvedUri,d,g);else if("dash"===e){if(!o.playlists.filter(function(a){return a.excludeUntil!==1/0}).length)return;p=new fg(o.playlists[0],d,g,l)}else"vhs-json"===e&&(p=new Mf(o.playlists?o.playlists[0]:o.resolvedUri,d,g));if(o=oa.mergeOptions({id:n,playlistLoader:p},o),Dh[a](a,o.playlistLoader,b),j[m].push(o),void 0===k[n]){var q=c.addRemoteTextTrack({id:n,kind:"subtitles","default":o["default"]&&o.autoselect,language:o.language,label:n},!1).track;k[n]=q}}f.on("error",Ch[a](a,b))},"CLOSED-CAPTIONS":function(a,b){var c=b.tech,d=b.master.mediaGroups,e=b.mediaTypes[a],f=e.groups,g=e.tracks;for(var h in d[a])for(var i in f[h]||(f[h]=[]),d[a][h]){var j=d[a][h][i];if(/^(?:CC|SERVICE)/.test(j.instreamId)){var k=c.options_.vhs&&c.options_.vhs.captionServices||{},l={label:i,language:j.language,instreamId:j.instreamId,"default":j["default"]&&j.autoselect};if(k[l.instreamId]&&(l=oa.mergeOptions(l,k[l.instreamId])),void 0===l["default"]&&delete l["default"],f[h].push(oa.mergeOptions({id:i},j)),void 0===g[i]){var m=c.addRemoteTextTrack({id:l.instreamId,kind:"captions","default":l["default"],language:l.language,label:l.label},!1).track;g[i]=m}}}}},Fh=function $h(a,b){for(var c=0;c<a.length;c++){if(vf(b,a[c]))return!0;if(a[c].playlists&&$h(a[c].playlists,b))return!0}return!1},Gh={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a].tracks;for(var d in c)if(c[d].enabled)return c[d];return null}},SUBTITLES:function(a,b){return function(){var c=b.mediaTypes[a].tracks;for(var d in c)if("showing"===c[d].mode||"hidden"===c[d].mode)return c[d];return null}}},Hh=function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){Eh[b](b,a)});var b=a.mediaTypes,c=a.masterPlaylistLoader,d=a.tech,e=a.vhs,f=a.segmentLoaders,g=f.AUDIO,h=f.main;["AUDIO","SUBTITLES"].forEach(function(c){b[c].activeGroup=function(a,b){return function(c){var d=b.masterPlaylistLoader,e=b.mediaTypes[a].groups,f=d.media();if(!f)return null;var g=null;f.attributes[a]&&(g=e[f.attributes[a]]);var h=Object.keys(e);if(!g)if("AUDIO"===a&&h.length>1&&xf(b.master))for(var i=0;i<h.length;i++){var j=e[h[i]];if(Fh(j,f)){g=j;break}}else e.main?g=e.main:1===h.length&&(g=e[h[0]]);return void 0===c?g:null!==c&&g&&g.filter(function(a){return a.id===c.id})[0]||null}}(c,a),b[c].activeTrack=Gh[c](c,a),b[c].onGroupChanged=function(a,b){return function(){var c=b.segmentLoaders,d=c[a],e=c.main,f=b.mediaTypes[a],g=f.activeTrack(),h=f.getActiveGroup(),i=f.activePlaylistLoader,j=f.lastGroup_;h&&j&&h.id===j.id||(f.lastGroup_=h,f.lastTrack_=g,Ah(d,f),h&&!h.isMasterPlaylist&&(h.playlistLoader?(d.resyncLoader(),Bh(h.playlistLoader,f)):i&&e.resetEverything()))}}(c,a),b[c].onGroupChanging=function(a,b){return function(){var c=b.segmentLoaders[a];b.mediaTypes[a].lastGroup_=null,c.abort(),c.pause()}}(c,a),b[c].onTrackChanged=function(a,b){return function(){var c=b.masterPlaylistLoader,d=b.segmentLoaders,e=d[a],f=d.main,g=b.mediaTypes[a],h=g.activeTrack(),i=g.getActiveGroup(),j=g.activePlaylistLoader,k=g.lastTrack_;if((!k||!h||k.id!==h.id)&&(g.lastGroup_=i,g.lastTrack_=h,Ah(e,g),i)){if(i.isMasterPlaylist){if(!h||!k||h.id===k.id)return;var l=b.vhs.masterPlaylistController_,m=l.selectPlaylist();if(l.media()===m)return;return g.logger_("track change. Switching master audio from "+k.id+" to "+h.id),c.pause(),f.resetEverything(),void l.fastQualityChange_(m)}if("AUDIO"===a){if(!i.playlistLoader)return f.setAudio(!0),void f.resetEverything();e.setAudio(!0),f.setAudio(!1)}j!==i.playlistLoader?(e.track&&e.track(h),e.resetEverything(),Bh(i.playlistLoader,g)):Bh(i.playlistLoader,g)}}}(c,a),b[c].getActiveGroup=function(a,b){var c=b.mediaTypes;return function(){var b=c[a].activeTrack();return b?c[a].activeGroup(b):null}}(c,a)});var i=b.AUDIO.activeGroup();if(i){var j=(i.filter(function(a){return a["default"]})[0]||i[0]).id;b.AUDIO.tracks[j].enabled=!0,b.AUDIO.onGroupChanged(),b.AUDIO.onTrackChanged(),b.AUDIO.getActiveGroup().playlistLoader?(h.setAudio(!1),g.setAudio(!0)):h.setAudio(!0)}c.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanged()})}),c.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanging()})});var k=function(){b.AUDIO.onTrackChanged(),d.trigger({type:"usage",name:"vhs-audio-change"}),d.trigger({type:"usage",name:"hls-audio-change"})};for(var l in d.audioTracks().addEventListener("change",k),d.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged),e.on("dispose",function(){d.audioTracks().removeEventListener("change",k),d.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)}),d.clearTracks("audio"),b.AUDIO.tracks)d.audioTracks().addTrack(b.AUDIO.tracks[l])},Ih=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Jh=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},Kh=function(a){function b(b){var c;c=a.call(this)||this;var d=b.src,e=b.handleManifestRedirects,f=b.withCredentials,g=b.tech,h=b.bandwidth,i=b.externVhs,j=b.useCueTags,k=b.blacklistDuration,l=b.enableLowInitialPlaylist,m=b.sourceType,n=b.cacheEncryptionKeys,o=b.experimentalBufferBasedABR,p=b.experimentalLeastPixelDiffSelector;if(!d)throw new Error("A non-empty playlist URL or JSON manifest string is required");var q,r=b.maxPlaylistRetries;null==r&&(r=1/0),Ye=i,c.experimentalBufferBasedABR=Boolean(o),c.experimentalLeastPixelDiffSelector=Boolean(p),c.withCredentials=f,c.tech_=g,c.vhs_=g.vhs,c.sourceType_=m,c.useCueTags_=j,c.blacklistDuration=k,c.maxPlaylistRetries=r,c.enableLowInitialPlaylist=l,c.useCueTags_&&(c.cueTagsTrack_=c.tech_.addTextTrack("metadata","ad-cues"),c.cueTagsTrack_.inBandMetadataTrackDispatchType=""),c.requestOptions_={withCredentials:f,handleManifestRedirects:e,maxPlaylistRetries:r,timeout:null},c.on("error",c.pauseLoading),c.mediaTypes_=(q={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(a){q[a]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:pa,activeTrack:pa,getActiveGroup:pa,onGroupChanged:pa,onTrackChanged:pa,lastTrack_:null,logger_:_e("MediaGroups["+a+"]")}}),q),c.mediaSource=new Ma["default"].MediaSource,c.handleDurationChange_=c.handleDurationChange_.bind(Pa["default"](c)),c.handleSourceOpen_=c.handleSourceOpen_.bind(Pa["default"](c)),c.handleSourceEnded_=c.handleSourceEnded_.bind(Pa["default"](c)),c.mediaSource.addEventListener("durationchange",c.handleDurationChange_),c.mediaSource.addEventListener("sourceopen",c.handleSourceOpen_),c.mediaSource.addEventListener("sourceended",c.handleSourceEnded_),c.seekable_=oa.createTimeRanges(),c.hasPlayed_=!1,c.syncController_=new wh(b),c.segmentMetadataTrack_=g.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,c.decrypter_=new yh,c.sourceUpdater_=new qh(c.mediaSource),c.inbandTextTracks_={},c.timelineChangeController_=new xh;var s={vhs:c.vhs_,parse708captions:b.parse708captions,mediaSource:c.mediaSource,currentTime:c.tech_.currentTime.bind(c.tech_),seekable:function(){return c.seekable()},seeking:function(){return c.tech_.seeking()},duration:function(){return c.duration()},hasPlayed:function(){return c.hasPlayed_},goalBufferLength:function(){return c.goalBufferLength()},bandwidth:h,syncController:c.syncController_,decrypter:c.decrypter_,sourceType:c.sourceType_,inbandTextTracks:c.inbandTextTracks_,cacheEncryptionKeys:n,sourceUpdater:c.sourceUpdater_,timelineChangeController:c.timelineChangeController_,experimentalExactManifestTimings:b.experimentalExactManifestTimings};c.masterPlaylistLoader_="dash"===c.sourceType_?new fg(d,c.vhs_,c.requestOptions_):new Mf(d,c.vhs_,c.requestOptions_),c.setupMasterPlaylistLoaderListeners_(),c.mainSegmentLoader_=new Zg(oa.mergeOptions(s,{segmentMetadataTrack:c.segmentMetadataTrack_,loaderType:"main"}),b),c.audioSegmentLoader_=new Zg(oa.mergeOptions(s,{loaderType:"audio"}),b),c.subtitleSegmentLoader_=new th(oa.mergeOptions(s,{loaderType:"vtt",featuresNativeTextTracks:c.tech_.featuresNativeTextTracks}),b),c.setupSegmentLoaderListeners_(),c.experimentalBufferBasedABR&&(c.masterPlaylistLoader_.one("loadedplaylist",function(){return c.startABRTimer_()}),c.tech_.on("pause",function(){return c.stopABRTimer_()}),c.tech_.on("play",function(){return c.startABRTimer_()})),Ih.forEach(function(a){c[a+"_"]=Jh.bind(Pa["default"](c),a)}),c.logger_=_e("MPC"),c.triggeredFmp4Usage=!1,"none"===c.tech_.preload()?(c.loadOnPlay_=function(){c.loadOnPlay_=null,c.masterPlaylistLoader_.load()},c.tech_.one("play",c.loadOnPlay_)):c.masterPlaylistLoader_.load(),c.timeToLoadedData__=-1,c.mainAppendsToLoadedData__=-1,c.audioAppendsToLoadedData__=-1;var t="none"===c.tech_.preload()?"play":"loadstart";return c.tech_.one(t,function(){var a=Date.now();c.tech_.one("loadeddata",function(){c.timeToLoadedData__=Date.now()-a,c.mainAppendsToLoadedData__=c.mainSegmentLoader_.mediaAppends,c.audioAppendsToLoadedData__=c.audioSegmentLoader_.mediaAppends})}),c}Qa["default"](b,a);var c=b.prototype;return c.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},c.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},c.appendsToLoadedData_=function(){var a=this.mainAppendsToLoadedData_(),b=this.audioAppendsToLoadedData_();return-1===a||-1===b?-1:a+b},c.timeToLoadedData_=function(){return this.timeToLoadedData__},c.checkABR_=function(){var a=this.selectPlaylist();a&&this.shouldSwitchToMedia_(a)&&this.switchMedia_(a,"abr")},c.switchMedia_=function(a,b,c){var d=this.media(),e=d&&(d.id||d.uri),f=a.id||a.uri;e&&e!==f&&(this.logger_("switch media "+e+" -> "+f+" from "+b),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+b})),this.masterPlaylistLoader_.media(a,c)},c.startABRTimer_=function(){var a=this;this.stopABRTimer_(),this.abrTimer_=Ma["default"].setInterval(function(){return a.checkABR_()},250)},c.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Ma["default"].clearInterval(this.abrTimer_),this.abrTimer_=null)},c.getAudioTrackPlaylists_=function(){var a=this.master(),b=a&&a.playlists||[];if(!a||!a.mediaGroups||!a.mediaGroups.AUDIO)return b;var c,d=a.mediaGroups.AUDIO,e=Object.keys(d);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)c=this.mediaTypes_.AUDIO.activeTrack();else{var f=d.main||e.length&&d[e[0]];for(var g in f)if(f[g]["default"]){c={label:g};break}}if(!c)return b;var h=[];for(var i in d)if(d[i][c.label]){var j=d[i][c.label];if(j.playlists&&j.playlists.length)h.push.apply(h,j.playlists);else if(j.uri)h.push(j);else if(a.playlists.length)for(var k=0;k<a.playlists.length;k++){var l=a.playlists[k];l.attributes&&l.attributes.AUDIO&&l.attributes.AUDIO===i&&h.push(l)}}return h.length?h:b},c.setupMasterPlaylistLoaderListeners_=function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var b=a.masterPlaylistLoader_.media(),c=1.5*b.targetDuration*1e3;uf(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c,b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load()),Hh({sourceType:a.sourceType_,segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,vhs:a.vhs_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)}),a.triggerPresenceUsage_(a.master(),b),a.setupFirstPlay(),!a.mediaTypes_.AUDIO.activePlaylistLoader||a.mediaTypes_.AUDIO.activePlaylistLoader.media()?a.trigger("selectedinitialmedia"):a.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){a.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){a.loadOnPlay_&&a.tech_.off("play",a.loadOnPlay_);var b=a.masterPlaylistLoader_.media();if(!b){var c;if(a.excludeUnsupportedVariants_(),a.enableLowInitialPlaylist&&(c=a.selectInitialPlaylist()),c||(c=a.selectPlaylist()),!c||!a.shouldSwitchToMedia_(c))return;if(a.initialMedia_=c,a.switchMedia_(a.initialMedia_,"initial"),!("vhs-json"===a.sourceType_&&a.initialMedia_.segments))return;b=a.initialMedia_}a.handleUpdatedMediaPlaylist(b)}),this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort(),a.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var b=a.masterPlaylistLoader_.media(),c=1.5*b.targetDuration*1e3;uf(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c,a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load(),a.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media()
;"playlist-unchanged"!==b.lastExcludeReason_&&a.stuckAtPlaylistEnd_(b)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),a.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},c.handleUpdatedMediaPlaylist=function(a){this.useCueTags_&&this.updateAdCues_(a),this.mainSegmentLoader_.playlist(a,this.requestOptions_),this.updateDuration(!a.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},c.triggerPresenceUsage_=function(a,b){var c=a.mediaGroups||{},d=!0,e=Object.keys(c.AUDIO);for(var f in c.AUDIO)for(var g in c.AUDIO[f])c.AUDIO[f][g].uri||(d=!1);d&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(c.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Ye.Playlist.isAes(b)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),e.length&&Object.keys(c.AUDIO[e[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},c.shouldSwitchToMedia_=function(a){var b=this.masterPlaylistLoader_.media(),c=this.tech_.buffered();return function(a){var b=a.currentPlaylist,c=a.nextPlaylist,d=a.forwardBuffer,e=a.bufferLowWaterLine,f=a.bufferHighWaterLine,g=a.duration,h=a.experimentalBufferBasedABR,i=a.log;if(!c)return oa.log.warn("We received no playlist to switch to. Please check your stream."),!1;var j="allowing switch "+(b&&b.id||"null")+" -> "+c.id;if(!b)return i(j+" as current playlist is not set"),!0;if(c.id===b.id)return!1;if(!b.endList)return i(j+" as current playlist is live"),!0;var k=h?gg.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:gg.MAX_BUFFER_LOW_WATER_LINE;if(g<k)return i(j+" as duration < max low water line ("+g+" < "+k+")"),!0;var l=c.attributes.BANDWIDTH,m=b.attributes.BANDWIDTH;if(l<m&&(!h||d<f)){var n=j+" as next bandwidth < current bandwidth ("+l+" < "+m+")";return h&&(n+=" and forwardBuffer < bufferHighWaterLine ("+d+" < "+f+")"),i(n),!0}if((!h||l>m)&&d>=e){var o=j+" as forwardBuffer >= bufferLowWaterLine ("+d+" >= "+e+")";return h&&(o+=" and next bandwidth > current bandwidth ("+l+" > "+m+")"),i(o),!0}return i("not "+j+" as no switching criteria met"),!1}({currentPlaylist:b,nextPlaylist:a,forwardBuffer:c.length?c.end(c.length-1)-this.tech_.currentTime():0,bufferLowWaterLine:this.bufferLowWaterLine(),bufferHighWaterLine:this.bufferHighWaterLine(),duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},c.setupSegmentLoaderListeners_=function(){var a=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var b=a.selectPlaylist();a.shouldSwitchToMedia_(b)&&a.switchMedia_(b,"bandwidthupdate"),a.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){a.error=a.mainSegmentLoader_.error_,a.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){a.error=a.audioSegmentLoader_.error_,a.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){a.logger_("main segment loader ended"),a.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(b){a.experimentalBufferBasedABR||(a.delegateLoaders_("all",["abort"]),a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var b=function(){if(!a.sourceUpdater_.hasCreatedSourceBuffers())return a.tryToCreateSourceBuffers_();var b=a.getCodecsOrExclude_();b&&a.sourceUpdater_.addOrChangeSourceBuffers(b)};this.mainSegmentLoader_.on("trackinfo",b),this.audioSegmentLoader_.on("trackinfo",b),this.mainSegmentLoader_.on("fmp4",function(){a.triggeredFmp4Usage||(a.tech_.trigger({type:"usage",name:"vhs-fmp4"}),a.tech_.trigger({type:"usage",name:"hls-fmp4"}),a.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){a.triggeredFmp4Usage||(a.tech_.trigger({type:"usage",name:"vhs-fmp4"}),a.tech_.trigger({type:"usage",name:"hls-fmp4"}),a.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){a.logger_("audioSegmentLoader ended"),a.onEndOfStream()})},c.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},c.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},c.smoothQualityChange_=function(a){void 0===a&&(a=this.selectPlaylist()),this.fastQualityChange_(a)},c.fastQualityChange_=function(a){var b=this;void 0===a&&(a=this.selectPlaylist()),a!==this.masterPlaylistLoader_.media()?(this.switchMedia_(a,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){oa.browser.IE_VERSION||oa.browser.IS_EDGE?b.tech_.setCurrentTime(b.tech_.currentTime()+.04):b.tech_.setCurrentTime(b.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},c.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var a=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<a.start(0)?this.tech_.setCurrentTime(a.end(a.length-1)):void 0}},c.setupFirstPlay=function(){var a=this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_)return!1;if(!b.endList){var c=this.seekable();if(!c.length)return!1;if(oa.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay"),a.tech_.setCurrentTime(c.end(0)),a.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(c.end(0))}return this.hasPlayed_=!0,this.load(),!0},c.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var a=this.tech_.play();void 0!==a&&"function"==typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")},c.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var a=this.inbandTextTracks_.metadataTrack_.cues;if(a&&a.length){var b=this.duration();a[a.length-1].endTime=isNaN(b)||Math.abs(b)===1/0?Number.MAX_VALUE:b}}},c.handleDurationChange_=function(){this.tech_.trigger("durationchange")},c.onEndOfStream=function(){var a=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var b=this.mainSegmentLoader_.getCurrentMediaInfo_();a=!b||b.hasVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}a&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},c.stuckAtPlaylistEnd_=function(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.duration());if(null===b)return!1;var c=Ye.Playlist.playlistEnd(a,b),d=this.tech_.currentTime(),e=this.tech_.buffered();if(!e.length)return c-d<=.1;var f=e.end(e.length-1);return f-d<=.1&&c-f<=.1},c.blacklistCurrentPlaylist=function(a,b){void 0===a&&(a={});var c=a.playlist||this.masterPlaylistLoader_.media();if(b=b||a.blacklistDuration||this.blacklistDuration,!c)return this.error=a,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));c.playlistErrors_++;var d,e=this.masterPlaylistLoader_.master.playlists,f=e.filter(sf),g=1===f.length&&f[0]===c;if(1===e.length&&b!==1/0)return oa.log.warn("Problem encountered with playlist "+c.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(g);if(g){var h=!1;e.forEach(function(a){if(a!==c){var b=a.excludeUntil;void 0!==b&&b!==1/0&&(h=!0,delete a.excludeUntil)}}),h&&(oa.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}d=c.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*b,c.excludeUntil=d,a.reason&&(c.lastExcludeReason_=a.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var i=this.selectPlaylist();if(!i)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var j=a.internal?this.logger_:oa.log.warn,k=a.message?" "+a.message:"";j((a.internal?"Internal problem":"Problem")+" encountered with playlist "+c.id+"."+k+" Switching to playlist "+i.id+"."),i.attributes.AUDIO!==c.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),i.attributes.SUBTITLES!==c.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var l=i.targetDuration/2*1e3||5e3,m="number"==typeof i.lastRequest&&Date.now()-i.lastRequest<=l;return this.switchMedia_(i,"exclude",g||m)},c.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},c.delegateLoaders_=function(a,b){var c=this,d=[],e="all"===a;(e||"main"===a)&&d.push(this.masterPlaylistLoader_);var f=[];(e||"audio"===a)&&f.push("AUDIO"),(e||"subtitle"===a)&&(f.push("CLOSED-CAPTIONS"),f.push("SUBTITLES")),f.forEach(function(a){var b=c.mediaTypes_[a]&&c.mediaTypes_[a].activePlaylistLoader;b&&d.push(b)}),["main","audio","subtitle"].forEach(function(b){var e=c[b+"SegmentLoader_"];!e||a!==b&&"all"!==a||d.push(e)}),d.forEach(function(a){return b.forEach(function(b){"function"==typeof a[b]&&a[b]()})})},c.setCurrentTime=function(a){var b=bf(this.tech_.buffered(),a);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?b&&b.length?a:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},c.duration=function(){if(!this.masterPlaylistLoader_)return 0;var a=this.masterPlaylistLoader_.media();return a?a.endList?this.mediaSource?this.mediaSource.duration:Ye.Playlist.duration(a):1/0:0},c.seekable=function(){return this.seekable_},c.onSyncInfoUpdate_=function(){var a;if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.duration());if(null!==c){var d=this.masterPlaylistLoader_.master,e=Ye.Playlist.seekable(b,c,Ye.Playlist.liveEdgeDelay(d,b));if(0!==e.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(b=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(c=this.syncController_.getExpiredTime(b,this.duration())))return;if(0===(a=Ye.Playlist.seekable(b,c,Ye.Playlist.liveEdgeDelay(d,b))).length)return}var f,g;this.seekable_&&this.seekable_.length&&(f=this.seekable_.end(0),g=this.seekable_.start(0)),a?a.start(0)>e.end(0)||e.start(0)>a.end(0)?this.seekable_=e:this.seekable_=oa.createTimeRanges([[a.start(0)>e.start(0)?a.start(0):e.start(0),a.end(0)<e.end(0)?a.end(0):e.end(0)]]):this.seekable_=e,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===f&&this.seekable_.start(0)===g||(this.logger_("seekable updated ["+df(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},c.updateDuration=function(a){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,a),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(a){var b=this.seekable();if(!b.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<b.end(b.length-1))&&this.sourceUpdater_.setDuration(b.end(b.length-1))}else{var c=this.tech_.buffered(),d=Ye.Playlist.duration(this.masterPlaylistLoader_.media());c.length>0&&(d=Math.max(d,c.end(c.length-1))),this.mediaSource.duration!==d&&this.sourceUpdater_.setDuration(d)}},c.dispose=function(){var a=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(b){var c=a.mediaTypes_[b].groups;for(var d in c)c[d].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},c.master=function(){return this.masterPlaylistLoader_.master},c.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},c.areMediaTypesKnown_=function(){var a=!!this.mediaTypes_.AUDIO.activePlaylistLoader,b=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),c=!a||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!b||!c)},c.getCodecsOrExclude_=function(){var a=this,b={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};b.video=b.main;var c=Jg(this.master(),this.media()),d={},e=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(b.main.hasVideo&&(d.video=c.video||b.main.videoCodec||Ea.DEFAULT_VIDEO_CODEC),b.main.isMuxed&&(d.video+=","+(c.audio||b.main.audioCodec||Ea.DEFAULT_AUDIO_CODEC)),(b.main.hasAudio&&!b.main.isMuxed||b.audio.hasAudio||e)&&(d.audio=c.audio||b.main.audioCodec||b.audio.audioCodec||Ea.DEFAULT_AUDIO_CODEC,b.audio.isFmp4=b.main.hasAudio&&!b.main.isMuxed?b.main.isFmp4:b.audio.isFmp4),d.audio||d.video){var f,g={};if(["video","audio"].forEach(function(a){if(d.hasOwnProperty(a)&&(e=b[a].isFmp4,h=d[a],!(e?Ea.browserSupportsCodec(h):Ea.muxerSupportsCodec(h)))){var c=b[a].isFmp4?"browser":"muxer";g[c]=g[c]||[],g[c].push(d[a]),"audio"===a&&(f=c)}var e,h}),e&&f&&this.media().attributes.AUDIO){var h=this.media().attributes.AUDIO;this.master().playlists.forEach(function(b){(b.attributes&&b.attributes.AUDIO)===h&&b!==a.media()&&(b.excludeUntil=1/0)}),this.logger_("excluding audio group "+h+" as "+f+' does not support codec(s): "'+d.audio+'"')}if(!Object.keys(g).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var i=[];if(["video","audio"].forEach(function(b){var c=(Ea.parseCodecs(a.sourceUpdater_.codecs[b]||"")[0]||{}).type,e=(Ea.parseCodecs(d[b]||"")[0]||{}).type;c&&e&&c.toLowerCase()!==e.toLowerCase()&&i.push('"'+a.sourceUpdater_.codecs[b]+'" -> "'+d[b]+'"')}),i.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+i.join(", ")+".",blacklistDuration:1/0,internal:!0})}return d}var j=Object.keys(g).reduce(function(a,b){return a&&(a+=", "),a+=b+' does not support codec(s): "'+g[b].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:j,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},c.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var a=this.getCodecsOrExclude_();if(a){this.sourceUpdater_.createSourceBuffers(a);var b=[a.video,a.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(b)}}},c.excludeUnsupportedVariants_=function(){var a=this,b=this.master().playlists,c=[];Object.keys(b).forEach(function(d){var e=b[d];if(-1===c.indexOf(e.id)){c.push(e.id);var f=Jg(a.master,e),g=[];!f.audio||Ea.muxerSupportsCodec(f.audio)||Ea.browserSupportsCodec(f.audio)||g.push("audio codec "+f.audio),!f.video||Ea.muxerSupportsCodec(f.video)||Ea.browserSupportsCodec(f.video)||g.push("video codec "+f.video),f.text&&"stpp.ttml.im1t"===f.text&&g.push("text codec "+f.text),g.length&&(e.excludeUntil=1/0,a.logger_("excluding "+e.id+" for unsupported: "+g.join(", ")))}})},c.excludeIncompatibleVariants_=function(a){var b=this,c=[],d=this.master().playlists,e=Hg(Ea.parseCodecs(a)),f=Ig(e),g=e.video&&Ea.parseCodecs(e.video)[0]||null,h=e.audio&&Ea.parseCodecs(e.audio)[0]||null;Object.keys(d).forEach(function(a){var e=d[a];if(-1===c.indexOf(e.id)&&e.excludeUntil!==1/0){c.push(e.id);var i=[],j=Jg(b.masterPlaylistLoader_.master,e),k=Ig(j);if(j.audio||j.video){if(k!==f&&i.push('codec count "'+k+'" !== "'+f+'"'),!b.sourceUpdater_.canChangeType()){var l=j.video&&Ea.parseCodecs(j.video)[0]||null,m=j.audio&&Ea.parseCodecs(j.audio)[0]||null;l&&g&&l.type.toLowerCase()!==g.type.toLowerCase()&&i.push('video codec "'+l.type+'" !== "'+g.type+'"'),m&&h&&m.type.toLowerCase()!==h.type.toLowerCase()&&i.push('audio codec "'+m.type+'" !== "'+h.type+'"')}i.length&&(e.excludeUntil=1/0,b.logger_("blacklisting "+e.id+": "+i.join(" && ")))}}})},c.updateAdCues_=function(a){var b=0,c=this.seekable();c.length&&(b=c.start(0)),function(a,b,c){if(void 0===c&&(c=0),a.segments)for(var d,e=c,f=0;f<a.segments.length;f++){var g=a.segments[f];if(d||(d=uh(b,e+g.duration/2)),d){if("cueIn"in g){d.endTime=e,d.adEndTime=e,e+=g.duration,d=null;continue}if(e<d.endTime){e+=g.duration;continue}d.endTime+=g.duration}else if("cueOut"in g&&((d=new Ma["default"].VTTCue(e,e+g.duration,g.cueOut)).adStartTime=e,d.adEndTime=e+parseFloat(g.cueOut),b.addCue(d)),"cueOutCont"in g){var h=g.cueOutCont.split("/").map(parseFloat),i=h[0],j=h[1];(d=new Ma["default"].VTTCue(e,e+g.duration,"")).adStartTime=e-i,d.adEndTime=d.adStartTime+j,b.addCue(d)}e+=g.duration}}(a,this.cueTagsTrack_,b)},c.goalBufferLength=function(){var a=this.tech_.currentTime(),b=gg.GOAL_BUFFER_LENGTH,c=gg.GOAL_BUFFER_LENGTH_RATE,d=Math.max(b,gg.MAX_GOAL_BUFFER_LENGTH);return Math.min(b+a*c,d)},c.bufferLowWaterLine=function(){var a=this.tech_.currentTime(),b=gg.BUFFER_LOW_WATER_LINE,c=gg.BUFFER_LOW_WATER_LINE_RATE,d=Math.max(b,gg.MAX_BUFFER_LOW_WATER_LINE),e=Math.max(b,gg.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(b+a*c,this.experimentalBufferBasedABR?e:d)},c.bufferHighWaterLine=function(){return gg.BUFFER_HIGH_WATER_LINE},b}(oa.EventTarget),Lh=function(a,b,c){var d,e,f,g=a.masterPlaylistController_,h=g[(a.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(g);if(b.attributes){var i=b.attributes.RESOLUTION;this.width=i&&i.width,this.height=i&&i.height,this.bandwidth=b.attributes.BANDWIDTH}this.codecs=Jg(g.master(),b),this.playlist=b,this.id=c,this.enabled=(d=a.playlists,e=b.id,f=h,function(a){var b=d.master.playlists[e],c=rf(b),g=sf(b);return void 0===a?g:(a?delete b.disabled:b.disabled=!0,a===g||c||(f(),a?d.trigger("renditionenabled"):d.trigger("renditiondisabled")),a)})},Mh=["seeking","seeked","pause","playing","error"],Nh=function(){function a(a){var b=this;this.masterPlaylistController_=a.masterPlaylistController,this.tech_=a.tech,this.seekable=a.seekable,this.allowSeeksWithinUnsafeLiveWindow=a.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=a.liveRangeSafeTimeDelta,this.media=a.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=_e("PlaybackWatcher"),this.logger_("initialize");var c=function(){return b.monitorCurrentTime_()},d=function(){return b.monitorCurrentTime_()},e=function(){return b.techWaiting_()},f=function(){return b.cancelTimer_()},g=function(){return b.fixesBadSeeks_()},h=this.masterPlaylistController_,i=["main","subtitle","audio"],j={};i.forEach(function(a){j[a]={reset:function(){return b.resetSegmentDownloads_(a)},updateend:function(){return b.checkSegmentDownloads_(a)}},h[a+"SegmentLoader_"].on("appendsdone",j[a].updateend),h[a+"SegmentLoader_"].on("playlistupdate",j[a].reset),b.tech_.on(["seeked","seeking"],j[a].reset)}),this.tech_.on("seekablechanged",g),this.tech_.on("waiting",e),this.tech_.on(Mh,f),this.tech_.on("canplay",d),this.tech_.one("play",c),this.dispose=function(){b.logger_("dispose"),b.tech_.off("seekablechanged",g),b.tech_.off("waiting",e),b.tech_.off(Mh,f),b.tech_.off("canplay",d),b.tech_.off("play",c),i.forEach(function(a){h[a+"SegmentLoader_"].off("appendsdone",j[a].updateend),h[a+"SegmentLoader_"].off("playlistupdate",j[a].reset),b.tech_.off(["seeked","seeking"],j[a].reset)}),b.checkCurrentTimeTimeout_&&Ma["default"].clearTimeout(b.checkCurrentTimeTimeout_),b.cancelTimer_()}}var b=a.prototype;return b.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Ma["default"].clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Ma["default"].setTimeout(this.monitorCurrentTime_.bind(this),250)},b.resetSegmentDownloads_=function(a){var b=this.masterPlaylistController_[a+"SegmentLoader_"];this[a+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+a+" loader"),this[a+"StalledDownloads_"]=0,this[a+"Buffered_"]=b.buffered_()},b.checkSegmentDownloads_=function(a){var b=this.masterPlaylistController_,c=b[a+"SegmentLoader_"],d=c.buffered_(),e=function(a,b){if(a===b)return!1;if(!a&&b||!b&&a)return!0;if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a.start(c)!==b.start(c)||a.end(c)!==b.end(c))return!0;return!1}(this[a+"Buffered_"],d);this[a+"Buffered_"]=d,e?this.resetSegmentDownloads_(a):(this[a+"StalledDownloads_"]++,this.logger_("found #"+this[a+"StalledDownloads_"]+" "+a+" appends that did not increase buffer (possible stalled download)",{playlistId:c.playlist_&&c.playlist_.id,buffered:ef(d)}),this[a+"StalledDownloads_"]<10||(this.logger_(a+" loader stalled download exclusion"),this.resetSegmentDownloads_(a),this.tech_.trigger({type:"usage",name:"vhs-"+a+"-download-exclusion"}),"subtitle"!==a&&b.blacklistCurrentPlaylist({message:"Excessive "+a+" segment downloading detected."},1/0)))},b.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();if(this.lastRecordedTime===a&&(!b.length||a+.1>=b.end(b.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a)}},b.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},b.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var a,b=this.seekable(),c=this.tech_.currentTime();if(this.afterSeekableWindow_(b,c,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(a=b.end(b.length-1)),this.beforeSeekableWindow_(b,c)){var d=b.start(0);a=d+(d===b.end(0)?0:.1)}if(void 0!==a)return this.logger_("Trying to seek outside of seekable at time "+c+" with seekable range "+df(b)+". Seeking to "+a+"."),this.tech_.setCurrentTime(a),!0;var e=this.tech_.buffered();return!!function(a){var b=a.buffered,c=a.targetDuration,d=a.currentTime;return!(!b.length||b.end(0)-b.start(0)<2*c||d>b.start(0)||!(b.start(0)-d<c))}({buffered:e,targetDuration:this.media().targetDuration,currentTime:c})&&(a=e.start(0)+.1,this.logger_("Buffered region starts ("+e.start(0)+")  just beyond seek point ("+c+"). Seeking to "+a+"."),this.tech_.setCurrentTime(a),!0)},b.waiting_=function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered(),c=bf(b,a);return c.length&&a+3<=c.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(a),this.logger_("Stopped at "+a+" while inside a buffered region ["+c.start(0)+" -> "+c.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},b.techWaiting_=function(){var a=this.seekable(),b=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,b)){var c=a.end(a.length-1);return this.logger_("Fell out of live window at time "+b+". Seeking to live point (seekable end) "+c),this.cancelTimer_(),this.tech_.setCurrentTime(c),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var d=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,e=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:d.audioBuffered(),videoBuffered:d.videoBuffered(),currentTime:b}))return this.cancelTimer_(),this.tech_.setCurrentTime(b),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var f=cf(e,b);if(f.length>0){var g=f.start(0)-b;return this.logger_("Stopped at "+b+", setting timer for "+g+", seeking to "+f.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*g,b),!0}return!1},b.afterSeekableWindow_=function(a,b,c,d){if(void 0===d&&(d=!1),!a.length)return!1;var e=a.end(a.length-1)+.1;return!c.endList&&d&&(e=a.end(a.length-1)+3*c.targetDuration),b>e},b.beforeSeekableWindow_=function(a,b){return!!(a.length&&a.start(0)>0&&b<a.start(0)-this.liveRangeSafeTimeDelta)},b.videoUnderflow_=function(a){var b=a.videoBuffered,c=a.audioBuffered,d=a.currentTime;if(b){var e;if(b.length&&c.length){var f=bf(b,d-3),g=bf(b,d),h=bf(c,d);h.length&&!g.length&&f.length&&(e={start:f.end(0),end:h.end(0)})}else cf(b,d).length||(e=this.gapFromVideoUnderflow_(b,d));return!!e&&(this.logger_("Encountered a gap in video from "+e.start+" to "+e.end+". Seeking to current time "+d),!0)}},b.skipTheGap_=function(a){var b=this.tech_.buffered(),c=this.tech_.currentTime(),d=cf(b,c);this.cancelTimer_(),0!==d.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",a,"nextRange start:",d.start(0)),this.tech_.setCurrentTime(d.start(0)+1/30),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},b.gapFromVideoUnderflow_=function(a,b){for(var c=function(a){if(a.length<2)return oa.createTimeRanges();for(var b=[],c=1;c<a.length;c++){var d=a.end(c-1),e=a.start(c);b.push([d,e])}return oa.createTimeRanges(b)}(a),d=0;d<c.length;d++){var e=c.start(d),f=c.end(d);if(b-e<4&&b-e>2)return{start:e,end:f}}return null},a}(),Oh={errorInterval:30,getSource:function(a){return a(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Ph=function(a){!function b(a,c){var d=0,e=0,f=oa.mergeOptions(Oh,c);a.ready(function(){a.trigger({type:"usage",name:"vhs-error-reload-initialized"}),a.trigger({type:"usage",name:"hls-error-reload-initialized"})});var g=function(){e&&a.currentTime(e)},h=function(b){null!=b&&(e=a.duration()!==1/0&&a.currentTime()||0,a.one("loadedmetadata",g),a.src(b),a.trigger({type:"usage",name:"vhs-error-reload"}),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},i=function(){return Date.now()-d<1e3*f.errorInterval?(a.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void a.trigger({type:"usage",name:"hls-error-reload-canceled"})):f.getSource&&"function"==typeof f.getSource?(d=Date.now(),f.getSource.call(a,h)):void oa.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},j=function k(){a.off("loadedmetadata",g),a.off("error",i),a.off("dispose",k)};a.on("error",i),a.on("dispose",j),a.reloadSourceOnError=function(c){j(),b(a,c)}}(this,a)},Qh={PlaylistLoader:Mf,Playlist:yf,utils:Zf,STANDARD_PLAYLIST_SELECTOR:Qg,INITIAL_PLAYLIST_SELECTOR:function(){var a=this,b=this.playlists.master.playlists.filter(yf.isEnabled);return Ng(b,function(a,b){return Og(a,b)}),b.filter(function(b){return!!Jg(a.playlists.master,b).video})[0]||null},lastBandwidthSelector:Qg,movingAverageBandwidthSelector:function(a){var b=-1,c=-1;if(a<0||a>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var d=this.useDevicePixelRatio&&Ma["default"].devicePixelRatio||1;return b<0&&(b=this.systemBandwidth,c=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==c&&(b=a*this.systemBandwidth+(1-a)*b,c=this.systemBandwidth),Pg(this.playlists.master,b,parseInt(Mg(this.tech_.el(),"width"),10)*d,parseInt(Mg(this.tech_.el(),"height"),10)*d,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:Og,comparePlaylistResolution:function(a,b){var c,d;return a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width),c=c||Ma["default"].Number.MAX_VALUE,b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(d=b.attributes.RESOLUTION.width),c===(d=d||Ma["default"].Number.MAX_VALUE)&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH?a.attributes.BANDWIDTH-b.attributes.BANDWIDTH:c-d},xhr:Qf()};Object.keys(gg).forEach(function(a){Object.defineProperty(Qh,a,{get:function(){return oa.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),gg[a]},set:function(b){oa.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),"number"!=typeof b||b<0?oa.log.warn("value of Vhs."+a+" must be greater than or equal to 0"):gg[a]=b}})});var Rh=function(a,b){for(var c=b.media(),d=-1,e=0;e<a.length;e++)if(a[e].id===c.id){d=e;break}a.selectedIndex_=d,a.trigger({selectedIndex:d,type:"change"})};Qh.canPlaySource=function(){return oa.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Sh=function(a){var b=a.player,c=a.sourceKeySystems,d=a.audioMedia,e=a.mainPlaylists;if(!b.eme.initializeMediaKeys)return Promise.resolve();var f=function(a,b){return a.reduce(function(a,c){if(!c.contentProtection)return a;var d=b.reduce(function(a,b){var d=c.contentProtection[b];return d&&d.pssh&&(a[b]={pssh:d.pssh}),a},{});return Object.keys(d).length&&a.push(d),a},[])}(d?e.concat([d]):e,Object.keys(c)),g=[],h=[];return f.forEach(function(a){h.push(new Promise(function(a,c){b.tech_.one("keysessioncreated",a)})),g.push(new Promise(function(c,d){b.eme.initializeMediaKeys({keySystems:a},function(a){a?d(a):c()})}))}),Promise.race([Promise.all(g),Promise.race(h)])},Th=function(a){var b=a.player,c=function(a,b,c){if(!a)return a;var d={};b&&b.attributes&&b.attributes.CODECS&&(d=Hg(Ea.parseCodecs(b.attributes.CODECS))),c&&c.attributes&&c.attributes.CODECS&&(d.audio=c.attributes.CODECS);var e=Ea.getMimeForCodec(d.video),f=Ea.getMimeForCodec(d.audio),g={};for(var h in a)g[h]={},f&&(g[h].audioContentType=f),e&&(g[h].videoContentType=e),
b.contentProtection&&b.contentProtection[h]&&b.contentProtection[h].pssh&&(g[h].pssh=b.contentProtection[h].pssh),"string"==typeof a[h]&&(g[h].url=a[h]);return oa.mergeOptions(a,g)}(a.sourceKeySystems,a.media,a.audioMedia);return!(!c||(b.currentSource().keySystems=c,c&&!b.eme&&(oa.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))},Uh=function(){if(!Ma["default"].localStorage)return null;var a=Ma["default"].localStorage.getItem("videojs-vhs");if(!a)return null;try{return JSON.parse(a)}catch(a){return null}};Qh.supportsNativeHls=function(){if(!Na["default"]||!Na["default"].createElement)return!1;var a=Na["default"].createElement("video");return!!oa.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(b){return/maybe|probably/i.test(a.canPlayType(b))})}(),Qh.supportsNativeDash=!!(Na["default"]&&Na["default"].createElement&&oa.getTech("Html5").isSupported())&&/maybe|probably/i.test(Na["default"].createElement("video").canPlayType("application/dash+xml")),Qh.supportsTypeNatively=function(a){return"hls"===a?Qh.supportsNativeHls:"dash"===a&&Qh.supportsNativeDash},Qh.isSupported=function(){return oa.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Vh=function(a){function b(b,c,d){var e;if(e=a.call(this,c,oa.mergeOptions(d.hls,d.vhs))||this,d.hls&&Object.keys(d.hls).length&&oa.log.warn("Using hls options is deprecated. Use vhs instead."),"number"==typeof d.initialBandwidth&&(e.options_.bandwidth=d.initialBandwidth),e.logger_=_e("VhsHandler"),c.options_&&c.options_.playerId){var f=oa(c.options_.playerId);f.hasOwnProperty("hls")||Object.defineProperty(f,"hls",{get:function(){return oa.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),c.trigger({type:"usage",name:"hls-player-access"}),Pa["default"](e)},configurable:!0}),f.hasOwnProperty("vhs")||Object.defineProperty(f,"vhs",{get:function(){return oa.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),c.trigger({type:"usage",name:"vhs-player-access"}),Pa["default"](e)},configurable:!0}),f.hasOwnProperty("dash")||Object.defineProperty(f,"dash",{get:function(){return oa.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Pa["default"](e)},configurable:!0}),e.player_=f}if(e.tech_=c,e.source_=b,e.stats={},e.ignoreNextSeekingEvent_=!1,e.setOptions_(),e.options_.overrideNative&&c.overrideNativeAudioTracks&&c.overrideNativeVideoTracks)c.overrideNativeAudioTracks(!0),c.overrideNativeVideoTracks(!0);else if(e.options_.overrideNative&&(c.featuresNativeVideoTracks||c.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return e.on(Na["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(a){var b=Na["default"].fullscreenElement||Na["default"].webkitFullscreenElement||Na["default"].mozFullScreenElement||Na["default"].msFullscreenElement;b&&b.contains(e.tech_.el())?e.masterPlaylistController_.fastQualityChange_():e.masterPlaylistController_.checkABR_()}),e.on(e.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),e.on(e.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),e.on(e.tech_,"play",e.play),e}Qa["default"](b,a);var c=b.prototype;return c.setOptions_=function(){var a=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var b=Uh();b&&b.bandwidth&&(this.options_.bandwidth=b.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),b&&b.throughput&&(this.options_.throughput=b.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=gg.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===gg.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(b){void 0!==a.source_[b]&&(a.options_[b]=a.source_[b])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},c.src=function(a,b){var c=this;if(a){var d;this.setOptions_(),this.options_.src=0===(d=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(d.substring(d.indexOf(",")+1)):d,this.options_.tech=this.tech_,this.options_.externVhs=Qh,this.options_.sourceType=Fa.simpleTypeFromSourceType(b),this.options_.seekTo=function(a){c.tech_.setCurrentTime(a)},this.options_.smoothQualityChange&&oa.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Kh(this.options_);var e=oa.mergeOptions({liveRangeSafeTimeDelta:.1},this.options_,{seekable:function(){return c.seekable()},media:function(){return c.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Nh(e),this.masterPlaylistController_.on("error",function(){var a=oa.players[c.tech_.options_.playerId],b=c.masterPlaylistController_.error;"object"!=(void 0===b?"undefined":g(b))||b.code?"string"==typeof b&&(b={message:b,code:3}):b.code=3,a.error(b)});var f=this.options_.experimentalBufferBasedABR?Qh.movingAverageBandwidthSelector(.55):Qh.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):f.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Qh.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=a.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var a,b=1/(this.bandwidth||1);return a=this.throughput>0?1/this.throughput:0,Math.floor(1/(b+a))},set:function(){oa.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return c.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return c.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return c.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return c.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return c.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return c.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return c.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return c.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return c.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return c.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return c.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return c.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return c.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return ef(c.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return c.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return c.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return c.tech_.name_},enumerable:!0},duration:{get:function(){return c.tech_.duration()},enumerable:!0},master:{get:function(){return c.playlists.master},enumerable:!0},playerDimensions:{get:function(){return c.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return ef(c.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return c.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){c.options_.useBandwidthFromLocalStorage&&function(a){if(!Ma["default"].localStorage)return!1;var b=Uh();b=b?oa.mergeOptions(b,a):a;try{Ma["default"].localStorage.setItem("videojs-vhs",JSON.stringify(b))}catch(a){return!1}}({bandwidth:c.bandwidth,throughput:Math.round(c.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var a;(a=c).representations=function(){var b=a.masterPlaylistController_.master(),c=xf(b)?a.masterPlaylistController_.getAudioTrackPlaylists_():b.playlists;return c?c.filter(function(a){return!rf(a)}).map(function(b,c){return new Lh(a,b,b.id)}):[]}}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){c.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Ma["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},c.setupEme_=function(){var a=this,b=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,c=Th({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:b&&b.media()});this.player_.tech_.on("keystatuschange",function(b){"output-restricted"===b.status&&a.masterPlaylistController_.blacklistCurrentPlaylist({playlist:a.masterPlaylistController_.media(),message:"DRM keystatus changed to "+b.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})}),11!==oa.browser.IE_VERSION&&c?(this.logger_("waiting for EME key session creation"),Sh({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:b&&b.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){a.logger_("created EME key session"),a.masterPlaylistController_.sourceUpdater_.initializedEme()})["catch"](function(b){a.logger_("error while creating EME key session",b),a.player_.error({message:"Failed to initialize media keys for EME",code:3})})):this.masterPlaylistController_.sourceUpdater_.initializedEme()},c.setupQualityLevels_=function(){var a=this,b=oa.players[this.tech_.options_.playerId];b&&b.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=b.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var b,c;b=a.qualityLevels_,(c=a).representations().forEach(function(a){b.addQualityLevel(a)}),Rh(b,c.playlists)}),this.playlists.on("mediachange",function(){Rh(a.qualityLevels_,a.playlists)}))},b.version=function(){return{"@videojs/http-streaming":"2.10.2","mux.js":"5.13.0","mpd-parser":"0.19.0","m3u8-parser":"4.7.0","aes-decrypter":"3.1.2"}},c.version=function(){return this.constructor.version()},c.canChangeType=function(){return qh.canChangeType()},c.play=function(){this.masterPlaylistController_.play()},c.setCurrentTime=function(a){this.masterPlaylistController_.setCurrentTime(a)},c.duration=function(){return this.masterPlaylistController_.duration()},c.seekable=function(){return this.masterPlaylistController_.seekable()},c.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Ma["default"].URL.revokeObjectURL&&(Ma["default"].URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),a.prototype.dispose.call(this)},c.convertToProgramTime=function(a,b){return $f({playlist:this.masterPlaylistController_.media(),time:a,callback:b})},c.seekToProgramTime=function(a,b,c,d){return void 0===c&&(c=!0),void 0===d&&(d=2),_f({programTime:a,playlist:this.masterPlaylistController_.media(),retryCount:d,pauseAfterSeek:c,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:b})},b}(oa.getComponent("Component")),Wh={name:"videojs-http-streaming",VERSION:"2.10.2",canHandleSource:function(a,b){void 0===b&&(b={});var c=oa.mergeOptions(oa.options,b);return Wh.canPlayType(a.type,c)},handleSource:function(a,b,c){void 0===c&&(c={});var d=oa.mergeOptions(oa.options,c);return b.vhs=new Vh(a,b,d),oa.hasOwnProperty("hls")||Object.defineProperty(b,"hls",{get:function(){return oa.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),b.vhs},configurable:!0}),b.vhs.xhr=Qf(),b.vhs.src(a.src,a.type),b.vhs},canPlayType:function(a,b){void 0===b&&(b={});var c=oa.mergeOptions(oa.options,b).vhs.overrideNative,d=void 0===c?!oa.browser.IS_ANY_SAFARI:c,e=Fa.simpleTypeFromSourceType(a);return!e||Qh.supportsTypeNatively(e)&&!d?"":"maybe"}};Ea.browserSupportsCodec("avc1.4d400d,mp4a.40.2")&&oa.getTech("Html5").registerSourceHandler(Wh,0),oa.VhsHandler=Vh,Object.defineProperty(oa,"HlsHandler",{get:function(){return oa.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Vh},configurable:!0}),oa.VhsSourceHandler=Wh,Object.defineProperty(oa,"HlsSourceHandler",{get:function(){return oa.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Wh},configurable:!0}),oa.Vhs=Qh,Object.defineProperty(oa,"Hls",{get:function(){return oa.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Qh},configurable:!0}),oa.use||(oa.registerComponent("Hls",Qh),oa.registerComponent("Vhs",Qh)),oa.options.vhs=oa.options.vhs||{},oa.options.hls=oa.options.hls||{},oa.registerPlugin?oa.registerPlugin("reloadSourceOnError",Ph):oa.plugin("reloadSourceOnError",Ph),b.exports=oa},{"@babel/runtime/helpers/assertThisInitialized":1,"@babel/runtime/helpers/construct":2,"@babel/runtime/helpers/extends":3,"@babel/runtime/helpers/inherits":4,"@babel/runtime/helpers/inheritsLoose":5,"@videojs/vhs-utils/cjs/byte-helpers":9,"@videojs/vhs-utils/cjs/codecs.js":11,"@videojs/vhs-utils/cjs/containers":12,"@videojs/vhs-utils/cjs/id3-helpers":15,"@videojs/vhs-utils/cjs/media-types.js":16,"@videojs/vhs-utils/cjs/resolve-url.js":20,"@videojs/xhr":23,"global/document":34,"global/window":35,keycode:38,"m3u8-parser":39,"mpd-parser":41,"mux.js/lib/tools/parse-sidx":42,"mux.js/lib/utils/clock":43,"safe-json-parse/tuple":45,"videojs-vtt.js":48}],48:[function(a,b,c){var d=a("global/window"),e=b.exports={WebVTT:a("./vtt.js"),VTTCue:a("./vttcue.js"),VTTRegion:a("./vttregion.js")};d.vttjs=e,d.WebVTT=e.WebVTT;var f=e.VTTCue,g=e.VTTRegion,h=d.VTTCue,i=d.VTTRegion;e.shim=function(){d.VTTCue=f,d.VTTRegion=g},e.restore=function(){d.VTTCue=h,d.VTTRegion=i},d.VTTCue||e.shim()},{"./vtt.js":49,"./vttcue.js":50,"./vttregion.js":51,"global/window":35}],49:[function(a,b,c){function d(a,b){this.name="ParsingError",this.code=a.code,this.message=b||a.message}function e(a){function b(a,b,c,d){return 3600*(0|a)+60*(0|b)+(0|c)+(0|d)/1e3}var c=a.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return c?c[3]?b(c[1],c[2],c[3].replace(":",""),c[4]):c[1]>59?b(c[1],c[2],0,c[4]):b(0,c[1],c[2],c[4]):null}function f(){this.values=r(null)}function g(a,b,c,d){var e=d?a.split(d):[a];for(var f in e)if("string"==typeof e[f]){var g=e[f].split(c);2===g.length&&b(g[0],g[1])}}function h(a,b,c){function h(){var b=e(a);if(null===b)throw new d(d.Errors.BadTimeStamp,"Malformed timestamp: "+j);return a=a.replace(/^[^\sa-zA-Z-]+/,""),b}function i(){a=a.replace(/^\s+/,"")}var j=a;if(i(),b.startTime=h(),i(),"--\x3e"!==a.substr(0,3))throw new d(d.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+j);a=a.substr(3),i(),b.endTime=h(),i(),function(a,b){var d=new f;g(a,function(a,b){switch(a){case"region":for(var e=c.length-1;e>=0;e--)if(c[e].id===b){d.set(a,c[e].region);break}break;case"vertical":d.alt(a,b,["rl","lr"]);break;case"line":var f=b.split(","),g=f[0];d.integer(a,g),d.percent(a,g)&&d.set("snapToLines",!1),d.alt(a,g,["auto"]),2===f.length&&d.alt("lineAlign",f[1],["start","center","end"]);break;case"position":f=b.split(","),d.percent(a,f[0]),2===f.length&&d.alt("positionAlign",f[1],["start","center","end"]);break;case"size":d.percent(a,b);break;case"align":d.alt(a,b,["start","center","end","left","right"])}},/:/,/\s/),b.region=d.get("region",null),b.vertical=d.get("vertical","");try{b.line=d.get("line","auto")}catch(a){}b.lineAlign=d.get("lineAlign","start"),b.snapToLines=d.get("snapToLines",!0),b.size=d.get("size",100);try{b.align=d.get("align","center")}catch(a){b.align=d.get("align","middle")}try{b.position=d.get("position","auto")}catch(a){b.position=d.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},b.align)}b.positionAlign=d.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},b.align)}(a,b)}function i(a,b){for(var c,d,f=a.document.createElement("div"),g=f,h=[];null!==(c=function(){if(!b)return null;var a,c=b.match(/^([^<]*)(<[^>]*>?)?/);return a=c[1]?c[1]:c[2],b=b.substr(a.length),a}());)if("<"!==c[0])g.appendChild(a.document.createTextNode((d=c,s.innerHTML=d,d=s.textContent,s.textContent="",d)));else{if("/"===c[1]){h.length&&h[h.length-1]===c.substr(2).replace(">","")&&(h.pop(),g=g.parentNode);continue}var i,j=e(c.substr(1,c.length-2));if(j){i=a.document.createProcessingInstruction("timestamp",j),g.appendChild(i);continue}var k=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!k)continue;if(!(i=function(b,c){var d=t[b];if(!d)return null;var e=a.document.createElement(d),f=v[b];return f&&c&&(e[f]=c.trim()),e}(k[1],k[3])))continue;if(!function(a,b){return!w[b.localName]||w[b.localName]===a.localName}(g,i))continue;if(k[2]){var l=k[2].split(".");l.forEach(function(a){var b=/^bg_/.test(a),c=b?a.slice(3):a;if(u.hasOwnProperty(c)){var d=b?"background-color":"color",e=u[c];i.style[d]=e}}),i.className=l.join(" ")}h.push(k[1]),g.appendChild(i),g=i}return f}function j(a){for(var b=0;b<x.length;b++){var c=x[b];if(a>=c[0]&&a<=c[1])return!0}return!1}function k(a){function b(a,b){for(var c=b.childNodes.length-1;c>=0;c--)a.push(b.childNodes[c])}function c(a){if(!a||!a.length)return null;var d=a.pop(),e=d.textContent||d.innerText;if(e){var f=e.match(/^.*(\n|\r)/);return f?(a.length=0,f[0]):e}return"ruby"===d.tagName?c(a):d.childNodes?(b(a,d),c(a)):void 0}var d=[],e="";if(!a||!a.childNodes)return"ltr";for(b(d,a);e=c(d);)for(var f=0;f<e.length;f++)if(j(e.charCodeAt(f)))return"rtl";return"ltr"}function l(){}function m(a,b,c){l.call(this),this.cue=b,this.cueDiv=i(a,b.text);var d={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(d,this.cueDiv),this.div=a.document.createElement("div"),d={direction:k(this.cueDiv),writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(d),this.div.appendChild(this.cueDiv);var e=0;switch(b.positionAlign){case"start":e=b.position;break;case"center":e=b.position-b.size/2;break;case"end":e=b.position-b.size}""===b.vertical?this.applyStyles({left:this.formatStyle(e,"%"),width:this.formatStyle(b.size,"%")}):this.applyStyles({top:this.formatStyle(e,"%"),height:this.formatStyle(b.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function n(a){var b,c,d,e;if(a.div){c=a.div.offsetHeight,d=a.div.offsetWidth,e=a.div.offsetTop;var f=(f=a.div.childNodes)&&(f=f[0])&&f.getClientRects&&f.getClientRects();a=a.div.getBoundingClientRect(),b=f?Math.max(f[0]&&f[0].height||0,a.height/f.length):0}this.left=a.left,this.right=a.right,this.top=a.top||e,this.height=a.height||c,this.bottom=a.bottom||e+(a.height||c),this.width=a.width||d,this.lineHeight=void 0!==b?b:a.lineHeight}function o(a,b,c,d){var e=new n(b),f=b.cue,g=function(a){if("number"==typeof a.line&&(a.snapToLines||a.line>=0&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return-1;for(var b=a.track,c=b.textTrackList,d=0,e=0;e<c.length&&c[e]!==b;e++)"showing"===c[e].mode&&d++;return-1*++d}(f),h=[];if(f.snapToLines){var i;switch(f.vertical){case"":h=["+y","-y"],i="height";break;case"rl":h=["+x","-x"],i="width";break;case"lr":h=["-x","+x"],i="width"}var j=e.lineHeight,k=j*Math.round(g),l=c[i]+j,m=h[0];Math.abs(k)>l&&(k=k<0?-1:1,k*=Math.ceil(l/j)*j),g<0&&(k+=""===f.vertical?c.height:c.width,h=h.reverse()),e.move(m,k)}else{var o=e.lineHeight/c.height*100;switch(f.lineAlign){case"center":g-=o/2;break;case"end":g-=o}switch(f.vertical){case"":b.applyStyles({top:b.formatStyle(g,"%")});break;case"rl":b.applyStyles({left:b.formatStyle(g,"%")});break;case"lr":b.applyStyles({right:b.formatStyle(g,"%")})}h=["+y","-x","+x","-y"],e=new n(b)}var p=function(a,b){for(var e,f=new n(a),g=1,h=0;h<b.length;h++){for(;a.overlapsOppositeAxis(c,b[h])||a.within(c)&&a.overlapsAny(d);)a.move(b[h]);if(a.within(c))return a;var i=a.intersectPercentage(c);g>i&&(e=new n(a),g=i),a=new n(f)}return e||f}(e,h);b.move(p.toCSSCompatValues(c))}function p(){}var q=a("global/document"),r=Object.create||function(){function a(){}return function(b){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return a.prototype=b,new a}}();d.prototype=r(Error.prototype),d.prototype.constructor=d,d.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},f.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){return!!(b.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(b=parseFloat(b))>=0&&b<=100)&&(this.set(a,b),!0)}};var s=q.createElement&&q.createElement("textarea"),t={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},u={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},v={v:"title",lang:"lang"},w={rt:"ruby"},x=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];l.prototype.applyStyles=function(a,b){for(var c in b=b||this.div,a)a.hasOwnProperty(c)&&(b.style[c]=a[c])},l.prototype.formatStyle=function(a,b){return 0===a?0:a+b},m.prototype=r(l.prototype),m.prototype.constructor=m,n.prototype.move=function(a,b){switch(b=void 0!==b?b:this.lineHeight,a){case"+x":this.left+=b,this.right+=b;break;case"-x":this.left-=b,this.right-=b;break;case"+y":this.top+=b,this.bottom+=b;break;case"-y":this.top-=b,this.bottom-=b}},n.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top},n.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1},n.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right},n.prototype.overlapsOppositeAxis=function(a,b){switch(b){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}},n.prototype.intersectPercentage=function(a){return Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left))*Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top))/(this.height*this.width)},n.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}},n.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;return{left:(a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a).left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||c}},p.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!=typeof a)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}},p.convertCueToDOMTree=function(a,b){return a&&b?i(a,b):null},p.processCues=function(a,b,c){if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var d=a.document.createElement("div");if(d.style.position="absolute",d.style.left="0",d.style.right="0",d.style.top="0",d.style.bottom="0",d.style.margin="1.5%",c.appendChild(d),function(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}(b)){var e=[],f=n.getSimpleBoxPosition(d),g={font:Math.round(.05*f.height*100)/100+"px sans-serif"};!function(){for(var c,h,i=0;i<b.length;i++)h=b[i],c=new m(a,h,g),d.appendChild(c.div),o(0,c,f,e),h.displayState=c.div,e.push(n.getSimpleBoxPosition(c))}()}else for(var h=0;h<b.length;h++)d.appendChild(b[h].displayState)},p.Parser=function(a,b,c){c||(c=b,b={}),b||(b={}),this.window=a,this.vttjs=b,this.state="INITIAL",this.buffer="",this.decoder=c||new TextDecoder("utf8"),this.regionList=[]},p.Parser.prototype={reportOrThrowError:function(a){if(!(a instanceof d))throw a;this.onparsingerror&&this.onparsingerror(a)},parse:function(a){function b(){for(var a=c.buffer,b=0;b<a.length&&"\r"!==a[b]&&"\n"!==a[b];)++b;var d=a.substr(0,b);return"\r"===a[b]&&++b,"\n"===a[b]&&++b,c.buffer=a.substr(b),d}var c=this;a&&(c.buffer+=c.decoder.decode(a,{stream:!0}));try{var i;if("INITIAL"===c.state){if(!/\r\n|\n/.test(c.buffer))return this;var j=(i=b()).match(/^WEBVTT([ \t].*)?$/);if(!j||!j[0])throw new d(d.Errors.BadSignature);c.state="HEADER"}for(var k=!1;c.buffer;){if(!/\r\n|\n/.test(c.buffer))return this;switch(k?k=!1:i=b(),c.state){case"HEADER":/:/.test(i)?function(a){a.match(/X-TIMESTAMP-MAP/)?g(a,function(a,b){switch(a){case"X-TIMESTAMP-MAP":!function(a){var b=new f;g(a,function(a,c){switch(a){case"MPEGT":b.integer(a+"S",c);break;case"LOCA":b.set(a+"L",e(c))}},/[^\d]:/,/,/),c.ontimestampmap&&c.ontimestampmap({MPEGTS:b.get("MPEGTS"),LOCAL:b.get("LOCAL")})}(b)}},/=/):g(a,function(a,b){switch(a){case"Region":!function(a){var b=new f;if(g(a,function(a,c){switch(a){case"id":b.set(a,c);break;case"width":b.percent(a,c);break;case"lines":b.integer(a,c);break;case"regionanchor":case"viewportanchor":var d=c.split(",");if(2!==d.length)break;var e=new f;if(e.percent("x",d[0]),e.percent("y",d[1]),!e.has("x")||!e.has("y"))break;b.set(a+"X",e.get("x")),b.set(a+"Y",e.get("y"));break;case"scroll":b.alt(a,c,["up"])}},/=/,/\s/),b.has("id")){var d=new(c.vttjs.VTTRegion||c.window.VTTRegion);d.width=b.get("width",100),d.lines=b.get("lines",3),d.regionAnchorX=b.get("regionanchorX",0),d.regionAnchorY=b.get("regionanchorY",100),d.viewportAnchorX=b.get("viewportanchorX",0),d.viewportAnchorY=b.get("viewportanchorY",100),d.scroll=b.get("scroll",""),c.onregion&&c.onregion(d),c.regionList.push({id:b.get("id"),region:d})}}(b)}},/:/)}(i):i||(c.state="ID");continue;case"NOTE":i||(c.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){c.state="NOTE";break}if(!i)continue;c.cue=new(c.vttjs.VTTCue||c.window.VTTCue)(0,0,"");try{c.cue.align="center"}catch(a){c.cue.align="middle"}if(c.state="CUE",-1===i.indexOf("--\x3e")){c.cue.id=i;continue}case"CUE":try{h(i,c.cue,c.regionList)}catch(a){c.reportOrThrowError(a),c.cue=null,c.state="BADCUE"
;continue}c.state="CUETEXT";continue;case"CUETEXT":var l=-1!==i.indexOf("--\x3e");if(!i||l&&(k=!0)){c.oncue&&c.oncue(c.cue),c.cue=null,c.state="ID";continue}c.cue.text&&(c.cue.text+="\n"),c.cue.text+=i.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":i||(c.state="ID");continue}}}catch(a){c.reportOrThrowError(a),"CUETEXT"===c.state&&c.cue&&c.oncue&&c.oncue(c.cue),c.cue=null,c.state="INITIAL"===c.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new d(d.Errors.BadSignature)}catch(a){this.reportOrThrowError(a)}return this.onflush&&this.onflush(),this}},b.exports=p},{"global/document":34}],50:[function(a,b,c){function d(a){return"string"==typeof a&&!!g[a.toLowerCase()]&&a.toLowerCase()}function e(a,b,c){this.hasBeenReset=!1;var e="",g=!1,h=a,i=b,j=c,k=null,l="",m=!0,n="auto",o="start",p="auto",q="auto",r=100,s="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return e},set:function(a){e=""+a}},pauseOnExit:{enumerable:!0,get:function(){return g},set:function(a){g=!!a}},startTime:{enumerable:!0,get:function(){return h},set:function(a){if("number"!=typeof a)throw new TypeError("Start time must be set to a number.");h=a,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return i},set:function(a){if("number"!=typeof a)throw new TypeError("End time must be set to a number.");i=a,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return j},set:function(a){j=""+a,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return k},set:function(a){k=a,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(a){var b=function(a){return"string"==typeof a&&!!f[a.toLowerCase()]&&a.toLowerCase()}(a);if(!1===b)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");l=b,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return m},set:function(a){m=!!a,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return n},set:function(a){if("number"!=typeof a&&"auto"!==a)throw new SyntaxError("Line: an invalid number or illegal string was specified.");n=a,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return o},set:function(a){var b=d(a);b&&(o=b,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return p},set:function(a){if(a<0||a>100)throw new Error("Position must be between 0 and 100.");p=a,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return q},set:function(a){var b=d(a);b&&(q=b,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return r},set:function(a){if(a<0||a>100)throw new Error("Size must be between 0 and 100.");r=a,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return s},set:function(a){var b=d(a);if(!b)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");s=b,this.hasBeenReset=!0}}}),this.displayState=void 0}var f={"":1,lr:1,rl:1},g={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};e.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},b.exports=e},{}],51:[function(a,b,c){function d(a){return"number"==typeof a&&a>=0&&a<=100}var e={"":!0,up:!0};b.exports=function(){var a=100,b=3,c=0,f=100,g=0,h=100,i="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!d(b))throw new Error("Width must be between 0 and 100.");a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!=typeof a)throw new TypeError("Lines must be set to a number.");b=a}},regionAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!d(a))throw new Error("RegionAnchorX must be between 0 and 100.");f=a}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(a){if(!d(a))throw new Error("RegionAnchorY must be between 0 and 100.");c=a}},viewportAnchorY:{enumerable:!0,get:function(){return h},set:function(a){if(!d(a))throw new Error("ViewportAnchorY must be between 0 and 100.");h=a}},viewportAnchorX:{enumerable:!0,get:function(){return g},set:function(a){if(!d(a))throw new Error("ViewportAnchorX must be between 0 and 100.");g=a}},scroll:{enumerable:!0,get:function(){return i},set:function(a){var b=function(a){return"string"==typeof a&&!!e[a.toLowerCase()]&&a.toLowerCase()}(a);!1===b||(i=b)}}})}},{}],52:[function(a,b,c){b.exports={DEFAILT_WEBGL_PLAY_ID:"glplayer",PLAYER_IN_TYPE_MP4:"mp4",PLAYER_IN_TYPE_FLV:"flv",PLAYER_IN_TYPE_HTTPFLV:"httpflv",PLAYER_IN_TYPE_RAW_265:"raw265",PLAYER_IN_TYPE_TS:"ts",PLAYER_IN_TYPE_MPEGTS:"mpegts",PLAYER_IN_TYPE_M3U8:"hls",PLAYER_IN_TYPE_M3U8_VOD:"m3u8",PLAYER_IN_TYPE_M3U8_LIVE:"hls",APPEND_TYPE_STREAM:0,APPEND_TYPE_FRAME:1,APPEND_TYPE_SEQUENCE:2,DEFAULT_WIDTH:600,DEFAULT_HEIGHT:600,DEFAULT_FPS:30,DEFAULT_FRAME_DUR:40,DEFAULT_FIXED:!1,DEFAULT_SAMPLERATE:44100,DEFAULT_CHANNELS:2,DEFAULT_CONSU_SAMPLE_LEN:20,PLAYER_MODE_VOD:"vod",PLAYER_MODE_NOTIME_LIVE:"live",AUDIO_MODE_ONCE:"ONCE",AUDIO_MODE_SWAP:"SWAP",DEFAULT_STRING_LIVE:"LIVE",CODEC_H265:0,CODEC_H264:1,PLAYER_CORE_TYPE_DEFAULT:0,PLAYER_CORE_TYPE_CNATIVE:1,FETCH_FIRST_MAX_TIMES:5,FETCH_HTTP_FLV_TIMEOUT_MS:7e3,V_CODEC_NAME_HEVC:265,V_CODEC_NAME_AVC:264,V_CODEC_NAME_UNKN:500,A_CODEC_NAME_AAC:112,A_CODEC_NAME_MP3:113,A_CODEC_NAME_UNKN:500,CACHE_NO_LOADCACHE:192,CACHE_WITH_PLAY_SIGN:193,CACHE_WITH_NOPLAY_SIGN:194}},{}],53:[function(a,b,c){var d=window.AudioContext||window.webkitAudioContext,e=a("../consts"),f=a("./av-common");b.exports=function(a){var b={options:{sampleRate:a.sampleRate||e.DEFAULT_SAMPLERATE,appendType:a.appendType||e.APPEND_TYPE_STREAM,playMode:a.playMode||e.AUDIO_MODE_SWAP},sourceChannel:-1,audioCtx:new d({latencyHint:"interactive",sampleRate:a.sampleRate}),gainNode:null,sourceList:[],startStatus:!1,sampleQueue:[],nextBuffer:null,playTimestamp:0,playStartTime:0,durationMs:-1,isLIVE:!1,voice:1,onLoadCache:null,resetStartParam:function(){b.playTimestamp=0,b.playStartTime=0},setOnLoadCache:function(a){b.onLoadCache=a},setDurationMs:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;b.durationMs=a},setVoice:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;b.voice=a,b.gainNode.gain.value=a},getAlignVPTS:function(){return b.playTimestamp+(f.GetMsTime()-b.playStartTime)/1e3},swapSource:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==b.startStatus)return null;if(a<0||a>=b.sourceList.length)return null;if(c<0||c>=b.sourceList.length)return null;try{b.sourceChannel===a&&null!==b.sourceList[a]&&(b.sourceList[a].disconnect(b.gainNode),b.sourceList[a]=null)}catch(b){console.error("[DEFINE ERROR] audioModule disconnect source Index:"+a+" error happened!",b)}b.sourceChannel=c,-2==b.decodeSample(c,a)&&b.isLIVE&&(b.getAlignVPTS()>=b.durationMs/1e3-.04?b.pause():null!==b.onLoadCache&&b.onLoadCache())},addSample:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!(null==a||!a||null==a||(0==b.sampleQueue.length&&(b.seekPos=a.pts),b.sampleQueue.push(a),0))},runNextBuffer:function(){window.setInterval(function(){if(!(null!=b.nextBuffer||b.sampleQueue.length<e.DEFAULT_CONSU_SAMPLE_LEN)){b.nextBuffer={data:null,pts:-1};for(var a=null,c=0;c<e.DEFAULT_CONSU_SAMPLE_LEN;c++){a=b.sampleQueue.shift();var d=null;if(d=b.options.appendType==e.APPEND_TYPE_STREAM?a:a.data,b.nextBuffer.pts<0&&(b.nextBuffer.pts=a.pts),null==b.nextBuffer.data)b.nextBuffer.data=new Uint8Array(d);else{var f=new Uint8Array(d.length+b.nextBuffer.data.length);f.set(b.nextBuffer.data,0),f.set(d,b.nextBuffer.data.length),b.nextBuffer.data=f}if(b.sampleQueue.length<=0)break;a=null}}},10)},decodeSample:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(a<0||a>=b.sourceList.length)return-1;if(null!=b.sourceList[a]&&null!=b.sourceList[a]&&b.sourceList[a]||(b.sourceList[a]=b.audioCtx.createBufferSource(),b.sourceList[a].onended=function(){b.swapSource(a,c)}),0==b.sampleQueue.length)return b.isLIVE?(b.sourceList[a].connect(b.gainNode),b.sourceList[a].start(),b.sourceList[a].onended=function(){b.swapSource(a,c)},b.sourceList[a].stop(),0):-2;if(b.sourceList[a].buffer)return b.sourceList[a],b.sourceList[c],b.gainNode,b.swapSource(a,c),0;if(null==b.nextBuffer||b.nextBuffer.data.length<1)return b.sourceList[a].connect(b.gainNode),b.sourceList[a].start(),b.sourceList[a].startState=!0,b.sourceList[a].stop(),1;var d=b.nextBuffer.data.buffer;b.playTimestamp=b.nextBuffer.pts,b.playStartTime=f.GetMsTime();try{b.audioCtx.decodeAudioData(d,function(c){null!==b.sourceList[a]&&(b.sourceList[a].buffer=c,b.sourceList[a].connect(b.gainNode),b.sourceList[a].start(),b.sourceList[a].startState=!0)},function(a){})}catch(a){return b.nextBuffer=null,-3}return b.nextBuffer=null,0},decodeWholeSamples:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(b.sourceChannel=a,a<0||a>=b.sourceList.length)return-1;if(null!=b.sourceList[a]&&null!=b.sourceList[a]&&b.sourceList[a]||(b.sourceList[a]=b.audioCtx.createBufferSource(),b.sourceList[a].onended=function(){}),0==b.sampleQueue.length)return-2;for(var c=null,d=null,f=0;f<b.sampleQueue.length;f++){d=b.sampleQueue.shift();var g=null;if(g=b.options.appendType==e.APPEND_TYPE_STREAM?d:d.data,null==c)c=new Uint8Array(g);else{var h=new Uint8Array(g.length+c.length);h.set(c,0),h.set(g,c.length),c=h}if(b.sampleQueue.length<=0)break;d=null}var i=c;if(null==i||i.length<1)return b.sourceList[a].connect(b.gainNode),b.sourceList[a].start(),b.sourceList[a].stop(),1;var j=i.buffer;try{b.audioCtx.decodeAudioData(j,function(c){b.sourceList[a].state,b.sourceList[a].buffer=c,b.sourceList[a].connect(b.gainNode),b.sourceList[a].start(),b.sourceList[a].startState=!0,b.sourceList[a].state},function(a){a.err})}catch(a){return-3}return 0},play:function(){0==b.startStatus&&(b.startStatus=!0,-2==(b.options.playMode==e.AUDIO_MODE_ONCE?b.decodeWholeSamples(0):b.swapSource(0,1))&&b.pause())},pause:function(){b.startStatus=!1;for(var a=0;a<b.sourceList.length;a++)if(void 0!==b.sourceList[a]&&null!==b.sourceList[a]){b.sourceList[a],b.gainNode;try{void 0!==b.sourceList[a].buffer&&null!==b.sourceList[a].buffer&&(b.sourceList[a].stop(),b.sourceList[a].disconnect(b.gainNode)),b.sourceList[a]=null}catch(a){console.error("audio pause error ",a)}}},stop:function(){b.pause(),b.cleanQueue(),b.nextBuffer=null,b.sourceChannel=-1},cleanQueue:function(){b.sampleQueue.length=0;for(var a=0;a<b.sourceList.length;a++)try{void 0!==b.sourceList[a].buffer&&null!==b.sourceList[a].buffer&&(b.sourceList[a].stop(),b.sourceList[a].disconnect(b.gainNode)),b.sourceList[a]=null}catch(a){}}};return b.sourceList.push(b.audioCtx.createBufferSource()),b.sourceList.push(b.audioCtx.createBufferSource()),b.sourceList[0].onended=function(){b.swapSource(0,1)},b.sourceList[1].onended=function(){b.swapSource(1,0)},b.gainNode=b.audioCtx.createGain(),b.gainNode.gain.value=b.voice,b.gainNode.connect(b.audioCtx.destination),b.options,b.runNextBuffer(),b}},{"../consts":52,"./av-common":55}],54:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=window.AudioContext||window.webkitAudioContext,f=a("../consts"),g=function(){return(new Date).getTime()},h=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._sample_rate=b.sampleRate||f.DEFAULT_SAMPLERATE,this._seg_dur=b.segDur||2,this._channels=b.channels||f.DEFAULT_CHANNELS,this._swapStartPlay=!0,this._start_time=-1,this._now_seg_dur=-1,this._push_start_idx=0,this._pcm_array_buf=null,this._once_pop_len=this._sample_rate*this._seg_dur,this._active_node=null,this._ctx=new e,this._gain=this._ctx.createGain(),this._gain.gain.value=1,this._gain.connect(this._ctx.destination)}var b,c;return b=a,(c=[{key:"setVoice",value:function(a){this._gain.gain.value=a}},{key:"pushBuffer",value:function(a){var b=a.buffer,c=null,d=b.byteLength%4;if(0!==d){var e=new Uint8Array(b.byteLength+d);e.set(new Uint8Array(b),0),c=new Float32Array(e.buffer)}else c=new Float32Array(b);var f=null;if(this._channels>=2){var g=c.length/2;f=new Float32Array(g);for(var h=0,i=0;i<c.length;i+=2)f[h]=c[i],h++}else f=new Float32Array(c);if(null===this._pcm_array_buf)this._pcm_array_buf=new Float32Array(f);else{var j=new Float32Array(this._pcm_array_buf.length+f.length);j.set(this._pcm_array_buf,0),j.set(f,this._pcm_array_buf.length),this._pcm_array_buf=j}this._pcm_array_buf.length}},{key:"readingLoopWithF32",value:function(){if(this._start_time>0&&g()-this._start_time>=this._now_seg_dur&&(g(),this._start_time,this._now_seg_dur,this._start_time=-1,this._now_seg_dur=-1),g(),this._start_time<0)if(new Date,null!==this._pcm_array_buf&&this._pcm_array_buf.length>this._push_start_idx){this._swapStartPlay=!1;var a=this._push_start_idx+this._once_pop_len;a>this._pcm_array_buf.length&&(a=this._pcm_array_buf.length);var b=this._pcm_array_buf.slice(this._push_start_idx,a);this._push_start_idx+=b.length,this._now_seg_dur=1*b.length/this._sample_rate*1e3,b.length,this._sample_rate,this._now_seg_dur;var c=this._ctx.createBuffer(1,b.length,this._sample_rate);b.length,new Date,c.copyToChannel(b,0),this._active_node=this._ctx.createBufferSource(),this._active_node.buffer=c,this._active_node.connect(this._gain),this._start_time=g(),this._active_node.start(0)}else setTimeout(this.readingLoopWithF32,1)}}])&&d(b.prototype,c),a}();c.AudioPcmPlayer=h},{"../consts":52}],55:[function(a,b,c){var d=a("../consts"),e=[{format:"mp4",value:"mp4",core:d.PLAYER_CORE_TYPE_CNATIVE},{format:"mov",value:"mp4",core:d.PLAYER_CORE_TYPE_CNATIVE},{format:"flv",value:"flv",core:d.PLAYER_CORE_TYPE_CNATIVE},{format:"m3u8",value:"hls",core:d.PLAYER_CORE_TYPE_DEFAULT},{format:"m3u",value:"hls",core:d.PLAYER_CORE_TYPE_DEFAULT},{format:"ts",value:"ts",core:d.PLAYER_CORE_TYPE_DEFAULT},{format:"mpegts",value:"ts",core:d.PLAYER_CORE_TYPE_DEFAULT},{format:"hevc",value:"raw265",core:d.PLAYER_CORE_TYPE_DEFAULT},{format:"h265",value:"raw265",core:d.PLAYER_CORE_TYPE_DEFAULT}];b.exports={frameDataAlignCrop:function(a,b,c,d,e,f,g,h){if(0==a-d)return[f,g,h];for(var i=d*e,j=i/4,k=new Uint8Array(i),l=new Uint8Array(j),m=new Uint8Array(j),n=d,o=d/2,p=0;p<e;p++)k.set(f.subarray(p*a,n),p*e);for(var q=0;q<e/2;q++)l.set(g.subarray(q*b,o),q*e/2);for(var r=0;r<e/2;r++)m.set(h.subarray(r*c,o),r*e/2);return[k,l,m]},GetUriFormat:function(a){for(var b=0;b<e.length;b++){var c=e[b],d="."+c.format;if(a.search(d)>=0)return c.value}return e[0].value},GetFormatPlayCore:function(a){for(var b=0;b<e.length;b++){var c=e[b];if(c.value===a)return c.core}return e[0].core},GetMsTime:function(){return(new Date).getTime()}}},{"../consts":52}],56:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}a("../demuxer/bufferFrame"),a("../demuxer/buffer"),a("./cache"),a("./cacheYuv");var e=a("../render-engine/webgl-420p"),f=a("./av-common"),g=(a("./audio-native-core"),a("./audio-core")),h=a("../consts");a("../version");var i=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.config={width:b.width||h.DEFAULT_WIDTH,height:b.height||h.DEFAULT_HEIGHT,fps:b.fps||h.DEFAULT_FPS,sampleRate:b.sampleRate||h.DEFAULT_SAMPLERATE,playerId:b.playerId||h.DEFAILT_WEBGL_PLAY_ID,token:b.token||null,probeSize:b.probeSize||4096},this.config.probeSize,this.mediaInfo={noFPS:!1,fps:h.DEFAULT_FPS,width:this.config.width,height:this.config.height,sampleRate:this.config.sampleRate,size:{width:-1,height:-1},audioNone:!1},this.duration=-1,this.vCodecID=h.V_CODEC_NAME_HEVC,this.AVSniffPtr=null,this.AVGetInterval=null,this.readyShowDone=!1,this.readyKeyFrame=!1,this.cache_status=!1,this.download_length=0,this.AVGLObj=null,this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.CanvasObj=null,this.CanvasObj=document.createElement("canvas"),this.CanvasObj.style.width=this.canvasBox.clientWidth+"px",this.CanvasObj.style.height=this.canvasBox.clientHeight+"px",this.CanvasObj.style.top="0px",this.CanvasObj.style.left="0px",this.canvasBox.appendChild(this.CanvasObj),this.audioWAudio=null,this.audioVoice=1,this.frameTime=1e3/this.config.fps,this.NaluBuf=[],this.YuvBuf=[],this.getPackageTimeMS=0,this.workerFetch=null,this.playInterval=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.totalLen=0,this.pushPkg=0,this.onProbeFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onReadyShowDone=null,this.onNetworkError=null}var b,c;return b=a,(c=[{key:"_workerFetch_onmessage",value:function(a,b){var c=a.data;switch(void 0===c.cmd||null===c.cmd?"":c.cmd){case"fetch-chunk":var d=c.data;b.download_length+=d.length,setTimeout(function(){var a=Module._malloc(d.length);Module.HEAP8.set(d,a),Module.cwrap("pushSniffHttpFlvData","number",["number","number","number","number"])(b.AVSniffPtr,a,d.length,b.config.probeSize),Module._free(a),a=null},0),b.totalLen+=d.length,d.length>0&&(b.getPackageTimeMS=f.GetMsTime()),b.pushPkg++,void 0!==b.AVGetInterval&&null!==b.AVGetInterval||(b.AVGetInterval=window.setInterval(function(){Module.cwrap("getBufferLengthApi","number",["number"])(b.AVSniffPtr)>b.config.probeSize?(Module.cwrap("getSniffHttpFlvPkg","number",["number"])(b.AVSniffPtr),b.pushPkg-=1):b.getPackageTimeMS>0&&f.GetMsTime()-b.getPackageTimeMS>=h.FETCH_HTTP_FLV_TIMEOUT_MS&&(b.getPackageTimeMS=f.GetMsTime(),b.workerFetch.postMessage({cmd:"retry",data:null,msg:"retry"}))},5));break;case"close":b.AVGetInterval&&clearInterval(b.AVGetInterval),b.AVGetInterval=null;case"fetch-fin":break;case"fetch-error":b.onNetworkError&&b.onNetworkError(c.data)}}},{key:"_checkDisplaySize",value:function(a,b,c){var d=b-a,e=this.config.width+Math.ceil(d/2),f=b/this.config.width>c/this.config.height,g=(e/b).toFixed(2),h=(this.config.height/c).toFixed(2),i=f?g:h,j=this.config.fixed,k=j?e:parseInt(b*i),l=j?this.config.height:parseInt(c*i);if(this.CanvasObj.offsetWidth!=k||this.CanvasObj.offsetHeight!=l){var m=parseInt((this.canvasBox.offsetHeight-l)/2),n=parseInt((this.canvasBox.offsetWidth-k)/2);m=m<0?0:m,n=n<0?0:n,this.CanvasObj.style.marginTop=m+"px",this.CanvasObj.style.marginLeft=n+"px",this.CanvasObj.style.width=k+"px",this.CanvasObj.style.height=l+"px"}return this.isCheckDisplay=!0,[k,l]}},{key:"_ptsFixed2",value:function(a){return Math.ceil(100*a)/100}},{key:"_callbackProbe",value:function(a,b,c,d,e,f,i,j,k){for(var l=Module.HEAPU8.subarray(k,k+10),m=0;m<l.length;m++)String.fromCharCode(l[m]);var n=d;d>100&&(n=h.DEFAULT_FPS,this.mediaInfo.noFPS=!0),this.vCodecID=j,this.config.fps=n,this.mediaInfo.fps=n,this.mediaInfo.size.width=b,this.mediaInfo.size.height=c,this.frameTime=Math.floor(1e3/(this.mediaInfo.fps+2)),this.CanvasObj.width==b&&this.CanvasObj.height==c||(this.CanvasObj.width=b,this.CanvasObj.height=c,this.isCheckDisplay)||this._checkDisplaySize(b,b,c),e>=0&&!1===this.mediaInfo.noFPS?(void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.config.sampleRate=f,this.mediaInfo.sampleRate=f,this.audioWAudio=g({sampleRate:this.mediaInfo.sampleRate,appendType:h.APPEND_TYPE_FRAME}),this.audioWAudio.isLIVE=!0):this.mediaInfo.audioNone=!0,this.onProbeFinish&&this.onProbeFinish()}},{key:"_callbackYUV",value:function(a,b,c,d,e,f,g,h,i){var j=Module.HEAPU8.subarray(a,a+d*h),k=new Uint8Array(j),l=Module.HEAPU8.subarray(b,b+e*h/2),m=new Uint8Array(l),n=Module.HEAPU8.subarray(c,c+f*h/2),o={bufY:k,bufU:m,bufV:new Uint8Array(n),line_y:d,h:h,pts:i};this.YuvBuf.push(o),this.checkCacheState(),Module._free(j),j=null,Module._free(l),l=null,Module._free(n),n=null,!1===this.readyShowDone&&(this.playYUV(),this.readyShowDone=!0,this.onReadyShowDone&&this.onReadyShowDone(),this.audioWAudio||this.play())}},{key:"_callbackNALU",value:function(a,b,c,d,e,f,g){if(!1===this.readyKeyFrame){if(c<=0)return;this.readyKeyFrame=!0}var h=Module.HEAPU8.subarray(a,a+b),i=new Uint8Array(h);this.NaluBuf.push({bufData:i,len:b,isKey:c,w:d,h:e,pts:1e3*f,dts:1e3*g}),Module._free(h),h=null}},{key:"_callbackPCM",value:function(a){}},{key:"_callbackAAC",value:function(a,b,c,d,e){var f=this._ptsFixed2(e);if(this.audioWAudio){var g=new Uint8Array(7+c),h=Module.HEAPU8.subarray(a,a+7);g.set(h,0);var i=Module.HEAPU8.subarray(b,b+c);g.set(i,7);var j={pts:f,data:g};this.audioWAudio.addSample(j),this.checkCacheState()}}},{key:"_decode",value:function(){var a=this;setTimeout(function(){if(null!==a.workerFetch){var b=a.NaluBuf.shift();if(null!=b){var c=Module._malloc(b.bufData.length);Module.HEAP8.set(b.bufData,c),Module.cwrap("decodeHttpFlvVideoFrame","number",["number","number","number","number","number"])(a.AVSniffPtr,c,b.bufData.length,b.pts,b.dts,0),Module._free(c),c=null}a._decode()}},1)}},{key:"checkCacheState",value:function(){var a=this.YuvBuf.length>=25&&(!0===this.mediaInfo.audioNone||this.audioWAudio&&this.audioWAudio.sampleQueue.length>=50);return!1===this.cache_status&&a&&(this.playInterval&&this.audioWAudio&&this.audioWAudio.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.cache_status=!0),a}},{key:"setVoice",value:function(a){this.audioVoice=a,this.audioWAudio&&this.audioWAudio.setVoice(a)}},{key:"_removeBindFuncPtr",value:function(){null!==this._ptr_probeCallback&&Module.removeFunction(this._ptr_probeCallback),null!==this._ptr_frameCallback&&Module.removeFunction(this._ptr_frameCallback),null!==this._ptr_naluCallback&&Module.removeFunction(this._ptr_naluCallback),null!==this._ptr_sampleCallback&&Module.removeFunction(this._ptr_sampleCallback),null!==this._ptr_aacCallback&&Module.removeFunction(this._ptr_aacCallback),this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null}},{key:"release",value:function(){return this.pause(),this.NaluBuf.length=0,this.YuvBuf.length=0,void 0!==this.workerFetch&&null!==this.workerFetch&&this.workerFetch.postMessage({cmd:"stop",data:"stop",msg:"stop"}),this.workerFetch=null,this.AVGetInterval&&clearInterval(this.AVGetInterval),this.AVGetInterval=null,this._removeBindFuncPtr(),Module.cwrap("releaseHttpFLV","number",["number"])(this.AVSniffPtr),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,this.CanvasObj&&this.CanvasObj.remove(),this.CanvasObj=null,0}},{key:"isPlayingState",value:function(){return null!==this.playInterval&&void 0!==this.playInterval}},{key:"pause",value:function(){this.audioWAudio&&this.audioWAudio.pause(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null}},{key:"playYUV",value:function(){if(this.YuvBuf.length>0){var a=this.YuvBuf.shift();return e.renderFrame(this.AVGLObj,a.bufY,a.bufU,a.bufV,a.line_y,a.h),!0}return!1}},{key:"play",value:function(){var a=this,b=this;if(!1===this.checkCacheState())return this.onLoadCache&&this.onLoadCache(),setTimeout(function(){a.play()},100),!1;if(void 0===this.playInterval||null===this.playInterval){var c=0,d=0,g=0;!1===this.mediaInfo.audioNone&&this.audioWAudio&&!1===this.mediaInfo.noFPS?(this.playInterval=setInterval(function(){if(d=f.GetMsTime(),b.cache_status){if(d-c>=b.frameTime-g){var a=b.YuvBuf.shift();if(null!=a&&null!==a){var h=0;null!==b.audioWAudio&&void 0!==b.audioWAudio&&(h=1e3*(a.pts-b.audioWAudio.getAlignVPTS())),g=b.audioWAudio?h<0&&-1*h<=b.frameTime||h>=0?f.GetMsTime()-d+1:b.frameTime:f.GetMsTime()-d+1,e.renderFrame(b.AVGLObj,a.bufY,a.bufU,a.bufV,a.line_y,a.h)}(b.YuvBuf.length<=0||b.audioWAudio&&b.audioWAudio.sampleQueue.length<=0)&&(b.cache_status=!1,b.onLoadCache&&b.onLoadCache(),b.audioWAudio&&b.audioWAudio.pause()),c=d}}else g=b.frameTime},1),this.audioWAudio&&this.audioWAudio.play()):this.playInterval=setInterval(function(){var a=b.YuvBuf.shift();null!=a&&null!==a&&e.renderFrame(b.AVGLObj,a.bufY,a.bufU,a.bufV,a.line_y,a.h),b.YuvBuf.length<=0&&(b.cache_status=!1)},b.frameTime)}}},{key:"start",value:function(a){var b,c,d,f=this;this.workerFetch=new Worker((b=function(){var a=null,b=new AbortController,c=b.signal,d=(self,function(a){var b=!1;b||(b=!0,fetch(a,{signal:c}).then(function(a){return function b(a){return a.read().then(function(c){if(!c.done){var d=c.value;return self.postMessage({cmd:"fetch-chunk",data:d,msg:"fetch-chunk"}),b(a)}self.postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})})}(a.body.getReader())})["catch"](function(a){if(!a.toString().includes("user aborted")){var b=" httplive request error:"+a+" start to retry";console.error(b),self.postMessage({cmd:"fetch-error",data:b,msg:"fetch-error"})}}))});self.onmessage=function(e){var f=e.data;switch(void 0===f.cmd||null===f.cmd?"":f.cmd){case"start":a=f.data,d(a),self.postMessage({cmd:"default",data:"WORKER STARTED",msg:"default"});break;case"stop":b.abort(),self.close(),self.postMessage({cmd:"close",data:"close",msg:"close"});break;case"retry":b.abort(),b=null,c=null,b=new AbortController,c=b.signal,setTimeout(function(){d(a)},3e3)}}}.toString(),c=b.match(/^\s*function\s*\(\s*\)\s*\{(([\s\S](?!\}$))*[\s\S])/),d=[c[1]],window.URL.createObjectURL(new Blob(d,{type:"text/javascript"})))),this.workerFetch.onmessage=function(a){f._workerFetch_onmessage(a,f)},this.workerFetch,this.AVSniffPtr=Module.cwrap("AVSniffHttpFlvInit","number",["string","string"])("base64:QXV0aG9yOmNoYW5neWFubG9uZ3xudW1iZXJ3b2xmLEdpdGh1YjpodHRwczovL2dpdGh1Yi5jb20vbnVtYmVyd29sZixFbWFpbDpwb3JzY2hlZ3QyM0Bmb3htYWlsLmNvbSxRUTo1MzEzNjU4NzIsSG9tZVBhZ2U6aHR0cDovL3h2aWRlby52aWRlbyxEaXNjb3JkOm51bWJlcndvbGYjODY5NCx3ZWNoYXI6bnVtYmVyd29sZjExLEJlaWppbmcsV29ya0luOkJhaWR1","0.0.0"),this.AVSniffPtr,this._ptr_probeCallback=Module.addFunction(this._callbackProbe.bind(this)),this._ptr_yuvCallback=Module.addFunction(this._callbackYUV.bind(this)),this._ptr_naluCallback=Module.addFunction(this._callbackNALU.bind(this)),this._ptr_sampleCallback=Module.addFunction(this._callbackPCM.bind(this)),this._ptr_aacCallback=Module.addFunction(this._callbackAAC.bind(this)),Module.cwrap("initializeSniffHttpFlvModule","number",["number","number","number","number","number","number"])(this.AVSniffPtr,this._ptr_probeCallback,this._ptr_yuvCallback,this._ptr_naluCallback,this._ptr_sampleCallback,this._ptr_aacCallback),this.AVGLObj=e.setupCanvas(this.CanvasObj,{preserveDrawingBuffer:!1}),this.workerFetch.postMessage({cmd:"start",data:a,msg:"start"}),this._decode()}}])&&d(b.prototype,c),a}();c.CHttpLiveCore=i},{"../consts":52,"../demuxer/buffer":63,"../demuxer/bufferFrame":64,"../render-engine/webgl-420p":76,"../version":79,"./audio-core":53,"./audio-native-core":54,"./av-common":55,"./cache":58,"./cacheYuv":59}],57:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=a("../demuxer/bufferFrame"),g=a("../demuxer/buffer"),h=(a("./cache"),a("./cacheYuv"),a("../render-engine/webgl-420p")),i=a("./av-common"),j=(a("./audio-native-core"),a("./audio-core")),k=a("../consts"),l=a("../version"),m=function o(a,b,c,d,f,g,h,i,j){e(this,o),this.pts=j,this.data_y=a,this.data_u=b,this.data_v=c,this.line1=d,this.line2=f,this.line3=g,this.width=h,this.height=i,this.byteAlignIncr=this.line1-this.width},n=function(){function a(b){e(this,a),this.config={width:b.width||k.DEFAULT_WIDTH,height:b.height||k.DEFAULT_HEIGHT,fps:b.fps||k.DEFAULT_FPS,sampleRate:b.sampleRate||k.DEFAULT_SAMPLERATE,playerId:b.playerId||k.DEFAILT_WEBGL_PLAY_ID,token:b.token||null,readyShow:b.readyShow||!1,checkProbe:b.checkProbe,ignoreAudio:b.ignoreAudio,playMode:b.playMode||k.PLAYER_MODE_VOD},this.probeSize=4524611,this.audioWAudio=null,this.audioVoice=1,this.frameCallTag=0,this.seekTarget=0,this.avSeekVState=!1,this.isNewSeek=!1,this.openFrameCall=!0,this.bufRecvStat=!1,this.bufObject=g(),this.bufLastVDTS=0,this.bufLastADTS=0,this.yuvMaxTime=0,this.playVPipe=[],this._videoQueue=[],this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.duration=-1,this.channels=-1,this.width=-1,this.height=-1,this.isPlaying=!1,this.isCheckDisplay=!1,this.frameTime=1e3/this.config.fps,this.vCodecID=k.V_CODEC_NAME_UNKN,this.audioIdx=-1,this.audioNone=!1,this.frameDur=0,this.canvasBox=null,this.canvas=null,this.yuv=null,this.retryAuSampleNo=0,this.cacheStatus=!1,this.showScreen=!1,this.playPTS=0,this.vCachePTS=0,this.aCachePTS=0,this.reFull=!1,this.bufOK=!1,this.avRecvInterval=null,this.avFeedVideoInterval=null,this.avFeedAudioInterval=null,this.decVFrameInterval=null,this.playFrameInterval=null,this.onProbeFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onCacheProcess=null,this.onReadyShowDone=null,this.corePtr=Module.cwrap("AVSniffStreamInit","number",["string","string"])(this.config.token,l.PLAYER_VERSION),this.corePtr,this._ptr_probeCallback=Module.addFunction(this._probeFinCallback.bind(this)),this._ptr_frameCallback=Module.addFunction(this._frameCallback.bind(this)),this._ptr_naluCallback=Module.addFunction(this._naluCallback.bind(this)),this._ptr_sampleCallback=Module.addFunction(this._samplesCallback.bind(this)),this._ptr_aacCallback=Module.addFunction(this._aacFrameCallback.bind(this));var c=this.config.playMode===k.PLAYER_MODE_NOTIME_LIVE?1:0;this.config.ignoreAudio,this.config.playMode,Module.cwrap("initializeSniffStreamModuleWithAOpt","number",["number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_frameCallback,this._ptr_naluCallback,this._ptr_sampleCallback,this._ptr_aacCallback,this.config.ignoreAudio,c)}var b,c;return b=a,(c=[{key:"_removeBindFuncPtr",value:function(){null!==this._ptr_probeCallback&&Module.removeFunction(this._ptr_probeCallback),null!==this._ptr_frameCallback&&Module.removeFunction(this._ptr_frameCallback),null!==this._ptr_naluCallback&&Module.removeFunction(this._ptr_naluCallback),null!==this._ptr_sampleCallback&&Module.removeFunction(this._ptr_sampleCallback),null!==this._ptr_aacCallback&&Module.removeFunction(this._ptr_aacCallback),this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null}},{key:"release",value:function(){void 0!==this.canvas&&null!==this.canvas&&(this.canvas.remove(),this.canvas=null),null!==this.playFrameInterval&&(window.clearInterval(this.playFrameInterval),this.playFrameInterval=null),null!==this.avFeedVideoInterval&&(window.clearInterval(this.avFeedVideoInterval),this.avFeedVideoInterval=null),null!==this.avFeedAudioInterval&&(window.clearInterval(this.avFeedAudioInterval),this.avFeedAudioInterval=null),null!==this.avRecvInterval&&(window.clearInterval(this.avRecvInterval),this.avRecvInterval=null),this._clearDecInterval(),this._removeBindFuncPtr();var a=Module.cwrap("releaseSniffStream","number",["number"])(this.corePtr);return this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,this.bufRecvStat=!1,this.bufObject.cleanPipeline(),this.playVPipe.length=0,a}},{key:"setScreen",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.showScreen=a,this.canvas&&(a?this.canvas.setAttribute("hidden",!0):this.canvas.removeAttribute("hidden"))}},{key:"getCachePTS",value:function(){
return 1!==this.config.ignoreAudio&&this.audioWAudio?Math.max(this.vCachePTS,this.aCachePTS):this.vCachePTS}},{key:"getMaxPTS",value:function(){return Math.max(this.vCachePTS,this.aCachePTS)}},{key:"isPlayingState",value:function(){return this.isPlaying}},{key:"pushDone",value:function(){this.pushEOF=!0}},{key:"_clearDecInterval",value:function(){this.decVFrameInterval&&window.clearInterval(this.decVFrameInterval),this.decVFrameInterval=null}},{key:"_checkPlayFinished",value:function(){return!(this.config.playMode!==k.PLAYER_MODE_VOD||!(!0===this.bufRecvStat&&(this.playPTS>=this.bufLastVDTS||this.audioWAudio&&this.playPTS>=this.bufLastADTS)||this.duration-this.playPTS<this.frameDur)||(this.pause(),this._clearDecInterval(),this.onPlayingTime&&this.onPlayingTime(this.duration),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.onPlayingFinish&&this.onPlayingFinish(),0))}},{key:"play",value:function(){var a=this;if(!this.playFrameInterval||null===this.playFrameInterval||null==this.playFrameInterval){this._videoQueue.length>0&&(this.isPlaying=!0);var b=0,c=0,d=0;this.config.playMode===k.PLAYER_MODE_NOTIME_LIVE?this.playFrameInterval=window.setInterval(function(){if(a._videoQueue.length>0){var b=a._videoQueue.shift();b.pts,h.renderFrame(a.yuv,b.data_y,b.data_u,b.data_v,b.line1,b.height)}},1e3*this.frameDur):this.playFrameInterval=window.setInterval(function(){if(c=i.GetMsTime(),a._videoQueue.length>0&&c-b>=a.frameTime-d){var e=a._videoQueue.shift(),f=0;if(a.isNewSeek||null===a.audioWAudio||void 0===a.audioWAudio||(f=1e3*(e.pts-a.audioWAudio.getAlignVPTS()),a.playPTS=Math.max(a.audioWAudio.getAlignVPTS(),a.playPTS)),b=c,i.GetMsTime(),a.playPTS=Math.max(e.pts,a.playPTS),a.isNewSeek&&a.seekTarget-a.frameDur>e.pts)return void(d=a.frameTime);if(a.isNewSeek&&(a.audioWAudio&&a.audioWAudio.setVoice(a.audioVoice),a.audioWAudio&&a.audioWAudio.play(),d=0,a.isNewSeek=!1,a.seekTarget=0),a.showScreen?a.onRender&&a.onRender(e.line1,e.height,e.data_y,e.data_u,e.data_v):(e.pts,h.renderFrame(a.yuv,e.data_y,e.data_u,e.data_v,e.line1,e.height)),a.onPlayingTime&&a.onPlayingTime(e.pts),!a.isNewSeek&&a.audioWAudio&&(f<0&&-1*f<=a.frameTime||f>=0)){if(a.config.playMode===k.PLAYER_MODE_VOD)if(e.pts>=a.duration)a.onLoadCacheFinshed&&a.onLoadCacheFinshed(),a.onPlayingFinish&&a.onPlayingFinish(),a._clearDecInterval(),a.pause();else if(a._checkPlayFinished())return;d=i.GetMsTime()-c}else!a.isNewSeek&&a.audioWAudio&&(f<0&&a.frameTime,d=a.frameTime)}a._checkPlayFinished()},1)}this.isNewSeek||this.audioWAudio&&this.audioWAudio.play()}},{key:"pause",value:function(){this.isPlaying=!1,this._pause()}},{key:"_pause",value:function(){this.playFrameInterval&&window.clearInterval(this.playFrameInterval),this.playFrameInterval=null,this.audioWAudio&&this.audioWAudio.pause()}},{key:"seek",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.openFrameCall=!1,this.pause(),this._clearDecInterval(),null!==this.avFeedVideoInterval&&(window.clearInterval(this.avFeedVideoInterval),this.avFeedVideoInterval=null),null!==this.avFeedAudioInterval&&(window.clearInterval(this.avFeedAudioInterval),this.avFeedAudioInterval=null),this.yuvMaxTime=0,this.playVPipe.length=0,this._videoQueue.length=0,this.audioWAudio&&this.audioWAudio.stop(),a&&a(),this.isNewSeek=!0,this.avSeekVState=!0,this.seekTarget=c.seekTime,null!==this.audioWAudio&&void 0!==this.audioWAudio&&(this.audioWAudio.setVoice(0),this.audioWAudio.resetStartParam(),this.audioWAudio.stop()),this._avFeedData(c.seekTime),setTimeout(function(){b.yuvMaxTime=0,b._videoQueue.length=0,b.openFrameCall=!0,b.frameCallTag+=1,b._decVFrameIntervalFunc()},1e3)}},{key:"setVoice",value:function(a){this.audioVoice=a,this.audioWAudio&&this.audioWAudio.setVoice(a)}},{key:"cacheIsFull",value:function(){return this._videoQueue.length>=50}},{key:"_checkDisplaySize",value:function(a,b,c){var d=b-a,e=this.config.width+Math.ceil(d/2),f=b/this.config.width>c/this.config.height,g=(e/b).toFixed(2),h=(this.config.height/c).toFixed(2),i=f?g:h,j=this.config.fixed,k=j?e:parseInt(b*i),l=j?this.config.height:parseInt(c*i);if(this.canvas.offsetWidth!=k||this.canvas.offsetHeight!=l){var m=parseInt((this.canvasBox.offsetHeight-l)/2),n=parseInt((this.canvasBox.offsetWidth-k)/2);m=m<0?0:m,n=n<0?0:n,this.canvas.style.marginTop=m+"px",this.canvas.style.marginLeft=n+"px",this.canvas.style.width=k+"px",this.canvas.style.height=l+"px"}return this.isCheckDisplay=!0,[k,l]}},{key:"_createYUVCanvas",value:function(){this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.canvas=document.createElement("canvas"),this.canvas.style.width=this.canvasBox.clientWidth+"px",this.canvas.style.height=this.canvasBox.clientHeight+"px",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvasBox.appendChild(this.canvas),this.yuv=h.setupCanvas(this.canvas,{preserveDrawingBuffer:!1})}},{key:"_avRecvPackets",value:function(){var a=this;this.bufObject.cleanPipeline(),null!==this.avRecvInterval&&(window.clearInterval(this.avRecvInterval),this.avRecvInterval=null),!0===this.config.checkProbe?this.avRecvInterval=window.setInterval(function(){Module.cwrap("getSniffStreamPkg","number",["number"])(a.corePtr),a._avCheckRecvFinish()},5):this.avRecvInterval=window.setInterval(function(){Module.cwrap("getSniffStreamPkgNoCheckProbe","number",["number"])(a.corePtr),a._avCheckRecvFinish()},5),this._avFeedData(0,!1)}},{key:"_avCheckRecvFinish",value:function(){this.config.playMode===k.PLAYER_MODE_VOD&&this.duration-this.getMaxPTS()<this.frameDur&&(this.bufRecvStat=!0,null!==this.avRecvInterval&&(window.clearInterval(this.avRecvInterval),this.avRecvInterval=null,this.bufOK=!0))}},{key:"_afterAvFeedSeekToStartWithFinishedBuffer",value:function(a){var b=this,c=window.setInterval(function(){b._videoQueue.length,b._videoQueue.length>=50&&(b.onSeekFinish&&b.onSeekFinish(),b.onPlayingTime&&b.onPlayingTime(a),b.play(),window.clearInterval(c),c=null)},10);return!0}},{key:"_afterAvFeedSeekToStartWithUnFinBuffer",value:function(a){var b=this,c=window.setInterval(function(){b._videoQueue.length,b._videoQueue.length>=50&&(b.onSeekFinish&&b.onSeekFinish(),b.onPlayingTime&&b.onPlayingTime(a),!1===b.reFull?b.play():b.reFull=!1,window.clearInterval(c),c=null)},10);return!0}},{key:"_avFeedData",value:function(a){var b=this;if(this.playVPipe.length=0,this.audioWAudio&&this.audioWAudio.cleanQueue(),a<=0&&!1===this.bufOK){var c=0;if(this.avFeedVideoInterval=window.setInterval(function(){var d=b.bufObject.videoBuffer.length;if(d-1>c||b.duration-b.getMaxPTS()<b.frameDur&&d-1==c){var e=b.bufObject.videoBuffer[c].length;if(e>0){for(var g=0;g<e;g++)b.playVPipe.push(f.ConstructWithDts(b.bufObject.videoBuffer[c][g].pts,b.bufObject.videoBuffer[c][g].dts,b.bufObject.videoBuffer[c][g].isKey,b.bufObject.videoBuffer[c][g].data,!0));c+=1}b.config.playMode===k.PLAYER_MODE_VOD&&b.duration-b.getMaxPTS()<b.frameDur&&b.playVPipe.length>0&&b.playVPipe[b.playVPipe.length-1].pts>=b.bufLastVDTS&&(window.clearInterval(b.avFeedVideoInterval),b.avFeedVideoInterval=null,b.playVPipe[b.playVPipe.length-1].pts,b.bufLastVDTS,b.bufObject.videoBuffer,b.playVPipe)}else b.config.playMode===k.PLAYER_MODE_VOD&&b.playVPipe.length>0&&b.playVPipe[b.playVPipe.length-1].pts>=b.duration&&(window.clearInterval(b.avFeedVideoInterval),b.avFeedVideoInterval=null,b.playVPipe[b.playVPipe.length-1].pts,b.duration,b.bufObject.videoBuffer,b.playVPipe);b.avSeekVState&&(b.getMaxPTS(),b.duration,b.config.playMode===k.PLAYER_MODE_VOD&&(b._afterAvFeedSeekToStartWithFinishedBuffer(a),b.avSeekVState=!1))},5),void 0!==this.audioWAudio&&null!==this.audioWAudio&&this.config.ignoreAudio<1){var d=0;this.avFeedAudioInterval=window.setInterval(function(){var a=b.bufObject.audioBuffer.length;if(a-1>d||b.duration-b.getMaxPTS()<b.frameDur&&a-1==d){for(var c=b.bufObject.audioBuffer[d].length,e=0;e<c;e++)b.audioWAudio.addSample(new f.BufferFrame(b.bufObject.audioBuffer[d][e].pts,b.bufObject.audioBuffer[d][e].isKey,b.bufObject.audioBuffer[d][e].data,!1));d+=1,b.config.playMode===k.PLAYER_MODE_VOD&&b.duration-b.getMaxPTS()<b.frameDur&&b.audioWAudio.sampleQueue.length>0&&b.audioWAudio.sampleQueue[b.audioWAudio.sampleQueue.length-1].pts>=b.bufLastADTS&&(window.clearInterval(b.avFeedAudioInterval),b.avFeedAudioInterval=null,b.audioWAudio.sampleQueue[b.audioWAudio.sampleQueue.length-1].pts,b.bufObject.audioBuffer)}else b.config.playMode===k.PLAYER_MODE_VOD&&b.audioWAudio.sampleQueue.length>0&&b.audioWAudio.sampleQueue[b.audioWAudio.sampleQueue.length-1].pts>=b.duration&&(window.clearInterval(b.avFeedAudioInterval),b.avFeedAudioInterval=null,b.audioWAudio.sampleQueue[b.audioWAudio.sampleQueue.length-1].pts,b.bufObject.audioBuffer)},5)}}else{var e=this.bufObject.seekIDR(a),g=parseInt(e,10);this.playPTS=0;var h=g;if(this.avFeedVideoInterval=window.setInterval(function(){var c=b.bufObject.videoBuffer.length;if(c-1>h||b.duration-b.getMaxPTS()<b.frameDur&&c-1==h){var d=b.bufObject.videoBuffer[h].length;if(d>0){for(var e=0;e<d;e++)b.playVPipe.push(f.ConstructWithDts(b.bufObject.videoBuffer[h][e].pts,b.bufObject.videoBuffer[h][e].dts,b.bufObject.videoBuffer[h][e].isKey,b.bufObject.videoBuffer[h][e].data,!0));h+=1}b.config.playMode===k.PLAYER_MODE_VOD&&b.duration-b.getMaxPTS()<b.frameDur&&b.playVPipe.length>0&&b.playVPipe[b.playVPipe.length-1].pts>=b.bufLastVDTS&&(window.clearInterval(b.avFeedVideoInterval),b.avFeedVideoInterval=null)}else b.config.playMode===k.PLAYER_MODE_VOD&&b.playVPipe.length>0&&b.playVPipe[b.playVPipe.length-1].pts>=b.duration&&(window.clearInterval(b.avFeedVideoInterval),b.avFeedVideoInterval=null);b.avSeekVState&&(b.getMaxPTS(),b.duration,b.config.playMode===k.PLAYER_MODE_VOD&&(b._afterAvFeedSeekToStartWithUnFinBuffer(a),b.avSeekVState=!1))},5),this.audioWAudio&&this.config.ignoreAudio<1){var i=parseInt(a,10);this.avFeedAudioInterval=window.setInterval(function(){var a=b.bufObject.audioBuffer.length;if(a-1>i||b.duration-b.getMaxPTS()<b.frameDur&&a-1==i){for(var c=b.bufObject.audioBuffer[i].length,d=0;d<c;d++)b.bufObject.audioBuffer[i][d].pts<b.seekTarget||b.audioWAudio.addSample(new f.BufferFrame(b.bufObject.audioBuffer[i][d].pts,b.bufObject.audioBuffer[i][d].isKey,b.bufObject.audioBuffer[i][d].data,!1));i+=1,b.config.playMode===k.PLAYER_MODE_VOD&&b.duration-b.getMaxPTS()<b.frameDur&&b.audioWAudio.sampleQueue.length>0&&b.audioWAudio.sampleQueue[b.audioWAudio.sampleQueue.length-1].pts>=b.bufLastADTS&&(window.clearInterval(b.avFeedAudioInterval),b.avFeedAudioInterval=null)}else b.config.playMode===k.PLAYER_MODE_VOD&&b.audioWAudio.sampleQueue.length>0&&b.audioWAudio.sampleQueue[b.audioWAudio.sampleQueue.length-1].pts>=b.duration&&(window.clearInterval(b.avFeedAudioInterval),b.avFeedAudioInterval=null)},5)}}}},{key:"_probeFinCallback",value:function(a,b,c,d,e,f,g,h,i){var l=this;this._createYUVCanvas(),k.V_CODEC_NAME_HEVC,this.config.fps=1*d,this.frameTime=1e3/this.config.fps,this.width=b,this.height=c,this.frameDur=1/this.config.fps,this.duration=a-this.frameDur,this.vCodecID=h,this.config.sampleRate=f,this.channels=g,this.audioIdx=e,this.duration<0&&(this.config.playMode=k.PLAYER_MODE_NOTIME_LIVE,this.frameTime,this.frameDur);for(var m=Module.HEAPU8.subarray(i,i+10),n=0;n<m.length;n++)String.fromCharCode(m[n]);k.V_CODEC_NAME_HEVC===this.vCodecID&&(e>=0&&this.config.ignoreAudio<1?(void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.audioWAudio=j({sampleRate:f,appendType:k.APPEND_TYPE_FRAME}),this.audioWAudio.setDurationMs(1e3*a),this.onLoadCache&&this.audioWAudio.setOnLoadCache(function(){if(l.retryAuSampleNo,l.retryAuSampleNo<=5){l.pause(),l.onLoadCache&&l.onLoadCache();var a=window.setInterval(function(){return l.retryAuSampleNo,l.audioWAudio.sampleQueue.length,l.audioWAudio.sampleQueue.length>2?(l.onLoadCacheFinshed&&l.onLoadCacheFinshed(),l.play(),l.retryAuSampleNo=0,window.clearInterval(a),void(a=null)):(l.retryAuSampleNo+=1,l.retryAuSampleNo>5?(l.play(),l.onLoadCacheFinshed&&l.onLoadCacheFinshed(),window.clearInterval(a),void(a=null)):void 0)},1e3)}})):this.audioNone=!0,this._avRecvPackets(),this._decVFrameIntervalFunc()),this.onProbeFinish&&this.onProbeFinish()}},{key:"_ptsFixed2",value:function(a){return Math.ceil(100*a)/100}},{key:"_naluCallback",value:function(a,b,c,d,e,f,g){var h=this._ptsFixed2(f),i=Module.HEAPU8.subarray(a,a+b),j=new Uint8Array(i);this.bufObject.appendFrameWithDts(h,g,j,!0,c),this.bufLastVDTS=Math.max(g,this.bufLastVDTS),this.vCachePTS=Math.max(h,this.vCachePTS),this.onCacheProcess&&this.onCacheProcess(this.getCachePTS())}},{key:"_samplesCallback",value:function(a,b,c,d){}},{key:"_aacFrameCallback",value:function(a,b,c,d,e){var f=this._ptsFixed2(e);if(this.audioWAudio){var g=new Uint8Array(7+c),h=Module.HEAPU8.subarray(a,a+7);g.set(h,0);var i=Module.HEAPU8.subarray(b,b+c);g.set(i,7),this.bufObject.appendFrame(f,g,!1,!0),this.bufLastADTS=Math.max(f,this.bufLastADTS),this.aCachePTS=Math.max(f,this.aCachePTS),this.onCacheProcess&&this.onCacheProcess(this.getCachePTS())}}},{key:"_decVFrameIntervalFunc",value:function(){var a=this;null==this.decVFrameInterval&&(this.decVFrameInterval=window.setInterval(function(){if(a._videoQueue.length<50&&a.playVPipe.length>0){var b=a.playVPipe.shift(),c=b.data,d=Module._malloc(c.length);Module.HEAP8.set(c,d);var e=parseInt(1e3*b.pts,10),f=parseInt(1e3*b.dts,10);a.yuvMaxTime=Math.max(b.pts,a.yuvMaxTime),Module.cwrap("decodeVideoFrame","number",["number","number","number","number","number"])(a.corePtr,d,c.length,e,f,a.frameCallTag),Module._free(d),d=null}},10))}},{key:"_frameCallback",value:function(a,b,c,d,e,f,g,i,j,k){if(this._videoQueue.length,!(!1===this.openFrameCall||k!==this.frameCallTag||j>this.yuvMaxTime+this.frameDur||this.isNewSeek&&this.seekTarget-j>3*this.frameDur)){var l=this._videoQueue.length;if(this.canvas.width==d&&this.canvas.height==i||(this.canvas.width=d,this.canvas.height=i,this.isCheckDisplay)||this._checkDisplaySize(g,d,i),!(this.playPTS>j)){var n=Module.HEAPU8.subarray(a,a+d*i),o=Module.HEAPU8.subarray(b,b+e*i/2),p=Module.HEAPU8.subarray(c,c+f*i/2),q=new Uint8Array(n),r=new Uint8Array(o),s=new Uint8Array(p);this.config.readyShow&&(h.renderFrame(this.yuv,q,r,s,d,i),this.config.readyShow=!1,this.onReadyShowDone&&this.onReadyShowDone());var t=new m(q,r,s,d,e,f,g,i,j);if(l<=0||j>this._videoQueue[l-1].pts)this._videoQueue.push(t);else if(j<this._videoQueue[0].pts)this._videoQueue.splice(0,0,t);else if(j<this._videoQueue[l-1].pts)for(var u=0;u<l;u++)if(j>this._videoQueue[u].pts&&u+1<l&&j<this._videoQueue[u+1].pts){this._videoQueue.splice(u+1,0,t);break}this._videoQueue,this.vCachePTS=Math.max(j,this.vCachePTS),this.onCacheProcess&&this.onCacheProcess(this.getCachePTS())}}}},{key:"setProbeSize",value:function(a){this.probeSize=a}},{key:"pushBuffer",value:function(a){var b=Module._malloc(a.length);return Module.HEAP8.set(a,b),Module.cwrap("pushSniffStreamData","number",["number","number","number","number"])(this.corePtr,b,a.length,this.probeSize)}}])&&d(b.prototype,c),a}();c.CNativeCore=n},{"../consts":52,"../demuxer/buffer":63,"../demuxer/bufferFrame":64,"../render-engine/webgl-420p":76,"../version":79,"./audio-core":53,"./audio-native-core":54,"./av-common":55,"./cache":58,"./cacheYuv":59}],58:[function(a,b,d){(function(c){a("./cacheYuv"),c.CACHE_APPEND_STATUS_CODE={FAILED:-1,OVERFLOW:-2,OK:0,NOT_FULL:1,FULL:2,NULL:3},b.exports=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,b={limit:a,yuvCache:[],appendCacheByCacheYuv:function(a){return a.pts,b.yuvCache.length>=b.limit?CACHE_APPEND_STATUS_CODE.OVERFLOW:(b.yuvCache.push(a),b.yuvCache.length>=b.limit?CACHE_APPEND_STATUS_CODE.FULL:CACHE_APPEND_STATUS_CODE.NOT_FULL)},getState:function(){return b.yuvCache.length<=0?CACHE_APPEND_STATUS_CODE.NULL:b.yuvCache.length>=b.limit?CACHE_APPEND_STATUS_CODE.FULL:CACHE_APPEND_STATUS_CODE.NOT_FULL},cleanPipeline:function(){b.yuvCache.length=0},vYuv:function(){return b.yuvCache.length<=0?null:b.yuvCache.shift()}};return b}}).call(this,void 0!==c?c:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cacheYuv":59}],59:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=function(){function a(b,c,d,e,f,g){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.pts=b,this.width=c,this.height=d,this.imageBufferY=e,this.imageBufferB=f,this.imageBufferR=g}var b,c;return b=a,(c=[{key:"setYuv",value:function(a,b,c,d,e,f){this.pts=a,this.width=b,this.height=c,this.imageBufferY=d,this.imageBufferB=e,this.imageBufferR=f}}])&&d(b.prototype,c),a}();c.CacheYuvStruct=e},{}],60:[function(a,b,c){b.exports={HEVC_NAL_TRAIL_N:0,HEVC_NAL_TRAIL_R:1,HEVC_NAL_TSA_N:2,HEVC_NAL_TSA_R:3,HEVC_NAL_STSA_N:4,HEVC_NAL_STSA_R:5,HEVC_NAL_RADL_N:6,HEVC_NAL_RADL_R:7,HEVC_NAL_RASL_N:8,HEVC_NAL_RASL_R:9,HEVC_NAL_VCL_N10:10,HEVC_NAL_VCL_R11:11,HEVC_NAL_VCL_N12:12,HEVC_NAL_VCL_R13:13,HEVC_NAL_VCL_N14:14,HEVC_NAL_VCL_R15:15,HEVC_NAL_BLA_W_LP:16,HEVC_NAL_BLA_W_RADL:17,HEVC_NAL_BLA_N_LP:18,HEVC_NAL_IDR_W_RADL:19,HEVC_NAL_IDR_N_LP:20,HEVC_NAL_CRA_NUT:21,HEVC_NAL_IRAP_VCL22:22,HEVC_NAL_IRAP_VCL23:23,HEVC_NAL_RSV_VCL24:24,HEVC_NAL_RSV_VCL25:25,HEVC_NAL_RSV_VCL26:26,HEVC_NAL_RSV_VCL27:27,HEVC_NAL_RSV_VCL28:28,HEVC_NAL_RSV_VCL29:29,HEVC_NAL_RSV_VCL30:30,HEVC_NAL_RSV_VCL31:31,HEVC_NAL_VPS:32,HEVC_NAL_SPS:33,HEVC_NAL_PPS:34,HEVC_NAL_AUD:35,HEVC_NAL_EOS_NUT:36,HEVC_NAL_EOB_NUT:37,HEVC_NAL_FD_NUT:38,HEVC_NAL_SEI_PREFIX:39,HEVC_NAL_SEI_SUFFIX:40,HEVC_NAL_RSV_NVCL41:41,HEVC_NAL_RSV_NVCL42:42,HEVC_NAL_RSV_NVCL43:43,HEVC_NAL_RSV_NVCL44:44,HEVC_NAL_RSV_NVCL45:45,HEVC_NAL_RSV_NVCL46:46,HEVC_NAL_RSV_NVCL47:47,HEVC_NAL_UNSPEC48:48,HEVC_NAL_UNSPEC49:49,HEVC_NAL_UNSPEC50:50,HEVC_NAL_UNSPEC51:51,HEVC_NAL_UNSPEC52:52,HEVC_NAL_UNSPEC53:53,HEVC_NAL_UNSPEC54:54,HEVC_NAL_UNSPEC55:55,HEVC_NAL_UNSPEC56:56,HEVC_NAL_UNSPEC57:57,HEVC_NAL_UNSPEC58:58,HEVC_NAL_UNSPEC59:59,HEVC_NAL_UNSPEC60:60,HEVC_NAL_UNSPEC61:61,HEVC_NAL_UNSPEC62:62,HEVC_NAL_UNSPEC63:63,SOURCE_CODE_VPS:64,SOURCE_CODE_SPS:66,SOURCE_CODE_PPS:68,SOURCE_CODE_SEI:78,SOURCE_CODE_IDR:38,SOURCE_CODE_P:2,SOURCE_CODE_SEI_END:128,DEFINE_STARTCODE:new Uint8Array([0,0,0,1]),DEFINE_KEY_FRAME:21,DEFINE_P_FRAME:9,DEFINE_OTHERS_FRAME:153}},{}],61:[function(a,b,c){var d=a("./hevc-header"),e=[d.HEVC_NAL_VPS,d.HEVC_NAL_SPS,d.HEVC_NAL_PPS,d.HEVC_NAL_SEI_PREFIX];b.exports={IS_HEV_PS_INFO_CHAR:function(a){var b=(126&a)>>1;return e.indexOf(b)},GET_NALU_TYPE:function(a){var b=(126&a)>>1;if(b>=1&&b<=9)return d.DEFINE_P_FRAME;if(b>=16&&b<=21)return d.DEFINE_KEY_FRAME;var c=e.indexOf(b);return c>=0?e[c]:d.DEFINE_OTHERS_FRAME},PACK_NALU:function(a){var b=a.nalu,c=a.vlc.vlc;null==b.vps&&(b.vps=new Uint8Array);var d=new Uint8Array(b.vps.length+b.sps.length+b.pps.length+b.sei.length+c.length);return d.set(b.vps,0),d.set(b.sps,b.vps.length),d.set(b.pps,b.vps.length+b.sps.length),d.set(b.sei,b.vps.length+b.sps.length+b.pps.length),d.set(c,b.vps.length+b.sps.length+b.pps.length+b.sei.length),d}}},{"./hevc-header":60}],62:[function(a,b,c){function d(a){return function(a){if(Array.isArray(a)){for(var b=0,c=new Array(a.length);b<a.length;b++)c[b]=a[b];return c}}(a)||function(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var e=a("./av-common"),f=a("./audio-core"),g=a("./cache"),h=a("./cacheYuv"),i=a("../render-engine/webgl-420p"),j=a("../consts"),k=a("../version");b.exports=function(a){var b={config:{width:a.width||j.DEFAULT_WIDTH,height:a.height||j.DEFAULT_HEIGHT,fps:a.fps||j.DEFAULT_FPS,fixed:a.fixed||j.DEFAULT_FIXED,sampleRate:a.sampleRate||j.DEFAULT_SAMPLERATE,appendHevcType:a.appendHevcType||j.APPEND_TYPE_STREAM,frameDurMs:a.frameDur||j.DEFAULT_FRAME_DUR,playerId:a.playerId||j.DEFAILT_WEBGL_PLAY_ID,audioNone:a.audioNone||!1,token:a.token||null,videoCodec:a.videoCodec||j.CODEC_H265},vcodecerPtr:null,videoCallback:null,frameList:[],cacheInterval:null,cacheYuvBuf:g(30),nowPacket:null,stream:new Uint8Array,audio:null,liveStartMs:-1,durationMs:-1,videoPTS:0,loop:null,debugYUVSwitch:!1,debugID:null,cacheLoop:null,playParams:{seekPos:-1,mode:j.PLAYER_MODE_VOD,accurateSeek:!0,seekEvent:!1,realPlay:!0},calcuteStartTime:-1,fix_poc_err_skip:0,frameTime:0,frameTimeSec:0,preCostTime:0,realVolume:1,isPlaying:!1,isCaching:j.CACHE_NO_LOADCACHE,isNewSeek:!1,flushDecoder:0,isCheckDisplay:!1,isPlayLoadingFinish:0,vCachePTS:0,aCachePTS:0,showScreen:!1,noCacheFrame:0,onPlayingTime:null,onPlayingFinish:null,onSeekFinish:null,onLoadCache:null,onLoadCacheFinshed:null,onRender:null,setScreen:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null!=b&&(b.showScreen=a,b.canvas&&(a?b.canvas.setAttribute("hidden",!0):b.canvas.removeAttribute("hidden")))},setSize:function(a,c){b.config.width=a||j.DEFAULT_WIDTH,b.config.height=c||j.DEFAULT_HEIGHT},setFrameRate:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:25;b.config.fps=a,b.config.frameDurMs=1e3/a},setDurationMs:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;b.durationMs=a,0==b.config.audioNone&&b.audio.setDurationMs(a)},setPlayingCall:function(a){b.onPlayingTime=a},setVoice:function(a){b.realVolume=a,0==b.config.audioNone&&b.audio.setVoice(b.realVolume)},isPlayingState:function(){return b.isPlaying||b.isCaching===j.CACHE_WITH_PLAY_SIGN},appendAACFrame:function(a){b.audio.addSample(a),b.aCachePTS=Math.max(a.pts,b.aCachePTS)},appendHevcFrame:function(a){var c;b.config.appendHevcType==j.APPEND_TYPE_STREAM?b.stream=new Uint8Array((c=d(b.stream)).concat.apply(c,d(a))):b.config.appendHevcType==j.APPEND_TYPE_FRAME&&(b.frameList.push(a),b.vCachePTS=Math.max(a.pts,b.vCachePTS))},getCachePTS:function(){return Math.max(b.vCachePTS,b.aCachePTS)},endAudio:function(){0==b.config.audioNone&&b.audio.stop()},cleanSample:function(){0==b.config.audioNone&&b.audio.cleanQueue()},cleanVideoQueue:function(){b.config.appendHevcType==j.APPEND_TYPE_STREAM?b.stream=new Uint8Array:b.config.appendHevcType==j.APPEND_TYPE_FRAME&&(b.frameList=[],b.frameList.length=0)},cleanCacheYUV:function(){b.cacheYuvBuf.cleanPipeline()},pause:function(){b.loop&&window.clearInterval(b.loop),b.loop=null,0==b.config.audioNone&&b.audio.pause(),b.isPlaying=!1,b.isCaching===j.CACHE_WITH_PLAY_SIGN&&(b.isCaching=j.CACHE_WITH_NOPLAY_SIGN)},checkFinished:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.PLAYER_MODE_VOD)==j.PLAYER_MODE_VOD&&b.cacheYuvBuf.yuvCache.length<=0&&(b.videoPTS.toFixed(1)>=(b.durationMs-b.config.frameDurMs)/1e3||b.noCacheFrame>=10)&&(null!=b.onPlayingFinish&&(j.PLAYER_MODE_VOD,b.frameList.length,b.cacheYuvBuf.yuvCache.length,b.videoPTS.toFixed(1),b.durationMs,b.config.frameDurMs,b.noCacheFrame,b.onPlayingFinish()),!0)},clearAllCache:function(){b.nowPacket=null,b.vCachePTS=0,b.aCachePTS=0,b.cleanSample(),b.cleanVideoQueue(),b.cleanCacheYUV()},seek:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=b.isPlaying;b.pause(),b.stopCacheThread(),b.clearAllCache(),a&&a(),b.isNewSeek=!0,b.flushDecoder=1,b.videoPTS=parseInt(c.seekTime);var e={seekPos:c.seekTime||-1,mode:c.mode||j.PLAYER_MODE_VOD,accurateSeek:c.accurateSeek||!0,seekEvent:c.seekEvent||!0,realPlay:d};b.cacheThread(),b.play(e)},getNalu1Packet:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=null,d=-1;if(b.config.appendHevcType==j.APPEND_TYPE_STREAM)c=b.nextNalu();else{if(b.config.appendHevcType!=j.APPEND_TYPE_FRAME)return null;var e=b.frameList.shift();if(!e)return null;c=e.data,d=e.pts,a&&(b.videoPTS=d)}return{nalBuf:c,pts:d}},decodeNalu1Frame:function(a,c){var d=Module._malloc(a.length);Module.HEAP8.set(a,d);var e=parseInt(1e3*c);return Module.cwrap("decodeCodecContext","number",["number","number","number","number","number"])(b.vcodecerPtr,d,a.length,e,b.flushDecoder),b.flushDecoder=0,Module._free(d),!1},cacheThread:function(){b.cacheLoop=window.setInterval(function(){if(b.cacheYuvBuf.getState()!=CACHE_APPEND_STATUS_CODE.FULL){var a=b.getNalu1Packet(!1);if(null!=a){var c=a.nalBuf,d=a.pts;b.decodeNalu1Frame(c,d,!0)}}},10)},stopCacheThread:function(){null!==b.cacheLoop&&(window.clearInterval(b.cacheLoop),b.cacheLoop=null)},loadCache:function(){if(!(b.frameList.length<=3)){var a=b.isPlaying;if(b.cacheYuvBuf.yuvCache.length<=3){b.pause(),null!=b.onLoadCache&&b.onLoadCache(),b.isCaching=a?j.CACHE_WITH_PLAY_SIGN:j.CACHE_WITH_NOPLAY_SIGN;var c=b.frameList.length>30?30:b.frameList.length;null===b.cacheInterval&&(b.cacheInterval=window.setInterval(function(){b.cacheYuvBuf.yuvCache.length>=c&&(null!=b.onLoadCacheFinshed&&b.onLoadCacheFinshed(),window.clearInterval(b.cacheInterval),b.cacheInterval=null,b.isCaching===j.CACHE_WITH_PLAY_SIGN&&b.play(b.playParams),b.isCaching=j.CACHE_NO_LOADCACHE)},40))}}},playFunc:function(){var a=!1;if(b.playParams.seekEvent||e.GetMsTime()-b.calcuteStartTime>=b.frameTime-b.preCostTime){a=!0;var c=!0;if(b.calcuteStartTime=e.GetMsTime(),b.config.audioNone)b.playFrameYUV(c,b.playParams.accurateSeek);else{b.fix_poc_err_skip>0&&(b.fix_poc_err_skip--,c=!1);var d=b.videoPTS-b.audio.getAlignVPTS();if(d>0)return void(b.playParams.seekEvent&&!b.config.audioNone&&b.audio.setVoice(0));if(c){if(!(c=-1*d<=1*b.frameTimeSec)){for(var f=parseInt(d/b.frameTimeSec),g=0;g<f;g++)b.playFrameYUV(!1,b.playParams.accurateSeek);b.playFrameYUV(!0,b.playParams.accurateSeek)}b.playFrameYUV(c,b.playParams.accurateSeek)}}}return b.playParams.seekEvent&&(b.playParams.seekEvent=!1,b.onSeekFinish(),b.isPlaying||(b.playFrameYUV(!0,b.playParams.accurateSeek),b.pause()),b.config.audioNone||b.audio.setVoice(b.realVolume)),b.onPlayingTime&&b.onPlayingTime(b.videoPTS),b.checkFinished(b.playParams.mode),a},play:function(a){if(b.playParams=a,b.calcuteStartTime=e.GetMsTime(),b.noCacheFrame=0,b.isPlaying=b.playParams.realPlay,!0===b.config.audioNone&&b.playParams.mode==j.PLAYER_MODE_NOTIME_LIVE){b.liveStartMs=e.GetMsTime(),b.frameTime=Math.floor(1e3/b.config.fps),b.frameTimeSec=b.frameTime/1e3;var c=0;b.loop=window.setInterval(function(){(e.GetMsTime()-b.liveStartMs)/b.frameTime>=c&&(b.playFrameYUV(!0,b.playParams.accurateSeek),c+=1)},1)}else b.videoPTS>=b.playParams.seekPos&&!b.isNewSeek||0===b.playParams.seekPos||0===b.playParams.seekPos?(b.frameTime=1e3/b.config.fps,b.frameTimeSec=b.frameTime/1e3,0==b.config.audioNone&&b.audio.play(),b.realVolume=b.config.audioNone?0:b.audio.voice,b.playParams.seekEvent&&(b.fix_poc_err_skip=10),b.loop=window.setInterval(function(){var a=e.GetMsTime();b.playFunc(),b.preCostTime=e.GetMsTime()-a},1)):(b.loop=window.setInterval(function(){b.playFrameYUV(!1,b.playParams.accurateSeek),b.checkFinished(b.playParams.mode)?(window.clearInterval(b.loop),b.loop=null):b.videoPTS>=b.playParams.seekPos&&(window.clearInterval(b.loop),b.loop=null,b.play(b.playParams))},1),b.isNewSeek=!1)},stop:function(){b.release(),Module.cwrap("initializeDecoder","number",["number"])(b.vcodecerPtr),b.stream=new Uint8Array},release:function(){return b.endAudio(),b.cacheLoop&&window.clearInterval(b.cacheLoop),b.cacheLoop=null,b.loop&&window.clearInterval(b.loop),b.loop=null,b.pause(),null!==b.videoCallback&&Module.removeFunction(b.videoCallback),b.videoCallback=null,Module.cwrap("release","number",["number"])(b.vcodecerPtr),b.stream=null,b.frameList.length=0,b.durationMs=-1,b.videoPTS=0,b.isPlaying=!1,!0},nextNalu:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(b.stream.length<=4)return!1;for(var c=-1,d=0;d<b.stream.length;d++){if(d+5>=b.stream.length){if(-1==c)return!1;var e=b.stream.subarray(c);return b.stream=new Uint8Array,e}var f="0 0 1"==b.stream.slice(0,3).join(" "),g="0 0 0 1"==b.stream.slice(0,4).join(" ");if(f||g){if(-1==c)c=d;else{if(a<=1){var h=b.stream.subarray(c,d);return b.stream=b.stream.subarray(d),h}a-=1}d+=3}}return!1},decodeSendPacket:function(a){var c=Module._malloc(a.length);Module.HEAP8.set(a,c);var d=Module.cwrap("decodeSendPacket","number",["number","number","number"])(b.vcodecerPtr,c,a.length);return Module._free(c),d},decodeRecvFrame:function(){return Module.cwrap("decodeRecv","number",["number"])(b.vcodecerPtr)},playFrameYUV:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=b.cacheYuvBuf.vYuv();if(null==d)return b.noCacheFrame+=1,a&&!b.playParams.seekEvent&&b.loadCache(),!1;b.noCacheFrame=0;var e=d.pts;return b.videoPTS=e,(!a&&c||a)&&a&&b.drawImage(d.width,d.height,d.imageBufferY,d.imageBufferB,d.imageBufferR),a&&!b.playParams.seekEvent&&b.isPlaying&&b.loadCache(),!0},drawImage:function(a,c,d,e,f){if(b.canvas.width===a&&b.canvas.height==c||(b.canvas.width=a,b.canvas.height=c),b.showScreen&&null!=b.onRender)b.onRender(a,c,d,e,f);else{b.isCheckDisplay||b.checkDisplaySize(a,c);var g=a*c,h=a/2*(c/2),j=new Uint8Array(g+2*h);j.set(d,0),j.set(e,g),j.set(f,g+h),i.renderFrame(b.yuv,d,e,f,a,c)}},debugYUV:function(a){b.debugYUVSwitch=!0,b.debugID=a},checkDisplaySize:function(a,c){var d=a/b.config.width>c/b.config.height,e=(b.config.width/a).toFixed(2),f=(b.config.height/c).toFixed(2),g=d?e:f,h=b.config.fixed,i=h?b.config.width:parseInt(a*g),j=h?b.config.height:parseInt(c*g);if(b.canvas.offsetWidth!=i||b.canvas.offsetHeight!=j){var k=parseInt((b.canvasBox.offsetHeight-j)/2),l=parseInt((b.canvasBox.offsetWidth-i)/2);b.canvas.style.marginTop=k+"px",b.canvas.style.marginLeft=l+"px",b.canvas.style.width=i+"px",b.canvas.style.height=j+"px"}return b.isCheckDisplay=!0,[i,j]},makeWasm:function(){null!=b.config.token&&(b.vcodecerPtr=Module.cwrap("registerPlayer","number",["string","string"])(b.config.token,k.PLAYER_VERSION),b.videoCallback=Module.addFunction(function(a,c,d,e,f,g,i,j,k){var l=Module.HEAPU8.subarray(a,a+e*j),m=Module.HEAPU8.subarray(c,c+f*j/2),n=Module.HEAPU8.subarray(d,d+g*j/2),o=new Uint8Array(l),p=new Uint8Array(m),q=new Uint8Array(n),r=1*k/1e3,s=new h.CacheYuvStruct(r,e,j,o,p,q);b.cacheYuvBuf.appendCacheByCacheYuv(s)}),Module.cwrap("setCodecType","number",["number","number","number"])(b.vcodecerPtr,b.config.videoCodec,b.videoCallback),Module.cwrap("initMissile","number",["number"])(b.vcodecerPtr),Module.cwrap("initializeDecoder","number",["number"])(b.vcodecerPtr))},makeIt:function(){var a=document.querySelector("div#"+b.config.playerId),c=document.createElement("canvas");c.style.width=a.clientWidth+"px",c.style.height=a.clientHeight+"px",c.style.top="0px",c.style.left="0px",a.appendChild(c),b.canvasBox=a,b.canvas=c,b.yuv=i.setupCanvas(c,{preserveDrawingBuffer:!1}),0==b.config.audioNone&&(b.audio=f({sampleRate:b.config.sampleRate,appendType:b.config.appendHevcType})),b.isPlayLoadingFinish=1}};return b.makeWasm(),b.makeIt(),b.cacheThread(),b}},{"../consts":52,"../render-engine/webgl-420p":76,"../version":79,"./audio-core":53,"./av-common":55,"./cache":58,"./cacheYuv":59}],63:[function(a,b,c){var d=a("./bufferFrame");b.exports=function(){var a={videoBuffer:[],audioBuffer:[],idrIdxBuffer:[],appendFrame:function(b,c){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],f=arguments.length>3&&void 0!==arguments[3]&&arguments[3],g=new d.BufferFrame(b,f,c,e),h=parseInt(b);return e?(a.videoBuffer.length-1>=h?a.videoBuffer[h].push(g):a.videoBuffer.push([g]),f&&!a.idrIdxBuffer.includes(b)&&a.idrIdxBuffer.push(b)):a.audioBuffer.length-1>=h&&null!=a.audioBuffer[h]&&null!=a.audioBuffer[h]?a.audioBuffer[h]&&a.audioBuffer[h].push(g):a.audioBuffer.push([g]),!0},appendFrameWithDts:function(b,c,e){var f=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],g=arguments.length>4&&void 0!==arguments[4]&&arguments[4],h=d.ConstructWithDts(b,c,g,e,f),i=parseInt(c);return f?(a.videoBuffer.length-1>=i?a.videoBuffer[i].push(h):a.videoBuffer.push([h]),
g&&!a.idrIdxBuffer.includes(c)&&a.idrIdxBuffer.push(c)):a.audioBuffer.length-1>=i&&null!=a.audioBuffer[i]&&null!=a.audioBuffer[i]?a.audioBuffer[i]&&a.audioBuffer[i].push(h):a.audioBuffer.push([h]),!0},appendFrameByBufferFrame:function(b){var c=b.pts,d=parseInt(c);return b.video?(a.videoBuffer.length-1>=d?a.videoBuffer[d].push(b):a.videoBuffer.push([b]),isKey&&!a.idrIdxBuffer.includes(c)&&a.idrIdxBuffer.push(c)):a.audioBuffer.length-1>=d?a.audioBuffer[d].push(b):a.audioBuffer.push([b]),!0},cleanPipeline:function(){a.videoBuffer.length=0,a.audioBuffer.length=0},vFrame:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(!(b<0||b>a.videoBuffer.length-1))return a.videoBuffer[b]},aFrame:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(!(b<0||b>a.audioBuffer.length-1))return a.audioBuffer[b]},seekIDR:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(a.idrIdxBuffer,a.videoBuffer,b<0)return null;if(a.idrIdxBuffer.includes(b))return b;for(var c=0;c<a.idrIdxBuffer.length;c++)if(c===a.idrIdxBuffer.length-1||a.idrIdxBuffer[c]<b&&a.idrIdxBuffer[c+1]>b||0===c&&a.idrIdxBuffer[c]>=b){for(var d=1;d>=0;d--){var e=c-d;if(e>=0)return a.idrIdxBuffer[e],a.idrIdxBuffer[e]}return a.idrIdxBuffer[c],j,a.idrIdxBuffer[c]}}};return a}},{"./bufferFrame":64}],64:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=function(){function a(b,c,d,e){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.pts=b,this.dts=b,this.isKey=c,this.data=d,this.video=e}var b,c;return b=a,(c=[{key:"setFrame",value:function(a,b,c,d){this.pts=a,this.isKey=b,this.data=c,this.video=d}}])&&d(b.prototype,c),a}();c.BufferFrame=e,c.ConstructWithDts=function(a,b,c,d,f){var g=new e(a,c,d,f);return g.dts=b,g}},{}],65:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=a("./m3u8base"),f=a("./mpegts/mpeg.js"),g=a("./bufferFrame"),h=a("./buffer"),i=a("../decoder/hevc-imp"),j=a("../consts"),k=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.hls=new e.M3u8Base,this.mpegTsObj=new f.MPEG_JS({}),this.mpegTsWasmState=!1,this.mpegTsWasmRetryLoadTimes=0,this.tsList=[],this.vStartTime=0,this.aStartTime=0,this.lockWait={state:!1,lockMember:{dur:0}},this.timerFeed=null,this.timerTsWasm=null,this.seekPos=-1,this.vPreFramePTS=0,this.aPreFramePTS=0,this.audioNone=!1,this.isHevcParam=!1,this.vCodec=!1,this.aCodec=!1,this.aChannel=0,this.durationMs=-1,this.bufObject=h(),this.fps=-1,this.sampleRate=-1,this.size={width:-1,height:-1},this.mediaInfo=null,this.extensionInfo=null,this.onReadyOBJ=null,this.onFinished=null,this.onDemuxed=null,this.onSamples=null,this.onCacheProcess=null}var b,c;return b=a,(c=[{key:"getCachePTS",value:function(){return Math.max(this.vPreFramePTS,this.aPreFramePTS)}},{key:"demux",value:function(a){var b=this,c=this;this.vPreFramePTS=0,this.aPreFramePTS=0,this.hls.onTransportStream=function(a,b){c.lockWait.state,c.tsList.length,c.tsList.push({streamURI:a,streamDur:b})},this.hls.onFinished=function(a){a.type==j.PLAYER_IN_TYPE_M3U8_VOD?c.durationMs=1e3*a.duration:c.durationMs=-1,null!=c.onFinished&&c.onFinished(c.onReadyOBJ,a)},this.mpegTsObj.onDemuxedFailed=function(a,b){console.error("onDemuxedFailed: ",a,b),c.lockWait.state=!1},this.mpegTsObj.onDemuxed=function(){null==c.mediaInfo&&(c.mediaInfo=c.mpegTsObj.readMediaInfo(),c.mediaInfo,c.isHevcParam=c.mpegTsObj.isHEVC(),c.vCodec=c.mpegTsObj.vCodec,c.aCodec=c.mediaInfo.aCodec,c.aChannel=c.mediaInfo.sampleChannel,c.fps=c.mediaInfo.vFps,c.sampleRate=c.mediaInfo.sampleRate,(null===c.aCodec||""===c.aCodec||c.aChannel<=0)&&(c.audioNone=!0)),null==c.extensionInfo&&(c.extensionInfo=c.mpegTsObj.readExtensionInfo(),c.extensionInfo.vWidth>0&&c.extensionInfo.vHeight>0&&(c.size.width=c.extensionInfo.vWidth,c.size.height=c.extensionInfo.vHeight)),c.mediaInfo.duration,null!=c.onDemuxed&&c.onDemuxed(c.onReadyOBJ);for(var a=!1;void 0!==c.mpegTsObj&&null!==c.mpegTsObj;){var d=c.mpegTsObj.readPacket();if(d.size<=0)break;var e=d.dtime>0?d.dtime:d.ptime;if(!(e<0)){if(0==d.type){e<=c.vPreFramePTS&&(a=!0);var f=i.PACK_NALU(d.layer),h=1==d.keyframe,j=1==a?e+c.vStartTime:e,k=new g.BufferFrame(j,h,f,!0);c.bufObject.appendFrame(k.pts,k.data,!0,k.isKey),c.vPreFramePTS=j,null!=c.onSamples&&c.onSamples(c.onReadyOBJ,k)}else if(e<=c.aPreFramePTS&&(a=!0),"aac"==c.mediaInfo.aCodec)for(var l=d.data,m=0;m<l.length;m++){var n=l[m],o=1==a?n.ptime+c.vStartTime:e,p=new g.BufferFrame(o,!0,n.data,!1);c.bufObject.appendFrameByBufferFrame(p),c.aPreFramePTS=o,null!=c.onSamples&&c.onSamples(c.onReadyOBJ,p)}else{var q=1==a?e+c.vStartTime:e,r=new g.BufferFrame(q,!0,d.data,!1);c.bufObject.appendFrameByBufferFrame(r),c.aPreFramePTS=q,null!=c.onSamples&&c.onSamples(c.onReadyOBJ,r)}b.onCacheProcess&&b.onCacheProcess(b.getCachePTS())}}c.vStartTime+=parseFloat(c.lockWait.lockMember.dur),c.aStartTime+=parseFloat(c.lockWait.lockMember.dur),c.vStartTime,c.lockWait.state=!1},this.mpegTsObj.onReady=function(){c._onTsReady(a)},c.mpegTsObj.initDemuxer(),this.timerTsWasm=window.setInterval(function(){c.mpegTsWasmState?(window.clearInterval(c.timerTsWasm),c.timerTsWasm=null):c.mpegTsWasmRetryLoadTimes>=3?(c._onTsReady(a),window.clearInterval(c.timerTsWasm),c.timerTsWasm=null):(c.mpegTsWasmRetryLoadTimes+=1,c.mpegTsObj.initDemuxer())},3e3)}},{key:"_onTsReady",value:function(a){var b=this;b.hls.fetchM3u8(a),b.mpegTsWasmState=!0,b.timerFeed=window.setInterval(function(){if(b.tsList.length>0&&0==b.lockWait.state)try{var a=b.tsList.shift();if(null!=a){var c=a.streamURI,d=a.streamDur;b.lockWait.state=!0,b.lockWait.lockMember.dur=d,b.mpegTsObj.isLive=b.hls.isLive(),b.mpegTsObj.demuxURL(c)}else console.error("_onTsReady need wait ")}catch(a){console.error("onTsReady ERROR:",a),b.lockWait.state=!1}},50)}},{key:"release",value:function(){this.hls&&this.hls.release(),this.hls=null,this.timerFeed&&window.clearInterval(this.timerFeed),this.timerFeed=null,this.timerTsWasm&&window.clearInterval(this.timerTsWasm),this.timerTsWasm=null}},{key:"bindReady",value:function(a){this.onReadyOBJ=a}},{key:"popBuffer",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return b<0?null:1===a?b+1>this.bufObject.videoBuffer.length?null:this.bufObject.vFrame(b):2===a?b+1>this.bufObject.audioBuffer.length?null:this.bufObject.aFrame(b):void 0}},{key:"getVLen",value:function(){return this.bufObject.videoBuffer.length}},{key:"getALen",value:function(){return this.bufObject.audioBuffer.length}},{key:"getLastIdx",value:function(){return this.bufObject.videoBuffer.length-1}},{key:"getALastIdx",value:function(){return this.bufObject.audioBuffer.length-1}},{key:"getACodec",value:function(){return this.aCodec}},{key:"getVCodec",value:function(){return this.vCodec}},{key:"getDurationMs",value:function(){return this.durationMs}},{key:"getFPS",value:function(){return this.fps}},{key:"getSampleRate",value:function(){return this.sampleRate}},{key:"getSampleChannel",value:function(){return this.aChannel}},{key:"getSize",value:function(){return this.size}},{key:"seek",value:function(a){if(a>=0){var b=this.bufObject.seekIDR(a);this.seekPos=b}}}])&&d(b.prototype,c),a}();c.M3u8=k},{"../consts":52,"../decoder/hevc-imp":61,"./buffer":63,"./bufferFrame":64,"./m3u8base":66,"./mpegts/mpeg.js":70}],66:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=a("../consts"),f=[/#EXT-X-PROGRAM-DATE-TIME.+\n/g],g={lineDelimiter:/\r?\n/,extensionHeader:"#EXTM3U",tagPrefix:"#EXT",segmentPrefix:"#EXTINF",segmentParse:/^#EXTINF: *([0-9.]+)(, *(.+?)?)?$/,tagParse:/^#EXT-X-([A-Z-]+)(:(.+))?$/,version:"VERSION",allowCache:"ALLOW-CACHE",combined:"COMBINED",endList:"ENDLIST",targetDuration:"TARGETDURATION",mediaSequence:"MEDIA-SEQUENCE",discontinuity:"DISCONTINUITY",streamInf:"STREAM-INF",isComment:function(a){return a&&"#"===a[0]&&!a.startsWith(g.tagPrefix)},isBlank:function(a){return""===a},canStrip:function(a){return g.isBlank(a)||g.isComment(a)},defaultMinDur:99999,hlsSliceLimit:100},h=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.initState=!0,this.controller=new AbortController,this._slices=[],this._type=e.PLAYER_IN_TYPE_M3U8_LIVE,this._preURI="",this.duration=-1,this.onTransportStream=null,this.onFinished=null}var b,c;return b=a,(c=[{key:"isLive",value:function(){return this._type===e.PLAYER_IN_TYPE_M3U8_LIVE?1:0}},{key:"release",value:function(){this.initState=!1}},{key:"fetchM3u8",value:function(a){var b=this,c=this;this.initState&&fetch(a).then(function(a){return a.text()}).then(function(b){return 1==c._uriParse(a)?c._m3u8Parse(b):null}).then(function(d){null!=d&&!1!==d&&!0!==d&&b._type==e.PLAYER_IN_TYPE_M3U8_LIVE&&setTimeout(function(){c.fetchM3u8(a)},500*d)})["catch"](function(b){console.error("fetchM3u8 ERROR fetch ERROR ==> ",b),setTimeout(function(){c.fetchM3u8(a)},500)})}},{key:"_uriParse",value:function(a){this._preURI="";var b=a.split("//"),c=null,d=null;if(b.length<1)return!1;b.length>1?(c=b[0],d=b[1].split("/"),this._preURI=c+"//"):d=b[0].split("/");for(var e=0;e<d.length-1;e++)this._preURI+=d[e]+"/";return!0}},{key:"_m3u8Parse",value:function(a){for(var b=a,c=0;c<f.length;c++)b=a.replace(f[c],"");for(var d=b.split(g.lineDelimiter),h=g.defaultMinDur,i="",j=0;j<d.length;j++){var k=d[j];if(!(k.length<1)){if(null!=i&&""!==i)switch(i){case g.version:case g.mediaSequence:case g.allowCache:case g.discontinuity:case g.targetDuration:case g.combined:break;case g.streamInf:return this.fetchM3u8(k),null}var l=this._readTag(k);if(null!=l)switch(i=l.key,l.key){case g.version:case g.mediaSequence:case g.allowCache:case g.discontinuity:case g.targetDuration:case g.combined:case g.streamInf:break;case g.endList:if(this._type=e.PLAYER_IN_TYPE_M3U8_VOD,null!=this.onFinished){var m={type:this._type,duration:this.duration};this.onFinished(m)}return!0;default:l.key}var n=g.segmentParse.exec(k);if(null!=n){var o=n[1];this.duration+=parseFloat(n[1]),h>o&&(h=o);var p=d[j+=1],q=null;q=p.indexOf("http")>=0?p:this._preURI+p,this._slices.indexOf(q)<0&&(this._slices.push(q),this._slices[this._slices.length-1],null!=this.onTransportStream&&this.onTransportStream(q,o))}}}if(this._slices.length>g.hlsSliceLimit&&this._type==e.PLAYER_IN_TYPE_M3U8_LIVE&&(this._slices=this._slices.slice(-1*g.hlsSliceLimit)),null!=this.onFinished){var r={type:this._type,duration:-1};this.onFinished(r)}return h}},{key:"_readTag",value:function(a){var b=g.tagParse.exec(a);return null!==b?{key:b[1],value:b[3]}:null}}])&&d(b.prototype,c),a}();c.M3u8Base=h},{"../consts":52}],67:[function(a,b,c){function d(){}var e=a("mp4box"),f=a("../decoder/hevc-header"),g=a("../decoder/hevc-imp"),h=a("./buffer"),i=a("../consts"),j={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12,Reserved:13,"frequency is written explictly":15},k=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].toString(16));return b};d.prototype.setStartCode=function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=null;return b?((c=a)[0]=f.DEFINE_STARTCODE[0],c[1]=f.DEFINE_STARTCODE[1],c[2]=f.DEFINE_STARTCODE[2],c[3]=f.DEFINE_STARTCODE[3]):((c=new Uint8Array(f.DEFINE_STARTCODE.length+a.length)).set(f.DEFINE_STARTCODE,0),c.set(a,f.DEFINE_STARTCODE.length)),c},d.prototype.setAACAdts=function(a){var b=null,c=this.aacProfile,d=j[this.sampleRate],e=new Uint8Array(7),f=e.length+a.length;return e[0]=255,e[1]=241,e[2]=(c-1<<6)+(d<<2)+0,e[3]=128+(f>>11),e[4]=(2047&f)>>3,e[5]=31+((7&f)<<5),e[6]=252,(b=new Uint8Array(f)).set(e,0),b.set(a,e.length),b},d.prototype.demux=function(){var a=this;a.seekPos=-1,a.mp4boxfile=e.createFile(),a.movieInfo=null,a.videoCodec=null,a.durationMs=-1,a.fps=-1,a.sampleRate=-1,a.aacProfile=2,a.size={width:-1,height:-1},a.bufObject=h(),a.audioNone=!1,a.naluHeader={vps:null,sps:null,pps:null,sei:null},a.mp4boxfile.onError=function(a){},this.mp4boxfile.onReady=function(b){for(var c in a.movieInfo=b,b.tracks)"VideoHandler"!==b.tracks[c].name&&"video"!==b.tracks[c].type||(b.tracks[c].codec,b.tracks[c].codec.indexOf("hev")>=0||b.tracks[c].codec.indexOf("hvc")>=0?a.videoCodec=i.CODEC_H265:b.tracks[c].codec.indexOf("avc")>=0&&(a.videoCodec=i.CODEC_H264));var d=-1;if(d=b.videoTracks[0].samples_duration/b.videoTracks[0].timescale,a.durationMs=1e3*d,a.fps=b.videoTracks[0].nb_samples/d,a.seekDiffTime=1/a.fps,a.size.width=b.videoTracks[0].track_width,a.size.height=b.videoTracks[0].track_height,b.audioTracks.length>0){a.sampleRate=b.audioTracks[0].audio.sample_rate;var e=b.audioTracks[0].codec.split(".");a.aacProfile=e[e.length-1]}else a.audioNone=!0;null!=a.onMp4BoxReady&&a.onMp4BoxReady(a.videoCodec),a.videoCodec===i.CODEC_H265?(a.initializeAllSourceBuffers(),a.mp4boxfile.start()):(a.videoCodec,i.CODEC_H264)},a.mp4boxfile.onSamples=function(b,c,d){var e=window.setInterval(function(){for(var c=0;c<d.length;c++){var h=d[c],j=h.data,l=null;if(!(null==j||j.length<4)&&j){var m=h.dts/h.timescale;if(1===b){var n=null,o=h.is_sync;if(a.videoCodec===i.CODEC_H265){n=h.description.hvcC;var p=g.GET_NALU_TYPE(j[4]);o||(o=p==f.DEFINE_KEY_FRAME||h.is_sync)}else a.videoCodec===i.CODEC_H264&&(n=h.description.avcC);if(o){if(a.videoCodec==i.CODEC_H265){var q=n.nalu_arrays;a.naluHeader.vps=a.setStartCode(q[0][0].data,!1),a.naluHeader.sps=a.setStartCode(q[1][0].data,!1),a.naluHeader.pps=a.setStartCode(q[2][0].data,!1),q.length>3?a.naluHeader.sei=a.setStartCode(q[3][0].data,!1):a.naluHeader.sei=new Uint8Array,a.naluHeader}else a.videoCodec==i.CODEC_H264&&(a.naluHeader.vps=new Uint8Array,a.naluHeader.sps=a.setStartCode(n.SPS[0].nalu,!1),a.naluHeader.pps=a.setStartCode(n.PPS[0].nalu,!1),a.naluHeader.sei=new Uint8Array);j[4].toString(16),a.naluHeader.vps[4].toString(16),k(a.naluHeader.vps),k(j);var r=a.setStartCode(j.subarray(0,a.naluHeader.vps.length),!0);if(k(r),j[4]===a.naluHeader.vps[4]){var s=a.naluHeader.vps.length+4,t=a.naluHeader.vps.length+a.naluHeader.sps.length+4,u=a.naluHeader.vps.length+a.naluHeader.sps.length+a.naluHeader.pps.length+4;if(a.naluHeader.sei.length<=0&&a.naluHeader.sps.length>0&&j[s]===a.naluHeader.sps[4]&&a.naluHeader.pps.length>0&&j[t]===a.naluHeader.pps[4]&&78===j[u]){j[a.naluHeader.vps.length+4],a.naluHeader.sps[4],j[a.naluHeader.vps.length+a.naluHeader.sps.length+4],a.naluHeader.pps[4],j[a.naluHeader.vps.length+a.naluHeader.sps.length+a.naluHeader.pps.length+4];for(var v=0,w=0;w<j.length;w++)if(j[w]===f.SOURCE_CODE_SEI_END&&g.GET_NALU_TYPE(j[w+5])===f.DEFINE_KEY_FRAME){v=w;break}j[3]=1,j[s-1]=1,j[t-1]=1,j[u-1]=1,j[2]=0,j[s-2]=0,j[t-2]=0,j[u-2]=0,j[1]=0,j[s-3]=0,j[t-3]=0,j[u-3]=0,j[v+1]=0,j[v+2]=0,j[v+3]=0,j[v+4]=1,a.naluHeader.vps=null,a.naluHeader.sps=null,a.naluHeader.pps=null,a.naluHeader.vps=new Uint8Array,a.naluHeader.sps=new Uint8Array,a.naluHeader.pps=new Uint8Array}else j[4].toString(16),a.naluHeader.vps[4].toString(16),k(a.naluHeader.vps),k(j),j=j.subarray(a.naluHeader.vps.length+a.naluHeader.sps.length+a.naluHeader.pps.length+a.naluHeader.sei.length)}else if(a.naluHeader.sei.length>4&&j[4]===a.naluHeader.sei[4]){var x=j.subarray(0,10),y=new Uint8Array(a.naluHeader.vps.length+x.length);y.set(x,0),y.set(a.naluHeader.vps,x.length),y[3]=1,a.naluHeader.vps=null,a.naluHeader.vps=new Uint8Array(y),y=null,x=null,(j=j.subarray(10))[4],a.naluHeader.vps[4],a.naluHeader.vps}else if(0===a.naluHeader.sei.length&&78===j[4]){j=a.setStartCode(j,!0);for(var z=0,A=0;A<j.length;A++)if(j[A]===f.SOURCE_CODE_SEI_END&&g.GET_NALU_TYPE(j[A+5])===f.DEFINE_KEY_FRAME){z=A;break}a.naluHeader.sei=j.subarray(0,z+1),j=new Uint8Array(j.subarray(z+1)),a.naluHeader.sei}k(a.naluHeader.vps),k(a.naluHeader.sps),k(a.naluHeader.pps),k(a.naluHeader.sei),k(j),(l=new Uint8Array(a.naluHeader.vps.length+a.naluHeader.sps.length+a.naluHeader.pps.length+a.naluHeader.sei.length+j.length)).set(a.naluHeader.vps,0),l.set(a.naluHeader.sps,a.naluHeader.vps.length),l.set(a.naluHeader.pps,a.naluHeader.vps.length+a.naluHeader.sps.length),l.set(a.naluHeader.sei,a.naluHeader.vps.length+a.naluHeader.sps.length+a.naluHeader.pps.length),l.set(a.setStartCode(j,!0),a.naluHeader.vps.length+a.naluHeader.sps.length+a.naluHeader.pps.length+a.naluHeader.sei.length)}else l=a.setStartCode(j,!0);a.bufObject.appendFrame(m,l,!0,o)}else 2==b&&(l=a.setAACAdts(j),a.bufObject.appendFrame(m,l,!1,!0))}}window.clearInterval(e),e=null},0)}},d.prototype.appendBufferData=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return a.fileStart=b,this.mp4boxfile.appendBuffer(a)},d.prototype.finishBuffer=function(){this.mp4boxfile.flush()},d.prototype.play=function(){},d.prototype.getVideoCoder=function(){return this.videoCodec},d.prototype.getDurationMs=function(){return this.durationMs},d.prototype.getFPS=function(){return this.fps},d.prototype.getSampleRate=function(){return this.sampleRate},d.prototype.getSize=function(){return this.size},d.prototype.seek=function(a){if(a>=0){var b=this.bufObject.seekIDR(a);this.seekPos=b}},d.prototype.popBuffer=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return b<0?null:1==a?this.bufObject.vFrame(b):2==a?this.bufObject.aFrame(b):void 0},d.prototype.addBuffer=function(a){var b=a.id;this.mp4boxfile.setExtractionOptions(b)},d.prototype.initializeAllSourceBuffers=function(){if(this.movieInfo){for(var a=this.movieInfo,b=0;b<a.tracks.length;b++){var c=a.tracks[b];this.addBuffer(c)}this.initializeSourceBuffers()}},d.prototype.onInitAppended=function(a){var b=a.target;"open"===b.ms.readyState&&(b.sampleNum=0,b.removeEventListener("updateend",this.onInitAppended),0===--b.ms.pendingInits&&this.mp4boxfile.start())},d.prototype.initializeSourceBuffers=function(){for(var a=this.mp4boxfile.initializeSegmentation(),b=0;b<a.length;b++){var c=a[b].user;0===b&&(c.ms.pendingInits=0),c.addEventListener("updateend",this.onInitAppended),c.appendBuffer(a[b].buffer),c.segmentIndex=0,c.ms.pendingInits++}},b.exports=d},{"../consts":52,"../decoder/hevc-header":60,"../decoder/hevc-imp":61,"./buffer":63,mp4box:40}],68:[function(a,b,c){b.exports={DEFAULT_SAMPLERATE:44100,DEFAULT_CHANNEL:1,H264AUD:[0,0,0,1,9,224],H265AUD:[0,0,0,1,70,1,80],DEF_AAC:"aac",DEF_MP3:"mp3",DEF_H265:"h265",DEF_HEVC:"hevc",DEF_H264:"h264",DEF_AVC:"avc",CODEC_OFFSET_TABLE:["hevc","h265","avc","h264","aac","mp3"]}},{}],69:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.sampleRate=b.sampleRate,this.frameDurMs=Math.floor(1024e3/this.sampleRate),this.frameDurSec=this.frameDurMs/1e3}var b,c;return b=a,(c=[{key:"updateConfig",value:function(a){this.sampleRate=a.sampleRate,this.frameDurMs=1024e3/this.sampleRate,this.frameDurSec=this.frameDurMs/1e3}},{key:"_getPktLen",value:function(a,b,c){return((3&a)<<11)+(b<<3)+((224&c)>>5)}},{key:"sliceAACFrames",value:function(a,b){for(var c=[],d=a,e=0;e<b.length-1;)if(255==b[e]&&b[e+1]>>4==15){var f=this._getPktLen(b[e+3],b[e+4],b[e+5]);if(f<=0)continue;var g=b.subarray(e,e+f),h=new Uint8Array(f);h.set(g,0),c.push({ptime:d,data:h}),d+=this.frameDurSec,e+=f}else e+=1;return c}}])&&d(b.prototype,c),a}();c.AACDecoder=e},{}],70:[function(a,b,d){(function(b){function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=a("./decoder/aac"),f=a("./consts"),g=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.configFormat={},this.isLive=0,this.mediaAttr={sampleRate:0,sampleChannel:0,vFps:0,vGop:0,vDuration:0,aDuration:0,duration:0,aCodec:"",vCodec:"",audioNone:!1},this.extensionInfo={vWidth:0,vHeight:0},this.controller=new AbortController,this.offsetDemux=null,this.wasmState=0,this.onReady=null,this.onDemuxed=null,this.onDemuxedFailed=null,this.aacDec=null}var d,g;return d=a,(g=[{key:"initDemuxer",value:function(){var a=this;return window.WebAssembly?(Module.run(),1===b.STATIC_MEM_wasmDecoderState?(a.wasmState=1,a.onReady()):(Module.onRuntimeInitialized=function(){null!=a.onReady&&0==a.wasmState&&(a.wasmState=1,a.onReady())},Module.postRun=function(){null!=a.onReady&&0==a.wasmState&&(a.wasmState=1,a.onReady())})):/iPhone|iPad/.test(window.navigator.userAgent),!0}},{key:"demuxURL",value:function(a){this._demuxerTsInit(a)}},{key:"demuxUint8Buf",value:function(a){this._demuxCore(a)}},{key:"_demuxerTsInit",value:function(a){var b=this,c=this.controller.signal;fetch(a,{signal:c}).then(function(a){return a.arrayBuffer()}).then(function(c){c.fileStart=0;var d=new Uint8Array(c);null!=d?b._demuxCore(d):console.error("demuxerTsInit ERROR fetch res is null ==> ",a),d=null})["catch"](function(c){console.error("demuxerTsInit ERROR fetch ERROR ==> ",c),b._releaseOffset(),b.onDemuxedFailed&&b.onDemuxedFailed(c,a)})}},{key:"_releaseOffset",value:function(){void 0!==this.offsetDemux&&null!==this.offsetDemux&&(Module._free(this.offsetDemux),this.offsetDemux=null)}},{key:"_demuxCore",value:function(a){if(this._releaseOffset(),this._refreshDemuxer(),!(a.length<=0)){this.offsetDemux=Module._malloc(a.length),Module.HEAP8.set(a,this.offsetDemux);var b=Module.cwrap("demuxBox","number",["number","number","number"])(this.offsetDemux,a.length,this.isLive);Module._free(this.offsetDemux),this.offsetDemux=null,b>=0&&(this._setMediaInfo(),this._setExtensionInfo(),null!=this.onDemuxed&&this.onDemuxed())}}},{key:"_setMediaInfo",value:function(){var a=Module.cwrap("getMediaInfo","number",[])(),b=Module.HEAPU32[a/4],c=Module.HEAPU32[a/4+1],d=Module.HEAPF64[a/8+1],g=Module.HEAPF64[a/8+1+1],h=Module.HEAPF64[a/8+1+1+1],i=Module.HEAPF64[a/8+1+1+1+1],j=Module.HEAPU32[a/4+2+2+2+2+2];this.mediaAttr.vFps=d,this.mediaAttr.vGop=j,this.mediaAttr.vDuration=g,this.mediaAttr.aDuration=h,this.mediaAttr.duration=i;var k=Module.cwrap("getAudioCodecID","number",[])();k>=0?(this.mediaAttr.aCodec=f.CODEC_OFFSET_TABLE[k],this.mediaAttr.sampleRate=b>0?b:f.DEFAULT_SAMPLERATE,this.mediaAttr.sampleChannel=c>=0?c:f.DEFAULT_CHANNEL):(this.mediaAttr.sampleRate=0,this.mediaAttr.sampleChannel=0,this.mediaAttr.audioNone=!0);var l=Module.cwrap("getVideoCodecID","number",[])();l>=0&&(this.mediaAttr.vCodec=f.CODEC_OFFSET_TABLE[l]),null==this.aacDec?this.aacDec=new e.AACDecoder(this.mediaAttr):this.aacDec.updateConfig(this.mediaAttr)}},{key:"_setExtensionInfo",value:function(){var a=Module.cwrap("getExtensionInfo","number",[])(),b=Module.HEAPU32[a/4],c=Module.HEAPU32[a/4+1];this.extensionInfo.vWidth=b,this.extensionInfo.vHeight=c}},{key:"readMediaInfo",value:function(){return this.mediaAttr}},{key:"readExtensionInfo",value:function(){return this.extensionInfo}},{key:"readAudioNone",value:function(){return this.mediaAttr.audioNone}},{key:"_readLayer",value:function(){var a={vps:null,sps:null,pps:null,sei:null},b={vlc:null},c=Module.cwrap("getSPSLen","number",[])(),d=Module.cwrap("getSPS","number",[])();if(!(c<0)){a.sps=new Uint8Array(c),a.sps.set(Module.HEAPU8.subarray(d,d+c),0);var e=Module.cwrap("getPPSLen","number",[])(),g=Module.cwrap("getPPS","number",[])();a.pps=new Uint8Array(e),a.pps.set(Module.HEAPU8.subarray(g,g+e),0);var h=Module.cwrap("getSEILen","number",[])(),i=Module.cwrap("getSEI","number",[])();a.sei=new Uint8Array(h),a.sei.set(Module.HEAPU8.subarray(i,i+h),0);var j=Module.cwrap("getVLCLen","number",[])(),k=Module.cwrap("getVLC","number",[])();if(b.vlc=new Uint8Array(j),b.vlc.set(Module.HEAPU8.subarray(k,k+j),0),this.mediaAttr.vCodec==f.DEF_HEVC||this.mediaAttr.vCodec==f.DEF_H265){var l=Module.cwrap("getVPSLen","number",[])(),m=Module.cwrap("getVPS","number",[])();a.vps=new Uint8Array(l),a.vps.set(Module.HEAPU8.subarray(m,m+l),0)}else this.mediaAttr.vCodec==f.DEF_AVC||(this.mediaAttr.vCodec,f.DEF_H264);return{nalu:a,vlc:b}}}},{key:"isHEVC",value:function(){return this.mediaAttr.vCodec==f.DEF_HEVC||this.mediaAttr.vCodec==f.DEF_H265}},{key:"readPacket",value:function(){var a=Module.cwrap("getPacket","number",[])(),b=Module.HEAPU32[a/4],c=Module.HEAPU32[a/4+1],d=Module.HEAPF64[a/8+1],e=Module.HEAPF64[a/8+1+1],g=Module.HEAPU32[a/4+1+1+2+2],h=Module.HEAPU32[a/4+1+1+2+2+1],i=Module.HEAPU8.subarray(h,h+c),j=this._readLayer();return{type:b,size:c,ptime:d,dtime:e,keyframe:g,src:i,data:1==b&&this.mediaAttr.aCodec==f.DEF_AAC?this.aacDec.sliceAACFrames(d,i):i,layer:j}}},{key:"_refreshDemuxer",value:function(){this.releaseTsDemuxer(),this._initDemuxer()}},{key:"_initDemuxer",value:function(){Module.cwrap("initTsMissile","number",[])(),Module.cwrap("initializeDemuxer","number",[])()}},{key:"releaseTsDemuxer",value:function(){Module.cwrap("exitTsMissile","number",[])()}}])&&c(d.prototype,g),a}();d.MPEG_JS=g}).call(this,void 0!==c?c:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./consts":68,"./decoder/aac":69}],71:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=a("./mpegts/mpeg.js"),f=a("./buffer"),g=a("../decoder/hevc-imp"),h=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.seekPos=-1,this.durationMs=-1,this.fps=-1,this.sampleRate=-1,this.aCodec="",this.vCodec="",this.size={width:-1,height:-1},this.bufObject=f(),this.mpegTsObj=null,this.bufObject=f(),this.mediaInfo={},this.extensionInfo={},this.onReady=null,this.onDemuxed=null,this.onReadyOBJ=null}var b,c;return b=a,(c=[{key:"initMPEG",value:function(){var a=this;this.mpegTsObj=new e.MPEG_JS({}),this.mpegTsObj.onDemuxed=function(){a.mediaInfo=a.mpegTsObj.readMediaInfo(),a.mediaInfo,a.extensionInfo=a.mpegTsObj.readExtensionInfo(),a.extensionInfo,a.vCodec=a.mediaInfo.vCodec,a.aCodec=a.mediaInfo.aCodec,a.durationMs=1e3*a.mediaInfo.duration,a.fps=a.mediaInfo.vFps,a.sampleRate=a.mediaInfo.sampleRate,a.extensionInfo.vWidth>0&&a.extensionInfo.vHeight>0&&(a.size.width=a.extensionInfo.vWidth,a.size.height=a.extensionInfo.vHeight);for(var b=null;!((b=a.mpegTsObj.readPacket()).size<=0);){var c=b.dtime;if(0==b.type){var d=g.PACK_NALU(b.layer),e=1==b.keyframe;a.bufObject.appendFrame(c,d,!0,e)}else if("aac"==a.mediaInfo.aCodec)for(var f=b.data,h=0;h<f.length;h++){var i=f[h];a.bufObject.appendFrame(i.ptime,i.data,!1,!0)}else a.bufObject.appendFrame(c,b.data,!1,!0)}a.bufObject.videoBuffer,a.bufObject.audioBuffer,null!=a.onDemuxed&&a.onDemuxed(a.onReadyOBJ)},this.mpegTsObj.onReady=function(){null!=a.onReady&&a.onReady(a.onReadyOBJ)},this.mpegTsObj.initDemuxer()}},{key:"bindReady",value:function(a){this.onReadyOBJ=a}},{key:"releaseTsDemuxer",value:function(){this.mpegTsObj&&this.mpegTsObj.releaseTsDemuxer(),this.mpegTsObj=null}},{key:"demux",value:function(a){this.mpegTsObj.demuxUint8Buf(a)}},{key:"popBuffer",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return b<0?null:1==a?this.bufObject.vFrame(b):2==a?this.bufObject.aFrame(b):void 0}},{key:"isHEVC",value:function(){return this.mpegTsObj.isHEVC()}},{key:"getACodec",value:function(){return this.aCodec}},{key:"getVCodec",value:function(){return this.vCodec}},{key:"getAudioNone",value:function(){return this.mpegTsObj.mediaAttr.audioNone}},{key:"getDurationMs",value:function(){return this.durationMs}},{key:"getFPS",value:function(){return this.fps}},{key:"getSampleRate",value:function(){return this.sampleRate}},{key:"getSize",value:function(){return this.size}},{key:"seek",value:function(a){if(a>=0){var b=this.bufObject.seekIDR(a);this.seekPos=b}}}])&&d(b.prototype,c),a}();c.MpegTs=h},{"../decoder/hevc-imp":61,"./buffer":63,"./mpegts/mpeg.js":70}],72:[function(a,b,d){(function(b){function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=a("./decoder/player-core"),f=a("./native/mp4-player"),g=a("./decoder/c-native-core"),h=a("./decoder/c-httplive-core"),i=a("./native/nv-videojs-core"),j=a("./native/nv-flvjs-core"),k=a("./decoder/av-common"),l=(a("./demuxer/mpegts/mpeg.js"),a("./demuxer/mp4")),m=a("./demuxer/ts"),n=a("./demuxer/m3u8"),o=a("./consts"),p=(a("./utils/static-mem"),a("./utils/ui/ui")),q=(a("./decoder/cache"),{moovStartFlag:!0,readyShow:!0,rawFps:24,autoCrop:!1,core:o.PLAYER_CORE_TYPE_DEFAULT,coreProbePart:1,checkProbe:!0,ignoreAudio:0,probeSize:4096}),r=function(a,b){return b-1e3/a};void 0!==b.Module&&null!==b.Module||(b.Module={}),Module.onRuntimeInitialized=function(){b.STATIC_MEM_wasmDecoderState=1,b.STATIC_MEM_wasmDecoderState};var s=function(){function a(c,d){if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),b.STATICE_MEM_playerCount+=1,this.playerIndex=b.STATICE_MEM_playerCount,this.mp4Obj=null,this.mpegTsObj=null,this.hlsObj=null,this.hlsConf={hlsType:o.PLAYER_IN_TYPE_M3U8_VOD},this.videoURL=c,this.configFormat={playerId:d.player||o.DEFAILT_WEBGL_PLAY_ID,playerW:d.width||o.DEFAULT_WIDTH,playerH:d.height||o.DEFAULT_HEIGHT,type:d.type||k.GetUriFormat(this.videoURL),accurateSeek:d.accurateSeek||!0,playIcon:d.playIcon||"assets/icon-play@300.png",loadIcon:d.loadIcon||"assets/icon-loading.gif",token:d.token||null,extInfo:q},this.mediaExtFormat=this.configFormat.type,null!=this.configFormat.token){for(var e in this.configFormat.extInfo.core=k.GetFormatPlayCore(this.configFormat.type),d.extInfo)e in this.configFormat.extInfo&&(this.configFormat.extInfo[e]=d.extInfo[e]);this.playMode=o.PLAYER_MODE_VOD,this.seekTarget=0,this.playParam=null,this.timerFeed=null,this.player=null,this.volume=1,this.rawModePts=0,this.autoScreenClose=!0,this.feedMP4Data=null,this.onPlayTime=null,this.onLoadFinish=null,this.onSeekStart=null,this.onSeekFinish=null,this.onRender=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onPlayFinish=null,this.onCacheProcess=null,this.onReadyShowDone=null,this.onOpenFullScreen=null,this.onCloseFullScreen=null,this.onNetworkError=null,this.onMakeItReady=null,this.filterConfigParams(),this.configFormat;var f=this;document.addEventListener("fullscreenchange",function(a){f._isFullScreen()?f.onOpenFullScreen&&f.onOpenFullScreen():(!0===f.autoScreenClose&&f.closeFullScreen(!0),f.onCloseFullScreen&&f.onCloseFullScreen())}),this.screenW=window.screen.width,this.screenH=window.screen.height}}var d,s;return d=a,(s=[{key:"filterConfigParams",value:function(){void 0!==this.configFormat.extInfo.checkProbe&&null!==this.configFormat.extInfo.checkProbe||(this.configFormat.extInfo.checkProbe=!0),this.configFormat.type===o.PLAYER_IN_TYPE_FLV?(this.configFormat.extInfo.core=o.PLAYER_CORE_TYPE_CNATIVE,this.configFormat.type=o.PLAYER_IN_TYPE_MP4):this.configFormat.type===o.PLAYER_IN_TYPE_HTTPFLV&&(this.configFormat.extInfo.core=o.PLAYER_CORE_TYPE_CNATIVE,this.configFormat.type=o.PLAYER_IN_TYPE_MP4,this.playMode=o.PLAYER_MODE_NOTIME_LIVE)}},{key:"do",value:function(){var a=this,c=!1;this.configFormat.type===o.PLAYER_IN_TYPE_RAW_265&&(c=!0,this.playMode=o.PLAYER_MODE_NOTIME_LIVE),this.playParam={durationMs:0,fps:0,sampleRate:0,size:{width:0,height:0},audioNone:c,videoCodec:o.CODEC_H265},p.UI.createPlayerRender(this.configFormat.playerId,this.configFormat.playerW,this.configFormat.playerH)
;var d=window.setInterval(function(){b.STATICE_MEM_playerIndexPtr===a.playerIndex&&(b.STATICE_MEM_playerIndexPtr,a.playerIndex,window.WebAssembly?(b.STATIC_MEM_wasmDecoderState,1==b.STATIC_MEM_wasmDecoderState&&(a._makeMP4Player(),b.STATICE_MEM_playerIndexPtr+=1,window.clearInterval(d),d=null)):(/iPhone|iPad/.test(window.navigator.userAgent),b.STATICE_MEM_playerIndexPtr+=1,window.clearInterval(d),d=null))},500)}},{key:"release",value:function(){return void 0!==this.player&&null!==this.player&&(this.player,this.playParam.videoCodec===o.CODEC_H265&&this.player?(this.configFormat.type==o.PLAYER_IN_TYPE_M3U8&&this.hlsObj.release(),this.player.release()):this.player.release(),!0)}},{key:"debugYUV",value:function(a){this.player.debugYUV(a)}},{key:"setRenderScreen",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return void 0!==this.player&&null!==this.player&&(this.player.setScreen(a),!0)}},{key:"play",value:function(){if(void 0===this.player||null===this.player)return!1;if(this.playParam.videoCodec===o.CODEC_H265){var a={seekPos:this._getSeekTarget(),mode:this.playMode,accurateSeek:this.configFormat.accurateSeek,seekEvent:!1,realPlay:!0};this.player.play(a)}else this.player.play();return!0}},{key:"pause",value:function(){return void 0!==this.player&&null!==this.player&&(this.player.pause(),!0)}},{key:"isPlaying",value:function(){return void 0!==this.player&&null!==this.player&&this.player.isPlayingState()}},{key:"setVoice",value:function(a){return!(a<0||void 0===this.player||null===this.player||(this.volume=a,this.player&&this.player.setVoice(a),0))}},{key:"getVolume",value:function(){return this.volume}},{key:"mediaInfo",value:function(){var a={meta:this.playParam,videoType:this.playMode};return a.meta.isHEVC=0===this.playParam.videoCodec,a}},{key:"_seekHLS",value:function(a,b,c){return void 0!==this.player&&null!==this.player&&void setTimeout(function(){b.player.getCachePTS(),b.player.getCachePTS()>a?c():b._seekHLS(a,b,c)},100)}},{key:"seek",value:function(a){if(void 0===this.player||null===this.player)return!1;var b=this;this.seekTarget=a,this.onSeekStart&&this.onSeekStart(a),this.timerFeed&&(window.clearInterval(this.timerFeed),this.timerFeed=null);var c=this._getSeekTarget();return this.playParam.videoCodec===o.CODEC_H264?(this.player.seek(a),this.onSeekFinish&&this.onSeekFinish()):this.configFormat.extInfo.core===o.PLAYER_CORE_TYPE_CNATIVE?(this.pause(),this._seekHLS(a,this,function(){b.player.seek(function(){},{seekTime:c,mode:b.playMode,accurateSeek:b.configFormat.accurateSeek})})):this._seekHLS(a,this,function(){b.player.seek(function(){b.configFormat.type==o.PLAYER_IN_TYPE_MP4?b.mp4Obj.seek(a):b.configFormat.type==o.PLAYER_IN_TYPE_TS||b.configFormat.type==o.PLAYER_IN_TYPE_MPEGTS?b.mpegTsObj.seek(a):b.configFormat.type==o.PLAYER_IN_TYPE_M3U8&&(b.hlsObj.onSamples=null,b.hlsObj.seek(a));var c,d=(c=0,c=b.configFormat.accurateSeek?a:b._getBoxBufSeekIDR(),parseInt(c)),e=parseInt(b._getBoxBufSeekIDR())||0;b._avFeedMP4Data(e,d)},{seekTime:c,mode:b.playMode,accurateSeek:b.configFormat.accurateSeek})}),!0}},{key:"fullScreen",value:function(){if(this.autoScreenClose=!0,this.player.vCodecID===o.V_CODEC_NAME_HEVC){var a=document.querySelector("#"+this.configFormat.playerId),b=a.getElementsByTagName("canvas")[0];a.style.width=this.screenW+"px",a.style.height=this.screenH+"px";var c=this._checkScreenDisplaySize(this.screenW,this.screenH,this.playParam.size.width,this.playParam.size.height);b.style.marginTop=c[0]+"px",b.style.marginLeft=c[1]+"px",b.style.width=c[2]+"px",b.style.height=c[3]+"px",this._requestFullScreen(a)}else this._requestFullScreen(this.player.videoTag)}},{key:"closeFullScreen",value:function(){if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&(this.autoScreenClose=!1,this._exitFull()),this.player.vCodecID===o.V_CODEC_NAME_HEVC){var a=document.querySelector("#"+this.configFormat.playerId),b=a.getElementsByTagName("canvas")[0];a.style.width=this.configFormat.playerW+"px",a.style.height=this.configFormat.playerH+"px";var c=this._checkScreenDisplaySize(this.configFormat.playerW,this.configFormat.playerH,this.playParam.size.width,this.playParam.size.height);b.style.marginTop=c[0]+"px",b.style.marginLeft=c[1]+"px",b.style.width=c[2]+"px",b.style.height=c[3]+"px"}}},{key:"_checkScreenDisplaySize",value:function(a,b,c,d){var e=c/a>d/b,f=(a/c).toFixed(2),g=(b/d).toFixed(2),h=e?f:g,i=this.fixed?a:parseInt(c*h),j=this.fixed?b:parseInt(d*h);return[parseInt((b-j)/2),parseInt((a-i)/2),i,j]}},{key:"_isFullScreen",value:function(){var a=document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement;return document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled,null!=a}},{key:"_requestFullScreen",value:function(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen?a.msRequestFullscreen():a.webkitRequestFullscreen&&a.webkitRequestFullScreen()}},{key:"_exitFull",value:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},{key:"_durationText",value:function(a){if(a<0)return"Play";var b=Math.round(a);return Math.floor(b/3600)+":"+Math.floor(b%3600/60)+":"+Math.floor(b%60)}},{key:"_getSeekTarget",value:function(){return this.configFormat.accurateSeek?this.seekTarget:this._getBoxBufSeekIDR()}},{key:"_getBoxBufSeekIDR",value:function(){return this.configFormat.type==o.PLAYER_IN_TYPE_MP4?this.mp4Obj.seekPos:this.configFormat.type==o.PLAYER_IN_TYPE_TS||this.configFormat.type==o.PLAYER_IN_TYPE_MPEGTS?this.mpegTsObj.seekPos:this.configFormat.type==o.PLAYER_IN_TYPE_M3U8?this.hlsObj.seekPos:void 0}},{key:"_playControl",value:function(){this.isPlaying()?this.pause():this.play()}},{key:"_avFeedMP4Data",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(void 0===this.player||null===this.player)return!1;var e=parseInt(this.playParam.durationMs/1e3);this.player.clearAllCache(),this.timerFeed=window.setInterval(function(){var f=null,g=null,h=!0,i=!0;if(a.configFormat.type==o.PLAYER_IN_TYPE_MP4?(f=a.mp4Obj.popBuffer(1,b),g=a.mp4Obj.audioNone?null:a.mp4Obj.popBuffer(2,c)):a.configFormat.type==o.PLAYER_IN_TYPE_TS||a.configFormat.type==o.PLAYER_IN_TYPE_MPEGTS?(f=a.mpegTsObj.popBuffer(1,b),g=a.mpegTsObj.getAudioNone()?null:a.mpegTsObj.popBuffer(2,c)):a.configFormat.type==o.PLAYER_IN_TYPE_M3U8&&(f=a.hlsObj.popBuffer(1,b),g=a.hlsObj.audioNone?null:a.hlsObj.popBuffer(2,c),b<e-1&&b>=a.hlsObj.getLastIdx()&&(h=!1),c<e-1&&c>=a.hlsObj.getALastIdx()&&(i=!1)),!0===h&&null!=f)for(var j=0;j<f.length;j++)a.player.appendHevcFrame(f[j]);if(!0===i&&null!=g)for(var k=0;k<g.length;k++)a.player.appendAACFrame(g[k]);if(a.playMode!==o.PLAYER_MODE_NOTIME_LIVE&&a.configFormat.type!==o.PLAYER_IN_TYPE_M3U8&&a.onCacheProcess&&a.onCacheProcess(a.player.getCachePTS()),!0===h&&null!=f&&(f.length,a.configFormat.extInfo.readyShow&&(a.configFormat.type===o.PLAYER_IN_TYPE_M3U8?a.configFormat.extInfo.readyShow=!1:a.configFormat.extInfo.core===o.PLAYER_CORE_TYPE_CNATIVE||a.player.cacheYuvBuf.getState()!=CACHE_APPEND_STATUS_CODE.NULL&&(a.player.playFrameYUV(!0,!0),a.configFormat.extInfo.readyShow=!1,a.onReadyShowDone&&a.onReadyShowDone())),b++),!0===i&&null!=g&&c++,b>e)return window.clearInterval(a.timerFeed),a.timerFeed=null,a.player.vCachePTS,a.player.aCachePTS,void(null!=d&&d())},5)}},{key:"_makeMP4Player",value:function(){null!=this.configFormat.extInfo.core&&null!==this.configFormat.extInfo.core&&this.configFormat.extInfo.core===o.PLAYER_CORE_TYPE_CNATIVE?this._cDemuxDecoderEntry():this.configFormat.type==o.PLAYER_IN_TYPE_MP4?this.configFormat.extInfo.moovStartFlag?this._mp4EntryVodStream():this._mp4Entry():this.configFormat.type==o.PLAYER_IN_TYPE_TS||this.configFormat.type==o.PLAYER_IN_TYPE_MPEGTS?this._mpegTsEntry():this.configFormat.type==o.PLAYER_IN_TYPE_M3U8?this._m3u8Entry():this.configFormat.type===o.PLAYER_IN_TYPE_RAW_265&&this._raw265Entry()}},{key:"_makeMP4PlayerViewEvent",value:function(a,b,c,d){var f=this,g=arguments.length>4&&void 0!==arguments[4]&&arguments[4],h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=this;if(this.playParam.durationMs=a,this.playParam.fps=b,this.playParam.sampleRate=c,this.playParam.size=d,this.playParam.audioNone=g,this.playParam.videoCodec=h||o.CODEC_H265,this.playParam,(this.configFormat.type==o.PLAYER_IN_TYPE_M3U8&&this.hlsConf.hlsType==o.PLAYER_IN_TYPE_M3U8_LIVE||this.configFormat.type==o.PLAYER_IN_TYPE_RAW_265)&&(this.playMode=o.PLAYER_MODE_NOTIME_LIVE),i.configFormat.extInfo.autoCrop){var j=document.querySelector("#"+this.configFormat.playerId),k=d.width/d.height,l=this.configFormat.playerW/this.configFormat.playerH;k>l?j.style.height=this.configFormat.playerW/k+"px":k<l&&(j.style.width=this.configFormat.playerH*k+"px")}this.player=e({width:this.configFormat.playerW,height:this.configFormat.playerH,sampleRate:c,fps:b,appendHevcType:o.APPEND_TYPE_FRAME,fixed:!1,playerId:this.configFormat.playerId,audioNone:g,token:this.configFormat.token,videoCodec:h}),this.player.onPlayingTime=function(b){i._durationText(b),i._durationText(a/1e3),null!=i.onPlayTime&&i.onPlayTime(b)},this.player.onPlayingFinish=function(){f.pause(),f.seek(0),null!=f.onPlayFinish&&f.onPlayFinish()},this.player.onSeekFinish=function(){null!=i.onSeekFinish&&i.onSeekFinish()},this.player.onRender=function(a,b,c,d,e){null!=f.onRender&&f.onRender(a,b,c,d,e)},this.player.onLoadCache=function(){null!=f.onLoadCache&&f.onLoadCache()},this.player.onLoadCacheFinshed=function(){null!=f.onLoadCacheFinshed&&f.onLoadCacheFinshed()},i.player.setDurationMs(a),i.player.setFrameRate(b),null!=i.onLoadFinish&&(i.onLoadFinish(),i.configFormat.type==o.PLAYER_IN_TYPE_M3U8&&i.onReadyShowDone&&i.onReadyShowDone())}},{key:"_makeNativePlayer",value:function(a,b,c,d,e,g){var h=this;this.playParam.durationMs=a,this.playParam.fps=b,this.playParam.sampleRate=c,this.playParam.size=d,this.playParam.audioNone=e,this.playParam.videoCodec=g||o.CODEC_H264,this.configFormat.type==o.PLAYER_IN_TYPE_M3U8&&this.hlsConf.hlsType==o.PLAYER_IN_TYPE_M3U8_LIVE&&(this.playMode=o.PLAYER_MODE_NOTIME_LIVE),this.player=new f.Mp4Player({width:this.configFormat.playerW,height:this.configFormat.playerH,sampleRate:c,fps:b,appendHevcType:o.APPEND_TYPE_FRAME,fixed:!1,playerId:this.configFormat.playerId,audioNone:e,token:this.configFormat.token,videoCodec:g}),this.player.makeIt(this.videoURL),this.player.onPlayingTime=function(b){h._durationText(b),h._durationText(a/1e3),null!=h.onPlayTime&&h.onPlayTime(b)},this.player.onPlayingFinish=function(){null!=h.onPlayFinish&&h.onPlayFinish()},this.player.onLoadFinish=function(){h.playParam.durationMs=1e3*h.player.duration,h.onLoadFinish&&h.onLoadFinish()}}},{key:"_initMp4BoxObject",value:function(){var a=this;this.timerFeed=null,this.mp4Obj=new l,this.mp4Obj.onMp4BoxReady=function(b){var c=a.mp4Obj.getFPS(),d=r(c,a.mp4Obj.getDurationMs()),e=a.mp4Obj.getSampleRate(),f=a.mp4Obj.getSize(),g=a.mp4Obj.getVideoCoder();b===o.CODEC_H265?(a._makeMP4PlayerViewEvent(d,c,e,f,a.mp4Obj.audioNone,g),parseInt(d/1e3),a._avFeedMP4Data(0,0)):a._makeNativePlayer(d,c,e,f,a.mp4Obj.audioNone,g)}}},{key:"_mp4Entry",value:function(){var a=this,b=this;fetch(this.videoURL).then(function(a){return a.arrayBuffer()}).then(function(c){b._initMp4BoxObject(),a.mp4Obj.demux(),a.mp4Obj.appendBufferData(c,0),a.mp4Obj.finishBuffer(),a.mp4Obj.seek(-1)})}},{key:"_mp4EntryVodStream",value:function(){var a=this,b=this;this.timerFeed=null,this.mp4Obj=new l,this._initMp4BoxObject(),this.mp4Obj.demux();var c=0,d=!1,e=window.setInterval(function(){d||(d=!0,fetch(a.videoURL).then(function(a){return function d(a){return a.read().then(function(f){if(f.done)return b.mp4Obj.finishBuffer(),b.mp4Obj.seek(-1),void window.clearInterval(e);var g=f.value;return b.mp4Obj.appendBufferData(g.buffer,c),c+=g.byteLength,d(a)})}(a.body.getReader())})["catch"](function(a){}))},1)}},{key:"_cDemuxDecoderEntry",value:function(){var a=this;this.configFormat.type;var b=this,c=new AbortController,d=c.signal,e={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,token:this.configFormat.token,readyShow:this.configFormat.extInfo.readyShow,checkProbe:this.configFormat.extInfo.checkProbe,ignoreAudio:this.configFormat.extInfo.ignoreAudio,playMode:this.playMode};this.player=new g.CNativeCore(e),this.player.onReadyShowDone=function(){b.configFormat.extInfo.readyShow=!1,b.onReadyShowDone&&b.onReadyShowDone()},this.player.onProbeFinish=function(){b.player.mediaInfo,b.player.config,b.playParam.fps=b.player.config.fps,b.playParam.durationMs=r(b.playParam.fps,1e3*b.player.duration),b.player.duration<0&&(b.playMode=o.PLAYER_MODE_NOTIME_LIVE),b.playParam.sampleRate=b.player.config.sampleRate,b.playParam.size={width:b.player.width,height:b.player.height},b.playParam.audioNone=b.player.audioNone,b.player.vCodecID===o.V_CODEC_NAME_HEVC?(b.playParam.audioIdx<0&&(b.playParam.audioNone=!0),b.playParam.videoCodec=o.CODEC_H265,b.onLoadFinish&&b.onLoadFinish()):(b.playParam.videoCodec=o.CODEC_H264,c.abort(),b.player.release(),b.player=null,b.mediaExtFormat===o.PLAYER_IN_TYPE_MP4?b._makeNativePlayer(b.playParam.durationMs,b.playParam.fps,b.playParam.sampleRate,b.playParam.size,!1,b.playParam.videoCodec):b.mediaExtFormat===o.PLAYER_IN_TYPE_FLV?b._flvJsPlayer():b.onLoadFinish&&b.onLoadFinish())},this.player.onPlayingTime=function(a){b._durationText(a),b._durationText(b.player.duration),null!=b.onPlayTime&&b.onPlayTime(a)},this.player.onPlayingFinish=function(){b.pause(),null!=b.onPlayTime&&b.onPlayTime(0),b.onPlayFinish&&b.onPlayFinish(),b.player.reFull=!0,b.seek(0)},this.player.onCacheProcess=function(b){a.onCacheProcess&&a.onCacheProcess(b)},this.player.onLoadCache=function(){null!=a.onLoadCache&&a.onLoadCache()},this.player.onLoadCacheFinshed=function(){null!=a.onLoadCacheFinshed&&a.onLoadCacheFinshed()},this.player.onRender=function(b,c,d,e,f){null!=a.onRender&&a.onRender(b,c,d,e,f)},this.player.onSeekFinish=function(){null!=a.onSeekFinish&&a.onSeekFinish()};var f=!1,h=0;!function i(a){setTimeout(function(){if(!1===f){if(c.abort(),c=null,d=null,a>=o.FETCH_FIRST_MAX_TIMES)return;c=new AbortController,d=c.signal,i(a+1)}},o.FETCH_HTTP_FLV_TIMEOUT_MS),fetch(b.videoURL,{signal:d}).then(function(a){if(f=!0,a.headers.has("Content-Length"))h=a.headers.get("Content-Length"),b.player&&b.player.setProbeSize(h*b.configFormat.extInfo.coreProbePart);else{if(b.mediaExtFormat===o.PLAYER_IN_TYPE_FLV)return c.abort(),b.player.release(),b.player=null,b._cLiveFLVDecoderEntry(e),!0;b.player&&b.player.setProbeSize(4096)}return a.headers.get("Content-Length"),b.configFormat.type,b.mediaExtFormat,function d(a){return a.read().then(function(c){if(!c.done){c.value.buffer;var e=new Uint8Array(c.value.buffer);return b.player&&b.player.pushBuffer(e)<0?(b.player.release(),b.player=null,b._mp4EntryVodStream(),!1):d(a)}b.player&&b.player.pushDone()})}(a.body.getReader())})["catch"](function(a){a.toString().includes("user aborted")||console.error("cdemuxdecoder error",a)})}(0)}},{key:"_cLiveFLVDecoderEntry",value:function(a){var b=this,c=this;a.probeSize=this.configFormat.extInfo.probeSize,this.player=new h.CHttpLiveCore(a),a.probeSize,this.player.onProbeFinish=function(){c.playParam.fps=c.player.mediaInfo.fps,c.playParam.durationMs=-1,c.playMode=o.PLAYER_MODE_NOTIME_LIVE,c.playParam.sampleRate=c.player.mediaInfo.sampleRate,c.playParam.size={width:c.player.mediaInfo.width,height:c.player.mediaInfo.height},c.playParam.audioNone=c.player.mediaInfo.audioNone,c.player.mediaInfo,c.player.vCodecID===o.V_CODEC_NAME_HEVC?(c.playParam.audioIdx<0&&(c.playParam.audioNone=!0),c.playParam.videoCodec=o.CODEC_H265,c.onLoadFinish&&c.onLoadFinish()):(c.playParam.videoCodec=o.CODEC_H264,c.player.release(),c.player=null,c._flvJsPlayer())},this.player.onNetworkError=function(a){c.onNetworkError&&c.onNetworkError(a)},this.player.onReadyShowDone=function(){c.configFormat.extInfo.readyShow=!1,c.onReadyShowDone&&c.onReadyShowDone()},this.player.onLoadCache=function(){null!=b.onLoadCache&&b.onLoadCache()},this.player.onLoadCacheFinshed=function(){null!=b.onLoadCacheFinshed&&b.onLoadCacheFinshed()},this.player.start(this.videoURL)}},{key:"_mpegTsEntry",value:function(){var a=this,b=new AbortController,c=b.signal;this.timerFeed=null,this.mpegTsObj=new m.MpegTs,this.mpegTsObj.bindReady(a),this.mpegTsObj.onDemuxed=this._mpegTsEntryReady.bind(this),this.mpegTsObj.onReady=function(){fetch(a.videoURL,{signal:c}).then(function(a){return a.arrayBuffer()}).then(function(c){if(void 0!==a.mpegTsObj&&null!==a.mpegTsObj){c.fileStart=0;var d=new Uint8Array(c);a.mpegTsObj.demux(d)}else b.abort()})},this.mpegTsObj.initMPEG()}},{key:"_mpegTsEntryReady",value:function(a){var b=a,c=(b.mpegTsObj.getVCodec(),b.mpegTsObj.getACodec()),d=b.mpegTsObj.getDurationMs(),e=b.mpegTsObj.getFPS(),f=b.mpegTsObj.getSampleRate(),g=b.mpegTsObj.getSize(),h=this.mpegTsObj.isHEVC();return h?(b._makeMP4PlayerViewEvent(d,e,f,g,""==c),parseInt(d/1e3),void b._avFeedMP4Data(0,0)):(this.mpegTsObj.releaseTsDemuxer(),this.mpegTsObj=null,this.playParam.durationMs=d,this.playParam.fps=e,this.playParam.sampleRate=f,this.playParam.size=g,this.playParam.audioNone=""==c,this.playParam.videoCodec=h?0:1,this.playParam,void(this.onLoadFinish&&this.onLoadFinish()))}},{key:"_m3u8Entry",value:function(){var a=this,b=this,c=!1,d=0;this.hlsObj=new n.M3u8,this.hlsObj.bindReady(b),this.hlsObj.onFinished=function(a,e){0==c&&(d=b.hlsObj.getDurationMs(),b.hlsConf.hlsType=e.type,c=!0)},this.hlsObj.onCacheProcess=function(b){a.playMode!==o.PLAYER_MODE_NOTIME_LIVE&&a.onCacheProcess&&a.onCacheProcess(b)},this.hlsObj.onDemuxed=function(a){if(null==b.player){var c=b.hlsObj.isHevcParam,e=(b.hlsObj.getVCodec(),b.hlsObj.getACodec()),f=b.hlsObj.getFPS(),g=b.hlsObj.getSampleRate(),h=b.hlsObj.getSize(),i=!1;if(i=b.hlsObj.getSampleChannel()<=0||""===e,!c)return b.hlsObj.release(),b.hlsObj.mpegTsObj&&b.hlsObj.mpegTsObj.releaseTsDemuxer(),b.hlsObj=null,b.playParam.durationMs=-1,b.playParam.fps=f,b.playParam.sampleRate=g,b.playParam.size=h,b.playParam.audioNone=""==e,b.playParam.videoCodec=c?0:1,b.playParam,void b._videoJsPlayer();b._makeMP4PlayerViewEvent(d,f,g,h,i)}},this.hlsObj.onSamples=this._hlsOnSamples.bind(this),this.hlsObj.demux(this.videoURL)}},{key:"_hlsOnSamples",value:function(a,b){1==b.video?this.player.appendHevcFrame(b):!1===this.hlsObj.audioNone&&this.player.appendAACFrame(b)}},{key:"_videoJsPlayer",value:function(){var a=this,b={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio};this.player=new i.NvVideojsCore(b),this.player.onMakeItReady=function(){a.onMakeItReady&&a.onMakeItReady()},this.player.onLoadFinish=function(){a.playParam.size=a.player.getSize(),a.player.duration===1/0||a.player.duration<0?(a.playParam.durationMs=-1,a.playMode=o.PLAYER_MODE_NOTIME_LIVE):(a.playParam.durationMs=1e3*a.player.duration,a.playMode=o.PLAYER_MODE_VOD),a.onLoadFinish&&a.onLoadFinish()},this.player.onReadyShowDone=function(){a.onReadyShowDone&&a.onReadyShowDone()},this.player.onPlayingFinish=function(){a.pause(),a.seek(0),null!=a.onPlayFinish&&a.onPlayFinish()},this.player.onPlayingTime=function(b){a._durationText(b),a._durationText(a.player.duration),null!=a.onPlayTime&&a.onPlayTime(b)},this.player.onSeekFinish=function(){a.onSeekFinish&&a.onSeekFinish()},this.player.makeIt(this.videoURL)}},{key:"_flvJsPlayer",value:function(){var a=this,b={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio};this.player=new j.NvFlvjsCore(b),this.player.onLoadFinish=function(){a.playParam.size=a.player.getSize(),!a.player.duration||NaN===a.player.duration||a.player.duration===1/0||a.player.duration<0?(a.playParam.durationMs=-1,a.playMode=o.PLAYER_MODE_NOTIME_LIVE):(a.playParam.durationMs=1e3*a.player.duration,a.playMode=o.PLAYER_MODE_VOD),a.onLoadFinish&&a.onLoadFinish()},this.player.onReadyShowDone=function(){a.onReadyShowDone&&a.onReadyShowDone()},this.player.onPlayingTime=function(b){a._durationText(b),a._durationText(a.player.duration),null!=a.onPlayTime&&a.onPlayTime(b)},this.player.onPlayingFinish=function(){a.pause(),a.seek(0),null!=a.onPlayFinish&&a.onPlayFinish()},this.player.makeIt(this.videoURL)}},{key:"_raw265Entry",value:function(){this._makeMP4PlayerViewEvent(-1,this.configFormat.extInfo.rawFps,-1,{width:this.configFormat.playerW,height:this.configFormat.playerH},!0,o.CODEC_H265),this.timerFeed&&(window.clearInterval(this.timerFeed),this.timerFeed=null)}},{key:"append265NaluFrame",value:function(a){var b={data:a,pts:this.rawModePts};this.player.appendHevcFrame(b),this.configFormat.extInfo.readyShow&&this.player.cacheYuvBuf.getState()!=CACHE_APPEND_STATUS_CODE.NULL&&(this.player.playFrameYUV(!0,!0),this.configFormat.extInfo.readyShow=!1,this.onReadyShowDone&&this.onReadyShowDone()),this.rawModePts+=1/this.configFormat.extInfo.rawFps}}])&&c(d.prototype,s),a}();d.H265webjs=s,b.new265webjs=function(a,b){return new s(a,b)}}).call(this,void 0!==c?c:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./consts":52,"./decoder/av-common":55,"./decoder/c-httplive-core":56,"./decoder/c-native-core":57,"./decoder/cache":58,"./decoder/player-core":62,"./demuxer/m3u8":65,"./demuxer/mp4":67,"./demuxer/mpegts/mpeg.js":70,"./demuxer/ts":71,"./native/mp4-player":73,"./native/nv-flvjs-core":74,"./native/nv-videojs-core":75,"./utils/static-mem":77,"./utils/ui/ui":78}],73:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=a("../consts"),f=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.configFormat={width:b.width||e.DEFAULT_WIDTH,height:b.height||e.DEFAULT_HEIGHT,fps:b.fps||e.DEFAULT_FPS,fixed:b.fixed||e.DEFAULT_FIXED,sampleRate:b.sampleRate||e.DEFAULT_SAMPLERATE,appendHevcType:b.appendHevcType||e.APPEND_TYPE_STREAM,frameDurMs:b.frameDur||e.DEFAULT_FRAME_DUR,playerId:b.playerId||e.DEFAILT_WEBGL_PLAY_ID,audioNone:b.audioNone||!1,token:b.token||null,videoCodec:b.videoCodec||e.CODEC_H265},this.videoTag=null,this.isPlaying=!1,this.duration=-1,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null}var b,c;return b=a,(c=[{key:"makeIt",value:function(a){var b=this,c=document.querySelector("div#"+this.configFormat.playerId);this.videoTag=document.createElement("video"),this.videoTag.ontimeupdate=function(){b.onPlayingTime&&b.onPlayingTime(b.videoTag.currentTime)},this.videoTag.onended=function(){b.onPlayingFinish&&b.onPlayingFinish()},this.videoTag.onloadedmetadata=function(){b.duration=b.videoTag.duration,b.onLoadFinish&&b.onLoadFinish()},this.videoTag.src=a,this.videoTag.style.width="100%",this.videoTag.style.height="100%",c.appendChild(this.videoTag)}},{key:"play",value:function(){this.videoTag.play()}},{key:"seek",value:function(a){this.videoTag.currentTime=a}},{key:"pause",value:function(){this.videoTag.pause()}},{key:"setVoice",value:function(a){this.videoTag.volume=a}},{key:"isPlayingState",value:function(){return!this.videoTag.paused}},{key:"release",value:function(){this.videoTag&&this.videoTag.remove(),this.videoTag=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null}}])&&d(b.prototype,c),a}();c.Mp4Player=f},{"../consts":52}],74:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=a("../consts"),f=(a("../version"),a("flv.js")),g=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.configFormat={width:b.width||e.DEFAULT_WIDTH,height:b.height||e.DEFAULT_HEIGHT,playerId:b.playerId||e.DEFAILT_WEBGL_PLAY_ID,ignoreAudio:b.ignoreAudio},this.audioVoice=1,this.myPlayerID=this.configFormat.playerId+"-flvjs",this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.duration=-1,this.width=-1,this.height=-1,this.isPlaying=!1,this.vCodecID=e.V_CODEC_NAME_AVC,this.audioNone=!1,this.showScreen=!1,this.playPTS=0,this.vCachePTS=0,this.aCachePTS=0,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onReadyShowDone=null}var b,c;return b=a,(c=[{key:"_onVideoJsReady",value:function(){var a=this;this.videoContaner=document.querySelector("#"+this.myPlayerID),this.videoTag=this.videoContaner.querySelector("video"),this.videoTag.style.width=this.configFormat.width+"px",this.videoTag.style.height=this.configFormat.height+"px",this.videoTag,this.duration=this.myPlayer.duration(),this.duration,this.onLoadFinish&&this.onLoadFinish(),this.onReadyShowDone&&this.onReadyShowDone(),this.myPlayer.on("progress",function(){a.myPlayer.buffered().length,a.myPlayer.duration()}),this.myPlayer.on("timeupdate",function(){a.videoTag.currentTime,a.myPlayer.duration(),a.onPlayingTime&&a.onPlayingTime(a.myPlayer.currentTime())})}},{key:"makeIt",value:function(a){var b=this;if(f.isSupported()){var c=document.querySelector("#"+this.configFormat.playerId);this.videoTag=document.createElement("video"),this.videoTag.id=this.myPlayerID,this.videoTag.style.width=this.configFormat.width+"px",this.videoTag.style.height=this.configFormat.height+"px",c.appendChild(this.videoTag);var d={type:"flv",url:a};this.myPlayer=f.createPlayer(d),this.myPlayer.on(f.Events.METADATA_ARRIVED,function(a){b.duration=a.duration,b.width=a.width,b.height=a.height,b.duration,b.onLoadFinish&&b.onLoadFinish(),b.onReadyShowDone&&b.onReadyShowDone(),b.videoTag.ontimeupdate=function(){b.onPlayingTime&&b.onPlayingTime(b.videoTag.currentTime)},b.videoTag.onended=function(){b.onPlayingFinish&&b.onPlayingFinish()}}),this.myPlayer.attachMediaElement(this.videoTag),this.myPlayer.load()}else console.error("FLV is AVC/H.264, But your brower do not support mse!")}},{key:"getSize",value:function(){return{width:this.videoTag.videoWidth,height:this.videoTag.videoHeight}}},{key:"play",value:function(){this.myPlayer.play()}},{key:"seek",value:function(a){this.myPlayer.currentTime=a}},{key:"pause",value:function(){this.myPlayer.pause()}},{key:"setVoice",value:function(a){this.myPlayer.volume=a}},{key:"isPlayingState",value:function(){return!this.videoTag.paused}},{key:"release",value:function(){this.myPlayer.pause(),this.myPlayer.unload(),this.myPlayer.detachMediaElement(),this.myPlayer.destroy(),this.myPlayerID=null,this.myPlayer=null,this.videoContaner=null,this.videoTag.remove(),this.videoTag=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onReadyShowDone=null}}])&&d(b.prototype,c),a}();c.NvFlvjsCore=g},{"../consts":52,"../version":79,"flv.js":33}],75:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=a("../consts"),f=(a("../version"),a("video.js")),g=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.configFormat={width:b.width||e.DEFAULT_WIDTH,height:b.height||e.DEFAULT_HEIGHT,playerId:b.playerId||e.DEFAILT_WEBGL_PLAY_ID,ignoreAudio:b.ignoreAudio},this.audioVoice=1,this.myPlayerID=this.configFormat.playerId+"-vjs",this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.duration=-1,this.vCodecID=e.V_CODEC_NAME_AVC,this.audioNone=!1,this.showScreen=!1,this.playPTS=0,this.vCachePTS=0,this.aCachePTS=0,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null}var b,c;return b=a,(c=[{key:"_hiddenUnusedPlugins",value:function(){this._hiddenUnused("vjs-loading-spinner"),this._hiddenUnused("vjs-hidden"),this._hiddenUnused("vjs-control-bar"),this._hiddenUnused("vjs-control"),this._hiddenUnused("vjs-text-track-display"),this._hiddenUnused("vjs-big-play-button")}},{key:"_hiddenUnused",value:function(a){Array.from(document.getElementsByClassName(a)).forEach(function(a){status?a&&a.setAttribute("style","display: block;"):a&&a.setAttribute("style","display: none;")})}},{key:"_onVideoJsReady",value:function(){var a=this;this._hiddenUnusedPlugins(),this.videoContaner=document.querySelector("#"+this.myPlayerID),this.videoTag=this.videoContaner.querySelector("video"),this.videoTag.style.width=this.configFormat.width+"px",this.videoTag.style.height=this.configFormat.height+"px",this.videoTag,this.duration=this.myPlayer.duration(),this.duration,this.myPlayer.on("progress",function(){a.myPlayer.buffered().length,a.myPlayer.duration()}),this.myPlayer.on("timeupdate",function(){a.videoTag.currentTime,a.myPlayer.duration(),a.onPlayingTime&&a.onPlayingTime(a.myPlayer.currentTime())})}},{key:"makeIt",value:function(a){var b=this,c={techOrder:["html5"],width:this.configFormat.width,height:this.configFormat.height,controls:!1,bigPlayButton:!1,textTrackDisplay:!1,posterImage:!0,errorDisplay:!1,controlBar:!1,preload:"auto",autoplay:!1,sources:[{src:a,type:"application/x-mpegURL"}]},d=document.querySelector("#"+this.configFormat.playerId),e=document.createElement("video");e.id=this.myPlayerID,d.appendChild(e),this.myPlayer=f(this.myPlayerID,c,function(){b.myPlayer.on("canplaythrough",function(){}),b.myPlayer.on("loadedmetadata",function(){b._onVideoJsReady()}),b.myPlayer.on("ended",function(){b.pause(),b.onPlayingFinish&&b.onPlayingFinish()}),b.myPlayer.on("seeking",function(){}),b.myPlayer.on("seeked",function(){b.onSeekFinish&&b.onSeekFinish()}),b.onMakeItReady&&b.onMakeItReady(),b.onLoadFinish&&b.onLoadFinish(),b.onReadyShowDone&&b.onReadyShowDone()}),this.myPlayer.options.controls=!1,this.myPlayer.options.autoplay=!1,this._hiddenUnusedPlugins()}},{key:"getSize",value:function(){return{width:this.myPlayer.videoWidth(),height:this.myPlayer.videoHeight()}}},{key:"play",value:function(){void 0===this.videoTag||null===this.videoTag?this.myPlayer.play():this.videoTag.play()}},{key:"seek",value:function(a){void 0===this.videoTag||null===this.videoTag?this.myPlayer.currentTime=a:this.videoTag.currentTime=a}},{key:"pause",value:function(){void 0===this.videoTag||null===this.videoTag?this.myPlayer.pause():this.videoTag.pause()}},{key:"setVoice",value:function(a){void 0===this.videoTag||null===this.videoTag?this.myPlayer.volume=a:this.videoTag.volume=a}},{key:"isPlayingState",value:function(){return!this.myPlayer.paused()}},{key:"release",value:function(){this.myPlayer.dispose(),this.myPlayerID=null,this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null}}])&&d(b.prototype,c),a}();c.NvVideojsCore=g},{"../consts":52,"../version":79,"video.js":47}],76:[function(a,b,c){function d(a){this.gl=a,this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)}d.prototype.bind=function(a,b,c){var d=this.gl;d.activeTexture([d.TEXTURE0,d.TEXTURE1,d.TEXTURE2][a]),d.bindTexture(d.TEXTURE_2D,this.texture),d.uniform1i(d.getUniformLocation(b,c),a)},d.prototype.fill=function(a,b,c){var d=this.gl;d.bindTexture(d.TEXTURE_2D,this.texture),d.texImage2D(d.TEXTURE_2D,0,d.LUMINANCE,a,b,0,d.LUMINANCE,d.UNSIGNED_BYTE,c)},b.exports={
renderFrame:function(a,b,c,d,e,f){a.viewport(0,0,a.canvas.width,a.canvas.height),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),a.y.fill(e,f,b),a.u.fill(e>>1,f>>1,c),a.v.fill(e>>1,f>>1,d),a.drawArrays(a.TRIANGLE_STRIP,0,4)},setupCanvas:function(a,b){var c=a.getContext("webgl")||a.getContext("experimental-webgl");if(!c)return c;var e=c.createProgram(),f=["attribute highp vec4 aVertexPosition;","attribute vec2 aTextureCoord;","varying highp vec2 vTextureCoord;","void main(void) {"," gl_Position = aVertexPosition;"," vTextureCoord = aTextureCoord;","}"].join("\n"),g=c.createShader(c.VERTEX_SHADER);c.shaderSource(g,f),c.compileShader(g);var h=["precision highp float;","varying lowp vec2 vTextureCoord;","uniform sampler2D YTexture;","uniform sampler2D UTexture;","uniform sampler2D VTexture;","const mat4 YUV2RGB = mat4","("," 1.1643828125, 0, 1.59602734375, -.87078515625,"," 1.1643828125, -.39176171875, -.81296875, .52959375,"," 1.1643828125, 2.017234375, 0, -1.081390625,"," 0, 0, 0, 1",");","void main(void) {"," gl_FragColor = vec4( texture2D(YTexture, vTextureCoord).x, texture2D(UTexture, vTextureCoord).x, texture2D(VTexture, vTextureCoord).x, 1) * YUV2RGB;","}"].join("\n"),i=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(i,h),c.compileShader(i),c.attachShader(e,g),c.attachShader(e,i),c.linkProgram(e),c.useProgram(e),c.getProgramParameter(e,c.LINK_STATUS);var j=c.getAttribLocation(e,"aVertexPosition");c.enableVertexAttribArray(j);var k=c.getAttribLocation(e,"aTextureCoord");c.enableVertexAttribArray(k);var l=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,l),c.bufferData(c.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),c.STATIC_DRAW),c.vertexAttribPointer(j,3,c.FLOAT,!1,0,0);var m=c.createBuffer();return c.bindBuffer(c.ARRAY_BUFFER,m),c.bufferData(c.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),c.STATIC_DRAW),c.vertexAttribPointer(k,2,c.FLOAT,!1,0,0),c.y=new d(c),c.u=new d(c),c.v=new d(c),c.y.bind(0,e,"YTexture"),c.u.bind(1,e,"UTexture"),c.v.bind(2,e,"VTexture"),c}}},{}],77:[function(a,b,d){(function(a){a.STATIC_MEM_wasmDecoderState=-1,a.STATICE_MEM_playerCount=-1,a.STATICE_MEM_playerIndexPtr=0}).call(this,void 0!==c?c:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],78:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var e=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}var b,c,e;return b=a,e=[{key:"createPlayerRender",value:function(a,b,c){var d=document.querySelector("div#"+a);return d.style.position="relative",d.style.backgroundColor="black",d.style.width=b+"px",d.style.height=c+"px",d}}],(c=null)&&d(b.prototype,c),e&&d(b,e),a}();c.UI=e},{}],79:[function(a,b,c){b.exports={PLAYER_VERSION:"4.0.0"}},{}]},{},[72])}).call(b,function(){return this}())},function(a,b,c){(function(d){"use strict";function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0,c(112);var f=function(){function a(){e(this,a)}return a.createPlayer=function(a,b){return window.new265webjs(a,b)},a.clear=function(){d.STATICE_MEM_playerCount=-1,d.STATICE_MEM_playerIndexPtr=0},a}();b["default"]=f,a.exports=b["default"]}).call(b,function(){return this}())},function(a,b,c){var d,e;d=[c(47),c(2),c(185),c(80)],void 0!==(e=function(a,b){return c.p=b.loadFrom(),a.selectPlayer}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(8)],void 0!==(e=function(a){function b(a){a||c()}function c(){throw new Error("Invalid DFXP file")}var d=a.seconds;return function(e){b(e);var f=[],g=e.getElementsByTagName("p");b(g),g.length||(g=e.getElementsByTagName("tt:p"),g.length||(g=e.getElementsByTagName("tts:p")));for(var h=0;h<g.length;h++){var i=g[h],j=i.innerHTML||i.textContent||i.text||"",k=a.trim(j).replace(/>\s+</g,"><").replace(/tts?:/g,"");if(k){var l=i.getAttribute("begin"),m=i.getAttribute("dur"),n=i.getAttribute("end"),o={begin:d(l),text:k};n?o.end=d(n):m&&(o.end=o.begin+d(m)),f.push(o)}}return f.length||c(),f}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(20),c(8),c(2)],void 0!==(e=function(a,b,c){return function(d,e){for(var f=[],g=[],h=b.xmlAttribute,i="default",j="label",k="file",l=0;l<d.childNodes.length;l++){var m=d.childNodes[l];if("jwplayer"===m.prefix){var n=a.localName(m);"source"===n?(delete e.sources,f.push({file:h(m,k),"default":h(m,i),label:h(m,j),type:h(m,"type")})):"track"===n?(delete e.tracks,g.push({file:h(m,k),"default":h(m,i),kind:h(m,"kind"),label:h(m,j)})):(e[n]=c.serialize(a.textContent(m)),"file"===n&&e.sources&&delete e.sources)}e[k]||(e[k]=e.link)}if(f.length)for(e.sources=[],l=0;l<f.length;l++)f[l].file.length>0&&(f[l][i]="true"===f[l][i],f[l].label.length||delete f[l].label,e.sources.push(f[l]));if(g.length)for(e.tracks=[],l=0;l<g.length;l++)g[l].file.length>0&&(g[l][i]="true"===g[l][i],g[l].kind=g[l].kind.length?g[l].kind:"captions",g[l].label.length||delete g[l].label,e.tracks.push(g[l]));return e}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(20),c(8),c(2)],void 0!==(e=function(a,b,c){function d(a){for(var b=[],c=0;c<h(a);c++){var d=a.childNodes[c];"jwplayer"===d.prefix&&"mediatypes"===f(d).toLowerCase()&&b.push(g(d))}return b}var e=b.xmlAttribute,f=a.localName,g=a.textContent,h=a.numChildren;return function i(a,b){var j,k,l="tracks",m=[];for(k=0;k<h(a);k++)if(j=a.childNodes[k],"media"===j.prefix){if(!f(j))continue;switch(f(j).toLowerCase()){case"content":if(e(j,"duration")&&(b.duration=c.seconds(e(j,"duration"))),e(j,"url")){b.sources||(b.sources=[]);var n={file:e(j,"url"),type:e(j,"type"),width:e(j,"width"),label:e(j,"label")},o=d(j);o.length&&(n.mediaTypes=o),b.sources.push(n)}h(j)>0&&(b=i(j,b));break;case"title":b.title=g(j);break;case"description":b.description=g(j);break;case"guid":b.mediaid=g(j);break;case"thumbnail":b.image||(b.image=e(j,"url"));break;case"player":break;case"group":i(j,b);break;case"subtitle":var p={};p.file=e(j,"url"),p.kind="captions",e(j,"lang").length>0&&(p.label=function(a){var b={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};return b[a]?b[a]:a}(e(j,"lang"))),m.push(p)}}for(b.hasOwnProperty(l)||(b[l]=[]),k=0;k<m.length;k++)b[l].push(m[k]);return b}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(8),c(20),c(116),c(117),c(57)],void 0!==(e=function(a,b,c,d,e){function f(b){for(var f={},h=0;h<b.childNodes.length;h++){var i=b.childNodes[h],k=j(i);if(k)switch(k.toLowerCase()){case"enclosure":f.file=a.xmlAttribute(i,"url");break;case"title":f.title=g(i);break;case"guid":f.mediaid=g(i);break;case"pubdate":f.date=g(i);break;case"description":f.description=g(i);break;case"link":f.link=g(i);break;case"category":f.tags?f.tags+=g(i):f.tags=g(i)}}return f=d(b,f),f=c(b,f),new e(f)}var g=b.textContent,h=b.getChildNode,i=b.numChildren,j=b.localName,k={};return k.parse=function(a){for(var b=[],c=0;c<i(a);c++){var d=h(a,c);if("channel"===j(d).toLowerCase())for(var e=0;e<i(d);e++){var g=h(d,e);"item"===j(g).toLowerCase()&&b.push(f(g))}}return b},k}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(57),c(59),c(1),c(22)],void 0!==(e=function(a,b,c,d){function e(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(b.choose(d))return d.type}return null}function f(a,b){return c.isUndefined(a)?b:a}var g=function(b){return b=c.isArray(b)?b:[b],c.compact(c.map(b,a))};g.filterPlaylist=function(a,b,d,e,g,j,k,l){var m=[];return c.each(a,function(a){a=c.extend({},a),a.allSources=h(a.sources,d,a.drm||e,a.preload||g,f(a.withCredentials,k),l),a.sources=i(a.allSources,b),a.sources.length&&(a.file=a.sources[0].file,(a.preload||g)&&(a.preload=a.preload||g),(a.feedid||j)&&(a.feedid=a.feedid||j),m.push(a))}),m};var h=function(a,d,e,g,h,i){return c.compact(c.map(a,function(a){if(c.isObject(a))return void 0!==d&&null!==d&&(a.androidhls=d),(a.drm||e)&&(a.drm=a.drm||e),(a.preload||g)&&(a.preload=a.preload||g),a.withCredentials=f(a.withCredentials,h),a.isHEVC=i,b(a)}))},i=function(a,b){b&&b.choose||(b=new d({primary:b?"flash":null}));var f=e(a,b);return c.where(a,{type:f})};return g}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1)],void 0!==(e=function(a){var b={kind:"captions","default":!1};return function(c){if(c&&c.file)return a.extend({},b,c)}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(28),c(2),c(4),c(3),c(1),c(45)],void 0!==(e=function(a,b,c,d,e,f){function g(a,c,d){return function(){var e=b.getElementsByClassName("jw-overlays",a.getContainer())[0];e&&(e.appendChild(d),d.left=e.style.left,d.top=e.style.top,c.displayArea=e)}}function h(a){function b(){var b=a.displayArea;b&&a.resize(b.clientWidth,b.clientHeight)}return function(){b(),setTimeout(b,400)}}return function(i,j){function k(){q||(q=!0,p=f.loaderstatus.COMPLETE,o.trigger(c.COMPLETE))}function l(){if(!s&&(j&&0!==e.keys(j).length||k(),!q)){var d=i.getPlugins();n=e.after(r,k),e.each(j,function(e,g){var h=a.getPluginName(g),i=d[h],j=i.getJS(),k=i.getTarget(),l=i.getStatus();l!==f.loaderstatus.LOADING&&l!==f.loaderstatus.NEW&&(j&&!b.versionCheck(k)&&o.trigger(c.ERROR,{message:"Incompatible player version"}),n())})}}function m(a){if(!s){var d="File not found";a.url&&b.log(d,a.url),this.off(),this.trigger(c.ERROR,{message:d}),l()}}var n,o=e.extend(this,d),p=f.loaderstatus.NEW,q=!1,r=e.size(j),s=!1;this.setupPlugins=function(c,d){var f=[],j=i.getPlugins(),k=d.get("plugins");e.each(k,function(d,i){var l=a.getPluginName(i),m=j[l],n=m.getFlashPath(),o=m.getJS(),p=m.getURL();if(n){var q=e.extend({name:l,swf:n,pluginmode:m.getPluginmode()},d);f.push(q)}b.tryCatch(function(){if(o&&k[p]){var a=document.createElement("div");a.id=c.id+"_"+l,a.className="jw-plugin jw-reset";var b=e.extend({},k[p]),d=m.getNewInstance(c,b,a);d.addToPlayer=g(c,d,a),d.resizeHandler=h(d),c.addPlugin(l,d,a)}})instanceof b.Error&&b.log("ERROR: Failed to load "+l+".")}),d.set("flashPlugins",f)},this.load=function(){if(b.exists(j)&&"object"!==b.typeOf(j))return void l();p=f.loaderstatus.LOADING,e.each(j,function(a,d){if(b.exists(d)){var e=i.addPlugin(d);e.on(c.COMPLETE,l),e.on(c.ERROR,m)}});var a=i.getPlugins();e.each(a,function(a){a.load()}),l()},this.destroy=function(){s=!0,this.off()},this.getStatus=function(){return p}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=[c(63),c(18),c(62)],void 0!==(e=function(a,b){function c(a){var b=new Date,c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate(),f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds();d=d<10?"0"+d:d,e=e<10?"0"+e:e,f=f<10?"0"+f:f,g=g<10?"0"+g:g,h=h<10?"0"+h:h;var j=c+"-"+d+"-"+e+" "+f+":"+g+":"+h;return a&&(j=j+"."+i),j}function d(){return{flashVersion:a.flashVersion(),cyberPlayerVersion:b,ak:i.ak||"",provider:h.get("provider")?h.get("provider").name:"",config:""}}function e(a){var b=[];for(var c in a)"object"===f(a[c])?b.push(c+"="+encodeURIComponent(JSON.stringify(a[c]))):b.push(c+"="+a[c]);return b.join("&")}function g(a){if(!s){var b=a.action;delete a.action,a.sendTime=c(),a=e(a),j&&m.removeChild(j),j=document.createElement("script"),j.setAttribute("type","text/javascript"),j.src=n+b+"?"+a,m.insertBefore(j,m.getElementsByTagName("script")[0])}}var h,i,j,k,l={},m=document.getElementsByTagName("script")[0].parentNode,n="https://drm.media.baidubce.com:8888/v1/sdk-player",o=0,p=0,q=!1,r=(new Date).getTime()+"",s=!1;return function(a,b){if(h=b,i=h.getConfiguration(),!1===i.withLog)return!1;var e,f={},j=0;a.on("meta",function(a){for(var b in a.metadata)l[b]=a.metadata[b];l.cdn_ip&&(f={action:"/user/web/cdn",url:h.get("file")||h.getCurrentItem().file,cdn:l.cdn_ip},g(f))}),a.on("beforePlay",function(){s=!1,q=!1,e=setInterval(function(){j+=100},100)}),a.on("play",function(){return q?(clearInterval(e),void(e=null)):(e&&(f={action:"/media/web/available",videoUrl:h.get("file")||h.getCurrentItem().file,type:"play",duration:j,time:c(!0),sessionTime:r,env:d()},g(f),clearInterval(e),e=null),p=h.get("position"),f={action:"/user/web/play",videoUrl:h.get("file")||h.getCurrentItem().file,videoHeight:encodeURIComponent(l.height)||"",videoWidth:encodeURIComponent(l.width)||"",playerHeight:encodeURIComponent(i.height),playerWidth:encodeURIComponent(i.width),duration:l.duration||"",size:l.filesize||"",startPosition:h.get("position"),service:this.getDuration()>0?"vod":"lss",time:c(!0),sessionTime:r,env:d()},g(f),q=!0,void(k||(k=setInterval(function(){f={action:"/user/web/count",session:r,url:h.get("file")||h.getCurrentItem().file},g(f)},6e4),f={action:"/user/web/count",session:r,url:h.get("file")||h.getCurrentItem().file},g(f))))}),a.on("seek",function(a){o+=a.position-p,p=a.offset,f={action:"/user/web/seek",videoUrl:h.get("file")||h.getCurrentItem().file,from:a.position,to:a.offset,time:c(!0),sessionTime:r,env:d()},g(f)}),a.on("pause",function(){o+=h.get("position")-p,f={action:"/user/web/pause",videoUrl:h.get("file")||h.getCurrentItem().file,time:c(!0),sessionTime:r,env:d()},g(f)}),a.on("idle",function(a){"complete"===a.reason&&(o+=h.get("duration")-p,f={action:"/user/web/end",videoUrl:h.get("file")||h.getCurrentItem().file,playInterval:o,time:c(!0),sessionTime:r,env:d()},g(f))}),a.on("stop",function(){s=!0,clearInterval(e),e=null,clearInterval(k),k=null,l.duration&&(o+=h.get("position")-p,f={action:"/user/web/end",videoUrl:h.get("file")||h.getCurrentItem().file,playInterval:o,time:c(!0),sessionTime:r,env:d()},g(f))}),a.on("error",function(a){clearInterval(e),f={action:"/core/web/error",videoUrl:h.get("file")||h.getCurrentItem().file,error:a.code,errorInfo:a.message,time:c(!0),sessionTime:r,env:d()},g(f)}),a.on("setupError",function(a){f={action:"/core/web/error",videoUrl:h.get("file")||h.getCurrentItem().file,error:a.code,errorInfo:a.message,time:c(!0),sessionTime:r,env:d()},g(f)});var m,n;a.on("alive",function(){m=(new Date).getTime()}),a.on("liveStop",function(){n=(new Date).getTime(),f={action:"/user/web/end",videoUrl:h.get("file")||h.getCurrentItem().file,playInterval:(n-m)/1e3,time:c(!0),sessionTime:r,env:d()},g(f)});var t,u=!0,v=!1,w=0,x=0;a.on("alive",function(){return v=!0,u?void(u=!1):void(t&&(w=(new Date).getTime()-t,x++,f={action:"/user/web/buffer",session:r,url:h.get("file")||h.getCurrentItem().file,bt:w,bc:x,env:d()},g(f),t=null))}),a.on("noLiveStream",function(){v&&(t||(t=(new Date).getTime()))})}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(28),c(60)],void 0!==(e=function(a,b){return function(c){this.addPlugin=function(d){var e=a.getPluginName(d);return c[e]||(c[e]=new b(d)),c[e]},this.getPlugins=function(){return c}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(14),c(2),c(24),c(1),c(4),c(7),c(21),c(3),c(43),c(25),c(113)],void 0!==(e=function(a,b,c,d,e,f,g,h,i,j,k){function l(c,j){function l(a,b,c){a===J&&c===D||(J=a,A.trigger(e.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*a,position:b,duration:c}))}function p(a){D<0&&(a=-(!0-a)),E=a}function q(a){D=a,H&&a&&a!==1/0&&A.seek(H)}function r(){F||(F=!0,A.trigger(e.JWPLAYER_MEDIA_BUFFER_FULL))}function s(){return A.h265webPlay()}function t(a){}function u(){return N||[]}function v(){return O}var w=this,x=j.file,y=j.width,z=j.height,A=this,B={player:c,width:y,height:z,token:"base64:QXV0aG9yOmNoYW5neWFubG9uZ3xudW1iZXJ3b2xmLEdpdGh1YjpodHRwczovL2dpdGh1Yi5jb20vbnVtYmVyd29sZixFbWFpbDpwb3JzY2hlZ3QyM0Bmb3htYWlsLmNvbSxRUTo1MzEzNjU4NzIsSG9tZVBhZ2U6aHR0cDovL3h2aWRlby52aWRlbyxEaXNjb3JkOm51bWJlcndvbGYjODY5NCx3ZWNoYXI6bnVtYmVyd29sZjExLEJlaWppbmcsV29ya0luOkJhaWR1",extInfo:{probeSize:8192,coreProbePart:.1,moovStartFlag:!0,ignoreAudio:0}};this.extNeedManualClickBoot=!1,this.extPlayerContainer=null,this.extPlayerPTS=0,this.extPlayerDur=0,this.extPlayerGL=null,this.extPlayerLoadOK=!1,this.extPlayerMediaInfo=null,this.extPlayer=k.createPlayer(x,B),this.extPlayer.onMakeItReady=function(){var a=document.querySelector("#"+c),b=a.getElementsByTagName("div");A.extPlayerGL=a.getElementsByTagName("video")[0],A.extPlayerGL.parentNode.parentNode.insertBefore(A.extPlayerGL.parentNode,b[0]),A.trigger(e.JWPLAYER_H265WEB_COVERLOADED),A.extNeedManualClickBoot=!0},this.extPlayer.onReadyShowDone=function(){w.trigger(e.JWPLAYER_H265WEB_COVERLOADED),r()},this.extPlayer.onLoadFinish=function(){w.setState(f.PAUSED),w.extNeedManualClickBoot=!1;try{w.extPlayerMediaInfo=w.extPlayer.mediaInfo(),w.extPlayerDur=w.extPlayerMediaInfo.meta.durationMs/1e3}catch(a){console.error(a)}if(w.extPlayerLoadOK=!0,w.extPlayerContainer=document.querySelector("#"+c),void 0===w.extPlayerGL||null===w.extPlayerGL)if(!0===w.extPlayerMediaInfo.meta.isHEVC)w.extPlayerGL=w.extPlayerContainer.getElementsByTagName("canvas")[0];else if(w.extPlayerGL=w.extPlayerContainer.getElementsByTagName("video")[0],void 0!==w.extPlayerGL&&null!==w.extPlayerGL&&w.extPlayerGL){var a=w.extPlayerContainer.getElementsByTagName("div");w.extPlayerGL.parentNode.insertBefore(w.extPlayerGL,a[0])}w.extPlayer.setVoice(1);var b={duration:w.extPlayerDur,height:w.extPlayerMediaInfo.meta.size.height,width:w.extPlayerMediaInfo.meta.size.width};w.setState(f.PAUSED),w.trigger(e.JWPLAYER_MEDIA_META,b),q(w.extPlayerDur)},this.extPlayer.onLoadCache=function(){w.setState(f.LOADING)},this.extPlayer.onLoadCacheFinshed=function(){w.extPlayer.isPlaying()?w.setState(f.PLAYING):w.setState(f.PAUSED)},this.extPlayer.onPlayTime=function(a){w.extPlayerPTS=Math.min(a,D),p(a),w.state===f.PLAYING&&w.trigger(e.JWPLAYER_MEDIA_TIME,{position:E,duration:D})},this.extPlayer.onCacheProcess=function(a){l(Math.min(1*a/D,1),w.extPlayerPTS,D)},this.extPlayer.onSeekFinish=function(){w.seeking=!1,w.state===f.COMPLETE?w.setState(f.PAUSED):w.setState(f.PLAYING)},this.extPlayer.onPlayFinish=function(){m(I),A.setState(f.PAUSED),M=!1},this.extPlayer.onRender=function(a,b,c,d,e){},this.extPlayer["do"](),this.h265webPlay=function(){w.extPlayer&&!w.extPlayer.isPlaying()?(w.setState(f.PLAYING),w.extPlayer.play()):(w.setState(f.PAUSED),w.extPlayer.pause())},this.h265webPause=function(){w.extPlayer.pause()},this.state=f.IDLE,this.seeking=!1,d.extend(this,h,i),this.trigger=function(a,b){if(K)return h.trigger.call(this,a,b)},this.setState=function(a){return g.setState.call(this,a)},this.setControls=function(a){};var C,D,E,F,G,A=this,H=0,I=-1,J=-1,K=!0,L=!!j.sdkplatform,M=!1,N=null,O=-1,P=null,Q={level:{}},R=null,S=document.getElementById(c);this.isSDK=L,this.itemTracks=P,this.video=S,this.stop=function(){m(I),K&&this.setState(f.IDLE)},this.destroy=function(){this.remove()},this.init=function(a,b){K&&(P=null,G=a.sources,a.sources.length&&"hls"!==a.sources[0].type&&this.sendMediaType(a.sources),E=a.starttime||0,D=a.duration||0,Q.reason="",this.setupSideloadedTracks(a.tracks),P=this.itemTracks,R=b)},this.load=function(a){K&&(a.sources.length&&"hls"!==a.sources[0].type&&this.sendMediaType(a.sources),a.starttime,a.duration)},this.play=function(){return A.seeking?(A.setState(f.LOADING),void A.once(e.JWPLAYER_MEDIA_SEEKED,A.play)):(!0===A.extNeedManualClickBoot&&A.setState(f.LOADING),void s())},this.pause=function(){m(I),this.h265webPause(),this.setState(f.PAUSED)},this.seek=function(a){K&&(this.extPlayer.seek(a),this.trigger(e.JWPLAYER_MEDIA_SEEK,{position:this.extPlayerPTS,offset:a}),!0===this.extPlayerMediaInfo.meta.isHEVC&&(this.seeking=!0,this.setState(f.LOADING)))},this.volume=function(a){a=b.between(a/100,0,1),!0===this.extPlayerLoadOK&&this.extPlayer.setVoice(a)},this.enableGPU=function(){throw"FlashGPU"},this.disableGPU=function(){throw"FlashGPU"},this.mute=function(a){!0===this.extPlayerLoadOK&&(!0===a?this.extPlayer.setVoice(0):this.extPlayer.setVoice(1))},this.checkComplete=function(){return M},this.detachMedia=function(){m(I),this.disableTextTrack(),K=!1},this.setContainer=function(a){C=a},this.getContainer=function(){return C},this.remove=function(){m(I),null!==this.extPlayer&&(this.extPlayer.pause(),this.extPlayer.release(),this.extPlayer=null,void 0!==this.extPlayerGL&&null!==this.extPlayerGL&&this.extPlayerGL.remove(),this.extPlayerGL=null)},this.setVisibility=function(b){b=!!b,b||n?a.style(C,{visibility:"visible",opacity:1}):a.style(C,{visibility:"",opacity:0})},this.resize=function(a,b,c){if(null!==this.extPlayerMediaInfo&&null!==this.extPlayerGL){if(!(a&&b&&this.extPlayerMediaInfo.meta.size.width&&this.extPlayerMediaInfo.meta.size.height))return!1;if(mediaW=this.extPlayerMediaInfo.meta.size.width,mediaH=this.extPlayerMediaInfo.meta.size.height,!0===this.extPlayerMediaInfo.meta.isHEVC){var d=function(a,b){var c=mediaW/a>mediaH/b,d=(a/mediaW).toFixed(2),e=(b/mediaH).toFixed(2),f=c?d:e,g=parseInt(mediaW*f,10),h=parseInt(mediaH*f,10);return[parseInt((b-h)/2,10),parseInt((a-g)/2,10),g,h]}(a,b);this.extPlayerGL.style.marginTop=d[0]+"px",this.extPlayerGL.style.marginLeft=d[1]+"px",this.extPlayerGL.style.width=d[2]+"px",this.extPlayerGL.style.height=d[3]+"px"}else this.extPlayerGL.style.width=a+"px",this.extPlayerGL.style.height=b+"px"}return!1},this.setFullscreen=function(a){},A.getFullScreen=function(){return!!_videotag.webkitDisplayingFullscreen},this.getCurrentQuality=function(){},this.getQualityLevels=function(){return _getPublicLevels(G)},this.getName=function(){return{name:o}},this.setCurrentAudioTrack=t,this.getAudioTracks=u,this.getCurrentAudioTrack=v,this.setPlaybackRate=function(a){}}var m=window.clearTimeout,n=(b.isIE(),b.isMSIE(),b.isMobile(),b.isFF(),b.isAndroidNative()),o=(b.isIOS(7),b.isIOS(8),"h265web"),p=function(){};return p.prototype=g,l.prototype=new p,l.getName=function(){return{name:"h265web"}},l}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(124),c(42),c(41),c(126)],void 0!==(e=function(a,b,c,d){return{h265web:a,html5:b,flash:c,videojs:d}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(14),c(2),c(24),c(1),c(4),c(7),c(21),c(3),c(43)],void 0!==(e=function(a,b,c,d,e,f,g,h,i){function j(a,c){b.foreach(a,function(a,d){b.addEventListener(c,a,d,!1)})}function k(a,c){b.foreach(a,function(a,d){b.removeEventListener(c,a,d,!1)})}function l(l,u){function v(){ua&&(ea(Fa.audioTracks),oa.setTextTracks(Fa.textTracks),Fa.setAttribute("jw-loaded","data"))}function w(){ua&&Fa.setAttribute("jw-loaded","started")}function x(a){oa.trigger("click",a)}function y(){ua&&(E(D()),B(Y(),la,ka))}function z(){ua&&B(Y(),la,ka)}function A(){o(sa),qa=!0,ua&&(oa.state===f.STALLED?oa.setState(f.PLAYING):oa.state===f.PLAYING&&(sa=setTimeout(X,p)),Fa.duration===1/0&&0===Fa.currentTime||(E(D()),C(Fa.currentTime),B(Y(),la,ka),oa.state===f.PLAYING&&oa.trigger(e.JWPLAYER_MEDIA_TIME,{position:la,duration:ka})))}function B(a,b,c){a===ta&&c===ka||(ta=a,oa.trigger(e.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*a,position:b,duration:c}))}function C(a){ka<0&&(a=-(U()-a)),la=a}function D(){return Ga.duration()}function E(a){ka=a,ra&&a&&a!==1/0&&oa.seek(ra)}function F(){var a=D();a===1/0&&(a=0);var b={duration:a,height:Fa.videoHeight,width:Fa.videoWidth};oa.trigger(e.JWPLAYER_MEDIA_META,b),E(a)}function G(){ua&&(qa=!0,ia(),I())}function H(){ua&&(Fa.muted&&(Fa.muted=!1,Fa.muted=!0),Fa.setAttribute("jw-loaded","meta"),F())}function I(){ma||(ma=!0,oa.trigger(e.JWPLAYER_MEDIA_BUFFER_FULL))}function J(){oa.setState(f.PLAYING),Fa.hasAttribute("jw-played")||Fa.setAttribute("jw-played",""),oa.trigger(e.JWPLAYER_PROVIDER_FIRST_FRAME,{})}function K(){oa.state!==f.COMPLETE&&Fa.currentTime!==Fa.duration&&oa.setState(f.PAUSED)}function L(){Fa.paused||Fa.ended||oa.state!==f.LOADING&&oa.state!==f.ERROR&&(oa.seeking||oa.setState(f.STALLED))}function M(){ua&&(m.hls&&m.hls.reconnecttime?setTimeout(function(){return oa.load(n)},1e3*m.hls.reconnecttime):t<m.retryCount&&n?(t++,setTimeout(function(){return oa.load(n)},3e3)):(b.log("Error playing media: %o %s",Fa.error,Fa.src),oa.trigger(e.JWPLAYER_MEDIA_ERROR,{message:": ",code:"111"})))}function N(a){var c;return"array"===b.typeOf(a)&&a.length>0&&(c=d.map(a,function(a,b){return{file:a.file,label:a.label||b}})),c}function O(a){na=a,va=P(a);var b=N(a);b&&oa.trigger(e.JWPLAYER_MEDIA_LEVELS,{levels:b,currentQuality:va})}function P(a){var b=Math.max(0,va),c=u.qualityLabel;if(a)for(var d=0;d<a.length;d++)if(a[d]["default"]&&(b=d),c&&a[d].label===c)return d;return Da.reason="initial choice",Da.level={},b}function Q(a,b){ra=0,o(sa);var c=document.createElement("source");c.src=na[va].file;var d=Fa.src!==c.src,e=Fa.getAttribute("jw-loaded");if(d||"none"===e||"started"===e){ka=b,oa.setupSideloadedTracks(Ca),R(na[va]);var f=r?1e3:500;setTimeout(function(){a>0&&oa.seek(a),Ga.play(),m.playbackRate>1&&oa.setPlaybackRate(m.playbackRate)},f),r&&Fa.paused&&setTimeout(function(){Ga.play()},2500)}else 0===a&&Fa.currentTime>0&&(ra=-1,oa.seek(a)),Ga.play();la=Fa.currentTime,a>0&&oa.seek(a)}function R(a){za=null,Aa=-1,Ba=-1,Da.reason||(Da.reason="initial choice",Da.level={}),qa=!1,ma=!1,a.preload&&a.preload!==Fa.getAttribute("preload")&&Fa.setAttribute("preload",a.preload);var b=document.createElement("source");b.src=a.file,Fa.src!==b.src&&(Fa.setAttribute("jw-loaded","none"),Ga.src({src:a.file,type:"application/x-mpegURL"}))}function S(){Fa&&(oa.disableTextTrack(),Fa.removeAttribute("crossorigin"),Fa.removeAttribute("preload"),Fa.removeAttribute("src"),Fa.removeAttribute("jw-loaded"),Fa.removeAttribute("jw-played"),c.emptyElement(Fa),va=-1,Ca=null,!q&&"load"in Fa&&Ga.load())}function T(){for(var a=Fa.seekable?Fa.seekable.length:0,b=1/0;a--;)b=Math.min(b,Fa.seekable.start(a));return b}function U(){for(var a=Fa.seekable?Fa.seekable.length:0,b=0;a--;)b=Math.max(b,Fa.seekable.end(a));return b}function V(){oa.seeking=!1,oa.trigger(e.JWPLAYER_MEDIA_SEEKED)}function W(){oa.trigger("volume",{volume:Math.round(100*Fa.volume)}),oa.trigger("mute",{mute:Fa.muted})}function X(){Fa.currentTime===la&&L()}function Y(){var a=Fa.buffered,c=Fa.duration;return!a||0===a.length||c<=0||c===1/0?0:b.between(a.end(a.length-1)/c,0,1)}function Z(){if(ua&&oa.state!==f.IDLE&&oa.state!==f.COMPLETE){if(o(sa),va=-1,xa=!0,oa.trigger(e.JWPLAYER_MEDIA_BEFORECOMPLETE),!ua)return;$()}}function $(){o(sa),oa.setState(f.COMPLETE),xa=!1,oa.trigger(e.JWPLAYER_MEDIA_COMPLETE)}function _(a){ya=!0,ca(a)}function aa(){for(var a=-1,b=0;b<Fa.audioTracks.length;b++)if(Fa.audioTracks[b].enabled){a=b;break}fa(a)}function ba(a){ya=!1,ca(a)}function ca(a){oa.trigger("fullscreenchange",{target:a.target,jwstate:ya})}function da(a){d.each(a,function(a){a.label=a.height?a.height+"p":a.width+"px"})}function ea(a){if(za=null,a){if(a.length){for(var b=0;b<a.length;b++)if(a[b].enabled){Aa=b;break}-1===Aa&&(Aa=0,a[Aa].enabled=!0),za=d.map(a,function(a){return{name:a.label||a.language,language:a.language}})}oa.addTracksListener(a,"change",aa),za&&oa.trigger("audioTracks",{currentTrack:Aa,tracks:za})}}function fa(a){Fa&&Fa.audioTracks&&za&&a>-1&&a<Fa.audioTracks.length&&a!==Aa&&(Fa.audioTracks[Aa].enabled=!1,Aa=a,Fa.audioTracks[Aa].enabled=!0,oa.trigger("audioTrackChanged",{currentTrack:Aa,tracks:za}))}function ga(){return za||[]}function ha(){return Aa}function ia(){oa.trigger("mediaType",{mediaType:"video"})}this.state=f.IDLE,this.seeking=!1,d.extend(this,h,i),this.trigger=function(a,b){if(ua)return h.trigger.call(this,a,b)},this.setState=function(a){if(ua)return g.setState.call(this,a)};var ja,ka,la,ma,na,oa=this,pa={click:x,durationchange:y,ended:Z,loadstart:w,loadeddata:v,loadedmetadata:H,canplay:G,playing:J,progress:z,pause:K,seeked:V,timeupdate:A,volumechange:W,webkitbeginfullscreen:_,webkitendfullscreen:ba},qa=!1,ra=0,sa=-1,ta=-1,ua=!0,va=-1,wa=!!u.sdkplatform,xa=!1,ya=!1,za=null,Aa=-1,Ba=-1,Ca=null,Da={level:{}},Ea=document.getElementById(l),Fa=Ea?Ea.querySelector("video"):void 0;Fa=Fa||document.createElement("video"),Fa.className="jw-video jw-reset";var Ga=window.videojs(Fa);this.isSDK=wa,this.itemTracks=Ca,this.video=Fa,d.isObject(u.cast)&&u.cast.appid&&Fa.setAttribute("disableRemotePlayback",""),j(pa,Fa),Fa.controls=!0,Fa.controls=!1,Fa.setAttribute("disableRemotePlayback",""),Fa.setAttribute("x-webkit-airplay","allow"),Fa.setAttribute("webkit-playsinline",""),Fa.setAttribute("playsinline",""),Fa.setAttribute("x5-playsinline",""),this.stop=function(){o(sa),ua&&(S(),b.isIETrident()&&Ga.pause(),this.setState(f.IDLE))},this.setToken=function(a){for(var b={token:{}},c=0;c<a.length;c++)b.token[a[c].file]=a[c].tokenText;setTimeout(function(){Ga.tech({IWillNotUseThisInPlugins:!0}).hls.options(b)},0)},this.destroy=function(){k(pa,Fa),this.removeTracksListener(Fa.audioTracks,"change",aa),this.removeTracksListener(Fa.textTracks,"change",oa.textTrackChangeHandler),this.remove(),this.off()},this.init=function(a,b){ua&&(t=0,m=b,Ca=null,na=a.sources,va=P(a.sources),n=a,a.sources.length&&"hls"!==a.sources[0].type&&this.sendMediaType(a.sources),la=a.starttime||0,ka=a.duration||0,Da.reason="",R(na[va]),this.setupSideloadedTracks(a.tracks),Ca=this.itemTracks,b.minBufferLength>0&&(videojs.Hls.MAX_GOAL_BUFFER_LENGTH=b.minBufferLength,b.minBufferLength<30&&(videojs.Hls.GOAL_BUFFER_LENGTH=b.minBufferLength)))},this.load=function(a){ua&&(O(a.sources),a.sources.length&&"hls"!==a.sources[0].type&&this.sendMediaType(a.sources),oa.setState(f.LOADING),Q(a.starttime||0,a.duration||0))},this.play=function(){return oa.seeking?(oa.setState(f.LOADING),void oa.once(e.JWPLAYER_MEDIA_SEEKED,oa.play)):void Ga.play()},this.pause=function(){o(sa),Ga.pause(),this.setState(f.PAUSED)},this.seek=function(a){if(ua)if(a<0&&(a+=T()+U()),0===ra&&this.trigger(e.JWPLAYER_MEDIA_SEEK,{position:Fa.currentTime,offset:a}),qa||(qa=!!U()),qa){ra=0;try{oa.seeking=!0,Ga.currentTime(a)}catch(b){oa.seeking=!1,ra=a}}else ra=a,r&&Fa.paused&&Ga.play()},this.volume=function(a){a=b.between(a/100,0,1),Fa.volume=a},this.enableGPU=function(){throw"FlashGPU"},this.disableGPU=function(){throw"FlashGPU"},this.mute=function(a){Fa.muted=!!a},this.checkComplete=function(){return xa},this.detachMedia=function(){return o(sa),this.disableTextTrack(),ua=!1,Fa},this.attachMedia=function(){ua=!0,qa=!1,this.seeking=!1,Fa.loop=!1,xa&&$()},this.setContainer=function(a){var c=this;ja=a,a.appendChild(Fa),Ga.on(e.JWPLAYER_MEDIA_LEVELS,function(a){if(!b.isMutipleHls(na)){da(a.levels),va=a.currentQuality,_qualityLevels=a.levels;var d={type:"levels",levels:a.levels,currentQuality:a.currentQuality};c.trigger("levels",d)}}),Ga.on(e.JWPLAYER_MEDIA_LEVEL_CHANGED,function(a){if(!b.isMutipleHls(na)){da(a.levels),va=a.currentQuality,_qualityLevels=a.levels;var d={type:"levelsChanged",levels:a.levels,currentQuality:a.currentQuality};c.trigger("levelsChanged",d)}}),Ga.on(e.JWPLAYER_CONNECTING,function(a){h.trigger.call(c,"connecting",a)}),Ga.on(e.JWPLAYER_ERROR,M),Ga.tech({IWillNotUseThisInPlugins:!0}).on(e.JWPLAYER_ALIVE,function(){c.trigger(e.JWPLAYER_ALIVE)}),Ga.tech({IWillNotUseThisInPlugins:!0}).on(e.JWPLAYER_NO_LIVE_STREAM,function(){c.trigger(e.JWPLAYER_NO_LIVE_STREAM)}),Ga.tech({IWillNotUseThisInPlugins:!0}).on("retryplaylist",function(){c.trigger(e.JWPLAYER_NO_LIVE_STREAM)})},this.getContainer=function(){return ja},this.remove=function(){S(),o(sa),ja===Fa.parentNode&&ja.removeChild(Fa),Ga.dispose()},this.setVisibility=function(b){b=!!b,b?a.style(ja,{visibility:"visible",opacity:1}):a.style(ja,{visibility:"",opacity:0})},this.resize=function(b,c,d){if(!(b&&c&&Fa.videoWidth&&Fa.videoHeight))return!1;var e={objectFit:""};if("uniform"===d){var f=b/c,g=Fa.videoWidth/Fa.videoHeight;Math.abs(f-g)<.09&&(e.objectFit="fill",d="exactfit")}return a.style(Fa,e),!1},this.setFullscreen=function(a){if(a=!!a){return!(b.tryCatch(function(){var a=Fa.webkitEnterFullscreen||Fa.webkitEnterFullScreen;a&&a.apply(Fa)})instanceof b.Error)&&oa.getFullScreen()}var c=Fa.webkitExitFullscreen||Fa.webkitExitFullScreen;return c&&c.apply(Fa),a},oa.getFullScreen=function(){return ya||!!Fa.webkitDisplayingFullscreen},this.setCurrentQuality=function(a){if(!(va===a||a<0))if(b.isMutipleHls(na)){va=a,this.trigger(e.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:a,
levels:N(na)});var c=Fa.currentTime||0,d=Fa.duration||0;d<=0&&(d=ka),oa.setState(f.LOADING),Q(c,d)}else{var g=Ga.qualityLevels();g[a]&&Ga.tech({IWillNotUseThisInPlugins:!0}).hls.playlists.media(g[a].id)}},this.getCurrentQuality=function(){return va},this.getQualityLevels=function(){return N(na)},this.getName=function(){return{name:s}},this.setCurrentAudioTrack=fa,this.getAudioTracks=ga,this.getCurrentAudioTrack=ha,this.setPlaybackRate=function(a){m.isLive||(Fa.playbackRate=a,this.trigger(e.JWPLAYER_PLAYBACKRATE,{playbackRate:a}))}}var m,n,o=window.clearTimeout,p=256,q=b.isMSIE(),r=b.isFF(),s="videojs",t=0,u=function(){};return u.prototype=g,l.prototype=new u,l.getName=function(){return{name:"videojs"}},l}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){return{DOM_REMOVE_IGNORE:"dom-remove-ignore"}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=[c(2),c(3),c(1)],void 0!==(e=function(a,b,c){function d(a,b,c){var d=document.createElement("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function e(e,g,j,k,l,m){var n;if(k=k||"opaque",a.isMSIE()||a.isPoorIE()){var o=document.createElement("div");g.appendChild(o),o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+j+'" name="'+j+'" tabindex="0"><param name="movie" value="'+e+'"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always"><param name="wmode" value="'+k+'"><param name="bgcolor" value="'+i+'"><param name="menu" value="false">'+(m?'<param name="flashVars" value="enableControlbar=true">':"")+"</object>";for(var p=g.getElementsByTagName("object"),q=p.length;q--;)p[q].id===j&&(n=p[q])}else n=document.createElement("object"),n.setAttribute("type","application/x-shockwave-flash"),n.setAttribute("data",e),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("bgcolor",i),n.setAttribute("id",j),n.setAttribute("name",j),m&&d(n,"flashVars","enableControlbar=true"),d(n,"allowfullscreen","true"),d(n,"allowscriptaccess","always"),d(n,"wmode",k),d(n,"menu","false"),g.appendChild(n,g);return n.className="jw-swf jw-reset",n.style.display="block",n.style.position="absolute",n.style.left=0,n.style.right=0,n.style.top=0,n.style.bottom=0,c.extend(n,b),n.queueCommands=!0,n.triggerFlash=function(b){var d=this;if("setup"!==b&&d.queueCommands||!d.__externalCall){for(var e=d.__commandQueue,g=e.length;g--;)e[g][0]===b&&e.splice(g,1);return e.push(Array.prototype.slice.call(arguments)),d}var i=Array.prototype.slice.call(arguments,1),j=a.tryCatch(function(){if(i.length){for(var a=i.length;a--;)"object"===f(i[a])&&c.each(i[a],h);var e=JSON.stringify(i);d.__externalCall(b,e)}else d.__externalCall(b)});return j instanceof a.Error&&(console.error(b,j),"setup"===b)?(j.name="Failed to setup flash",j):d},n.__commandQueue=[],n}function g(a){a&&a.parentNode&&(a.style.display="none",a.parentNode.removeChild(a))}function h(b,c,d){(a.isPoorIE()&&b&&b.childNodes||window.HTMLElement&&b instanceof window.HTMLElement)&&delete d[c]}var i="#000000";return{embed:e,remove:g}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){return{hasClass:function(a,b){var c=" "+b+" ";return 1===a.nodeType&&(" "+a.className+" ").replace(/[\t\r\n\f]/g," ").indexOf(c)>=0}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(23),c(1),c(25),c(44),c(18)],void 0!==(e=function(a,b,c,d,e){var f={};return f.repo=b.memoize(function(){var b=e.split("+")[0],d=a.repo+b+"/";return c.isHTTPS()?d.replace(/^http:/,"https:"):d}),f.versionCheck=function(a){var b=("0"+a).split(/\W/),c=e.split(/\W/),d=parseFloat(b[0]),f=parseFloat(c[0]);return!(d>f||d===f&&parseFloat("0"+b[1])>parseFloat(c[1]))},f.loadFrom=function(){return f.repo()},f}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){var a={};return a.getElementsByClassName=function(a,b,c){if(b=b||document,c=c||"*",b.getElementsByClassName)return b.getElementsByClassName(a);for(var d=[],e=b.getElementsByTagName(c),f=e.length,g=new RegExp("(^|\\s)"+a+"(\\s|$)"),h=0;h<f;h++)g.test(e[h].className)&&d.push(e[h]);return d},a.addEventListener=function(a,b,c,d){a=a||document,d=d||!1,a.addEventListener?a.addEventListener(b,c,d):a.attachEvent("on"+b,c)},a.removeEventListener=function(a,b,c,d){a=a||document,d=d||!1,a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent("on"+b,c)},a.arrayFilter=function(){Array.prototype.filter||(Array.prototype.filter=function(a){if(void 0===this||null===this)throw TypeError();var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw TypeError();var d,e=[],f=arguments[1];for(d=0;d<c;d++)if(d in b){var g=b[d];a.call(f,g,d,b)&&e.push(g)}return e})},a.funcBind=function(){Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a||window,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})},a.arrayFilter(),a.funcBind(),a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1),c(3)],void 0!==(e=function(a,b){return a.extend({get:function(a){return this.attributes=this.attributes||{},this.attributes[a]},set:function(a,b){if(this.attributes=this.attributes||{},this.attributes[a]!==b){var c=this.attributes[a];this.attributes[a]=b,this.trigger("change:"+a,this,b,c)}},clone:function(){return a.clone(this.attributes)}},b)}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){var a=function(a,c,d){if(c=c||this,d=d||[],window.jwplayer&&window.jwplayer.debug)return a.apply(c,d);try{return a.apply(c,d)}catch(c){return new b(a.name,c)}},b=function(a,b){this.name=a,this.message=b.message||b.toString(),this.error=b};return{tryCatch:a,Error:b}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){return document.createElement("video")}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(174),c(2),c(1),c(9),c(14)],void 0!==(e=function(a,b,c,d,e){var f=function(a,b){this.model=a,this.api=b,this.imageUrl="",this.setup(),this.isHide=!0,this.startAdvPlayed=!1};return c.extend(f.prototype,{setup:function(){var c=a();this.el=b.createElement(c);var d=this;b.addEventListener(this.el,"click",function(){window.open(d.imageUrl)},!1)},loadAdv:function(a){var d=this.model.get("imageAdvs");if(d&&d[a]&&d[a].image){var f=d[a].image,g=b.getElementsByClassName("jw-media",this.api.getContainer())[0],h=this,i={display:"block","z-index":1e3,width:"100%",height:"100%",top:0,left:0};if(c.isString(f)?(f=encodeURI(f),i.backgroundImage='url("'+f+'")'):i.backgroundImage="","end"===a&&(i["z-index"]=0),"pause"===a){var j=g?g.clientHeight:this.model.get("height"),k=g?g.clientWidth:this.model.get("width");i.width="400px",i.height="300px",i.top=(j-300)/2,i.left=(k-400)/2}e.style(this.el,i);var l=b.getElementsByClassName("adv-close",this.el)[0],m=b.getElementsByClassName("adv-countdown",this.el)[0];if(l.style.display="none",m.style.display="none","start"===a){var n=d[a].time<=60?d[a].time:60;m.style.display="block",m.innerHTML=": "+n+""}"pause"===a&&(l.addEventListener("click",function(a){h.el.style.display="none",a.stopPropagation()},!1),l.style.display="block"),this.imageUrl=d[a].url,this.element()&&this.api.getContainer().replaceChild(this.el,this.element()),this.isHide=!1}},beginStartAdv:function(){if(this.startAdvPlayed)return void this.model.loadVideo();var a=this.model.get("imageAdvs").start;this.loadAdv("start");var c=a.time<=60?a.time:60,d=this.element(),e=this,f=setInterval(function(){if(--c>0){var a=": "+c+"";b.getElementsByClassName("adv-countdown",d)[0].innerHTML=a}else d.style.display="none",clearInterval(f),e.isHide=!0,e.startAdvPlayed=!0,e.model.loadVideo()},1e3)},element:function(){var a=this.api.getContainer();return b.getElementsByClassName("jw-adv",a).length>0?b.getElementsByClassName("jw-adv",a)[0]:this.el},isHidden:function(){return this.isHide},hide:function(){this.isHide=!0,this.element().style.display="none"},resizePauseAdv:function(a,b){e.style(this.element(),{top:(b-300)/2,left:(a-400)/2})}}),f}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(14),c(7),c(1)],void 0!==(e=function(a,b,c,d){var e=b.style,f={back:!0,fontSize:15,fontFamily:"Arial,sans-serif",fontOpacity:100,color:"#FFF",backgroundColor:"#000",backgroundOpacity:100,edgeStyle:null,windowColor:"#FFF",windowOpacity:0,preprocessor:d.identity};return function(g){function h(b){b=b||"";var c="jw-captions-window jw-reset";b?(t.innerHTML=b,s.className=c+" jw-captions-window-active"):(s.className=c,a.empty(t))}function i(a){q=a,k(o,q)}function j(a,b){var c=a.source,e=b.metadata;return c?!(!e||!d.isNumber(e[c]))&&e[c]:b.position}function k(a,b){if(a&&a.data&&b){var c=j(a,b);if(!1!==c){var d=a.data;if(!(p>=0&&l(d,p,c))){for(var e=-1,f=0;f<d.length;f++)if(l(d,f,c)){e=f;break}-1===e?h(""):e!==p&&(p=e,h(u.preprocessor(d[p].text)))}}}}function l(a,b,c){return a[b].begin<=c&&(!a[b].end||a[b].end>=c)&&(b===a.length-1||a[b+1].begin>=c)}function m(a,c,d){if(b.css("#"+a+" .jw-video::-webkit-media-text-track-display",c,a),b.css("#"+a+" .jw-video::cue",d,a),d.backgroundColor){var e="{background-color: "+d.backgroundColor+" !important;}";b.css("#"+a+" .jw-video::-webkit-media-text-track-display-backdrop",e,a)}}function n(a,c,d){var e=b.hexToRgba("#000000",d);"dropshadow"===a?c.textShadow="0 2px 1px "+e:"raised"===a?c.textShadow="0 0 5px "+e+", 0 1px 5px "+e+", 0 2px 5px "+e:"depressed"===a?c.textShadow="0 -2px 1px "+e:"uniform"===a&&(c.textShadow="-2px 0 1px "+e+",2px 0 1px "+e+",0 -2px 1px "+e+",0 2px 1px "+e+",-1px 1px 1px "+e+",1px 1px 1px "+e+",1px -1px 1px "+e+",1px 1px 1px "+e)}var o,p,q,r,s,t,u={};r=document.createElement("div"),r.className="jw-captions jw-reset",this.show=function(){r.className="jw-captions jw-captions-enabled jw-reset"},this.hide=function(){r.className="jw-captions jw-reset"},this.populate=function(a){return p=-1,o=a,a?void k(a,q):void h("")},this.resize=function(){var a=r.clientWidth,b=Math.pow(a/400,.6);if(b){var c=u.fontSize*b;e(r,{fontSize:Math.round(c)+"px"})}},this.setup=function(a,c){if(s=document.createElement("div"),t=document.createElement("span"),s.className="jw-captions-window jw-reset",t.className="jw-captions-text jw-reset",u=d.extend({},f,c),c){var h=u.fontOpacity,i=u.windowOpacity,j=u.edgeStyle,k=u.backgroundColor,l={},o={color:b.hexToRgba(u.color,h),fontFamily:u.fontFamily,fontStyle:u.fontStyle,fontWeight:u.fontWeight,textDecoration:u.textDecoration};i&&(l.backgroundColor=b.hexToRgba(u.windowColor,i)),n(j,o,h),u.back?o.backgroundColor=b.hexToRgba(k,u.backgroundOpacity):null===j&&n("uniform",o),e(s,l),e(t,o),m(a,l,o)}s.appendChild(t),r.appendChild(s),this.populate(g.get("captionsTrack")),g.set("captions",u)},this.clear=function(){a.empty(r)},this.element=function(){return r},g.on("change:playlistItem",function(){q=null,p=-1,h("")},this),g.on("change:captionsTrack",function(a,b){this.populate(b)},this),g.mediaController.on("seek",function(){p=-1},this),g.mediaController.on("time seek",i,this),g.mediaController.on("subtitlesTrackData",function(){k(o,q)},this),g.on("change:state",function(a,b){switch(b){case c.IDLE:case c.ERROR:case c.COMPLETE:this.hide();break;default:this.show()}},this)}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(9),c(4),c(3),c(1)],void 0!==(e=function(a,b,c,d){return function(e,f,g){function h(a){if(!e.get("flashBlocked"))return k?void k(a):void o.trigger(a.type===b.touchEvents.CLICK?"click":"tap")}function i(){return l?void l():void o.trigger("doubleClick")}var j,k,l,m={enableDoubleTap:!0,useMove:!0};d.extend(this,c),j=f,this.element=function(){return j};var n=new a(j,d.extend(m,g));n.on("click tap",h),n.on("doubleClick doubleTap",i),n.on("move",function(){o.trigger("move")}),n.on("over",function(){o.trigger("over")}),n.on("out",function(){o.trigger("out")}),this.clickHandler=h;var o=this;this.setAlternateClickHandlers=function(a,b){k=a,l=b||null},this.revertAlternateClickHandlers=function(){k=null,l=null}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1),c(2),c(36)],void 0!==(e=function(a,b,c){function d(a,b){this.time=a,this.text=b,this.el=document.createElement("div"),this.el.className="jw-cue jw-reset",this.el.time=a}return a.extend(d.prototype,{align:function(a){if("%"===this.time.toString().slice(-1))this.pct=this.time;else{var b=this.time/a*100;this.pct=b+"%"}this.el.style.left=this.pct}}),{loadChapters:function(a){b.ajax(a,this.chaptersLoaded.bind(this),this.chaptersFailed,{plainText:!0})},chaptersLoaded:function(b){var d=c(b.responseText);a.isArray(d)&&(a.each(d,this.addCue,this),this.drawCues())},chaptersFailed:function(){},addCue:function(a){this.cues.push(new d(a.begin,a.text))},drawCues:function(){var c=this._model.mediaModel.get("duration");if(!c||c<=0)return void this._model.mediaModel.once("change:duration",this.drawCues,this);var d=this;a.each(this.cues,function(a){a.align(c),b.addEventListener(a.el,"mouseover",function(){d.activeCue=a}),b.addEventListener(a.el,"mouseout",function(){d.activeCue=null}),b.addEventListener(a.el,"click",function(a){d._api.seek(a.target.time)}),d.elementRail.appendChild(a.el)})},resetChapters:function(){a.each(this.cues,function(a){a.el.parentNode&&a.el.parentNode.removeChild(a.el)},this),this.cues=[]}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(26),c(2),c(1),c(9)],void 0!==(e=function(a,b,c,d){return a.extend({constructor:function(b){a.call(this,b),this.container.className="jw-overlay-horizontal jw-reset",this.openClass="jw-open-drawer",this.componentType="drawer"},setup:function(a,e){this.iconUI||(this.iconUI=new d(this.el,{useHover:!0,directSelect:!0}),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this)),this.reset(),a=c.isArray(a)?a:[],this.activeContents=c.filter(a,function(a){return a.isActive}),b.toggleClass(this.el,"jw-hidden",!e||this.activeContents.length<2),e&&this.activeContents.length>1&&(b.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener),c.each(a,function(a){this.container.appendChild(a.el)},this))},reset:function(){b.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}})}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(26),c(2),c(1),c(9),c(179)],void 0!==(e=function(a,b,c,d,e){return a.extend({setup:function(a,f,g){this.iconUI||(this.iconUI=new d(this.el,{useHover:!0,directSelect:!0}),this.toggleValueListener=this.toggleValue.bind(this),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.select.bind(this)),this.reset(),a=c.isArray(a)?a:[],this.list=a,b.toggleClass(this.el,"jw-hidden",a.length<2);var h=a.length>2||2===a.length&&g&&!1===g.toggle,i=!h&&2===a.length;if(b.toggleClass(this.el,"jw-toggle",i),b.toggleClass(this.el,"jw-button-color",!i),this.isActive=h||i,h){b.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener);var j=e(a),k=b.createElement(j);this.addContent(k),this.contentUI=new d(this.content).on("click tap",this.selectListener)}else i&&this.iconUI.on("click tap",this.toggleValueListener);this.selectItem(f)},toggleValue:function(){this.trigger("toggleValue")},select:function(a){if(a.target.parentElement===this.content){var d=b.classList(a.target),e=c.find(d,function(a){return 0===a.indexOf("jw-item")});e&&(this.trigger("select",parseInt(e.split("-")[2])),this.closeTooltipListener())}},selectItem:function(a){if(this.content)for(var c=0;c<this.content.children.length;c++)b.toggleClass(this.content.children[c],"jw-active-option",a===c);else b.toggleClass(this.el,"jw-off",0===a);if(this.isHDMenu()&&this.list&&this.list.length>=2){var d=this.list[a].label,e=b.getElementsByClassName("jw-hd-label",this.el)[0];e.innerHTML=d}if(this.isCCMenu()&&this.list&&this.list.length>=2&&this.list[a]){var e=b.getElementsByClassName("jw-cc-label",this.el)[0];e.innerHTML=this.list[a].label}this.isPlayrateMenu()&&this.list[a]&&(b.getElementsByClassName("jw-playrate-label",this.el)[0].innerHTML=this.list[a].label)},reset:function(){b.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()},isHDMenu:function(){return b.hasClass(this.el,"jw-icon-hd")},isPlayrateMenu:function(){return b.hasClass(this.el,"jw-icon-playrate")},isCCMenu:function(){return b.hasClass(this.el,"jw-icon-cc")},show:function(){this.el.style.display=""},hide:function(){this.el.style.display="none"}})}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(1),c(26),c(9),c(181)],void 0!==(e=function(a,b,c,d,e){return c.extend({setup:function(c,e){if(this.iconUI||(this.iconUI=new d(this.el,{useHover:!0}),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.onSelect.bind(this)),this.reset(),c=b.isArray(c)?c:[],a.toggleClass(this.el,"jw-hidden",c.length<2),c.length>=2){this.iconUI=new d(this.el,{useHover:!0}).on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener);var f=this.menuTemplate(c,e),g=a.createElement(f);this.addContent(g),this.contentUI=new d(this.content),this.contentUI.on("click tap",this.selectListener)}this.originalList=c},menuTemplate:function(c,d){var f=b.map(c,function(b,c){var e="";if(b.title){var f=a.createElement(b.title);e=f.textContent?f.textContent:f.data}return{active:c===d,label:c+1+".",title:e}});return e(f)},onSelect:function(c){var d=c.target;if("UL"!==d.tagName){"LI"!==d.tagName&&(d=d.parentElement);var e=a.classList(d),f=b.find(e,function(a){return 0===a.indexOf("jw-item")});f&&(this.trigger("select",parseInt(f.split("-")[2])),this.closeTooltip())}},selectItem:function(a){this.setup(this.originalList,a)},reset:function(){this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}})}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1),c(2),c(36)],void 0!==(e=function(a,b,c){function d(a){this.begin=a.begin,this.end=a.end,this.img=a.text}return{loadThumbnails:function(a){a&&(this.vttPath=a.split("?")[0].split("/").slice(0,-1).join("/"),this.individualImage=null,b.ajax(a,this.thumbnailsLoaded.bind(this),this.thumbnailsFailed.bind(this),{plainText:!0}))},thumbnailsLoaded:function(b){var e=c(b.responseText);a.isArray(e)&&(a.each(e,function(a){this.thumbnails.push(new d(a))},this),this.drawCues())},thumbnailsFailed:function(){},addThumbnail:function(a){this.thumbnails.push(new d(a))},chooseThumbnail:function(b){if(!a.find(this.thumbnails,function(a){return a.begin<=b&&a.end>=b}))return"";var c=a.sortedIndex(this.thumbnails,{end:b},a.property("end"));c>=this.thumbnails.length&&(c=this.thumbnails.length-1);var d=this.thumbnails[c].img;return d.indexOf("://")<0&&(d=this.vttPath?this.vttPath+"/"+d:d),d},loadThumbnail:function(b){var c=this.chooseThumbnail(b),d={display:"block",margin:"0 auto",backgroundPosition:"0 0",backgroundRepeat:"no-repeat"};if(c.indexOf("#xywh")>0)try{var e=/(.+)\#xywh=(\d+),(\d+),(\d+),(\d+)/.exec(c);c=e[1],d.backgroundPosition=-1*e[2]+"px "+-1*e[3]+"px",d.width=e[4],d.height=e[5]}catch(a){return}else c&&(this.individualImage?(d.width=this.individualImage.width,d.height=this.individualImage.height):(this.individualImage=new Image,this.individualImage.onload=a.bind(function(){this.individualImage.onload=null,this.timeTip.image({width:this.individualImage.width,height:this.individualImage.height})},this),this.individualImage.src=c));return""===c&&(d.width=0,d.height=0),d.backgroundImage='url("'+c+'")',d},showThumbnail:function(a){this.thumbnails.length<1||this.timeTip.image(this.loadThumbnail(a))},resetThumbnails:function(){this.timeTip.image({backgroundImage:"",width:0,height:0}),this.thumbnails=[]}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1),c(2),c(23),c(46),c(26),c(138),c(142)],void 0!==(e=function(a,b,c,d,e,f,g){var h=e.extend({setup:function(){this.text=document.createElement("span"),this.text.className="jw-text jw-reset",this.img=document.createElement("div"),this.img.className="jw-reset";var a=document.createElement("div");a.className="jw-time-tip jw-background-color jw-reset",a.appendChild(this.img),a.appendChild(this.text),b.removeClass(this.el,"jw-hidden"),this.addContent(a)},image:function(a){b.style(this.img,a)},update:function(a){this.text.innerHTML=a}}),i=d.extend({constructor:function(b,c){this._model=b,this._api=c,this.timeTip=new h("jw-tooltip-time"),this.timeTip.setup(),this.cues=[],this.seekThrottled=a.throttle(this.performSeek,400),this._model.on("change:playlistItem",this.onPlaylistItem,this).on("change:position",this.onPosition,this).on("change:duration",this.onDuration,this).on("change:buffer",this.onBuffer,this),d.call(this,"jw-slider-time","horizontal")},setup:function(){d.prototype.setup.apply(this,arguments),this._model.get("playlistItem")&&this.onPlaylistItem(this._model,this._model.get("playlistItem")),this.elementRail.appendChild(this.timeTip.element()),b.addEventListener(this.el,"mousemove",this.showTimeTooltip.bind(this),!1),b.addEventListener(this.el,"mouseout",this.hideTimeTooltip.bind(this),!1)},limit:function(d){if(this.activeCue&&a.isNumber(this.activeCue.pct))return this.activeCue.pct;var e=this._model.get("duration");if("DVR"===b.adaptiveType(e)){var f=(1-d/100)*e,g=this._model.get("position");return 100-100*Math.min(f,Math.max(c.dvrSeekLimit,g))/e}return d},update:function(a){this.seekTo=a,this.seekThrottled(),d.prototype.update.apply(this,arguments)},dragStart:function(){this._model.set("scrubbing",!0),d.prototype.dragStart.apply(this,arguments)},dragEnd:function(){d.prototype.dragEnd.apply(this,arguments),this._model.set("scrubbing",!1)},onSeeked:function(){this._model.get("scrubbing")&&this.performSeek()},onBuffer:function(a,b){this.updateBuffer(b)},onPosition:function(a,b){this.updateTime(b,a.get("duration"))},onDuration:function(a,b){this.updateTime(a.get("position"),b)},updateTime:function(a,c){var d=0;if(c){var e=b.adaptiveType(c);"DVR"===e?d=(c-a)/c*100:"VOD"===e&&(d=a/c*100)}this.render(d)},onPlaylistItem:function(b,c){this.reset(),b.mediaModel.on("seeked",this.onSeeked,this);var d=c.tracks;a.each(d,function(a){a&&a.kind&&"thumbnails"===a.kind.toLowerCase()?this.loadThumbnails(a.file):a&&a.kind&&"chapters"===a.kind.toLowerCase()&&this.loadChapters(a.file)},this)},performSeek:function(){var a,c=this.seekTo,d=this._model.get("duration"),e=b.adaptiveType(d);0===d?this._api.play():"DVR"===e?(a=(100-c)/100*d,this._api.seek(a)):this._model.attributes.controlbar.canDrag&&(a=c/100*d,this._api.seek(Math.min(a,d-.25)))},showTimeTooltip:function(a){var d=this._model.get("duration");if(0!==d){var e=b.bounds(this.elementRail),f=document.documentElement.scrollLeft||document.body.scrollLeft,g=a.pageX||a.clientX+f,h=g-e.left;h=b.between(h,0,e.width);var i=h/e.width,j=d*i;d<0&&(j=d-j);var k;if(this.activeCue)k=this.activeCue.text;else{k=b.timeFormat(j,!0),d<0&&j>c.dvrSeekLimit&&(k="Live")}this.timeTip.update(k),this.showThumbnail(j),b.addClass(this.timeTip.el,"jw-open"),this.timeTip.el.style.left=100*i+"%"}},hideTimeTooltip:function(){b.removeClass(this.timeTip.el,"jw-open")},reset:function(){this.resetChapters(),this.resetThumbnails()}});return a.extend(i.prototype,f,g),i}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(26),c(46),c(9),c(2)],void 0!==(e=function(a,b,c,d){return a.extend({constructor:function(e,f){this._model=e,a.call(this,f),this.volumeSlider=new b("jw-slider-volume jw-volume-tip","vertical"),this.addContent(this.volumeSlider.element()),this.addVolumeValueTip(),this.volumeSlider.on("update",function(a){this.trigger("update",a)},this),d.removeClass(this.el,"jw-hidden"),new c(this.el,{useHover:!0,directSelect:!0}).on("click",this.toggleValue,this).on("tap",this.toggleOpenState,this).on("over",this.openTooltip,this).on("out",this.closeTooltip,this)},toggleValue:function(){this.trigger("toggleValue")},addVolumeValueTip:function(){var a=document.createElement("div");a.className="jw-volume-value-tip",d.getElementsByClassName("jw-overlay",this.el)[0].appendChild(a),this.valuetip=a}})}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(1),c(3),c(23),c(9),c(46),c(143),c(140),c(141),c(144),c(139)],void 0!==(e=function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){var c=document.createElement("div");return c.className="jw-icon jw-icon-inline jw-button-color jw-reset "+a,c.style.display="none",b&&new e(c).on("click tap",function(){b()}),{element:function(){return c},toggle:function(a){a?this.show():this.hide()},show:function(){c.style.display=""},hide:function(){c.style.display="none"}}}function m(a){var b=document.createElement("span");return b.className="jw-text jw-reset "+a,b}function n(a){return new h(a)}function o(a,c){var d=document.createElement("div");return d.className="jw-group jw-controlbar-"+a+"-group jw-reset",b.each(c,function(a){a.element&&(a=a.element()),d.appendChild(a)}),d}function p(b,c){this._api=b,this._model=c,this._isMobile=a.isMobile(),this._compactModeMaxSize=400,this._maxCompactWidth=-1,this.setup()}return b.extend(p.prototype,c,{setup:function(){this.build(),this.initialize()},build:function(){var a,c,d,e,h=this,p=new g(this._model,this._api),q=new k("jw-icon-more");!1!==this._model.get("visualplaylist")&&(a=new i("jw-icon-playlist")),this._isMobile||(e=l("jw-icon-volume",this._api.setMute),c=new f("jw-slider-volume","horizontal"),d=new j(this._model,"jw-icon-volume")),this.elements={alt:m("jw-text-alt"),barLogo:l("jw-icon-barlogo-new",function(){window.open(h._model.get("controlbar").barLogoUrl)}),play:l("jw-icon-playback",this._api.play.bind(this,{reason:"interaction"})),prev:l("jw-icon-prev",this._api.playlistPrev.bind(this,{reason:"interaction"})),next:l("jw-icon-next",this._api.playlistNext.bind(this,{reason:"interaction"})),playlist:a,elapsed:m("jw-text-elapsed"),split:m("jw-text-split"),time:p,duration:m("jw-text-duration"),playRate:n("jw-icon-playrate"),drawer:q,hd:n("jw-icon-hd"),cc:n("jw-icon-cc"),audiotracks:n("jw-icon-audio-tracks"),mute:e,volume:c,volumetooltip:d,cast:l("jw-icon-cast jw-off",this._api.castToggle),fullscreen:l("jw-icon-fullscreen",this._api.setFullscreen)},this.elements.split.innerHTML="/",this.layout={left:[this.elements.barLogo,this.elements.play,this.elements.prev,this.elements.playlist,this.elements.next,this.elements.elapsed,this.elements.split,this.elements.duration],center:[this.elements.time,this.elements.alt],right:[this.elements.playRate,this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.drawer,this.elements.mute,this.elements.cast,this.elements.volume,this.elements.volumetooltip,this.elements.fullscreen],drawer:[this.elements.hd,this.elements.cc,this.elements.audiotracks]},this.menus=b.compact([this.elements.playlist,this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.volumetooltip]),this.layout.left=b.compact(this.layout.left),this.layout.center=b.compact(this.layout.center),this.layout.right=b.compact(this.layout.right),this.layout.drawer=b.compact(this.layout.drawer),this.el=document.createElement("div"),this.el.className="jw-controlbar jw-background-color jw-reset",this.elements.left=o("left",this.layout.left),this.elements.center=o("center",this.layout.center),this.elements.right=o("right",this.layout.right),this.el.appendChild(this.elements.left),this.el.appendChild(this.elements.center),this.el.appendChild(this.elements.right)},initialize:function(){this._model.get("controlbar").barLogo&&this.elements.barLogo.show(),this.elements.play.show(),this.elements.fullscreen.show(),this.elements.mute&&this.elements.mute.show(),this.onVolume(this._model,this._model.get("volume")),this.onPlaylist(this._model,this._model.get("playlist")),this.onPlaylistItem(this._model,this._model.get("playlistItem")),this.onMediaModel(this._model,this._model.get("mediaModel")),this.onCastAvailable(this._model,this._model.get("castAvailable")),this.onCastActive(this._model,this._model.get("castActive")),this.onCaptionsList(this._model,this._model.get("captionsList")),this._model.on("change:volume",this.onVolume,this),this._model.on("change:mute",this.onMute,this),this._model.on("change:playlist",this.onPlaylist,this),this._model.on("change:playlistItem",this.onPlaylistItem,this),this._model.on("change:mediaModel",this.onMediaModel,this),this._model.on("change:castAvailable",this.onCastAvailable,this),this._model.on("change:castActive",this.onCastActive,this),this._model.on("change:duration",this.onDuration,this),this._model.on("change:position",this.onElapsed,this),this._model.on("change:fullscreen",this.onFullscreen,this),this._model.on("change:captionsList",this.onCaptionsList,this),this._model.on("change:captionsIndex",this.onCaptionsIndex,this),this._model.on("change:compactUI",this.onCompactUI,this),this._model.on("change:provider",this.onProvider,this),this.elements.volume&&this.elements.volume.on("update",function(a){var b=a.percentage;this._api.setVolume(b)},this),this.elements.volumetooltip&&(this.elements.volumetooltip.on("update",function(a){var b=a.percentage;this._api.setVolume(b)},this),this.elements.volumetooltip.on("toggleValue",function(){this._api.setMute()},this)),this.elements.playlist&&this.elements.playlist.on("select",function(a){this._model.once("itemReady",function(){this._api.play({reason:"interaction"})},this),this._api.load(a)},this),this.elements.playRate.on("select",function(a){var b=this._model.get("playRateConfig")[a].label;b=parseFloat(b.substring(1)),this._model.setPlaybackRate(b)},this),this.elements.hd.on("select",function(a){this._model.setCurrentQuality(a)},this),this.elements.hd.on("toggleValue",function(){this._model.getVideo().setCurrentQuality(0===this._model.getVideo().getCurrentQuality()?1:0)},this),this.elements.cc.on("select",function(a){this._api.setCurrentCaptions(a)},this),this.elements.cc.on("toggleValue",function(){var a=this._model.get("captionsIndex");this._api.setCurrentCaptions(a?0:1)},this),this.elements.audiotracks.on("select",function(a){this._model.getVideo().setCurrentAudioTrack(a)},this),new e(this.elements.duration).on("click tap",function(){if("DVR"===a.adaptiveType(this._model.get("duration"))){var b=this._model.get("position");this._api.seek(Math.max(d.dvrSeekLimit,b))}},this),new e(this.el).on("click tap drag",function(){this.trigger("userAction")},this),this.elements.drawer.on("open-drawer close-drawer",function(b,c){a.toggleClass(this.el,"jw-drawer-expanded",c.isOpen),c.isOpen||this.closeMenus()},this),b.each(this.menus,function(a){a.on("open-tooltip",this.closeMenus,this)},this)},onCaptionsList:function(a,b){var c=a.get("captionsIndex");this.elements.cc.setup(b,c),this.clearCompactMode()},onCaptionsIndex:function(a,b){this.elements.cc.selectItem(b)},onPlaylist:function(a,b){var c=b.length>1;this.elements.next.toggle(c),this.elements.prev.toggle(c),this.elements.playlist&&this.elements.playlist.setup(b,a.get("item"))},onPlaylistItem:function(a){this.elements.time.updateBuffer(0),this.elements.time.render(0),this.elements.duration.innerHTML="00:00",this.elements.elapsed.innerHTML="00:00",this.clearCompactMode();var b=a.get("item");this.elements.playlist&&this.elements.playlist.selectItem(b),
this.elements.audiotracks.setup()},onMediaModel:function(c,d){d.on("change:levels",function(a,b){this.elements.hd.setup(b,a.get("currentLevel"),{toggle:!1}),this.clearCompactMode()},this),d.on("change:currentLevel",function(a,b){this.elements.hd.selectItem(b)},this),d.on("change:audioTracks",function(a,c){var d=b.map(c,function(a){return{label:a.name}});this.elements.audiotracks.setup(d,a.get("currentAudioTrack"),{toggle:!1}),this.clearCompactMode()},this),d.on("change:currentAudioTrack",function(a,b){this.elements.audiotracks.selectItem(b)},this),d.on("change:state",function(b,c){"complete"===c&&(this.elements.drawer.closeTooltip(),a.removeClass(this.el,"jw-drawer-expanded"))},this),d.on("change:playbackRate",function(a,b){for(var c=this._model.get("playRateConfig"),d=-1,e=0;e<c.length;e++)c[e].label===""+b&&(d=e);this.elements.playRate.selectItem(d)},this)},onProvider:function(a,b){/(html5|videojs)/.test(b.name)&&a.get("playRate")&&!this._isMobile?this.elements.playRate.setup(a.get("playRateConfig"),0):this.elements.playRate.hide()},onVolume:function(a,b,c){this.renderVolume(a.get("mute"),b,c)},onMute:function(a,b){this.renderVolume(b,a.get("volume"))},renderVolume:function(b,c,d){var e;d||(d=c),this.elements.mute&&a.toggleClass(this.elements.mute.element(),"jw-off",b),this.elements.volume&&this.elements.volume.render(b?0:c),this.elements.volumetooltip&&(this.elements.volumetooltip.volumeSlider.render(b?0:c),a.toggleClass(this.elements.volumetooltip.element(),"jw-off",b)),this.elements.volumetooltip&&this.elements.volumetooltip.valuetip&&(e=this.elements.volumetooltip.valuetip,b?e.innerHTML="0%":100===c&&c>d&&this._model.get("provider")&&/^flash/.test(this._model.get("provider").name)?e.innerHTML="100%()":e.innerHTML=c+"%")},onCastAvailable:function(a,b){this.elements.cast.toggle(b),this.clearCompactMode()},onCastActive:function(b,c){a.toggleClass(this.elements.cast.element(),"jw-off",!c)},onElapsed:function(b,c){var d,e=b.get("duration");d="DVR"===a.adaptiveType(e)?"-"+a.timeFormat(-e):a.timeFormat(c),this.elements.elapsed.innerHTML=d},onDuration:function(b,c){var d;"DVR"===a.adaptiveType(c)?(d="Live",this.clearCompactMode()):d=a.timeFormat(c),/NaN/.test(d)||(this.elements.duration.innerHTML=d)},onFullscreen:function(b,c){a.toggleClass(this.elements.fullscreen.element(),"jw-off",c)},element:function(){return this.el},getVisibleBounds:function(){var b,c=this.el;return"table"===(getComputedStyle?getComputedStyle(c):c.currentStyle).display?a.bounds(c):(c.style.visibility="hidden",c.style.display="table",b=a.bounds(c),c.style.visibility=c.style.display="",b)},setAltText:function(a){this.elements.alt.innerHTML=a},addCues:function(a){this.elements.time&&(b.each(a,function(a){this.elements.time.addCue(a)},this),0===a.length&&this.elements.time.resetChapters(),this.elements.time.drawCues())},addThumbnails:function(a){this.elements.time&&(b.each(a,function(a){this.elements.time.addThumbnail(a)},this),this.elements.time.drawCues())},closeMenus:function(a){b.each(this.menus,function(b){a&&a.target===b.el||b.closeTooltip(a)})},hideComponents:function(){this.closeMenus(),this.elements.drawer.closeTooltip(),a.removeClass(this.el,"jw-drawer-expanded")},clearCompactMode:function(){this._maxCompactWidth=-1,this._model.set("compactUI",!1),this._containerWidth&&this.checkCompactMode(this._containerWidth)},setCompactModeBounds:function(){if(this.element().offsetWidth>0){var b=this.elements.left.offsetWidth+this.elements.right.offsetWidth;if("LIVE"===a.adaptiveType(this._model.get("duration")))this._maxCompactWidth=b+this.elements.alt.offsetWidth;else{var c=b+(this.elements.center.offsetWidth-this.elements.time.el.offsetWidth);this._maxCompactWidth=c/.8}}},checkCompactMode:function(a){this.setCompactModeBounds(),this._containerWidth=a,-1!==this._maxCompactWidth&&(a>=this._compactModeMaxSize&&a>this._maxCompactWidth?this._model.set("compactUI",!1):(a<this._compactModeMaxSize||a<=this._maxCompactWidth)&&this._model.set("compactUI",!0))},onCompactUI:function(c,d){a.removeClass(this.el,"jw-drawer-expanded"),this.elements.drawer.setup(this.layout.drawer,d),(!d||this.elements.drawer.activeContents.length<2)&&b.each(this.layout.drawer,function(a){this.elements.right.insertBefore(a.el,this.elements.drawer.el)},this)}}),p}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(3),c(9),c(175),c(1)],void 0!==(e=function(a,b,c,d,e){var f=function(f){e.extend(this,b),this.model=f,this.el=a.createElement(d({}));var g=this;this.iconUI=new c(this.el).on("click tap",function(a){g.trigger(a.type)})};return e.extend(f.prototype,{element:function(){return this.el}}),f}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(176),c(2),c(1),c(9)],void 0!==(e=function(a,b,c,d){var e=function(a){this.model=a,this.setup(),this.model.on("change:dock",this.render,this)};return c.extend(e.prototype,{setup:function(){var c=this.model.get("dock"),e=this.click.bind(this),f=a(c);this.el=b.createElement(f),new d(this.el).on("click tap",e)},getDockButton:function(a){return b.hasClass(a.target,"jw-dock-button")?a.target:b.hasClass(a.target,"jw-dock-text")?a.target.parentElement.parentElement:a.target.parentElement},click:function(a){var b=this.getDockButton(a),d=b.getAttribute("button"),e=this.model.get("dock"),f=c.findWhere(e,{id:d});f&&f.callback&&f.callback(a)},render:function(){var c=this.model.get("dock"),d=a(c),e=b.createElement(d);this.el.innerHTML=e.innerHTML},element:function(){return this.el}}),e}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(177)],void 0!==(e=function(a){function b(b,c,d,e){return a({id:b,skin:c,title:d,body:e})}return b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(9),c(2),c(4),c(1),c(3),c(178)],void 0!==(e=function(a,b,c,d,e,f){var g=b.style,h={linktarget:"_blank",margin:8,hide:!1,position:"top-right"};return function(i){var j,k,l=new Image,m=d.extend({},i.get("logo"));return d.extend(this,e),this.setup=function(e){if(k=d.extend({},h,m),k.hide="true"===k.hide.toString(),j=b.createElement(f()),k.file){k.hide&&b.addClass(j,"jw-hide"),b.addClass(j,"jw-logo-"+(k.position||h.position)),"top-right"===k.position&&(i.on("change:dock",this.topRight,this),i.on("change:controls",this.topRight,this),this.topRight(i)),i.set("logo",k),l.onload=function(){var a={backgroundImage:'url("'+this.src+'")',width:this.width,height:this.height};if(k.margin!==h.margin){var b=/(\w+)-(\w+)/.exec(k.position);3===b.length&&(a["margin-"+b[1]]=k.margin,a["margin-"+b[2]]=k.margin)}g(j,a),i.set("logoWidth",a.width)},l.src=k.file;new a(j).on("click tap",function(a){b.exists(a)&&a.stopPropagation&&a.stopPropagation(),this.trigger(c.JWPLAYER_LOGO_CLICK,{link:k.link,linktarget:k.linktarget})},this),e.appendChild(j)}},this.topRight=function(a){var b=a.get("controls"),c=a.get("dock"),d=b&&(c&&c.length||a.get("sharing")||a.get("related"));g(j,{top:d?"3.5em":0})},this.element=function(){return j},this.position=function(){return k.position},this.destroy=function(){l.onload=null},this}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(1),c(14)],void 0!==(e=function(a,b,c){function d(a){return a>100?30+Math.random()*(a-100):a/2}var e=function(a,b){this.model=a,this.element=b,this.times=0,this.init()};return b.extend(e.prototype,{init:function(){if(a.isMSIE(9))return c.style(this.element,{display:"none"}),!1;var b=this.model.get("marquee").text,d=this.model.get("marquee").color,e=this.model.get("marquee").fontSize;b&&(this.element.innerHTML=b),d&&c.style(this.element,{color:d}),e&&c.style(this.element,{fontSize:e,lineHeight:e+8}),this.reset()},start:function(){return!a.isMSIE(9)&&void c.style(this.element,{animationPlayState:"running",opacity:1,display:"block"})},stop:function(){this.reset(),c.style(this.element,{animationPlayState:"paused",opacity:0,display:"none"})},pause:function(){"running"===this.element.style.animationPlayState&&c.style(this.element,{animationPlayState:"paused"}),c.style(this.element,{opacity:0})},reset:function(b,d){b=b||this.model.get("width"),d=d||this.model.get("height");var e=this.element,f=this.times%2==0?"marquee1":"marquee2",g=this;c.animation(e,f+" 18s infinite"),this.randomTop(e,d),a.addEventListener(e,"webkitAnimationIteration",function(){g.randomTop(e,d)},!1),a.addEventListener(e,"animationiteration",function(){g.randomTop(e,d)},!1),this.times++},randomTop:function(){var a=0;this.model.get("containerHeight")&&(a=this.model.get("containerHeight")),c.style(this.element,{top:d(a)})}}),e}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1),c(2)],void 0!==(e=function(a,b){function c(a,b){b.off("change:mediaType",null,this),b.on("change:mediaType",function(b,c){"audio"===c&&this.setImage(a.get("playlistItem").image)},this)}function d(a,c){return a.get("autostart")&&!b.isMobile()||a.get("item")>0?(this.setImage(null),a.off("change:state",null,this),void a.on("change:state",function(a,b){"complete"!==b&&"idle"!==b&&"error"!==b||this.setImage(c.image)},this)):void this.setImage(c.image)}var e=function(a){this.model=a,a.on("change:playlistItem",d,this),a.on("change:mediaModel",c,this)};return a.extend(e.prototype,{setup:function(a){this.el=a;var b=this.model.get("playlistItem");b&&this.setImage(b.image)},setImage:function(c){var d=this.image;d&&(d.onload=null,this.image=null),this.model.off("change:state",null,this);var e="";a.isString(c)&&(e='url("'+c+'")',d=this.image=new Image,d.src=c),b.isPoorIE()?this.el.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+c+'",sizingMethod="scale"':b.style(this.el,{backgroundImage:e})},resize:function(a,c,d){if("uniform"===d){var e=a/c,f=this.image,g=null;if(f){if(0===f.width){var h=this;return void(f.onload=function(){h.resize(a,c,d)})}var i=f.width/f.height;Math.abs(e-i)<.09&&(g="cover")}b.style(this.el,{backgroundSize:g})}},element:function(){return this.el}}),e}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(183),c(1),c(9),c(18)],void 0!==(e=function(a,b,c,d,e){var f=function(){};return c.extend(f.prototype,{buildArray:function(){var b=e.split("+"),d=b[0],f={items:[]},g=this.model.get("rightclick");g&&c.isArray(g)&&g.length>0?c.each(g,function(a){f.items.push({title:a.title,link:a.link})}):f.items.push({title:"About Cyber Player "+d,link:"https://bce.baidu.com/doc/MCT/Web-SDK.html#.E6.92.AD.E6.94.BE.E5.99.A8.20Web.20SDK.20.E7.AE.80.E4.BB.8B"});var h=this.model.get("provider");if(h&&h.name.indexOf("flash")>=0){var i="Flash Version "+a.flashVersion();f.items.push({title:i,link:"http://www.adobe.com/software/flash/about/"})}return f},buildMenu:function(){var c=this.buildArray();return a.createElement(b(c))},updateHtml:function(){this.el.innerHTML=this.buildMenu().innerHTML},rightClick:function(a){return this.lazySetup(),!this.mouseOverContext&&(this.hideMenu(),this.showMenu(a),!1)},getOffset:function(b){var c=b.target,d=b.layerX||b.offsetX,e=b.layerY||b.offsetY;if(a.isIE()&&(a.hasClass(c,"jw-video")||a.hasClass(c,"jw-warning")))return{x:d,y:e+40};for(;c!==this.playerElement;)d+=c.offsetLeft,e+=c.offsetTop,c=c.parentNode;return d=d<=this.playerElement.clientWidth?d:this.playerElement.clientWidth,e=e<=this.playerElement.clientHeight?e:this.playerElement.clientHeight,{x:d,y:e}},showMenu:function(b){var c=this.getOffset(b);return this.el.style.left=c.x+"px",this.el.style.top=c.y+"px",a.addClass(this.playerElement,"jw-flag-rightclick-open"),a.addClass(this.el,"jw-open"),!1},hideMenu:function(){this.mouseOverContext||(a.removeClass(this.playerElement,"jw-flag-rightclick-open"),a.removeClass(this.el,"jw-open"))},lazySetup:function(){this.el||(this.el=this.buildMenu(),this.layer.appendChild(this.el),this.hideMenuHandler=this.hideMenu.bind(this),this.addOffListener(this.playerElement),this.addOffListener(document),this.model.on("change:provider",this.updateHtml,this),this.elementUI=new d(this.el,{useHover:!0}).on("over",function(){this.mouseOverContext=!0},this).on("out",function(){this.mouseOverContext=!1},this))},setup:function(b,c,d){this.playerElement=c,this.model=b,this.mouseOverContext=!1,this.layer=d,a.isPoorIE()||(c.oncontextmenu=this.rightClick.bind(this))},addOffListener:function(b){a.addEventListener(b,"mousedown",this.hideMenuHandler),a.addEventListener(b,"touchstart",this.hideMenuHandler),a.addEventListener(b,"pointerdown",this.hideMenuHandler)},removeOffListener:function(b){a.removeEventListener(b,"mousedown",this.hideMenuHandler),a.removeEventListener(b,"touchstart",this.hideMenuHandler),a.removeEventListener(b,"pointerdown",this.hideMenuHandler)},destroy:function(){this.el&&(this.hideMenu(),this.elementUI.off(),this.removeOffListener(this.playerElement),this.removeOffListener(document),this.hideMenuHandler=null,this.el=null),this.playerElement&&(this.playerElement.oncontextmenu=null,this.playerElement=null),this.model&&(this.model.off("change:provider",this.updateHtml),this.model=null)}}),f}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(1),c(2)],void 0!==(e=function(a,b){var c=function(a){this.model=a,this.model.on("change:playlistItem",this.playlistItem,this)};return a.extend(c.prototype,{hide:function(){this.el.style.display="none"},show:function(){this.el.style.display=""},setup:function(a){this.el=a;var b=this.el.getElementsByTagName("div");this.title=b[0],this.description=b[1],this.model.get("playlistItem")&&this.playlistItem(this.model,this.model.get("playlistItem")),this.model.on("change:logoWidth",this.update,this),this.model.on("change:dock",this.update,this)},update:function(a){var c={paddingLeft:0,paddingRight:0},d=a.get("controls"),e=a.get("dock"),f=a.get("logo");if(f){var g=1*(""+f.margin).replace("px",""),h=a.get("logoWidth")+(isNaN(g)?0:g);"top-left"===f.position?c.paddingLeft=h:"top-right"===f.position&&(c.paddingRight=h)}if(d&&e&&e.length){var i=56*e.length;c.paddingRight=Math.max(c.paddingRight,i)}b.style(this.el,c)},playlistItem:function(a,b){if(a.get("displaytitle")||a.get("displaydescription")){var c="",d="";b.title&&a.get("displaytitle")&&(c=b.title),b.description&&a.get("displaydescription")&&(d=b.description),this.updateText(c,d)}else this.hide()},updateText:function(a,b){this.title.innerHTML=a,this.description.innerHTML=b,this.title.firstChild||this.description.firstChild?this.show():this.hide()},element:function(){return this.el}}),c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(2),c(4),c(3),c(23),c(7),c(136),c(137),c(146),c(147),c(149),c(145),c(151),c(135),c(150),c(152),c(153),c(1),c(180)],void 0!==(e=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=a.style,t=a.bounds,u=a.isMobile(),v=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];return function(w,x){function y(b){var c=0,e=x.get("duration"),f=x.get("position");"DVR"===a.adaptiveType(e)&&(c=e,e=Math.max(f,d.dvrSeekLimit));var g=a.between(f+b,c,e);w.seek(g)}function z(b){var c,d=x.get("volume");"-"===b?c=d>100?-50:-10:(c=d>=100?50:10,d<100&&d+c>100&&(c=100-d));var e=x.getVideo(),f=e&&0===e.getName().name.indexOf("flash"),g=f?500:100,h=a.between(x.get("volume")+c,0,g);w.setVolume(h)}function A(a){return!a.ctrlKey&&!a.metaKey&&!!x.get("controls")}function B(a){var b=x.get("keyControls");if(!A(a))return!0;switch(Ja||ca(),a.keyCode){case 27:w.setFullscreen(!1);break;case 13:case 32:b&&w.play({reason:"interaction"});break;case 37:Ja||y(-5);break;case 39:Ja||y(5);break;case 38:z("+");break;case 40:z("-");break;case 67:var c=w.getCaptionsList(),d=c.length;if(d){var e=(w.getCurrentCaptions()+1)%d;w.setCurrentCaptions(e)}break;case 77:b&&w.setMute();break;case 70:b&&w.setFullscreen();break;default:if(b&&a.keyCode>=48&&a.keyCode<=59){var f=a.keyCode-48,g=f/10*x.get("duration");w.seek(g)}}return/13|32|37|38|39|40/.test(a.keyCode)?(a.preventDefault&&a.preventDefault(),!1):void 0}function C(){Oa=!1,a.removeClass(la,"jw-no-focus")}function D(){Oa=!0,a.addClass(la,"jw-no-focus")}function E(){Oa||C(),Ja||ca()}function F(){var c=t(la),d=Math.round(c.width),e=Math.round(c.height);return document.body.contains(la)?d&&e&&(d===oa&&e===pa||(oa=d,pa=e,clearTimeout(La),La=setTimeout(Z,50),x.set("containerWidth",d),x.set("containerHeight",e),Pa.trigger(b.JWPLAYER_RESIZE,{width:d,height:e}))):(a.removeEventListener(window,"resize",F),u&&a.removeEventListener(window,"orientationchange",F)),c}function G(b,c){c=c||!1,a.toggleClass(la,"jw-flag-casting",c)}function H(b,c){a.toggleClass(la,"jw-flag-cast-available",c),a.toggleClass(ma,"jw-flag-cast-available",c)}function I(b,c){a.replaceClass(la,/jw-stretch-\S+/,"jw-stretch-"+c)}function J(b,c){a.toggleClass(la,"jw-flag-compact-player",c)}function K(b){b&&!u&&(a.addEventListener(b.element(),"mousemove",N,!1),a.addEventListener(b.element(),"mouseout",O,!1))}function L(){x.get("state")!==e.IDLE&&x.get("state")!==e.COMPLETE&&x.get("state")!==e.PAUSED||!x.get("controls")||w.play({reason:"interaction"}),Ka?ba():ca()}function M(a){a.link?(w.pause(!0),w.setFullscreen(!1),window.open(a.link,a.linktarget)):x.get("controls")&&w.play({reason:"interaction"})}function N(){clearTimeout(Ga)}function O(){ca()}function P(a){Pa.trigger(a.type,a)}function Q(b,c){c?(Ca&&Ca.destroy(),a.addClass(la,"jw-flag-flash-blocked")):(Ca&&Ca.setup(x,la,la),a.removeClass(la,"jw-flag-flash-blocked"))}function R(){x.get("controls")&&w.setFullscreen()}function S(){var c=a.getElementsByClassName("jw-overlays",la)[0];a.addEventListener(c,"mousemove",ca),va=new g(x,na,{useHover:!0}),va.on("click",function(){P({type:b.JWPLAYER_DISPLAY_CLICK}),x.get("controls")&&!x.get("flashUI")&&x.get("allowClickToDisplay")&&w.play({reason:"interaction"})}),va.on("tap",function(){P({type:b.JWPLAYER_DISPLAY_CLICK}),L()}),x.get("allowDoubleClickFullscreen")&&va.on("doubleClick",R),va.on("move",ca),va.on("over",ca);var d=new h(x);d.on("click",function(){P({type:b.JWPLAYER_DISPLAY_CLICK}),w.play({reason:"interaction"})}),d.on("tap",function(){P({type:b.JWPLAYER_DISPLAY_CLICK}),L()}),ma.appendChild(d.element()),xa=new i(x),ya=new j(x),ya.on(b.JWPLAYER_LOGO_CLICK,M);var e=document.createElement("div");e.className="jw-controls-right jw-reset",ya.setup(e),e.appendChild(xa.element()),ma.appendChild(e),Aa=new f(x),Aa.setup(la.id,x.get("captions")),ma.parentNode.insertBefore(Aa.element(),za.element());var l=x.get("height");u&&("string"==typeof l||l>=1.5*Ia)?a.addClass(la,"jw-flag-touch"):(Ca=new o,Ca.setup(x,la,la)),ra=new k(w,x),ra.on(b.JWPLAYER_USER_ACTION,ca),x.on("change:scrubbing",U),x.on("change:compactUI",J),ma.appendChild(ra.element()),a.addEventListener(la,"focus",E),a.addEventListener(la,"blur",C),a.addEventListener(la,"keydown",B),la.onmousedown=D}function T(b){return b.get("state")===e.PAUSED?void b.once("change:state",T):void(!1===b.get("scrubbing")&&a.removeClass(la,"jw-flag-dragging"))}function U(b,c){b.off("change:state",T),c?a.addClass(la,"jw-flag-dragging"):T(b)}function V(b,c,d){var e,f=la.className;d=!!d,d&&(f=f.replace(/\s*aspectMode/,""),la.className!==f&&(la.className=f),a.style(la,{display:"block"},d)),a.exists(b)&&a.exists(c)&&(x.set("width",b),x.set("height",c)),e={width:b},a.hasClass(la,"jw-flag-aspect-mode")||(e.height=c),s(la,e,!0),W(c),Z(b,c)}function W(b){if(Ba=X(b),ra&&!Ba){var c=Ja?qa:x;ka(c,c.get("state"))}a.toggleClass(la,"jw-flag-audio-player",Ba)}function X(a){return!x.get("aspectratio")&&(!(q.isString(a)&&a.indexOf("%")>-1)&&Y(q.isNumber(a)?a:x.get("containerHeight")))}function Y(a){return a&&a<=Ia*(u?1.75:1)}function Z(b,c){if(!b||isNaN(Number(b))){if(!na)return;b=na.clientWidth}if(!c||isNaN(Number(c))){if(!na)return;c=na.clientHeight}sa&&sa.resize(b,c,x.get("stretching")),a.isMSIE(9)&&document.all&&!window.atob&&(b=c="100%");var d=x.getVideo();if(d){d.resize(b,c,x.get("stretching"))&&(clearTimeout(La),La=setTimeout(Z,250)),Aa.resize(),ra.checkCompactMode(b),x.get("state")===e.PAUSED&&x.get("imageAdvs")&&x.get("imageAdvs").pause&&ta&&!ta.isHidden()&&ta.resizePauseAdv(b,c)}}function $(){if(Na){var a=document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement;return!(!a||a.id!==x.get("id"))}return Ja?qa.getVideo().getFullScreen():x.getVideo().getFullScreen()}function _(a){var b=x.get("fullscreen"),c=void 0!==a.jwstate?a.jwstate:$();b!==c&&x.set("fullscreen",c),clearTimeout(La),La=setTimeout(Z,200)}function aa(b,c){c?(a.addClass(b,"jw-flag-fullscreen"),s(document.body,{"overflow-y":"hidden"}),ca()):(a.removeClass(b,"jw-flag-fullscreen"),s(document.body,{"overflow-y":""})),Z()}function ba(){Ka=!1,clearTimeout(Ga),ra.hideComponents(),a.addClass(la,"jw-flag-user-inactive")}function ca(){Ka||(a.removeClass(la,"jw-flag-user-inactive"),ra.checkCompactMode(na.clientWidth)),Ka=!0,clearTimeout(Ga),Ga=setTimeout(ba,Ha)}function da(){w.setFullscreen(!1),x.get("imageAdvs")&&x.get("imageAdvs").end&&ta&&ta.loadAdv("end")}function ea(){wa&&wa.setState(x.get("state")),fa(x,x.mediaModel.get("mediaType")),x.mediaModel.on("change:mediaType",fa,this)}function fa(b,c){var d="audio"===c,e=x.getVideo(),f=e&&0===e.getName().name.indexOf("flash");a.toggleClass(la,"jw-flag-media-audio",d),d&&!f?la.insertBefore(sa.el,na):la.insertBefore(sa.el,Aa.element())}function ga(b,c){var d=!0===b.get("isLive")||"LIVE"===a.adaptiveType(c)||"DVR"===a.adaptiveType(c);a.toggleClass(la,"jw-flag-live",d),d||Pa.setAltText("")}function ha(a,b){return b?void(b.name?za.updateText(b.name,b.message):za.updateText(b.message,"")):void za.playlistItem(a,a.get("playlistItem"))}function ia(){var a=x.getVideo();return!!a&&a.isCaster}function ja(){a.replaceClass(la,/jw-state-\S+/,"jw-state-"+Da)}function ka(b,c){if(Da=c,clearTimeout(Ma),c===e.COMPLETE||c===e.IDLE?Ma=setTimeout(ja,100):ja(),ia())return void a.addClass(na,"jw-media-show");switch(c){case e.PLAYING:ta&&ta.hide(),Z(),ua&&x.get("marquee").show&&ua.start();break;case e.PAUSED:ta&&x.get("imageAdvs")&&x.get("imageAdvs").pause&&ta.loadAdv("pause"),ca(),ua&&x.get("marquee").show&&ua.pause();break;case e.IDLE:ua&&x.get("marquee").show&&ua.pause();break;case e.COMPLETE:ua&&ua.stop()}}var la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga=-1,Ha=2e3,Ia=40,Ja=!1,Ka=!1,La=-1,Ma=-1,Na=!1,Oa=!1,Pa=q.extend(this,c);this.model=x,this.api=w,la=a.createElement(r({id:x.get("id")})),a.isIE()&&a.addClass(la,"jw-ie"),a.isPoorIE()&&a.addClass(la,"jw-ie-poorie"),x.get("flashUI")&&a.addClass(la,"jw-flashui");var Qa=x.get("width"),Ra=x.get("height");s(la,{width:Qa.toString().indexOf("%")>0?Qa:Qa+"px",height:Ra.toString().indexOf("%")>0?Ra:Ra+"px"}),Ea=la.requestFullscreen||la.webkitRequestFullscreen||la.webkitRequestFullScreen||la.mozRequestFullScreen||la.msRequestFullscreen,Fa=document.exitFullscreen||document.webkitExitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen,Na=Ea&&Fa,this.onChangeSkin=function(b,c){a.replaceClass(la,/jw-skin-\S+/,c?"jw-skin-"+c:"")},this.handleColorOverrides=function(){function b(b,d,e){if(e){b=a.prefix(b,"#"+c+" ");var f={};f[d]=e,a.css(b.join(", "),f,c)}}var c=x.get("id"),d=x.get("skinColorActive"),e=x.get("skinColorInactive"),f=x.get("skinColorBackground");b([".jw-toggle",".jw-button-color:hover"],"color",d),b([".jw-active-option",".jw-progress",".jw-playlist-container .jw-option.jw-active-option",".jw-playlist-container .jw-option:hover"],"background",d),b([".jw-text",".jw-option",".jw-button-color",".jw-toggle.jw-off",".jw-tooltip-title",".jw-skip .jw-skip-icon",".jw-playlist-container .jw-icon"],"color",e),b([".jw-cue",".jw-knob"],"background",e),b([".jw-playlist-container .jw-option"],"border-bottom-color",e),b([".jw-background-color",".jw-tooltip-title",".jw-playlist",".jw-playlist-container .jw-option"],"background",f),b([".jw-playlist-container ::-webkit-scrollbar"],"border-color",f)},this.setup=function(){this.handleColorOverrides(),!0===x.get("skin-loading")&&(a.addClass(la,"jw-flag-skin-loading"),x.once("change:skin-loading",function(){a.removeClass(la,"jw-flag-skin-loading")})),this.onChangeSkin(x,x.get("skin"),""),x.on("change:skin",this.onChangeSkin,this),na=a.getElementsByClassName("jw-media",la)[0],ma=a.getElementsByClassName("jw-controls",la)[0];var c=a.getElementsByClassName("jw-preview",la)[0];sa=new l(x),sa.setup(c);var d=a.getElementsByClassName("jw-title",la)[0];if(za=new p(x),za.setup(d),a.isPoorIE())a.style(a.getElementsByClassName("jw-marquee",la)[0],{display:"none"});else if(ta=new m(x,w),x.get("imageAdvs")&&la.appendChild(ta.element()),x.get("marquee").show){var f=a.getElementsByClassName("jw-marquee",la)[0];ua=new n(x,f),a.style(la,{overflow:"hidden"})}x.advManage&&x.advManage.hasProcessAdv&&la.appendChild(x.advManage.element()),S(),ca(),x.set("mediaContainer",na),x.mediaController.on("fullscreenchange",_);for(var g=v.length;g--;)a.addEventListener(document,v[g],_,!1);a.removeEventListener(window,"resize",F),a.addEventListener(window,"resize",F,!1),u&&(a.removeEventListener(window,"orientationchange",F),a.addEventListener(window,"orientationchange",F,!1)),x.on("change:errorEvent",ha),x.on("change:controls",Sa),Sa(x,x.get("controls")),x.on("change:state",ka),x.on("change:duration",ga,this),x.on("change:flashBlocked",Q),Q(x,x.get("flashBlocked")),w.onPlaylistComplete(da),w.onPlaylistItem(ea),x.on("change:castAvailable",H),H(x,x.get("castAvailable")),x.on("change:castActive",G),G(x,x.get("castActive")),x.get("stretching")&&I(x,x.get("stretching")),x.on("change:stretching",I),ka(x,e.IDLE),x.on("change:fullscreen",Ta),K(ra),K(ya);var h=x.get("aspectratio");if(h){a.addClass(la,"jw-flag-aspect-mode");var i=a.getElementsByClassName("jw-aspect",la)[0];s(i,{paddingTop:h})}w.on(b.JWPLAYER_READY,function(){F(),V(x.get("width"),x.get("height"))}),x.on("connecting",function(){Pa.setAltText(""),a.toggleClass(la,"jw-flag-live",!0)}),x.on("connectFaild",function(){w.stop(),Pa.setAltText(""),a.toggleClass(la,"jw-flag-live",!0),a.getElementsByClassName("jw-controlbar",la)[0].style.display="block"}),x.on("alive",function(){"idle"!==Pa.model.get("state")&&(Pa.setAltText(""),a.toggleClass(la,"jw-flag-live",!0),c.style.display="none",a.getElementsByClassName("jw-controlbar",la)[0].style.removeProperty("display"))}),x.on("noLiveStream",function(){"idle"!==Pa.model.get("state")&&x.get("isLive")&&(Pa.setAltText(""),a.toggleClass(la,"jw-flag-live",!0),x.get("image")&&(c.style.display="block"),a.getElementsByClassName("jw-controlbar",la)[0].style.display="block")}),x.on("liveStop",function(){w.stop(),Pa.setAltText(""),a.toggleClass(la,"jw-flag-live",!0),a.getElementsByClassName("jw-controlbar",la)[0].style.display="block"}),x.on("seekAfterLoadSuccess",function(){Pa.setAltText("..."),a.addClass(ra.element(),"jw-controlbar-textshow"),setTimeout(function(){a.removeClass(ra.element(),"jw-controlbar-textshow")},1e3)})};var Sa=function(b,c){if(c){ka(b,Ja?qa.get("state"):x.get("state"))}a.toggleClass(la,"jw-flag-controls-disabled",!c)},Ta=function(b,c){var d=x.getVideo();Na?(c?Ea.apply(la):Fa.apply(document),aa(la,c)):a.isIE()?aa(la,c):(qa&&qa.getVideo()&&qa.getVideo().setFullscreen(c),d.setFullscreen(c)),d&&0===d.getName().name.indexOf("flash")&&d.setFullscreen(c),ua&&x.get("marquee").show&&ua.reset(la.clientWidth,la.clientHeight)};this.resize=function(a,b){V(a,b,!0),F()},this.resizeMedia=Z,this.reset=function(){document.contains(la)&&la.parentNode.replaceChild(void 0,la),a.emptyElement(la)},this.setupInstream=function(b){this.instreamModel=qa=b,qa.on("change:controls",Sa,this),qa.on("change:state",ka,this),Ja=!0,a.addClass(la,"jw-flag-ads"),ca()},this.setAltText=function(a){ra.setAltText(a)},this.useExternalControls=function(){a.addClass(la,"jw-flag-ads-hide-controls")},this.destroyInstream=function(){if(Ja=!1,qa&&(qa.off(null,null,this),qa=null),this.setAltText(""),a.removeClass(la,"jw-flag-ads"),a.removeClass(la,"jw-flag-ads-hide-controls"),x.getVideo){x.getVideo().setContainer(na)}ga(x,x.get("duration")),va.revertAlternateClickHandlers()},this.addCues=function(a){ra&&ra.addCues(a)},this.addThumbnails=function(a){ra&&ra.addThumbnails(a)},this.clickHandler=function(){return va},this.controlsContainer=function(){return ma},this.getContainer=this.element=function(){return la},this.getSafeRegion=function(b){var c={x:0,y:0,width:x.get("containerWidth")||0,height:x.get("containerHeight")||0},d=x.get("dock");return d&&d.length&&x.get("controls")&&(c.y=xa.element().clientHeight,c.height-=c.y),b=b||!a.exists(b),b&&x.get("controls")&&(c.height-=ra.element().clientHeight),c},this.setCaptions=function(a){Aa.clear(),Aa.setup(x.get("id"),a),Aa.resize()},this.destroy=function(){a.removeEventListener(window,"resize",F),a.removeEventListener(window,"orientationchange",F);for(var b=v.length;b--;)a.removeEventListener(document,v[b],_,_,!1);x.mediaController&&x.mediaController.off("fullscreenchange",_),a.removeEventListener(la,"keydown",B),Ca&&Ca.destroy(),wa&&(x.off("change:state",wa.statusDelegate),wa.destroy(),wa=null),Ja&&this.destroyInstream(),ya&&ya.destroy(),a.clearCss(x.get("id"))},this.showAdv=function(a){ta&&ta.loadAdv(a)},this.beginStartAdv=function(){ta&&ta.beginStartAdv()}}}.apply(b,d))&&(a.exports=e)},function(a,b){a.exports=function(){var a=[];return a.toString=function(){for(var a=[],b=0;b<this.length;b++){var c=this[b];c[2]?a.push("@media "+c[2]+"{"+c[1]+"}"):a.push(c[1])}return a.join("")},a.i=function(b,c){"string"==typeof b&&(b=[[null,b,""]]);for(var d={},e=0;e<this.length;e++){var f=this[e][0];"number"==typeof f&&(d[f]=!0)}for(e=0;e<b.length;e++){var g=b[e];"number"==typeof g[0]&&d[g[0]]||(c&&!g[2]?g[2]=c:c&&(g[2]="("+g[2]+") and ("+c+")"),a.push(g))}},a}},function(a,b,c){(function(b,c){!function(b,c){a.exports=function(){"use strict";function a(a){var b=typeof a;return null!==a&&("object"===b||"function"===b)}function d(a){return"function"==typeof a}function e(a){N=a}function f(a){O=a}function g(){return void 0!==M?function(){M(i)}:h()}function h(){var a=setTimeout;return function(){return a(i,1)}}function i(){for(var a=0;a<L;a+=2){(0,U[a])(U[a+1]),U[a]=void 0,U[a+1]=void 0}L=0}function j(a,b){var c=this,d=new this.constructor(l);void 0===d[W]&&B(d);var e=c._state;if(e){var f=arguments[e-1];O(function(){return y(e,d,f,c._result)})}else w(c,d,a,b);return d}function k(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(l);return s(c,a),c}function l(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function n(){return new TypeError("A promises callback cannot return that same promise.")}function o(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function p(a,b,c){O(function(a){var d=!1,e=o(c,b,function(c){d||(d=!0,b!==c?s(a,c):u(a,c))},function(b){d||(d=!0,v(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,v(a,e))},a)}function q(a,b){b._state===Y?u(a,b._result):b._state===Z?v(a,b._result):w(b,void 0,function(b){return s(a,b)},function(b){return v(a,b)})}function r(a,b,c){b.constructor===a.constructor&&c===j&&b.constructor.resolve===k?q(a,b):void 0===c?u(a,b):d(c)?p(a,b,c):u(a,b)}function s(b,c){if(b===c)v(b,m());else if(a(c)){var d=void 0;try{d=c.then}catch(a){return void v(b,a)}r(b,c,d)}else u(b,c)}function t(a){a._onerror&&a._onerror(a._result),x(a)}function u(a,b){a._state===X&&(a._result=b,a._state=Y,0!==a._subscribers.length&&O(x,a))}function v(a,b){a._state===X&&(a._state=Z,a._result=b,O(t,a))}function w(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+Y]=c,e[f+Z]=d,0===f&&a._state&&O(x,a)}function x(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d=void 0,e=void 0,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?y(c,d,e,f):e(f);a._subscribers.length=0}}function y(a,b,c,e){var f=d(c),g=void 0,h=void 0,i=!0;if(f){try{g=c(e)}catch(a){i=!1,h=a}if(b===g)return void v(b,n())}else g=e;b._state!==X||(f&&i?s(b,g):!1===i?v(b,h):a===Y?u(b,g):a===Z&&v(b,g))}function z(a,b){try{b(function(b){s(a,b)},function(b){v(a,b)})}catch(b){v(a,b)}}function A(){return $++}function B(a){a[W]=$++,a._state=void 0,a._result=void 0,a._subscribers=[]}function C(){return new Error("Array Methods must be provided an Array")}function D(a){return new _(this,a).promise}function E(a){var b=this
;return new b(K(a)?function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}:function(a,b){return b(new TypeError("You must pass an array to race."))})}function F(a){var b=this,c=new b(l);return v(c,a),c}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function I(){var a=void 0;if(void 0!==c)a=c;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;if(b){var d=null;try{d=Object.prototype.toString.call(b.resolve())}catch(a){}if("[object Promise]"===d&&!b.cast)return}a.Promise=aa}var J=void 0;J=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var K=J,L=0,M=void 0,N=void 0,O=function(a,b){U[L]=a,U[L+1]=b,2===(L+=2)&&(N?N(i):V())},P="undefined"!=typeof window?window:void 0,Q=P||{},R=Q.MutationObserver||Q.WebKitMutationObserver,S="undefined"==typeof self&&void 0!==b&&"[object process]"==={}.toString.call(b),T="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,U=new Array(1e3),V=void 0;V=S?function(){return function(){return b.nextTick(i)}}():R?function(){var a=0,b=new R(i),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}():T?function(){var a=new MessageChannel;return a.port1.onmessage=i,function(){return a.port2.postMessage(0)}}():void 0===P?function(){try{var a=Function("return this")().require("vertx");return M=a.runOnLoop||a.runOnContext,g()}catch(a){return h()}}():h();var W=Math.random().toString(36).substring(2),X=void 0,Y=1,Z=2,$=0,_=function(){function a(a,b){this._instanceConstructor=a,this.promise=new a(l),this.promise[W]||B(this.promise),K(b)?(this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?u(this.promise,this._result):(this.length=this.length||0,this._enumerate(b),0===this._remaining&&u(this.promise,this._result))):v(this.promise,C())}return a.prototype._enumerate=function(a){for(var b=0;this._state===X&&b<a.length;b++)this._eachEntry(a[b],b)},a.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===k){var e=void 0,f=void 0,g=!1;try{e=a.then}catch(a){g=!0,f=a}if(e===j&&a._state!==X)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===aa){var h=new c(l);g?v(h,f):r(h,a,e),this._willSettleAt(h,b)}else this._willSettleAt(new c(function(b){return b(a)}),b)}else this._willSettleAt(d(a),b)},a.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===X&&(this._remaining--,a===Z?v(d,c):this._result[b]=c),0===this._remaining&&u(d,this._result)},a.prototype._willSettleAt=function(a,b){var c=this;w(a,void 0,function(a){return c._settledAt(Y,b,a)},function(a){return c._settledAt(Z,b,a)})},a}(),aa=function(){function a(b){this[W]=A(),this._result=this._state=void 0,this._subscribers=[],l!==b&&("function"!=typeof b&&G(),this instanceof a?z(this,b):H())}return a.prototype["catch"]=function(a){return this.then(null,a)},a.prototype["finally"]=function(a){var b=this,c=b.constructor;return d(a)?b.then(function(b){return c.resolve(a()).then(function(){return b})},function(b){return c.resolve(a()).then(function(){throw b})}):b.then(a,a)},a}();return aa.prototype.then=j,aa.all=D,aa.race=E,aa.resolve=k,aa.reject=F,aa._setScheduler=e,aa._setAsap=f,aa._asap=O,aa.polyfill=I,aa.Promise=aa,aa}()}()}).call(b,c(172),function(){return this}())},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j["default"],a.Exception=l["default"],a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}b.__esModule=!0;var g=c(67),h=e(g),i=c(171),j=d(i),k=c(17),l=d(k),m=c(12),n=e(m),o=c(170),p=e(o),q=c(169),r=d(q),s=f();s.create=f,r["default"](s),s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){f["default"](a)}b.__esModule=!0,b.registerDefaultDecorators=d;var e=c(159),f=function(a){return a&&a.__esModule?a:{"default":a}}(e)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(12);b["default"]=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(12);b["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(!0===b)return f(this);if(!1===b||null==b)return e(this);if(d.isArray(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},a.exports=b["default"]},function(a,b,c){(function(d){"use strict";b.__esModule=!0;var e=c(12),f=c(17),g=function(a){return a&&a.__esModule?a:{"default":a}}(f);b["default"]=function(a){a.registerHelper("each",function(a,b){function c(b,c,d){k&&(k.key=b,k.index=c,k.first=0===c,k.last=!!d,l&&(k.contextPath=l+b)),j+=f(a[b],{data:k,blockParams:e.blockParams([a[b],b],[l+b,null])})}if(!b)throw new g["default"]("Must pass iterator to #each");var f=b.fn,h=b.inverse,i=0,j="",k=void 0,l=void 0;if(b.data&&b.ids&&(l=e.appendContextPath(b.data.contextPath,b.ids[0])+"."),e.isFunction(a)&&(a=a.call(this)),b.data&&(k=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var m=a.length;i<m;i++)i in a&&c(i,i,i===a.length-1);else if(d.Symbol&&a[d.Symbol.iterator]){for(var n=[],o=a[d.Symbol.iterator](),p=o.next();!p.done;p=o.next())n.push(p.value);a=n;for(var m=a.length;i<m;i++)c(i,i,i===a.length-1)}else!function(){var b=void 0;Object.keys(a).forEach(function(a){void 0!==b&&c(b,i-1),b=a,i++}),void 0!==b&&c(b,i-1,!0)}();return 0===i&&(j=h(this)),j})},a.exports=b["default"]}).call(b,function(){return this}())},function(a,b,c){"use strict";b.__esModule=!0;var d=c(17),e=function(a){return a&&a.__esModule?a:{"default":a}}(d);b["default"]=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new e["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(12),e=c(17),f=function(a){return a&&a.__esModule?a:{"default":a}}(e);b["default"]=function(a){a.registerHelper("if",function(a,b){if(2!=arguments.length)throw new f["default"]("#if requires exactly one argument");return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){if(2!=arguments.length)throw new f["default"]("#unless requires exactly one argument");return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("lookup",function(a,b,c){return a?c.lookupProperty(a,b):a})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(12),e=c(17),f=function(a){return a&&a.__esModule?a:{"default":a}}(e);b["default"]=function(a){a.registerHelper("with",function(a,b){if(2!=arguments.length)throw new f["default"]("#with requires exactly one argument");d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return b.data&&b.ids&&(e=d.createFrame(b.data),e.contextPath=d.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:e,blockParams:d.blockParams([a],[e&&e.contextPath])})})},a.exports=b["default"]},function(a,b,c){"use strict";function d(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return e.extend.apply(void 0,[Object.create(null)].concat(b))}b.__esModule=!0,b.createNewLookupObject=d;var e=c(12)},function(a,b){"use strict";function c(a,b){return"function"!=typeof a?a:function(){var c=arguments[arguments.length-1];return arguments[arguments.length-1]=b(c),a.apply(this,arguments)}}b.__esModule=!0,b.wrapHelper=c},function(a,b){(function(c){"use strict";b.__esModule=!0,b["default"]=function(a){var b=void 0!==c?c:window,d=b.Handlebars;a.noConflict=function(){return b.Handlebars===a&&(b.Handlebars=d),a}},a.exports=b["default"]}).call(b,function(){return this}())},function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=r.COMPILER_REVISION;if(!(b>=r.LAST_COMPATIBLE_COMPILER_REVISION&&b<=r.COMPILER_REVISION)){if(b<r.LAST_COMPATIBLE_COMPILER_REVISION){var d=r.REVISION_CHANGES[c],e=r.REVISION_CHANGES[b];throw new q["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new q["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){function c(c,d,e){e.hash&&(d=o.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=o.extend({},e,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),g=b.VM.invokePartial.call(this,c,d,f);if(null==g&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),g=e.partials[e.name](d,f)),null!=g){if(e.indent){for(var h=g.split("\n"),i=0,j=h.length;i<j&&(h[i]||i+1!==j);i++)h[i]=e.indent+h[i];g=h.join("\n")}return g}throw new q["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(g,b,g.helpers,g.partials,f,i,h)}var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],f=e.data;d._setup(e),!e.partial&&a.useData&&(f=j(b,f));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=e.depths?b!=e.depths[0]?[b].concat(e.depths):e.depths:[b]),(c=k(a.main,c,g,e.depths||[],f,i))(b,e)}if(!b)throw new q["default"]("No environment passed to template");if(!a||!a.main)throw new q["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e=a.compiler&&7===a.compiler[0],g={strict:function(a,b,c){if(!(a&&b in a))throw new q["default"]('"'+b+'" not defined in '+a,{loc:c});return g.lookupProperty(a,b)},lookupProperty:function(a,b){var c=a[b];return null==c?c:Object.prototype.hasOwnProperty.call(a,b)?c:u.resultIsAllowed(c,g.protoAccessControl,b)?c:void 0},lookup:function(a,b){for(var c=a.length,d=0;d<c;d++){if(null!=(a[d]&&g.lookupProperty(a[d],b)))return a[d][b]}},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:o.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var g=this.programs[a],h=this.fn(a);return b||e||d||c?g=f(this,a,h,b,c,d,e):g||(g=this.programs[a]=f(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},mergeIfNeeded:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=o.extend({},b,a)),c},nullContext:Object.seal({}),noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){if(c.partial)g.protoAccessControl=c.protoAccessControl,g.helpers=c.helpers,g.partials=c.partials,g.decorators=c.decorators,g.hooks=c.hooks;else{var d=o.extend({},b.helpers,c.helpers);l(d,g),g.helpers=d,a.usePartial&&(g.partials=g.mergeIfNeeded(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(g.decorators=o.extend({},b.decorators,c.decorators)),g.hooks={},g.protoAccessControl=u.createProtoAccessControl(c);var f=c.allowCallsToHelperMissing||e;s.moveHelperToHooks(g,"helperMissing",f),s.moveHelperToHooks(g,"blockHelperMissing",f)}},d._child=function(b,c,d,e){if(a.useBlockParams&&!d)throw new q["default"]("must pass block params");if(a.useDepths&&!e)throw new q["default"]("must pass parent depths");return f(g,b,a[b],c,0,d,e)},d}function f(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return!g||b==g[0]||b===a.nullContext&&null===g[0]||(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=k(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function g(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function h(a,b,c){var d=c.data&&c.data["partial-block"];c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var e=void 0;if(c.fn&&c.fn!==i&&function(){c.data=r.createFrame(c.data);var a=c.fn;e=c.data["partial-block"]=function(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return c.data=r.createFrame(c.data),c.data["partial-block"]=d,a(b,c)},a.partials&&(c.partials=o.extend({},c.partials,a.partials))}(),void 0===a&&e&&(a=e),void 0===a)throw new q["default"]("The partial "+c.name+" could not be found");if(a instanceof Function)return a(b,c)}function i(){return""}function j(a,b){return b&&"root"in b||(b=b?r.createFrame(b):{},b.root=a),b}function k(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),o.extend(b,g)}return b}function l(a,b){Object.keys(a).forEach(function(c){var d=a[c];a[c]=m(d,b)})}function m(a,b){var c=b.lookupProperty;return t.wrapHelper(a,function(a){return o.extend({lookupProperty:c},a)})}b.__esModule=!0,b.checkRevision=d,b.template=e,b.wrapProgram=f,b.resolvePartial=g,b.invokePartial=h,b.noop=i;var n=c(12),o=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(n),p=c(17),q=function(a){return a&&a.__esModule?a:{"default":a}}(p),r=c(67),s=c(68),t=c(168),u=c(69)},function(a,b){"use strict";function c(a){this.string=a}b.__esModule=!0,c.prototype.toString=c.prototype.toHTML=function(){return""+this.string},b["default"]=c,a.exports=b["default"]},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(k===setTimeout)return setTimeout(a,0);if((k===c||!k)&&setTimeout)return k=setTimeout,setTimeout(a,0);try{return k(a,0)}catch(b){try{return k.call(null,a,0)}catch(b){return k.call(this,a,0)}}}function f(a){if(l===clearTimeout)return clearTimeout(a);if((l===d||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{return l(a)}catch(b){try{return l.call(null,a)}catch(b){return l.call(this,a)}}}function g(){p&&n&&(p=!1,n.length?o=n.concat(o):q=-1,o.length&&h())}function h(){if(!p){var a=e(g);p=!0;for(var b=o.length;b;){for(n=o,o=[];++q<b;)n&&n[q].run();q=-1,b=o.length}n=null,p=!1,f(a)}}function i(a,b){this.fun=a,this.array=b}function j(){}var k,l,m=a.exports={};!function(){try{k="function"==typeof setTimeout?setTimeout:c}catch(a){k=c}try{l="function"==typeof clearTimeout?clearTimeout:d}catch(a){l=d}}();var n,o=[],p=!1,q=-1;m.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new i(a,b)),1!==o.length||p||e(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=j,m.addListener=j,m.once=j,m.off=j,m.removeListener=j,m.removeAllListeners=j,m.emit=j,m.prependListener=j,m.prependOnceListener=j,m.listeners=function(a){return[]},m.binding=function(a){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(a){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(a,b){var c=arguments[3],d=arguments[4],e=arguments[5],f=JSON.stringify;a.exports=function(a,b){function g(a){q[a]=!0;for(var b in d[a][1]){var c=d[a][1][b];q[c]||g(c)}}for(var h,i=Object.keys(e),j=0,k=i.length;j<k;j++){var l=i[j],m=e[l].exports;if(m===a||m&&m["default"]===a){h=l;break}}if(!h){h=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var n={},j=0,k=i.length;j<k;j++){var l=i[j];n[l]=l}d[h]=["function(require,module,exports){"+a+"(self); }",n]}var o=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[h]=h,d[o]=["function(require,module,exports){var f = require("+f(h)+");(f.default ? f.default : f)(self);}",p];var q={};g(o);var r="("+c+")({"+Object.keys(q).map(function(a){return f(a)+":["+d[a][0]+","+f(d[a][1])+"]"}).join(",")+"},{},["+f(o)+"])",s=window.URL||window.webkitURL||window.mozURL||window.msURL,t=new Blob([r],{type:"text/javascript"});if(b&&b.bare)return t;var u=s.createObjectURL(t),v=new Worker(u);return v.objectURL=u,v}},function(a,b,c){var d=c(10);a.exports=(d["default"]||d).template({compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){return'<div class="jw-adv jw-reset">\n    <div class="adv-countdown"></div>\n    <div class="adv-close">X</div>\n</div>'},useData:!0})},function(a,b,c){var d=c(10);a.exports=(d["default"]||d).template({compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){return'<div class="jw-display-icon-container jw-background-color jw-reset">\n    <div class="jw-icon jw-icon-display jw-button-color jw-reset"></div>\n</div>\n'},useData:!0})},function(a,b,c){var d=c(10);a.exports=(d["default"]||d).template({1:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'    <div class="jw-dock-button jw-background-color jw-reset'+(null!=(f=i(c,"if").call(h,null!=b?i(b,"btnClass"):b,{name:"if",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e,loc:{start:{line:3,column:59},end:{line:3,column:95}}}))?f:"")+'" button="'+a.escapeExpression((g=null!=(g=i(c,"id")||(null!=b?i(b,"id"):b))?g:a.hooks.helperMissing,"function"==typeof g?g.call(h,{name:"id",hash:{},data:e,loc:{start:{line:3,column:105},end:{line:3,column:111}}}):g))+'">\n        <div class="jw-icon jw-dock-image jw-reset" '+(null!=(f=i(c,"if").call(h,null!=b?i(b,"img"):b,{name:"if",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e,loc:{start:{line:4,column:52},end:{line:4,column:110}}}))?f:"")+'></div>\n        <div class="jw-arrow jw-reset"></div>\n'+(null!=(f=i(c,"if").call(h,null!=b?i(b,"tooltip"):b,{name:"if",hash:{},fn:a.program(6,e,0),inverse:a.noop,data:e,loc:{start:{line:6,column:8},end:{line:10,column:15}}}))?f:"")+"    </div>\n"},2:function(a,b,c,d,e){var f,g=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return" "+a.escapeExpression((f=null!=(f=g(c,"btnClass")||(null!=b?g(b,"btnClass"):b))?f:a.hooks.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"btnClass",hash:{},data:e,loc:{start:{line:3,column:76},end:{line:3,column:88}}}):f))},4:function(a,b,c,d,e){var f,g=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return"style='background-image: url(\""+a.escapeExpression((f=null!=(f=g(c,"img")||(null!=b?g(b,"img"):b))?f:a.hooks.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"img",hash:{},data:e,loc:{start:{line:4,column:93},end:{line:4,column:100}}}):f))+"\")'"},6:function(a,b,c,d,e){var f,g=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'        <div class="jw-overlay jw-background-color jw-reset">\n            <span class="jw-text jw-dock-text jw-reset">'+a.escapeExpression((f=null!=(f=g(c,"tooltip")||(null!=b?g(b,"tooltip"):b))?f:a.hooks.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"tooltip",hash:{},data:e,loc:{start:{line:8,column:56},end:{line:8,column:67}}}):f))+"</span>\n        </div>\n"},compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){var f;return'<div class="jw-dock jw-reset">\n'+(null!=(f=(a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]})(c,"each").call(null!=b?b:a.nullContext||{},b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e,loc:{start:{line:2,column:4},end:{line:12,column:13}}}))?f:"")+"</div>"},useData:!0})},function(a,b,c){var d=c(10);a.exports=(d["default"]||d).template({compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=a.hooks.helperMissing,j="function",k=a.escapeExpression,l=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'<div id="'+k((g=null!=(g=l(c,"id")||(null!=b?l(b,"id"):b))?g:i,typeof g===j?g.call(h,{name:"id",hash:{},data:e,loc:{start:{line:1,column:9},end:{line:1,column:15}}}):g))+'"class="jw-skin-'+k((g=null!=(g=l(c,"skin")||(null!=b?l(b,"skin"):b))?g:i,typeof g===j?g.call(h,{name:"skin",hash:{},data:e,loc:{start:{line:1,column:31},end:{line:1,column:39}}}):g))+' jw-error jw-reset">\n    <div class="jw-title jw-reset">\n        <div class="jw-title-primary jw-reset">'+(null!=(g=null!=(g=l(c,"title")||(null!=b?l(b,"title"):b))?g:i,f=typeof g===j?g.call(h,{name:"title",hash:{},data:e,loc:{start:{line:3,column:47},end:{line:3,column:58}}}):g)?f:"")+'</div>\n        <div class="jw-title-secondary jw-reset">'+k((g=null!=(g=l(c,"body")||(null!=b?l(b,"body"):b))?g:i,typeof g===j?g.call(h,{name:"body",hash:{},data:e,loc:{start:{line:4,column:49},end:{line:4,column:57}}}):g))+'</div>\n    </div>\n\n    <div class="jw-icon-container jw-reset">\n        <div class="jw-display-icon-container jw-background-color jw-reset">\n            <div class="jw-icon jw-icon-display jw-reset"></div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},function(a,b,c){var d=c(10);a.exports=(d["default"]||d).template({1:function(a,b,c,d,e){var f,g=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'src="'+a.escapeExpression((f=null!=(f=g(c,"file")||(null!=b?g(b,"file"):b))?f:a.hooks.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"file",hash:{},data:e,loc:{start:{line:2,column:48},end:{line:2,column:56}}}):f))+'"'},compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){var f,g=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'<div class="jw-logo jw-reset">\n    <img class="jw-logo-image" '+(null!=(f=g(c,"if").call(null!=b?b:a.nullContext||{},null!=b?g(b,"file"):b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e,loc:{start:{line:2,column:31},end:{line:2,column:64}}}))?f:"")+">\n</div>"},useData:!0})},function(a,b,c){var d=c(10);a.exports=(d["default"]||d).template({1:function(a,b,c,d,e){var f,g=a.escapeExpression,h=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return"        <li class='jw-text jw-option jw-item-"+g((f=null!=(f=h(c,"index")||e&&h(e,"index"))?f:a.hooks.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"index",hash:{},data:e,loc:{start:{line:3,column:45},end:{line:3,column:55}}}):f))+" jw-reset'>"+g(a.lambda(null!=b?h(b,"label"):b,b))+"</li>\n"},compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){var f;return'<ul class="jw-menu jw-background-color jw-reset">\n'+(null!=(f=(a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]})(c,"each").call(null!=b?b:a.nullContext||{},b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e,loc:{start:{line:2,column:4},end:{line:4,column:13}}}))?f:"")+"</ul>"},useData:!0})},function(a,b,c){var d=c(10);a.exports=(d["default"]||d).template({compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){var f,g=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'<div id="'+a.escapeExpression((f=null!=(f=g(c,"id")||(null!=b?g(b,"id"):b))?f:a.hooks.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"id",hash:{},data:e,loc:{start:{line:1,column:9},end:{line:1,column:15}}}):f))+'" class="jwplayer jw-reset" tabindex="0">\n    <div class="jw-aspect jw-reset"></div>\n    <div class="jw-media jw-reset"></div>\n    <div class="jw-preview jw-reset"></div>\n    <div class="jw-title jw-reset">\n        <div class="jw-title-primary jw-reset"></div>\n        <div class="jw-title-secondary jw-reset"></div>\n    </div>\n    <div class="jw-overlays jw-reset"></div>\n    <div class="jw-controls jw-reset"></div>\n    <div class="jw-warning jw-reset">\n        <a target="_blank" href="http://bce.baidu.com"></a>\n    </div>\n    <div class="jw-marquee"></div>\n</div>'},useData:!0})},function(a,b,c){var d=c(10);a.exports=(d["default"]||d).template({1:function(a,b,c,d,e){var f,g=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return null!=(f=g(c,"if").call(null!=b?b:a.nullContext||{},null!=b?g(b,"active"):b,{name:"if",hash:{},fn:a.program(2,e,0),inverse:a.program(4,e,0),data:e,loc:{start:{line:14,column:12},end:{line:24,column:19}}}))?f:""},2:function(a,b,c,d,e){var f,g=a.escapeExpression,h=a.lambda,i=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return"                <li class='jw-option jw-text jw-active-option jw-item-"+g((f=null!=(f=i(c,"index")||e&&i(e,"index"))?f:a.hooks.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"index",hash:{},data:e,loc:{start:{line:15,column:70},end:{line:15,column:80}}}):f))+' jw-reset\'>\n                    <span class="jw-label jw-reset"><span class="jw-icon jw-icon-play jw-reset"></span></span>\n                    <span class="jw-name jw-reset" title="'+g(h(null!=b?i(b,"title"):b,b))+'">'+g(h(null!=b?i(b,"title"):b,b))+"</span>\n                </li>\n"},4:function(a,b,c,d,e){var f,g=a.escapeExpression,h=a.lambda,i=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return"                <li class='jw-option jw-text jw-item-"+g((f=null!=(f=i(c,"index")||e&&i(e,"index"))?f:a.hooks.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"index",hash:{},data:e,loc:{start:{line:20,column:53},end:{line:20,column:63}}}):f))+' jw-reset\'>\n                    <span class="jw-label jw-reset">'+g(h(null!=b?i(b,"label"):b,b))+'</span>\n                    <span class="jw-name jw-reset" title="'+g(h(null!=b?i(b,"title"):b,b))+'">'+g(h(null!=b?i(b,"title"):b,b))+"</span>\n                </li>\n"},compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){var f;return'<div class="jw-menu jw-playlist-container jw-background-color jw-reset">\n\n    <div class="jw-tooltip-title jw-reset">\n        <span class="jw-icon jw-icon-inline jw-icon-playlist jw-reset"></span>\n        <span class="jw-text jw-reset"></span>\n    </div>\n\n    <ul class="jw-playlist jw-reset">\n'+(null!=(f=(a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]})(c,"each").call(null!=b?b:a.nullContext||{},b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e,loc:{start:{line:13,column:8},end:{line:25,column:17}}}))?f:"")+"    </ul>\n</div>"},useData:!0})},function(a,b,c){var d=c(10);a.exports=(d["default"]||d).template({compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){return'<div class="jw-process-adv jw-reset">\n    <a target="_blank"><img/></a>\n</div>'},useData:!0})},function(a,b,c){var d=c(10);a.exports=(d["default"]||d).template({1:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=a.hooks.helperMissing,j="function",k=a.escapeExpression,l=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'        <li class="jw-reset'+(null!=(f=l(c,"if").call(h,null!=b?l(b,"featured"):b,{name:"if",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e,loc:{start:{line:4,column:27},end:{line:4,column:62}}}))?f:"")+'">\n            <a href="'+k((g=null!=(g=l(c,"link")||(null!=b?l(b,"link"):b))?g:i,typeof g===j?g.call(h,{name:"link",hash:{},data:e,loc:{start:{line:5,column:21},end:{line:5,column:29}}}):g))+'" class="jw-reset" target="_blank">\n'+(null!=(f=l(c,"if").call(h,null!=b?l(b,"showLogo"):b,{name:"if",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e,loc:{start:{line:6,column:16},end:{line:8,column:23}}}))?f:"")+"                "+k((g=null!=(g=l(c,"title")||(null!=b?l(b,"title"):b))?g:i,typeof g===j?g.call(h,{name:"title",hash:{},data:e,loc:{start:{line:9,column:16},end:{line:9,column:25}}}):g))+"\n            </a>\n        </li>\n"},2:function(a,b,c,d,e){return" jw-featured"},4:function(a,b,c,d,e){return'                <span class="jw-icon jw-rightclick-logo jw-reset"></span>\n'},compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){var f,g=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'<div class="jw-rightclick jw-reset">\n    <ul class="jw-reset">\n'+(null!=(f=g(c,"each").call(null!=b?b:a.nullContext||{},null!=b?g(b,"items"):b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e,loc:{start:{line:3,column:4},end:{line:12,column:13}}}))?f:"")+"    </ul>\n</div>"},useData:!0})},function(a,b,c){var d=c(10);a.exports=(d["default"]||d).template({compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=a.hooks.helperMissing,i="function",j=a.escapeExpression,k=a.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'<div class="'+j((f=null!=(f=k(c,"className")||(null!=b?k(b,"className"):b))?f:h,typeof f===i?f.call(g,{name:"className",hash:{},data:e,loc:{start:{line:1,column:12},end:{line:1,column:25}}}):f))+" "+j((f=null!=(f=k(c,"orientation")||(null!=b?k(b,"orientation"):b))?f:h,typeof f===i?f.call(g,{name:"orientation",hash:{},data:e,loc:{start:{line:1,column:26},end:{line:1,column:41}}}):f))+' jw-reset">\n    <div class="jw-slider-container jw-reset">\n        <div class="jw-rail jw-reset"></div>\n        <div class="jw-buffer jw-reset"></div>\n        <div class="jw-progress jw-reset"></div>\n        <div class="jw-knob jw-reset"></div>\n    </div>\n</div>'},useData:!0})},function(a,b,c){var d=c(73);"string"==typeof d&&(d=[["all-players",d,""]]),c(71).style(d,"all-players"),d.locals&&(a.exports=d.locals)},function(a,b){
a.exports="data:application/font-woff;base64,d09GRgABAAAAABBsAAwAAAAAGrQAAQABAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABHAAAABwAAAAceNAbgU9TLzIAAAE4AAAAPAAAAGAPEwN7Y21hcAAAAXQAAABVAAABXhpX0/hnYXNwAAABzAAAAAgAAAAIAAAAEGdseWYAAAHUAAAMJQAAE8DyWIwraGVhZAAADfwAAAAzAAAANg6NKpBoaGVhAAAOMAAAACAAAAAkCUEFmmhtdHgAAA5QAAAATAAAAHh6CweJbG9jYQAADpwAAAA+AAAAPkNgPzJtYXhwAAAO3AAAABgAAAAgACcBc25hbWUAAA70AAAA7wAAAdeoyha4cG9zdAAAD+QAAACIAAABNQYi66kAAAABAAAAANIEFAUAAAAA0dQiKwAAAADU9+VQeJxjYGapYJzAwMrAwDST6QwDA0M/hGZ8zWDMyMmAChgFGDAA4zMJ5gP/DzA4MAMxiI8kp8DACABAdAqXeJxjYGBgZoBgGQZGBhCIAPIYwXwWBhsgzcXAwcAEhIwMCs8k/v/9/x+sSuEZA4T9/4kUK1gHFwMMMILMY2QDYmaoABOQYGJABUA7WBiGNwAAPDoNNAAAAAABAAH//wAPeJy1V1tsXMUZnsuZM+d+8bnsOrZ3vRfvxuuNb+vdzcXebOLcGpQEkoBzAeSEKBdChQuq2kZJ2CoPRSIRQRFBRYoaiUpASkSUqEiNKuqWFqmVUvWhFVKfEA9ItEVCagtSsTf956zXcQK9PMDRnLnPP//MfPP9/yCM2h9BaBVB/6ssoWmE2GXaQKvRWrQBfQOhviA9SMpjleogLo/VSGk0QQJf5gkc+BbJuKNhrAYNgySTtqBBlEruCA5S5VRsMcL1wZ0TGQ2+TSdeeeSRV05sEvnMxM7BwtYEJqsPP7tt27OHV2OS2FogDxJ9/p8X8bebz23FA80/JRKiX+dgkJxMi5FCQnoyGUAVyMSzPZ1mlyVGCylWl9nZ03yUHnzxxfejACvDqI4QnYU1pRDy/AQsoUbKJaF9tDJYUyB0H3murcd9bS1FGik2256gXSvS+0QFgj0D+ZKQb6FuVEAjsGeDOJ9yUy4kEKd4ZpDmywkaGxnAd3LlBI6NkGcok4gxt0kf0KXx+V/s2qdsOH52x8E3zuxSfrqf51dvLUwc31lW3vr+0CZjvb5cI79sfkQ1grfM/Wr99h8cXa/sUe5vvDrdv2VVju/hYw8cGT+lbxgUJ8qW6NWJ8qiMxr+gGS5DBCqN4P+iYoPIjJhzdaOgSfX52WaD1pu98Y17n6jhFfuUjULdq2d2qjf28fyarYXxx3dW1JuN4Q1G3VhukNnmx0SheNPcLP7DJ/OzE0d2r4vNf7Lt2aPr+T7Q/DXQfGUOsuUHjqw5ZUwOLuwnE3pLSEVH0G8QKkW6Cr1ZDVcBYYA6UK0VMrCWdsikZW7hVhBgbHcqjVZgWLXUboOQSecWhwl4Q/NI6muVXmeNfzVY5XNf+ttcxkp5fjHekXLsbtPwFUUn+zFjkgYzKIqjOst0vYNzjUafxnmHri9zwpRh2HQfUbnimUa362T9eNH3UpYZ8OgLTHzTTPlesdNNOU63YQSKopF9hEmSLssg2VWcri9K7nKCtGFYdD9RFe4bRo/jZr3OouenTMvnXFE49y3amGvQ8nxI/vKeE1dUlTFma1rchpWoFucGYwqlRJZlF2pNs9syl5lmTNNcqDJNKx36WdfphsmhrCpqzLazvl+MxVcEftb+6iUiuogjBz2Jfo9QP07nyu5YpZQaDQPXlzM4Ou57T7z0/594K2S+9MRX4dTXK54VP39tYmpqQtoj4rmX4Szl6CxVR1EsmWuSJON9RFMUH7Di2KmOe7EiMDjQ6Wcdp8cADHKV7KO2YaSDCCMggUqUSvhniygB+HBblnVJYni/kBwYINlJufdipYVBD45HSOaKSvZTyzBTwV3om6qRh2pTU7X5K7Up/A8zrukOnCShVGHM4NxSQVs7rmmWzJiqKnEHzjdYEY8VfThfOwZHDt1BsW6Aqx+mLdNsYSVmmsssMAVfvUQU2ZP30WXaS95HPhSWmhFhGmnviu3HxsePbV/RTvHs0pJIUYRNR6rT85BzUBKhqopTfaOV8lgOMAFQKHmtnAtZqHbrBCz0HPxWEFjiz7QSK3DEvZwJHTseuk6IPxRp8z0R437o37Z9HNmCR2PVGI8JKs3zfDVfb1w7d63RfBr/HZ+LsgsJhboos2hHFvk4RCW0Yykj41K55GbKmSDjloK+NoKFi9BG9gB2S8KQcHcprmGpi4AewEu5cfdb09NvHTpEHvYTlg2QUmXOPcNIeV6x69q1sOBd3qzGVK1D4SYwhkSJGbX3utWIoirzMfJRc/Zqsz47i2evXgI42ukwGO6KD3ph2rbimsrxLOF8svlha3BMCHd7oiZbYkzYoIlF7uhBa9DeL2MPWHIZFl0uBSWX3VnK3auEylVL9mEJEyxsEVzkwuev1/bsqUlTIp6/MX3j0KEb0/ga6GUlPS8fXrvWVfS8hG14nMtEUb+jdGiqb2yueglD1OkSBa2ZyffUyO5Ixhu1PeTS1YUtOAVAFvsoN+sqV4Fe+7ywGO8ZDj9QTAL3Oym1eTfpeknbiHHA+OTt2/QyPY2eFz5TupwfzuWjAxNM1Y2DaAWtJY5URoNhn7fpa8nqadTUcguhLVxCajVaHY8gkINNoCNyujw8Ttpl3K6KEBLVjATnZUmRFMIsjas05DxlOzbnFTh/ypmuajGDmYzr3PAUNdkdMAbkpTAeuG7WFXUdzOo05NGVQ5LKjVCiE1vGJTaUddNwazQ53dcNUCI0vjyf03gR3wS+iNtM46ISIKJz/7jlmlzptb0LmnZp2CsLqaIZOtkZy59cP6Jpu57+bp+XccGacazxQHP7nPy2nPfmb9+wmUy4SSVgmBevPq+q5d2HR8prOIzWuh19+vEHNe1EmNzB6Oakd562PPJNAMRKdO8UhFIuXDOVuPTdmRlAeaP9N+vNOm1E/SGmjYV7ilKLN5Q0MLqNmkjEd8ZBsSGADjmYTsUulpCox7NCXrMO8rZC++r2/DC7W4L5b87MtATcM73ADOqlk/Qy6ofCwvugTY1lE5ejB8KC+w0nXaXmsu7xY2d37Dh7dGLi6NkduN68iypDbxd5bOCxcrtdpI2rNxpLqbT/vuTwgo9/mPRSD8mAV7fU5/Zl6rew1/z4Fi5h79b8rlsLfvp5UDaGBuB9sw72KF+j4u2SryaoUJePDOEWM4kKi/KRfLsYXdc8a4mmfy7kagOx2EAtVyhMDnd2Dk8Wfty/asOGVf2psayP/Wwp9U56+fJ0ITc8nCvM32qpkln+6LGnxse/dezR/szA4adOrlt38qnDA2cy5Rd2736hnElsuX/P0NDeBzb33Ai39A9sCjLdD4+V9yb76cIK0AKfv9PmcxxLRYyOBZkDp9PCTPP1mZe+98Nm7uKJizN46pvkaYhnLp640MyImuaVJ4TtwR6bJdPIgHdBTtgwGbwLcCqAnYLUfyzgcwc3bjxwYOPGgyQUsSiRnnYO32yl7fKdtIWN9YjQt4FPeoXWoc/l9BCGKJ8bWwtXfKxaGU1iiKDJxuSVz7LZ7GM9n34KUTb72d0lPPul1QslBAjYgCT6c3oyugcW8lAcOBzhFLxE3cUIl4C93cUIv0qC+b+2/+al69FHT+7d27zU+sm716+LevEj5fbbgLeX6UuA9fvRM+hNXMDjeC+eQajDwmlL8hNKTRtU0znvDuWJkB8kY+XB9jtB9heokeXCFtUJpxAIL50TzX64YEKJLzpHPYWYVEtIvoDzcmWhAyRtB7M1VwWu3RikWTktpy0wggBgP6GN1thogoKnMlqzxwbN9GCQztFIumB2eTSaIx/jrXfPEG5xdcuNreG1uBRNsRYnMc+A0rm06Fiuln4nq3LcNDgBk+oBMbMuZnoS87BEJAKBMcKIEufKBw7FssY4Zphi0ySYEn1VUurqYpqEOzzJkpsfaOBw9lgqVSiDt44GMvSQYSJhQjChUbAdtUMbAaeT9MnwRui1qNK9IgaOnQpisYaxhJnidlW4wZlBRJFQuXnGVnTGhPMHryGD8ZxqwIuHya4qycxRGOZgRwnI0zoNagQPabxHDY2apQWKypap6zu4zVSDqWAxwaPEIhBZclQma5rKqJ1nmgwN0M4NWaImSFVk1TjLYcGgu3CnqWpVcZ38QI+rkq5gortgvOGFLPSjHdkOafVuSngV0zWYnFc1HVYNJo+upi9hucPpjMfjSUVL22I7CTYYTYDi8nCPbJkykziYuWZTphi2TmYqCPWqcQILJj1DKvF79ZihB3q834aNBefRd3t1DlNTODXYokAHJYRBA9sJPpciLasEqs6J2jXURWCE3csYp/AuMKAziFzRBw8C3YWHhkQtSbgSFB6aqRrsMBZbqVlSh2QWZbB9OgbDTWTFdhlXXdXqsh1Fs9wuMLqqOCrCcDQGpEDWwIrMJd/itjGsmbJisoDJXNh3ux/Oy4Itl6mtcsplMVKSmp9SCpuowfwmt2wZH7wAZ6gzN6yoyxzYCkIANPBRvPk9gN4FSn4NVTJWbeNlKvzx6+g03U6PIxN1oSKwRXlsCLt+jIk0x7jcg/vADRepT/M5zmLhWlypVpIYUrwmf8DAhdxJA58+mcMF40C+csowmn88kM+dJlRTT+VzB/Fz54phtXnV4leeLIabOd8cFp+8ApduVzUsnjPxj6DqJyvDcAsoybaE4UqgzX8D/xsA5QAAAHicY2BkYGBglJx1TCcpIp7f5isDNwsDCFz5/kwXRv/f9/8/6wHmBUAuBwMTSBQAjKUO+QB4nGNgZGBgPvD/AAMDG8P/ff93sx5gAIqgADkAqTMG5XicY2GAAMZQCM0ExGwMDAksDAwOrFDMBsVAsQcsDWAaJmbL/IDBGSjmBhRrAOMGBi/mBqDYAaC6Awi1QNoJiF2YQv/vA9KbAI3bDwgAAAAAAAgACAAQABgAggCyAP4BWgJ+A6oDzAQABCIEnAUcBd4F9gYOBh4GNgZ0BoYG6AcKB0QHegesCZQJ4AAAeJxjYGRgYJBjLGTgYAABJgY0AAAPZgCceJyNjTFqw0AQRZ9s2SFOcBmCK3WpJBAEUqYLuHCTwpBSljdCxuyCJGO7ywVyjLSBnCMXyHHyJeYAXpjdN3/n/wHmfBPRn4hbFsYjrngyHkt/M47FH8YTbvgynkr/NZ6xiOZyRfG1lPshoeeRdj0Yj6U/G8fid+MJd3waT6X/GM945I8dR1Jaak56a0oCXj27Y9rWp7Qug1f3iqPiwJ6CRq2rDvtCcKH9wrG1tjTDWP+dkJOpWLumrYNP8iy/OOplkDuFVAr1Q3Ch3rGVtuGsezmYV6p+NpMp+C6pnHdN0bltsjknyzKsQvAZ/zFPTQYAeJx9zckOAVEYROF7btNtnmfiGe5vaG1paK+CRMTGwttLKFu1+VKr47z7v7lzeOeJXESBIjEJJcpUqFKjToMmLdp06NKjz4AhI8ZMmDKLz7fX42LJ834NIXzM0xDk7y/kUq7kWqZyIzO5lTu5lwd5lLk8fTX1TX1T39Q39U19U9/Ut+wNCxs9kg=="},function(a,b){a.exports="data:application/octet-stream;base64,AAEAAAAMAIAAAwBARkZUTXjQG4EAABqYAAAAHE9TLzIPEwN7AAABSAAAAGBjbWFwGlfT+AAAAiAAAAFeZ2FzcAAAABAAABqQAAAACGdseWbyWIwrAAADwAAAE8BoZWFkDo0pogAAAMwAAAA2aGhlYQlBBZoAAAEEAAAAJGhtdHh6CweJAAABqAAAAHhsb2NhQ2A/MgAAA4AAAAA+bWF4cAAnAXMAAAEoAAAAIG5hbWWoyha4AAAXgAAAAddwb3N0BiLrqQAAGVgAAAE1AAEAAAABGZrGLGQ0Xw889QALBAAAAAAA1PfltgAAAADU9+W2/77//wXAA6AAAAAIAAIAAAAAAAAAAQAAA8D/wAAABgD/vv+7BcAAAQAAAAAAAAAAAAAAAAAAAB4AAQAAAB4BcQAIAAAAAAACAAAAAAAAAAAAAAAAAAAAAAADBHgBkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAAeYYA8D/wABAA8AAQAAAAAEAAAAAAAAAAAAAACAAAQQAAAAAAAAAAVUAAAAAAAACAAAABgAAYAQAAEAFAABABQAAQAYAAEAGAABABAAA4ASAAEAEAABABgAAQAYAAD0D4ABDBIAARgQAAIAEAACABIAASgOAAEMEwABABMAAQAQAAEAGAABABAAAQgQAAEQCVf++BAAAsgAAAAMAAAADAAAAHAABAAAAAABYAAMAAQAAABwABAA8AAAACgAIAAIAAgABACDmGP/9//8AAAAAACDmAP/9//8AAP/kGgUAAwABAAoAAAAAAAAAAAABAAMAAAEGAAABAwAAAAAAAAECAAAAAgAAAAAAAAAAAAAAAAAAAAEAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgACAAQABgAggCyAP4BWgJ+A6oDzAQABCIEnAUcBd4F9gYOBh4GNgZ0BoYG6AcKB0QHegesCZQJ4AAAAAEAAAAAAAAAAAACAAA5AgABAAAAAAAAAAAAAgAAOQIAAQAAAAAAAAAAAAIAADkCAAQAYAAABaADgAA6AD8ARABJAAAlFSIuAjU0NjcuATU0PgIzMh4CFRQGBx4BFRQOAiMRMhYXPgE1NC4CIyIOAhUUFhc+ATMRMQEVITUhFxUhNSEXFSE1IQFALlI9IwoKCgpGeqNdXaN6RgoKCgojPVIuKkoeAQI6ZohNTYhmOgECHkoqAlUCC/31lgF1/otKASv+1R4eIz1SLhkuFR9DIl2jekZGeqNdIkMfFS4ZLlI9IwHAHRkNGw5NiGY6OmaITQ4bDRkd/l4DYpWV4JWV4JWVAAAAAQBAAAADwAOAACEAABMUHgIzMj4CNTMUDgIjIi4CNTQ+AjMVIg4CFTGLOmaITU2IZjpLRnqjXV2jekZGeqNdTYhmOgHATYhmOjpmiE1do3pGRnqjXV2jekZLOmaITQAABABAAAAEwAOAAA4AHAAqADEAACUuASchESERLgEnESERIQcjLgMnNR4DFzErAS4DJzUeAxcxKwE1HgEXMQJ/AwUEAgz8RgsrCwQ8/b9TWghEa4xPYqyDUwi1WwcnOkoqPWtSNQi2gS9GDEILKAoCwf7pAwoCAUj8wkJOh2hCCFgIUICnYClIOSYHWAc0UWc8fQtELgAAAAAFAEAAAATAA4AADgAZACcANQA8AAAlLgEnIREhES4BJxEhESEBNSERIS4DJzEBIy4DJzUeAxcxKwEuAyc1HgMXMSsBNR4BFzECgAIGBQIN/EAMKgoEQP3A/oADQP4gGEVZbD4BLVoIRWuMT2Ktg1IJs1oHJztKKjxqUjYJuoAwRAxADCgMAsD+7QIIAwFG/MAB0PD9wD1nVEEX/fBNiGhCB1oIUICoYClIOCYHWgg1UWc7fQxDLgAABABAAAAFwAOAAAQACQBnAMUAADMRIREhASERIREFPgE3PgEzMhYXHgEXHgEXHgEXIy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNzMOAQcOAQcOAQcOASMiJicuAScuAScuATU0Njc+ATcxIT4BNz4BMzIWFx4BFx4BFx4BFyMuAScuAScuAScuASMiBgcOAQcOAQcOARUUFhceARceARceATMyNjc+ATczDgEHDgEHDgEHDgEjIiYnLgEnLgEnLgE1NDY3PgE3MUAFgPqABTb7FATs/CMOIRMULBgSIRAPHA0MFAgICwJbAQUFBAoGBw4ICBAJEBoLCxIHBwoDAwMDAwMKBwcSCwsaEBYhDAwPA1oCCQcIEw0MHBEQJBQYLBQTIQ4NFQcHBwcHBxUNAboNIRQTLBkRIRAQHAwMFQgICgJaAgUEBAsGBg4ICBEIEBsLCxIHBwoDAwMDAwMKBwcSCwsbEBUiDAwOA1sCCQgHFAwMHRARJBMZLBMUIQ0OFAcHCAgHBxQOA4D8gAM1/RYC6tcQGAgJCQUFBQ8KChgPDiETCQ4HBwwFBQgDAwIGBgYRCgoYDQ0cDg0aDQ0XCgoRBgYGDQ0OIhYUJBEQHAsLEgYGBgkICRcPDyQUFCwXGC0VFCQPEBgICQkFBQUPCgoYDw4hEwkOBwcMBQUIAwMCBgYGEQoKGA0NHA4NGg0NFwoKEQYGBg0NDiIWFCQREBwLCxIGBgYJCAkXDw8kFBQsFxgtFRQkDwADAEAAAAXAA4AAEABvAM4AACkBIiY1ETQ2MyEyFhURFAYjAT4BNz4BNz4BMzIWFx4BFx4BFx4BFzMuAScuAScuAScuASMiBgcOAQcOAQcOARUUFhceARceARceATMyNjc+ATc+ATc+ATcjDgEHDgEjIiYnLgEnLgEnLgE1NDY3OQEhPgE3PgE3PgEzMhYXHgEXHgEXHgEXMy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNz4BNz4BNyMOAQcOASMiJicuAScuAScuATU0Njc5AQUs+6g9V1c9BFg9V1c9/JoDCgcGEgsLGxAJEAgIDgYHCgQEBgFaAgoICBQNDBwQDyESGCwUEyEODRUHBwcHBwcVDQ4hExQrGRQkEBAdDAwUCAcJAloDDwwMIhUQGwsLEgYHCgMEAwMEAbkDCgcHEgsLGxAIEQgHDwYGCwQEBQFbAgoICBUMDBwQECERGSwTFCENDhQHBwgIBwcUDg0hFBMsGRMkERAdDAwUBwgJAlsDDgwNIRUQGwsLEgcHCgMDAwMDVz4CVj5XVz79qj5XAfQNGAoLEAYGBgIDAwgFBQwHBw4JEyEODxgKCg4GBQUJCQgYEA8kFBUtGBcsFBQkDw8XCQgJBgYGEgsLHBARJBQWIg4NDQYGBhEKChcNDRoODhsNDRgKCxAGBgYCAwMIBQUMBwcOCRMhDg8YCgoOBgUFCQkIGBAPJBQVLRgXLBQUJA8PFwkICQYGBhILCxwQESQUFiIODQ0GBgYRCgoXDQ0aDg4bDQAAAAABAOAAoAMgAuAAFAAAARQOAiMiLgI1ND4CMzIeAhUDIC1OaTw8aU4tLU5pPDxpTi0BwDxpTi0tTmk8PGlOLS1OaTwAAAMAQAAQBEADkAADABAAHwAANwkBISUyNjU0JiMiBhUUFjMTNCYjIgYVERQWMzI2NRFAAgACAPwAAgAOFRUODhUVDiMVDg4VFQ4OFRADgPyAcBYQDxgWERAWAeYPGBYR/tcPGBYRASkAAgBAAAADwAOAAAcADwAAMxEXNxcHFyEBIREnByc3J0CAsI2wgP5zAfMBjYCwjbCAAY2AsI2wgAOA/nOAsI2wgAAAAAAFAEAAAAXAA4AABAAJABYAMwBPAAAzESERIQEhESERATM1MxEjNSMVIxEzFSUeARceARceARUUBgcOAQcOAQcOASsBETMeARcxBxEzMjY3PgE3PgE3PgE1NCYnLgEnLgEnLgErAUAFgPqABTb7FATs/FS2YGC2ZGQCXBQeDg8UBwcJBgcHEwwMIRMTLBuwsBYqE6BHCRcJChIIBw0FBQUEAwINBwcTDAwgETcDgPyAAzb9FwLp/sCt/kDAwAHArZ0HFA4PIhYVMBsYLhMWIg8OGAoJBwHAAgcHQ/7mBAMCDQcHFwwMIRMRHQ8OGAoJDwQFBQAABAA9AAAFwAOAABAAHQA7AFkAACkBIiY1ETQ2MyEyFhURFAYjASMVIzUjETM1MxUzEQUuAScuAScuASsBETMyNjc+ATc+ATc+ATUuASc5AQcOAQcOASsBETMyFhceARceARceARUUBgcOAQc5AQUq+6k+WFg+BFc+WFg+/bNgs2Rks2ABsAcXDA4fExMnFrCwGywTEx4PDBMHBwYCCAl3CBIKCRQMRzcTHgwMEwcHCwQDBAUFBQ0HWD4CVD5YWD79rD5YAp2trf5AwMABwH0WIg4PFAcHBv5ACQcJGA8OJRMWLBgdMBbiCA0CAwQBHwQFBQ8KChgPDh8REx8PDBcHAAEAQ///A6ADfgCPAAATFCI1JzAmJzQmJy4BBw4BFRwBFR4BFx4BNz4BNz4BMTYyFTAUBxQWFx4BFx4BMzI2Nz4BNz4BNz4DMTYyFTAOAhUUFhceARcWNjc+ATc+ATc+ATc+Azc8ATU0JicmBgcOAzEGIjUwPAI1NCYnJgYHDgEHDgMxBiI1MCYnLgEnJgYHDgExFZAGBAgECAIFDgoHCQMWBwchDxAPBwc2BQQDAwcFCwkKFwwFDQUHCwcMEwgJHxwVBQUDBAMIBQcVEREkEQwTCAkSBQ4ZDAYyOC8ECQcMFgQDPUg8BAUvJBEiERAWCgYiJRwFBQQCAxgoJyYKBywBugUFDBgPBQoHBQQCAw0HBwsHFGsOEQ0HCCAPE5MKCp0wEzURDBMIBwUEAgUKBw8jDhRDQjEKClNzeCUTIxEQGAgHAQoHFQoRJRAnTSYTr8msDwUGAgcNAwQICQaVrY8JCTVUZjE1OwcCBQoKHBALYGpVCgp6Fh9PBQNHHxOQAwAAAAACAEYAAAQ2A4AABAAIAAAhETMRIwkCEQPGcHD8gAOA/IADgPyAA4D+QP5AA4AAAAACAIAAAAOAA4AABAAJAAAhESERIQEhESERAoABAP8A/gABAP8AA4D8gAOA/IADgAABAIAAAAQAA4AAAwAACQERAQQA/IADgAHA/kADgP5AAAIASgAABDoDgAAEAAgAADMRIxEzCQIRunBwA4D8gAOAA4D8gAOA/kD+QAOAAAAAAAEAQwAgA0MDoAApAAABHgEVFA4CIyIuAjU0PgIzNQ0BNSIOAhUUHgIzMj4CNTQmJzcDDRocPGmMT0+MaD09aIxPAUD+wDxpTi0tTmk8PGlOLRYTUwJjK2M1T4xoPT1ojE9PjGg9gK2zgC1OaTw8aU4tLU5pPClLHzAAAAABAEAAZgIgAxMABgAAExEzJRElI0DNARP+7c0BMwETzf1TzQAEAEAAAASQA4AAFwArADoAQQAAISc+AzU0LgInNx4DFRQOAgcxLwE+ATU0Jic3HgMVDgMHMSc+ATU0Jic3HgEVFAYHJwURMyURJSMD2iomPisXFys+JioqQzAZGTBDKqQpOUREOSkhNCQUARQkMyHDIigoIiomMDAmKv3NzQET/u3NIyheaXI8PHFpXikjK2ZyfEFBfHJmK4MjNZFUVJE1Ix5IUFgvL1lRRx2zFkgpK0YVIxxcNDVZHykDARPN/VPNAAAAAgBAAAADwwOAAAcADwAAARchERc3FwcBByc3JyERJwMqcP6pcJd5mf4mlnqWcAFXbQJzcAFXcJZ6k/4jlnqWcP6qbAADAEABEwXAAmAADAAZACYAAAEUBiMiJjU0NjMyFhUhFAYjIiY1NDYzMhYVIRQGIyImNTQ2MzIWFQGNYkVFYWFFRWICFmFFRWJiRUVhAh1hRUViYkVFYQG6RWJiRUVhYUVFYmJFRWFhRUViYkVFYWFFAAAAAAEAQgACA74DfgAgAAABFxYUBwYiLwEHBiInJjQ/AScmNDc2Mh8BNzYyFxYUDwECo/ckJCRjHfb2JGMdJCT39yQkJGMd9vYkYx0kJPcBwPYkYx0kJPf3JCQkYx329iRjHSQk9/ckJCRjHfYAAAYARAAEA7wDfAAEAAkADgATABgAHQAAASEVITURIRUhNREhFSE1ATMVIzURMxUjNREzFSM1AacCFf3rAhX96wIV/ev+nbKysrKysgN8WVn+nVlZ/p1ZWQLGsrL+nbKy/p2ysgAI/74AZgKaA5cAKQBQAH8ArwEqATwBWQFwAAASDgEiDgQUHgg+Ci4JIiYTPgE3PgE3PgE3PgE3PgEnLgI0NS4BBw4BBw4BBwYUFRQWFx4BFwUmFicuAScmBicuASMmBgciJgcOAQcUFg4BBw4BBw4CFA4BBwYWFx4BFzc+ATchLgI0NS4BJyoBJwY2Bw4BBw4CFAcOARceARceARczPgE3PgE3NjQ+AjQ+ATckBiIGIg4HFA4VFAYUHgoyPgUyHgMyHgIyPg80Lg0iLhUiJgMOAQcGFgcOARUGMhceARc3JxcHIy4BJy4BLwE+ATc+Azc+ATc+ATM+AT8BMxceARczPwEfAQcjJhYnJiIjLgEnNTczygYJBhgNDAcCBAMCEw8HBwUbBQ0TBAUTAQQCBAICBAIFBQIFAggYBwjiEAMBBgoFBwEFAQMBDQ0CAQMCCzkfBBsbBQoEARITBA4G/uIKCgcHHQ4JAwgDBQIJBwoBBAILFgUBAgQBAgIBAgMBAgMBAg8QCRIKMRQhDQIlBgMCBiAOAwgcLRcKDgYJAQMBAQoBAQQBBQgRGzYHDAcFDAIBAQQBAgMG/oMPCAsFBQYFBQkGBg4MBQcmCQwJCAcFBhEJBAYFEAgFAQcFBQUCAwIGChkMAwwVVgoHHQkWDD4OChUICQUaCUISBw8FCQwFCQQFBQgFBQEFBQEFAgYEEAkFBgoKCQUDDycFCgYIBQUJBAUHDAYEAw0EBgUIBgkMjAcKBQcCAgEEAwMEAwkONwFAAocLGAkECwgBAgsRAwQFCAMBAQIDBgMSJBIEOlQDAgc3AQM7AQKQCQoLAgQBDgoHAzoDlwEGEhAZGBgYHwgKIg8FAgUCAgEMBQMeBgUQBjAdBg4NBgUEBwkSBf7+BgMBAwgDBgUJAQECEzcYAgUGBQIdLwkCFCALFwwLFQsYKQ8DBQIVDg4UESALBwMBAQMCBAMBAQQVCwECAwQCBQoFAwQGBwcIBBo2FQkLBwIJGy8bAgMFAg8gBQUHAwYHCgwBAQQFAh0tJQgRCAsRCgQEBAMOBAIDBAEDBQQEIT4FBQYBBQEHBQoOBBIEDSwGDwUGCwEFDgoCBggPEQUHCREJDhsPEAgKDhEbBQUECQEEAQUCBQEGAQUBBwQCAwIFAQwBCAYHBBQOBw8MMAoNBggNBRUFBgcFDQUHDykJCAcOBgQQBgMPCQcDBwYFAgUBBAT+9gMDBQgDCgMFBA0HDg8GAWKTAgYKCwURFjYJGhADBgUCAgIDAQEBAQMBR9cHAQWTAwLEAgICBgEJDwyaAwAAAwCyAH4DTgNrAA0AGwAsAAABNTQvAREUFwU1NC8BJgUHBh0BJTY1EQcGHQEUAycmBwUXFj8BNjc2HwEWPwEBOydhDAEqJnwMAX58JgEqDGEnNn0MDP7UYScmfgIDCgl9JyZiAYuNLBY3/q0OB6pvLBZHBwdHFixvqgcOAVM3FiyNDQGfRwcHqzgWFkgBAQMFSBYWOAAAAAAAAA4ArgABAAAAAAABAAwAGgABAAAAAAACAAcANwABAAAAAAADAAwAWQABAAAAAAAEAAwAgAABAAAAAAAFAAsApQABAAAAAAAGAAwAywABAAAAAAAKABoBDgADAAEECQABABgAAAADAAEECQACAA4AJwADAAEECQADABgAPwADAAEECQAEABgAZgADAAEECQAFABYAjQADAAEECQAGABgAsQADAAEECQAKADQA2ABqAHcALQBzAGkAeAAtAGkAYwBvAG4AcwAAanctc2l4LWljb25zAABSAGUAZwB1AGwAYQByAABSZWd1bGFyAABqAHcALQBzAGkAeAAtAGkAYwBvAG4AcwAAanctc2l4LWljb25zAABqAHcALQBzAGkAeAAtAGkAYwBvAG4AcwAAanctc2l4LWljb25zAABWAGUAcgBzAGkAbwBuACAAMQAuADEAAFZlcnNpb24gMS4xAABqAHcALQBzAGkAeAAtAGkAYwBvAG4AcwAAanctc2l4LWljb25zAABGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAEZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeAAABAgACAQMAAwEEAQUBBgEHAQgBCQEKAQsBDAENAQ4BDwEQAREBEgETARQBFQEWARcBGAEZARoBGwEcBmdseXBoMQd1bmkwMDAxB3VuaUU2MDAHdW5pRTYwMQd1bmlFNjAyB3VuaUU2MDMHdW5pRTYwNAd1bmlFNjA1B3VuaUU2MDYHdW5pRTYwNwd1bmlFNjA4B3VuaUU2MDkHdW5pRTYwQQd1bmlFNjBCB3VuaUU2MEMHdW5pRTYwRAd1bmlFNjBFB3VuaUU2MEYHdW5pRTYxMAd1bmlFNjExB3VuaUU2MTIHdW5pRTYxMwd1bmlFNjE0B3VuaUU2MTUHdW5pRTYxNgd1bmlFNjE3B3VuaUU2MTgAAAAAAQAB//8ADwAAAAEAAAAA0gQUBQAAAADR1CIrAAAAANT35VA="}])});